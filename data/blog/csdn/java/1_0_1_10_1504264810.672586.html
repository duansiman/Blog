
<p>org.hibernate.MappingException: Unknown entity: cn.itcast.hibernate717.helloworld.Person</p><p>hibernate框架根本不知道Person这个持久化类的存在</p><p>Caused by: java.sql.SQLException: Field 'id' doesn't have a default value</p><p>如果主键的生成策略采取的是identity，而数据库中表的主键不是自动生成机制，则报这样的错误</p><p>org.hibernate.NonUniqueObjectException: a different object with the same identifier value was already associated with the session: [cn.itcast.hibernate717.helloworld.Person#1]</p><p><br />如果在hibernate中，有两个对象，但是其ID值是相同的，这样的情况在hibernate中是不允许出现  （在hibernate中，强调对象的唯一性）</p><p><br />Caused by: java.sql.BatchUpdateException: Cannot delete or update a parent row: a foreign key constraint fails (`test/orders`, CONSTRAINT `FKC3DF62E58940CCE2` FOREIGN KEY (`customer_id`) REFERENCES `customer` (`id`))</p><p>违反了主外键约束的原则</p><p>org.hibernate.LazyInitializationException: could not initialize proxy - no Session</p><p> </p><p>org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: cn.itcast.hibernate717.manytomany.Student</p><p><br />错误产生的原因：</p><p>在多对多时，代码中写了两个对象。程序的意图是通过级联的方式把这两个对象全部保存到数据库相应的表中。但是级联在映射文件中不存在，这个时候hibernate只会认session.save中的参数代表的对象</p><p>而另外一个对象则认为是瞬态的对象，所以会报如此的错误</p><p> </p><p><span style="font-size:18px; color:#000000">在使用hibernate时，报了 Could not parse configuration: /hibernate.cfg.xml<br /></span></p><p><span style="font-size:18px; color:#000000">这很有可能是hibernate.cfg.xml文件出错</span></p><p><span style="font-size:18px; color:#000000">此时可以先用浏览器打开 hibernate.cfg.xml文件 看看能不能正常显示，如果不能，则说明配置文件编写有问题（比如DTD的url错误，标签错误等），改正相应的错误后就不报异常了</span></p><p><span style="font-size:18px"></span> </p><p><span style="font-size:18px"></span> </p><p><span style="font-size:18px"></span> </p><p>1、错误一：在项目中要有commons-logging.jar,不然会报以下错误。<br />java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory</p><p><br />2、错误二、<br />如果你添加了ehcache-1.5.0.jar，但是没有加ehcache.xml，这时候将报错。<br />slf4j-api-1.5.10.jar日志包，EhCache依赖<br />slf4j-jdk14-1.5.10.jar日志包，EhCache依赖<br />java.lang.NoClassDefFoundError: edu/emory/mathcs/backport/java/util/concurrent/BlockingQueue<br />在junit.test里提示错误：nested exception is java.lang.NoClassDefFoundError: <br />edu/emory/mathcs/backport/java/util/concurrent/BlockingQueue<br />原因：没有包含：backport-util-concurrent.jar<br />在spring/lib/concurrent/加上即可。</p><p><br />3、开始创建项目的时候都要把各种字符集统一<br />项目名右击---&gt;properties---&gt;Text file encoding(控制文本文件内部的字符集，最好开始也要定义好)。<br />window--&gt;preferences--&gt;General--&gt;Content Type的内容也要首先确定好。</p><p>4错误：<br />Caused by: org.hibernate.HibernateException: Unable to instantiate default tuplizer [org.hibernate.tuple.entity.PojoEntityTuplizer]<br />Caused by: java.lang.reflect.InvocationTargetException<br />Caused by: org.hibernate.PropertyNotFoundException: Could not find a getter for data in class cn.edu.hactcm.test.hibernate.Event<br />这种错误是把配置文件中的名字写错了的缘故。</p><p>5、易错点：<br />在给Date配置属性的时候，需要制定数据类型，并且列名要改一下，应为date为数据库的关键字。</p><p>错误6<br />org.hibernate.HibernateException: No CurrentSessionContext configured!<br /> at org.hibernate.impl.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:683)<br />SessionFactory 对象的创建代价很昂贵，它是线程安全的对象，它为所有的应用程序线程所共享。它只创建一次，通常是在应用程序启动的时候，由一个 Configuraion 的实例来创建。</p><p>Session 对象的创建代价比较小，是非线程安全的，对于单个请求，单个会话、单个的 工作单元而言，它只被使用一次，然后就丢弃。只有在需要的时候，一个 Session 对象 才会获取一个 JDBC 的 Connection（或一个Datasource）对象，因此假若不使用的时候它不消费任何资源。</p><p>此外我们还要考虑数据库事务。数据库事务应该尽可能的短，降低数据库中的锁争用。数据库长事务会阻止你的应用程序扩展到高的并发负载。因此，假若在用户思考期间让数据库事务开着，直到整个工作单元完成才关闭这个事务，这绝不是一个好的设计。</p><p>一个操作单元（Unit of work）的范围是多大？单个的 Hibernate Session 能跨越多个数据库事务吗？还是一个 Session 的作用范围对应一个数据库事务的范围？应该何时打开 Session，何时关闭 Session，你又如何划分数据库事务的边界呢？我们将在后续章节解决这些问题。</p><p><br />错误7<br />org.hibernate.HibernateException: No CurrentSessionContext configured!<br /> at org.hibernate.impl.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:683)<br /> at cn.edu.hactcm.test.hibernate.EventManager.CreateAndStoreEvent(EventManager.java:12)<br /> at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)<br />错误原因：在hibernate.cfg.xml中没有配置正确，如果是web应用增加配置<br />&lt;property name="current_session_context_class"&gt;jta&lt;/property&gt;<br />如果是Java应用，增加如下配置<br />&lt;property name="current_session_context_class"&gt;thread&lt;/property&gt;</p><p>错误7<br />不能自动创建表<br />需要加上&lt;property name="hbm2ddl.auto"&gt;update&lt;/property&gt;</p><p><br />错误7，事务提交（commit）之后session就已经关闭了，不用再写session.close()了。<br /> </p><p>错误8，<br />严重: Error configuring application listener of class org.springframework.web.context.ContextLoaderListener<br />java.lang.ClassNotFoundException: org.springframework.web.context.ContextLoaderListener<br />清空部署的项目重新启动。</p><p>错误9<br />14:57:53,624 ERROR ContextLoader:215 - Context initialization failed<br />org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in file [D:\software\apache-tomcat-6.0.14\webapps\hactcmOA\WEB-INF\classes\applicationContext.xml]: Invocation of init method failed; nested exception is java.lang.NoClassDefFoundError: javax/persistence/EntityListeners<br /> at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1337)<br />Caused by: java.lang.NoClassDefFoundError: javax/persistence/EntityListeners<br /> at org.hibernate.cfg.annotations.reflection.JPAMetadataProvider.getDefaults(JPAMetadataProvider.java:96)<br />Hibernate3.6依赖hibernate-jpa-2.0-api-1.0.0.Final.jar。应该把这个导进去。然后再remove deployment（移除部署好的向项目重新部署即可。）</p><p>错误10<br /> Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener<br />java.lang.NoClassDefFoundError: org/apache/commons/logging/LogFactory<br />说明配置Web.xml中的<br />&lt;listener&gt;<br /> &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;<br />&lt;/listener&gt;<br />需要日志包</p><p>错误11<br />19:09:59,958 ERROR ContextLoader:215 - Context initialization failed<br />org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'genericServiceImpl' defined in file [D:\software\apache-tomcat-6.0.14\webapps\hactcmOA\WEB-INF\classes\cn\edu\hactcm\bean\GenericServiceImpl.class]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [cn.edu.hactcm.bean.GenericServiceImpl]: Constructor threw exception; nested exception is java.lang.ClassCastException: sun.reflect.generics.reflectiveObjects.TypeVariableImpl cannot be cast to java.lang.Class<br /> at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:883)<br /> at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:839)<br />Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [cn.edu.hactcm.bean.GenericServiceImpl]: Constructor threw exception; nested exception is java.lang.ClassCastException: sun.reflect.generics.reflectiveObjects.TypeVariableImpl cannot be cast to java.lang.Class<br /> at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:115)<br />Caused by: java.lang.ClassCastException: sun.reflect.generics.reflectiveObjects.TypeVariableImpl cannot be cast to java.lang.Class<br /> at cn.edu.hactcm.bean.GenericDaoImpl.&lt;init&gt;(GenericDaoImpl.java:33)<br />2012-11-20 19:09:59 org.apache.catalina.core.StandardContext listenerStart<br />严重: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener<br />org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'genericServiceImpl' defined in file [D:\software\apache-tomcat-6.0.14\webapps\hactcmOA\WEB-INF\classes\cn\edu\hactcm\bean\GenericServiceImpl.class]: Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [cn.edu.hactcm.bean.GenericServiceImpl]: Constructor threw exception; nested exception is java.lang.ClassCastException: sun.reflect.generics.reflectiveObjects.TypeVariableImpl cannot be cast to java.lang.Class<br /> at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:883)<br />Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [cn.edu.hactcm.bean.GenericServiceImpl]: Constructor threw exception; nested exception is java.lang.ClassCastException: sun.reflect.generics.reflectiveObjects.TypeVariableImpl cannot be cast to java.lang.Class<br /> at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:115)<br /> at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:61)<br /> at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:877)<br /> ... 40 more<br />Caused by: java.lang.ClassCastException: sun.reflect.generics.reflectiveObjects.TypeVariableImpl cannot be cast to java.lang.Class<br /> at cn.edu.hactcm.bean.GenericDaoImpl.&lt;init&gt;(GenericDaoImpl.java:33)<br />这种错误的原因是：在写事务的时候 <br />@Transactional<br />@SuppressWarnings("unchecked")<br />public class GenericDaoImpl&lt;T&gt; implements GenericDao&lt;T&gt; {<br />而写下面的时候写成如下的了。<br />@Service<br />public class GenericServiceImpl&lt;T&gt; extends GenericDaoImpl&lt;T&gt; implements GenericService&lt;T&gt; {<br />应该写成：<br />@Transactional<br />public class GenericServiceImpl&lt;T&gt; extends GenericDaoImpl&lt;T&gt; implements GenericService&lt;T&gt; {</p><p>错误12<br />org.apache.jasper.JasperException: /left.jsp(73,8) Attribute cssClass invalid for tag action according to TLD<br />原因：在&lt;s:actioin&gt;标签中不能写cssClass属性</p><p>错误13：<br />&lt;s:form action="universityAction_collegeAdd.action"&gt;<br />应该写成：&lt;s:form action="/universityAction_collegeAdd.action"&gt;要加上“/”.s</p><p>错误14：<br />org.hibernate.HibernateException:*** is not valid without active transaction<br />这种错误是因为使用的是getCurrentSession导致的，解决这种问题的办法是将getCurrentSession<br />改成openSession()这样就可以解决着种问题了。<br />这种错误适应为在hibernate.hbm.xml中配置了如下参数：<br />&lt;property name="current_session_context_class"&gt;thread&lt;/property&gt;<br />将这一句删除后就没有问题了。</p><p><br />错误15：<br />因为struts.xml中&lt;action/&gt;的中class的名称不是Action的名称导致错误</p><p>错误16<br />org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'chapterDaoImpl':<br />Injection of resource fields failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in file<br />[D:\software\apache-tomcat-6.0.14\webapps\hactcmOA\WEB-INF\classes\applicationContext.xml]:<br />Invocation of init method failed; nested exception is org.hibernate.MappingException:<br />Repeated column in mapping for entity: cn.edu.hactcm.domain.Major column: <br />secondaryAcademy_id (should be mapped with insert="false" update="false")<br />原因：<br />&lt;set name="users"&gt;<br /> &lt;key column="secondaryAcademy_id" not-null="true"/&gt;<br /> &lt;one-to-many class="User"/&gt;<br />&lt;/set&gt;<br />去掉：not-null="true"</p><p><br />错误17<br />org.hibernate.HibernateException: Illegal attempt to associate a collection with two open sessions<br />原因代码写成了：<br />//院校只能有一个，从数据库中找出这个大学对象，然后将它存进去。<br />  University university = universityService.get(2L);<br />  model.setUniversity(university);<br />  <br />  secondaryAcademyService.save(model);<br />  universityService.delete(1L);<br />当get了的时候开启了一个session,delete了的时候又开启了一个session.</p><p><br />错误18：<br />如果在many-to-one端加上了 not-null="true"。并且这着时候在&lt;one-to-many&gt;对应的set结合中加了inverse="true"<br />如果没有对应的外键，这时候将报如下错误：<br />org.hibernate.PropertyValueException: not-null property references a null or transient value: cn.edu.hactcm.domain.SecondaryAcademy.university<br />    org.hibernate.engine.Nullability.checkNullability(Nullability.java:100)</p><p>错误19：<br />org.apache.jasper.JasperException: org.apache.jasper.JasperException: Unable to load class for JSP<br />如果把如下标签写成如下的了，会出现以上错误。<br />&lt;s:a action="${pageContext.request.contextPath}/secondaryAcademyAction_deleteSecondaryAcademy?id=%{id}"&gt;删除&lt;/s:a&gt;<br />改错办法是：<br />去掉：${pageContext.request.contextPath}/</p><p><br />错误20：<br />21:00:52,568 DEBUG ConnectionManager:464 - releasing JDBC connection [ (open PreparedStatements: 0, globally: 0) (open ResultSets: 0, globally: 0)]<br />21:00:52,568 DEBUG ConnectionManager:325 - transaction completed on session with on_close connection release mode; be sure to close the session to release JDBC resources!<br />Exception in thread "main" org.springframework.transaction.TransactionSystemException: Could not commit Hibernate transaction; nested exception is org.hibernate.TransactionException: Transaction not successfully started<br /> at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:659)<br /> at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:709)<br />Caused by: org.hibernate.TransactionException: Transaction not successfully started<br /> at org.hibernate.transaction.JDBCTransaction.commit(JDBCTransaction.java:127)<br />错误原因是：<br />  Session session = sessionFactory.getCurrentSession();<br />  Transaction tx = session.beginTransaction();</p><p>  // 获取题型信息<br />  List&lt;Type&gt; types = XmlUtils.getTypes();<br />  Iterator&lt;Type&gt; iterator = types.iterator();</p><p>  while (iterator.hasNext()) {<br />   Type type = iterator.next();<br />   session.save(type);<br />  }</p><p>  session.flush();<br />  session.clear();</p><p>  tx.commit();<br />  session.close();<br />这里的Session session = sessionFactory.getCurrentSession();不能和session.flush();session.clear();tx.commit();session.close();同时使用</p><p><br />错误21：Caused by: com.mchange.v2.resourcepool.ResourcePoolException: Attempted to use a closed or broken resource pool<br />解决方案1：重启mysql。<br />解决这个异常需要修改设置成如下：<br />&lt;property name="acquireRetryAttempts"&gt;<br />    &lt;value&gt;30&lt;/value&gt;<br />&lt;/property&gt;<br />&lt;property name="acquireRetryDelay"&gt;<br />    &lt;value&gt;100&lt;/value&gt;<br />&lt;/property&gt;<br />&lt;property name="breakAfterAcquireFailure"&gt;<br />    &lt;value&gt;false&lt;/value&gt;<br />&lt;/property&gt;</p><p>- acquireRetryAttempts <br />Default: 30 <br />Defines how many times c3p0 will try to acquire a new Connection from the database before giving up. If this value is less than or equal to zero, c3p0 will keep trying to fetch a Connection indefinitely</p><p>- acquireRetryDelay <br />Default: 1000 <br />Milliseconds, time c3p0 will wait between acquire attempts. </p><p>- breakAfterAcquireFailure <br />Default: false <br />If true, a pooled DataSource will declare itself broken and be permanently closeed if a Connection cannot be obtained from the database after making acquireRetryAttempts to acquire one. If false, failure to obtain a Connection will cause all Threads waiting for the pool to acquire a Connection to throw an Exception, but the DataSource will remain valid, and will attempt to acquire again following a call to getConnection().</p><p><br />错误22<br />java.lang.IndexOutOfBoundsException: Index: 0, Size: 0<br />因为在通过登陆名和密码方式查询用户时写成了：<br />return (User)getSession().createQuery(<br />    "FROM " + clazz.getSimpleName() //查询哪个表<br />    + " u WHERE u.loginName = ? and u.password = ?")//查询条件<br />    .setParameter(0, loginName)  //登录名<br />    .setParameter(1, password)//注意这里的password要经过三次MD5加密。<br />    .list()<br />    .get(0);  <br />而这里包括空值得情况。要对List集合先进行判断，如果list集合有元素，才能通过.get(0)方式去，如果为空，那么用get(0)的时候就会出错。</p><p><br />错误23：<br />Stacktraces<br />java.lang.NumberFormatException: null <br />    java.lang.Long.parseLong(Long.java:372)<br />    java.lang.Long.parseLong(Long.java:461)<br />    cn.edu.hactcm.web.action.ChapterAction.deleteKnowledgePoint(ChapterAction.java:199)<br />这种错误可能是因为传入的值是空值造成的。</p><p><br />错误24：<br />org.hibernate.LazyInitializationException: failed to lazily initialize a collection of role: cn.edu.hactcm.domain.Chapter.knowledgePoints, no session or session was closed<br /> at org.hibernate.collection.AbstractPersistentCollection.throwLazyInitializationException(AbstractPersistentCollection.java:383)<br />错误原因：hibernate 延迟加载的错误 failed to lazily initialize a collection of role <br />解决办法：<br />1、设置lazy=false<br />2、就是使用filter，过滤所有的链接<br />如果在使用filter的时候，要配置事务处理，否则会导致session处于只读状态而不能做修改、删除的动作<br />&lt;web-app&gt;<br /> &lt;filter&gt;<br />  &lt;filter-name&gt;hibernateFilter&lt;/filter-name&gt;<br />  &lt;filter-class&gt;<br />  org.springframework.orm.hibernate.support.OpenSessionInViewFilter<br />  &lt;/filter-class&gt;<br /> &lt;/filter&gt;<br /> <br /> &lt;filter-mapping&gt;<br />  &lt;filter-name&gt;hibernateFilter&lt;/filter-name&gt;<br />  &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;<br /> &lt;/filter-mapping&gt;<br />&lt;/web-app&gt; <br />我的解决办法如：<br />&lt;set name="knowledgePoints" inverse="true" cascade="all-delete-orphan" lazy="false"&gt;<br /> &lt;key column="chapter_id"/&gt;<br /> &lt;one-to-many class="KnowledgePoint"/&gt;<br />&lt;/set&gt;<br />在后面加了一个lazy="false"属性。</p><p>错误25<br />com.sun.org.apache.xerces.internal.impl.io.MalformedByteSequenceException: Invalid byte 2 of 2-byte UTF-8 sequence.<br />分析，这个问题的主要原因是xml文件中声明的编码与xml文件本身保存时的编码不一致。比如你的声明是<br />&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br />但是却以ANSI格式编码保存，尽管并没有乱码出现，但是xml解析器是无法解析的。<br />解决办法就是重新设置xml文件保存时的编码与声明的一致</p><p>错误26<br />java.lang.IllegalArgumentException: id to load is required for loading<br />出现这样的错误一般是我们的某个字段为null，使用log或system返回来看看！！ </p><p> </p><p> </p><p> </p><p> </p><p> </p><p> </p>   &#13;
