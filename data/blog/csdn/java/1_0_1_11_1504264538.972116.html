
        <div class="markdown_views"><h2 id="本系列前面博客的链接">本系列前面博客的链接：</h2>

<p>Java-单机版的书店管理系统(练习设计模块和思想_系列 五 ) <br />
<a href="http://blog.csdn.net/qq_26525215/article/details/51136848">http://blog.csdn.net/qq_26525215/article/details/51136848</a></p>

<p>Java-单机版的书店管理系统(练习设计模块和思想_系列 四(2) )：  <br />
<a href="http://blog.csdn.net/qq_26525215/article/details/51117135">http://blog.csdn.net/qq_26525215/article/details/51117135</a></p>

<p>Java-单机版的书店管理系统(练习设计模块和思想_系列 四(1) )：  <br />
<a href="http://blog.csdn.net/qq_26525215/article/details/51116429">http://blog.csdn.net/qq_26525215/article/details/51116429</a></p>

<p>Java-单机版的书店管理系统(练习设计模块和思想_系列 三 )：  <br />
<a href="http://blog.csdn.net/qq_26525215/article/details/51099202">http://blog.csdn.net/qq_26525215/article/details/51099202</a></p>

<p>Java-单机版的书店管理系统(练习设计模块和思想_系列 二 )：  <br />
<a href="http://blog.csdn.net/qq_26525215/article/details/51089734">http://blog.csdn.net/qq_26525215/article/details/51089734</a></p>

<p>Java-单机版的书店管理系统(练习设计模块和思想_系列 一 )：  <br />
<a href="http://blog.csdn.net/qq_26525215/article/details/51073546">http://blog.csdn.net/qq_26525215/article/details/51073546</a></p>

<h2 id="介绍">介绍：</h2>

<p>现在写到了进货模块了，这应该是本书店系统最难的模块了吧。</p>

<p>本次多写了一个工具类： <br />
把字符串比较的代码抽取出来写了一个类了。因为需要比较的字符串比较多。</p>

<p>还有进货模块的值对模块，分为了4个部分。 <br />
1、进货值对象 <br />
2、进货查询值对象 <br />
3、进货明细值对象 <br />
4、进货明细查询值对象。</p>

<p>进货模块表现层的List模块，Add模块。</p>

<p>数据层模块和逻辑层模块。写好了大部分功能。 <br />
可以执行添加进货。 <br />
list界面有2个list列表，一个是进货列表，一个是进货明细列表。 <br />
这2个表示有联系的！选中进货列表的某一行时，需要在另外一个列表中显示这个进货的明细！</p>

<p>后期会对列表一的显示改一下的，时间会改成<strong>**年</strong>月<strong>日 </strong>：<strong>：</strong> <br />
（取系统时间显示！） <br />
进货人不会再只显示编号。会直接显示名字的！</p>

<p>后面有这次增加的代码模块， <br />
然后，其他模块的源代码可能有部分修改， <br />
其他模块的源代码百度云链接（CSDN上传文件好像有一天的缓冲期，我刚刚上传的，现在还找不到，只能先贴出百度云的文件的源代码链接）： <br />
（目前我的所有源代码:） <br />
<a href="http://pan.baidu.com/s/1jHOgFqQ">http://pan.baidu.com/s/1jHOgFqQ</a></p>

<h2 id="展示图片">展示图片：</h2>

<p><img src="http://img.blog.csdn.net/20160416172524104" alt="" title="" /></p>

<p><img src="http://img.blog.csdn.net/20160416172646133" alt="" title="" /></p>

<p><img src="http://img.blog.csdn.net/20160416172655586" alt="" title="" /></p>

<p><img src="http://img.blog.csdn.net/20160416172706308" alt="" title="" /></p>



<h1 id="部分的代码模块">部分的代码模块：</h1>



<h2 id="工具类stringcomparison类">工具类：StringComparison类：</h2>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.util;

<span class="hljs-javadoc">/**
 * 工具类
 * 字符串比较
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StringComparison</span> {</span>

    <span class="hljs-javadoc">/**
     *<span class="hljs-javadoctag"> @param</span> str1---需要比较的字符串
     *<span class="hljs-javadoctag"> @param</span> str2---被比较的字符串
     *<span class="hljs-javadoctag"> @return</span>--- 返回0 , 2个字符串相同，&lt;br/&gt; 
     *            返回-1，str1和str2不相同,&lt;br/&gt;
     *            返回1，str1是str2的子串(忽略str1两端空格)&lt;br/&gt;
     *            返回2,说明str1为null或者str1全部为空格&lt;br/&gt;
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">stringComp</span>(String str1,String str2){
        <span class="hljs-keyword">if</span>(str1==<span class="hljs-keyword">null</span>||!(str1.trim().length()&gt;<span class="hljs-number">0</span>)){
            <span class="hljs-keyword">return</span> <span class="hljs-number">2</span>;
        }

        <span class="hljs-comment">//字符串完全相同</span>
        <span class="hljs-keyword">if</span>(str1!=<span class="hljs-keyword">null</span>&amp;&amp;str1.trim().length()&gt;<span class="hljs-number">0</span>){
            <span class="hljs-keyword">if</span>(str1.equals(str2)){
                <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
            }
        }

        <span class="hljs-comment">//模糊匹配(忽略两端空格)</span>
        <span class="hljs-keyword">if</span>(str1!=<span class="hljs-keyword">null</span>&amp;&amp;str1.trim().length()&gt;<span class="hljs-number">0</span>){
            <span class="hljs-keyword">if</span>(str2.indexOf(str1.trim())!=-<span class="hljs-number">1</span>){
                <span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
            }
        }
        <span class="hljs-keyword">return</span> -<span class="hljs-number">1</span>;
    }
}
</code></pre>

<p><strong>注意一个问题：</strong></p>

<p><strong>要使用对象流读取文件：</strong></p>

<p><strong>这个类必须实现Serializable接口！！！！！</strong></p>

<h1 id="值对象模块">值对象模块：</h1>



<h2 id="进货值对象inmainmodel">进货值对象：InMainModel：</h2>

<pre class="prettyprint"><code class=" hljs scala"><span class="hljs-keyword">package</span> cn.hncu.bookStore.in.vo;

<span class="hljs-keyword">import</span> java.io.Serializable;

<span class="hljs-javadoc">/**
 * 进货管理值对象封装
 * <span class="hljs-javadoctag">@author</span> 陈浩翔
 *
 * <span class="hljs-javadoctag">@version</span> 1.0
 */</span>
public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InMainModel</span> <span class="hljs-title">implements</span> <span class="hljs-title">Serializable</span>, <span class="hljs-title">Comparable</span>&lt;<span class="hljs-title">InMainModel</span>&gt;{</span>
    <span class="hljs-comment">//进货单编号</span>
    <span class="hljs-keyword">private</span> String uuid;
    <span class="hljs-comment">//进货时间</span>
    <span class="hljs-keyword">private</span> long inDate;
    <span class="hljs-comment">//进货人员编号</span>
    <span class="hljs-keyword">private</span> String inUserId;

    <span class="hljs-comment">/* 
       如果某个字段是外键，同时又需要在当前表中相应表现层显示出用户能看得懂
     的信息,则需要补一个专用于信息显示(给用户看)的字段。
     */</span>
    <span class="hljs-keyword">private</span> String inUserName;

    public String getInUserName() {
        <span class="hljs-keyword">return</span> inUserName;
    }

    public void setInUserName(String inUserName) {
        <span class="hljs-keyword">this</span>.inUserName = inUserName;
    }

    <span class="hljs-javadoc">/**
     * 
     * <span class="hljs-javadoctag">@return</span> ---返回进货单编号(String型)
     */</span>
    public String getUuid() {
        <span class="hljs-keyword">return</span> uuid;
    }

    <span class="hljs-javadoc">/**
     * 
     * <span class="hljs-javadoctag">@param</span> uuid---设置进货单编号(String型)
     */</span>
    public void setUuid(String uuid) {
        <span class="hljs-keyword">this</span>.uuid = uuid;
    }

    <span class="hljs-javadoc">/**
     * 
     * <span class="hljs-javadoctag">@return</span>---返回进货时间(long型)
     */</span>
    public long getInDate() {
        <span class="hljs-keyword">return</span> inDate;
    }

    <span class="hljs-javadoc">/**
     * 
     * <span class="hljs-javadoctag">@param</span> inDate---设置进货时间(long型)
     */</span>
    public void setInDate(long inDate) {
        <span class="hljs-keyword">this</span>.inDate = inDate;
    }

    <span class="hljs-javadoc">/**
     * 
     * <span class="hljs-javadoctag">@return</span>---返回进货人员编号(String型)
     */</span>
    public String getInUserId() {
        <span class="hljs-keyword">return</span> inUserId;
    }

    <span class="hljs-javadoc">/**
     * 
     * <span class="hljs-javadoctag">@param</span> inUserId---设置进货人员编号(String型)
     */</span>
    public void setInUserId(String inUserId) {
        <span class="hljs-keyword">this</span>.inUserId = inUserId;
    }

    <span class="hljs-annotation">@Override</span>
    public int hashCode() {
        <span class="hljs-keyword">final</span> int prime = <span class="hljs-number">31</span>;
        int result = <span class="hljs-number">1</span>;
        result = prime * result + ((uuid == <span class="hljs-keyword">null</span>) ? <span class="hljs-number">0</span> : uuid.hashCode());
        <span class="hljs-keyword">return</span> result;
    }

    <span class="hljs-annotation">@Override</span>
    public boolean equals(Object obj) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> == obj)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
        <span class="hljs-keyword">if</span> (obj == <span class="hljs-keyword">null</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        <span class="hljs-keyword">if</span> (getClass() != obj.getClass())
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        InMainModel other = (InMainModel) obj;
        <span class="hljs-keyword">if</span> (uuid == <span class="hljs-keyword">null</span>) {
            <span class="hljs-keyword">if</span> (other.uuid != <span class="hljs-keyword">null</span>)
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!uuid.equals(other.uuid))
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
    }

    <span class="hljs-annotation">@Override</span>
    public String toString() {
        <span class="hljs-keyword">return</span> uuid + <span class="hljs-string">", "</span> + inDate
                + <span class="hljs-string">", "</span> + inUserId;
    }

    <span class="hljs-annotation">@Override</span>
    public int compareTo(InMainModel o) {
        <span class="hljs-keyword">return</span> Integer.parseInt(uuid)-Integer.parseInt(o.uuid);
    }



}
</code></pre>



<h2 id="进货明细值对象类indetailmodel">进货明细值对象类：InDetailModel</h2>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.in.vo;

<span class="hljs-keyword">import</span> java.io.Serializable;

<span class="hljs-javadoc">/**
 * 进货明细管理的值对象封装
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InDetailModel</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Serializable</span>{</span>
    <span class="hljs-comment">//进货明细编号</span>
    <span class="hljs-keyword">private</span> String uuid;
    <span class="hljs-comment">//进货单编号</span>
    <span class="hljs-keyword">private</span> String inId;
    <span class="hljs-comment">//图书编号</span>
    <span class="hljs-keyword">private</span> String bookId;
    <span class="hljs-comment">//进货数量</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> sumNum;
    <span class="hljs-comment">//进货总金额</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">double</span> sumMoney;

    <span class="hljs-comment">//为把书名显示给用户看，给bookUuid添加一个bookName属性</span>
    <span class="hljs-keyword">private</span> String bookName;



    <span class="hljs-keyword">public</span> String <span class="hljs-title">getBookName</span>() {
        <span class="hljs-keyword">return</span> bookName;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setBookName</span>(String bookName) {
        <span class="hljs-keyword">this</span>.bookName = bookName;
    }
    <span class="hljs-keyword">public</span> String <span class="hljs-title">getUuid</span>() {
        <span class="hljs-keyword">return</span> uuid;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUuid</span>(String uuid) {
        <span class="hljs-keyword">this</span>.uuid = uuid;
    }
    <span class="hljs-keyword">public</span> String <span class="hljs-title">getInId</span>() {
        <span class="hljs-keyword">return</span> inId;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setInId</span>(String inId) {
        <span class="hljs-keyword">this</span>.inId = inId;
    }
    <span class="hljs-keyword">public</span> String <span class="hljs-title">getBookId</span>() {
        <span class="hljs-keyword">return</span> bookId;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setBookId</span>(String bookId) {
        <span class="hljs-keyword">this</span>.bookId = bookId;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getSumNum</span>() {
        <span class="hljs-keyword">return</span> sumNum;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setSumNum</span>(<span class="hljs-keyword">int</span> sumNum) {
        <span class="hljs-keyword">this</span>.sumNum = sumNum;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">double</span> <span class="hljs-title">getSumMoney</span>() {
        <span class="hljs-keyword">return</span> sumMoney;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setSumMoney</span>(<span class="hljs-keyword">double</span> sumMoney) {
        <span class="hljs-keyword">this</span>.sumMoney = sumMoney;
    }


    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">hashCode</span>() {
        <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> prime = <span class="hljs-number">31</span>;
        <span class="hljs-keyword">int</span> result = <span class="hljs-number">1</span>;
        result = prime * result + ((uuid == <span class="hljs-keyword">null</span>) ? <span class="hljs-number">0</span> : uuid.hashCode());
        <span class="hljs-keyword">return</span> result;
    }
    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">equals</span>(Object obj) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> == obj)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
        <span class="hljs-keyword">if</span> (obj == <span class="hljs-keyword">null</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        <span class="hljs-keyword">if</span> (getClass() != obj.getClass())
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        InDetailModel other = (InDetailModel) obj;
        <span class="hljs-keyword">if</span> (uuid == <span class="hljs-keyword">null</span>) {
            <span class="hljs-keyword">if</span> (other.uuid != <span class="hljs-keyword">null</span>)
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!uuid.equals(other.uuid))
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
    }
    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span>() {
        <span class="hljs-keyword">return</span> uuid +<span class="hljs-string">", "</span>+bookName + <span class="hljs-string">", "</span> + sumNum
                + <span class="hljs-string">"本, "</span> + sumMoney + <span class="hljs-string">"元"</span>;
    }





}
</code></pre>



<h2 id="进货查询值对象类inmainquerymodel">进货查询值对象类：InMainQueryModel</h2>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.in.vo;

<span class="hljs-javadoc">/**
 * 进货查询值对象封装
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InMainQueryModel</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">InMainModel</span> {</span>

    <span class="hljs-comment">//需要查询的最大时间</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">long</span> inDate2;

    <span class="hljs-javadoc">/**
     * 
     *<span class="hljs-javadoctag"> @return</span>---需要查询的最大时间值
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">long</span> <span class="hljs-title">getInDate2</span>() {
        <span class="hljs-keyword">return</span> inDate2;
    }

    <span class="hljs-javadoc">/**
     * 
     *<span class="hljs-javadoctag"> @param</span> inDate2---设置需要查询的最大时间
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setInDate2</span>(<span class="hljs-keyword">long</span> inDate2) {
        <span class="hljs-keyword">this</span>.inDate2 = inDate2;
    }

}
</code></pre>



<h2 id="进货明细查询值对象类indetailquerymodel">进货明细查询值对象类：InDetailQueryModel</h2>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.in.vo;

<span class="hljs-javadoc">/**
 * 进货明细查询值对象封装
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InDetailQueryModel</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">InDetailModel</span> {</span>

    <span class="hljs-comment">//需要查询的最大进货数量</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> sumNum2;
    <span class="hljs-comment">//需要查询的最大进货金额</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">double</span> sumMoney2;

    <span class="hljs-javadoc">/**
     * 
     *<span class="hljs-javadoctag"> @return</span>---返回需要查询的最大进货数量
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getSumNum2</span>() {
        <span class="hljs-keyword">return</span> sumNum2;
    }
    <span class="hljs-javadoc">/**
     * 
     *<span class="hljs-javadoctag"> @param</span> sumNum2---设置需要查询的最大进货数量
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setSumNum2</span>(<span class="hljs-keyword">int</span> sumNum2) {
        <span class="hljs-keyword">this</span>.sumNum2 = sumNum2;
    }

    <span class="hljs-javadoc">/**
     * 
     *<span class="hljs-javadoctag"> @return</span>---返回需要查询的最大进货金额
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">double</span> <span class="hljs-title">getSumMoney2</span>() {
        <span class="hljs-keyword">return</span> sumMoney2;
    }

    <span class="hljs-javadoc">/**
     * 
     *<span class="hljs-javadoctag"> @param</span> sumMoney2---设置需要查询的最大进货金额
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setSumMoney2</span>(<span class="hljs-keyword">double</span> sumMoney2) {
        <span class="hljs-keyword">this</span>.sumMoney2 = sumMoney2;
    }

}
</code></pre>



<h1 id="进货模块的数据层">进货模块的数据层：</h1>



<h2 id="进货管理数据层接口inmaindao">进货管理数据层接口：InMainDao</h2>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.in.dao.dao;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">import</span> cn.hncu.bookStore.in.vo.InMainModel;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.in.vo.InMainQueryModel;

<span class="hljs-javadoc">/**
 * 进货管理数据层接口
 * 
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 * 
 *<span class="hljs-javadoctag"> @version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">InMainDao</span> {</span>

    <span class="hljs-javadoc">/**
     * 创建一个进货数据对象
     *<span class="hljs-javadoctag"> @param</span> inMain---需要创建的进货数据对象
     *<span class="hljs-javadoctag"> @return</span>---true 表示创建成功，false 表示创建失败
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">create</span>(InMainModel inMain);

    <span class="hljs-javadoc">/**
     * 删除一个进货数据对象
     *<span class="hljs-javadoctag"> @param</span> uuid---进货单的编号-唯一的
     *<span class="hljs-javadoctag"> @return</span>---true表示删除成功， false表示删除失败
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">delete</span>(String uuid);

    <span class="hljs-javadoc">/**
     * 修改一个进货数据的对象
     *<span class="hljs-javadoctag"> @param</span> inMain---需要修改的进货管理对象
     *<span class="hljs-javadoctag"> @return</span>---true表示修改成功，false表示修改失败
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">update</span>(InMainModel inMain);

    <span class="hljs-javadoc">/**
     * 根据进货单编号，得到进货对象的其他信息资料
     *<span class="hljs-javadoctag"> @param</span> uuid---进货单编号
     *<span class="hljs-javadoctag"> @return</span>---该对象的其他其他信息资料
     */</span>
    <span class="hljs-keyword">public</span> InMainModel <span class="hljs-title">getSingle</span>(String uuid);

    <span class="hljs-javadoc">/**
     * 
     *<span class="hljs-javadoctag"> @return</span>---所有的进货管理对象信息
     */</span>
    <span class="hljs-keyword">public</span> List&lt;InMainModel&gt; <span class="hljs-title">getAll</span>();

    <span class="hljs-javadoc">/**
     * 查找进货管理对象
     *<span class="hljs-javadoctag"> @param</span> imqm---查找条件！
     *<span class="hljs-javadoctag"> @return</span>---满足查找条件的所有INMainModel对象
     */</span>
    <span class="hljs-keyword">public</span> List&lt;InMainModel&gt; <span class="hljs-title">getbyCondition</span>(InMainQueryModel imqm);
}
</code></pre>



<h2 id="进货明细管理数据层接口indetaildao">进货明细管理数据层接口：InDetailDao</h2>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.in.dao.dao;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">import</span> cn.hncu.bookStore.in.vo.InDetailModel;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.in.vo.InDetailQueryModel;

<span class="hljs-javadoc">/**
 * 进货明细管理数据层接口
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">InDetailDao</span> {</span>
    <span class="hljs-javadoc">/**
     * 创建一个进货明细数据对象
     *<span class="hljs-javadoctag"> @param</span> inMain---需要创建的进货明细数据对象
     *<span class="hljs-javadoctag"> @return</span>---true 表示创建成功，false 表示创建失败
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">create</span>(InDetailModel inDetail);

    <span class="hljs-javadoc">/**
     * 删除一个进货明细数据对象
     *<span class="hljs-javadoctag"> @param</span> uuid---进货明细单的编号-唯一的
     *<span class="hljs-javadoctag"> @return</span>---true表示删除成功， false表示删除失败
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">delete</span>(String uuid);

    <span class="hljs-javadoc">/**
     * 修改一个进货明细数据的对象
     *<span class="hljs-javadoctag"> @param</span> inMain---需要修改的进货管理明细对象
     *<span class="hljs-javadoctag"> @return</span>---true表示修改成功，false表示修改失败
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">update</span>(InDetailModel inDetail);

    <span class="hljs-javadoc">/**
     * 根据进货明细单编号，得到进货明细对象的其他信息资料
     *<span class="hljs-javadoctag"> @param</span> uuid---进货明细单编号
     *<span class="hljs-javadoctag"> @return</span>---该对象的其他其他信息资料
     */</span>
    <span class="hljs-keyword">public</span> InDetailModel <span class="hljs-title">getSingle</span>(String uuid);

    <span class="hljs-javadoc">/**
     * 
     *<span class="hljs-javadoctag"> @return</span>---所有的进货明细管理对象信息
     */</span>
    <span class="hljs-keyword">public</span> List&lt;InDetailModel&gt; <span class="hljs-title">getAll</span>();

    <span class="hljs-javadoc">/**
     * 查找进货明细管理对象
     *<span class="hljs-javadoctag"> @param</span> imqm---查找条件！
     *<span class="hljs-javadoctag"> @return</span>---满足查找条件的所有InDetailModel对象
     */</span>
    <span class="hljs-keyword">public</span> List&lt;InDetailModel&gt; <span class="hljs-title">getbyCondition</span>(InDetailQueryModel idqm);
}
</code></pre>



<h2 id="进货明细的实现类indetaildaoserimpl">进货明细的实现类：InDetailDaoSerImpl</h2>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.in.dao.impl;

<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">import</span> cn.hncu.bookStore.in.dao.dao.InDetailDao;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.in.dao.factory.InDetailDaoFactory;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.in.vo.InDetailModel;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.in.vo.InDetailQueryModel;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.util.FileIoUtil;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.util.StringComparison;

<span class="hljs-javadoc">/**
 * 进货明细的实现类
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InDetailDaoSerImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">InDetailDao</span>{</span>
    <span class="hljs-comment">//进货明细数据的存储的文件名</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String FILE_NAME = <span class="hljs-string">"InDetail.txt"</span>;

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">create</span>(InDetailModel inDetail) {
        List&lt;InDetailModel&gt; lists = FileIoUtil.readFormFile(FILE_NAME);

        <span class="hljs-keyword">for</span>(InDetailModel model: lists){
            <span class="hljs-comment">//已经存在这个Uuid，不能添加</span>
            <span class="hljs-keyword">if</span>(model.getUuid().equals(inDetail.getUuid())){
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
            }
        }

        lists.add(inDetail);
        FileIoUtil.write2file(lists, FILE_NAME);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">delete</span>(String uuid) {
        List&lt;InDetailModel&gt; list = FileIoUtil.readFormFile(FILE_NAME);
        <span class="hljs-keyword">for</span>(InDetailModel model: list){
            <span class="hljs-comment">//存在，就删除</span>
            <span class="hljs-keyword">if</span>(model.getUuid().equals(uuid)){
                list.remove(model);
                FileIoUtil.write2file(list, FILE_NAME);
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">update</span>(InDetailModel inDetail) {
        List&lt;InDetailModel&gt; list  = FileIoUtil.readFormFile(FILE_NAME);
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;list.size();i++){
            <span class="hljs-comment">//找到了，就修改</span>
            <span class="hljs-keyword">if</span>(list.get(i).getUuid().equals(inDetail.getUuid())){
                list.set(i, inDetail);
                FileIoUtil.write2file(list, FILE_NAME);
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> InDetailModel <span class="hljs-title">getSingle</span>(String uuid) {
        List&lt;InDetailModel&gt; list = FileIoUtil.readFormFile(FILE_NAME);
        <span class="hljs-keyword">for</span>(InDetailModel model : list){
            <span class="hljs-comment">//找到了，就返回</span>
            <span class="hljs-keyword">if</span>(model.getUuid().equals(uuid)){
                <span class="hljs-keyword">return</span> model;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;InDetailModel&gt; <span class="hljs-title">getAll</span>() {
        <span class="hljs-keyword">return</span> FileIoUtil.readFormFile(FILE_NAME);
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;InDetailModel&gt; <span class="hljs-title">getbyCondition</span>(InDetailQueryModel idqm) {
        List&lt;InDetailModel&gt; lists = getAll();
        List&lt;InDetailModel&gt; resulits = <span class="hljs-keyword">new</span> ArrayList&lt;InDetailModel&gt;();
        <span class="hljs-keyword">for</span>(InDetailModel model:lists){

            <span class="hljs-keyword">if</span>(StringComparison.stringComp(idqm.getUuid(), model.getUuid())==-<span class="hljs-number">1</span>){
                <span class="hljs-keyword">continue</span>;
            }

            <span class="hljs-keyword">if</span>(StringComparison.stringComp(idqm.getInId(), model.getInId())==-<span class="hljs-number">1</span>){
                <span class="hljs-keyword">continue</span>;
            }

            <span class="hljs-keyword">if</span>(StringComparison.stringComp(idqm.getBookId(), model.getBookId())==-<span class="hljs-number">1</span>){
                <span class="hljs-keyword">continue</span>;
            }

            <span class="hljs-keyword">if</span>(idqm.getSumNum()&gt;<span class="hljs-number">0</span>){
                <span class="hljs-keyword">if</span>(model.getSumNum()&lt;idqm.getSumNum()){
                    <span class="hljs-keyword">continue</span>;
                }
            }
            <span class="hljs-keyword">if</span>(idqm.getSumNum2()&gt;<span class="hljs-number">0</span>){
                <span class="hljs-keyword">if</span>(model.getSumNum()&gt;idqm.getSumNum2()){
                    <span class="hljs-keyword">continue</span>;
                }
            }

            <span class="hljs-keyword">if</span>(idqm.getSumMoney()&gt;<span class="hljs-number">0</span>){
                <span class="hljs-keyword">if</span>(model.getSumMoney()&lt;idqm.getSumMoney()){
                    <span class="hljs-keyword">continue</span>;
                }
            }
            <span class="hljs-keyword">if</span>(idqm.getSumMoney2()&gt;<span class="hljs-number">0</span>){
                <span class="hljs-keyword">if</span>(model.getSumMoney()&gt;idqm.getSumMoney2()){
                    <span class="hljs-keyword">continue</span>;
                }
            }

            resulits.add(model);
        }
        <span class="hljs-keyword">return</span> resulits;
    }

}
</code></pre>



<h2 id="进货管理的实现类inmaindaoserimpl">进货管理的实现类：InMainDaoSerImpl</h2>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.in.dao.impl;

<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">import</span> cn.hncu.bookStore.in.dao.dao.InMainDao;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.in.vo.InMainModel;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.in.vo.InMainQueryModel;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.util.FileIoUtil;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.util.StringComparison;

<span class="hljs-javadoc">/**
 * 进货管理的实现类
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InMainDaoSerImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">InMainDao</span> {</span>

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String FILE_NAME = <span class="hljs-string">"InMain.txt"</span>;
    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">create</span>(InMainModel inMain) {
        List&lt;InMainModel&gt; list = FileIoUtil.readFormFile(FILE_NAME);
        <span class="hljs-keyword">for</span>(InMainModel model:list){
            <span class="hljs-keyword">if</span>(model.getUuid().equals(inMain.getUuid())){<span class="hljs-comment">//存在，则不能添加</span>
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
            }
        }
        list.add(inMain);
        FileIoUtil.write2file(list, FILE_NAME);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">delete</span>(String uuid) {
        List&lt;InMainModel&gt; list = FileIoUtil.readFormFile(FILE_NAME);
        <span class="hljs-keyword">for</span>(InMainModel model:list){
            <span class="hljs-keyword">if</span>(model.getUuid().equals(uuid)){<span class="hljs-comment">//存在，则删除</span>
                list.remove(model);
                FileIoUtil.write2file(list, FILE_NAME);
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">update</span>(InMainModel inMain) {
        List&lt;InMainModel&gt; list = FileIoUtil.readFormFile(FILE_NAME);
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;list.size();i++){
            InMainModel model = list.get(i);
            <span class="hljs-keyword">if</span>(model.getUuid().equals(inMain.getUuid())){<span class="hljs-comment">//存在，则修改</span>
                list.set(i, inMain);
                FileIoUtil.write2file(list, FILE_NAME);
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> InMainModel <span class="hljs-title">getSingle</span>(String uuid) {
        List&lt;InMainModel&gt; list = FileIoUtil.readFormFile(FILE_NAME);
        <span class="hljs-keyword">for</span>(InMainModel model:list){
            <span class="hljs-keyword">if</span>(model.getUuid().equals(uuid)){<span class="hljs-comment">//存在，则返回</span>
                <span class="hljs-keyword">return</span> model;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;InMainModel&gt; <span class="hljs-title">getAll</span>() {
        <span class="hljs-keyword">return</span> FileIoUtil.readFormFile(FILE_NAME);
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;InMainModel&gt; <span class="hljs-title">getbyCondition</span>(InMainQueryModel imqm) {
        List&lt;InMainModel&gt; lists = FileIoUtil.readFormFile(FILE_NAME);
        List&lt;InMainModel&gt; results = <span class="hljs-keyword">new</span> ArrayList&lt;InMainModel&gt;();
        <span class="hljs-keyword">for</span>(InMainModel model : lists){

            <span class="hljs-keyword">if</span>(StringComparison.stringComp(imqm.getUuid(), model.getUuid())==-<span class="hljs-number">1</span>){
                <span class="hljs-keyword">continue</span>;
            }

            <span class="hljs-keyword">if</span>(StringComparison.stringComp(imqm.getInUserId(), model.getInUserId())==-<span class="hljs-number">1</span>){
                <span class="hljs-keyword">continue</span>;
            }

            <span class="hljs-keyword">if</span>(imqm.getInDate()&gt;<span class="hljs-number">0</span>){
                <span class="hljs-keyword">if</span>(model.getInDate()&lt;imqm.getInDate()){
                    <span class="hljs-keyword">continue</span>;
                }
            }
            <span class="hljs-keyword">if</span>(imqm.getInDate2()&gt;<span class="hljs-number">0</span>){
                <span class="hljs-keyword">if</span>(model.getInDate()&gt;imqm.getInDate2()){
                    <span class="hljs-keyword">continue</span>;
                }
            }
            results.add(model);
        }
        <span class="hljs-keyword">return</span> results;
    }

}
</code></pre>



<h2 id="new-一个进货明细的实现类indetaildaofactory">new 一个进货明细的实现类：InDetailDaoFactory</h2>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.in.dao.factory;

<span class="hljs-keyword">import</span> cn.hncu.bookStore.in.dao.dao.InDetailDao;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.in.dao.impl.InDetailDaoSerImpl;

<span class="hljs-javadoc">/**
 * 工厂方法----new 一个进货明细的实现类
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InDetailDaoFactory</span> {</span>

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> InDetailDao <span class="hljs-title">getInDetailDao</span>(){
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> InDetailDaoSerImpl();
    }
}
</code></pre>



<h2 id="new-一个进货实现类inmaindaofactory">new 一个进货实现类：InMainDaoFactory</h2>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.in.dao.factory;

<span class="hljs-keyword">import</span> cn.hncu.bookStore.in.dao.dao.InMainDao;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.in.dao.impl.InMainDaoSerImpl;

<span class="hljs-javadoc">/**
 * 工厂方法---new 一个进货实现类
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *<span class="hljs-javadoctag"> @version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InMainDaoFactory</span> {</span>

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> InMainDao <span class="hljs-title">getInMainDao</span>(){
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> InMainDaoSerImpl();
    }
}
</code></pre>



<h1 id="进货模块的逻辑层">进货模块的逻辑层：</h1>



<h2 id="逻辑层的接口inmainebi">逻辑层的接口：InMainEbi</h2>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.in.business.ebi;

<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-keyword">import</span> cn.hncu.bookStore.in.vo.InDetailModel;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.in.vo.InDetailQueryModel;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.in.vo.InMainModel;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.in.vo.InMainQueryModel;

<span class="hljs-javadoc">/**
 * 
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *<span class="hljs-javadoctag"> @version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">InMainEbi</span> {</span>

    <span class="hljs-javadoc">/**
     * 创建一个进货模块数据-
     *<span class="hljs-javadoctag"> @param</span> inMain---进货数据
     *<span class="hljs-javadoctag"> @param</span> inDetails---进货明细数据
     *<span class="hljs-javadoctag"> @return</span>---返回true表示创建成功，false表示创建失败
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">create</span>(InMainModel inMain,List&lt;InDetailModel&gt; inDetails);

    <span class="hljs-javadoc">/**
     * 
     *<span class="hljs-javadoctag"> @return</span>---返回所有的进货模块（包括进货明细）的集合
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> Map&lt;InMainModel, List&lt;InDetailModel&gt;&gt; <span class="hljs-title">getAll</span>();

    <span class="hljs-javadoc">/**
     * 
     *<span class="hljs-javadoctag"> @param</span> imqm---进货管理需要查找的条件
     *<span class="hljs-javadoctag"> @param</span> idqm---进货明细需要查找的条件
     *<span class="hljs-javadoctag"> @return</span>---满足条件的所有进货数据的Map集合
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> Map&lt;InMainModel, List&lt;InDetailModel&gt;&gt; <span class="hljs-title">getByCondition</span>(InMainQueryModel imqm,InDetailQueryModel idqm);

}
</code></pre>



<h2 id="逻辑层接口的实现类inmainebo">逻辑层接口的实现类：InMainEbo</h2>

<pre class="prettyprint"><code class=" hljs avrasm">package cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.in</span><span class="hljs-preprocessor">.business</span><span class="hljs-preprocessor">.ebo</span><span class="hljs-comment">;</span>

import java<span class="hljs-preprocessor">.util</span><span class="hljs-preprocessor">.List</span><span class="hljs-comment">;</span>
import java<span class="hljs-preprocessor">.util</span><span class="hljs-preprocessor">.Map</span><span class="hljs-comment">;</span>
import java<span class="hljs-preprocessor">.util</span><span class="hljs-preprocessor">.TreeMap</span><span class="hljs-comment">;</span>

import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.book</span><span class="hljs-preprocessor">.business</span><span class="hljs-preprocessor">.ebi</span><span class="hljs-preprocessor">.BookEbi</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.book</span><span class="hljs-preprocessor">.business</span><span class="hljs-preprocessor">.factory</span><span class="hljs-preprocessor">.BookEbiFactory</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.common</span><span class="hljs-preprocessor">.UuidModelConstance</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.common</span><span class="hljs-preprocessor">.uuid</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.UuidDao</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.common</span><span class="hljs-preprocessor">.uuid</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.factory</span><span class="hljs-preprocessor">.UuidDaoFactory</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.in</span><span class="hljs-preprocessor">.business</span><span class="hljs-preprocessor">.ebi</span><span class="hljs-preprocessor">.InMainEbi</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.in</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.InDetailDao</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.in</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.InMainDao</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.in</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.factory</span><span class="hljs-preprocessor">.InDetailDaoFactory</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.in</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.factory</span><span class="hljs-preprocessor">.InMainDaoFactory</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.in</span><span class="hljs-preprocessor">.vo</span><span class="hljs-preprocessor">.InDetailModel</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.in</span><span class="hljs-preprocessor">.vo</span><span class="hljs-preprocessor">.InDetailQueryModel</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.in</span><span class="hljs-preprocessor">.vo</span><span class="hljs-preprocessor">.InMainModel</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.in</span><span class="hljs-preprocessor">.vo</span><span class="hljs-preprocessor">.InMainQueryModel</span><span class="hljs-comment">;</span>

public class InMainEbo implements InMainEbi{
    //注入dao

    InMainDao inMainDao = InMainDaoFactory<span class="hljs-preprocessor">.getInMainDao</span>()<span class="hljs-comment">;</span>
    InDetailDao inDetailDao = InDetailDaoFactory<span class="hljs-preprocessor">.getInDetailDao</span>()<span class="hljs-comment">;</span>
    UuidDao uuidDao = UuidDaoFactory<span class="hljs-preprocessor">.getUuidDao</span>()<span class="hljs-comment">;</span>
    BookEbi bookEbi = BookEbiFactory<span class="hljs-preprocessor">.getBookEbi</span>()<span class="hljs-comment">;</span>

    @Override
    public boolean create(InMainModel inMain, List&lt;InDetailModel&gt; inDetails) {
        //////////<span class="hljs-number">1</span>存储inMain信息///////////
        //补全inMain中的数据
        //需要:inUuid,inDate,inUserUuid   已组织:inUserUuid
        //还缺(需补):inUuid,inDate
        String inUuid = uuidDao<span class="hljs-preprocessor">.getNextUuid</span>(UuidModelConstance<span class="hljs-preprocessor">.IN</span>_MAIN)<span class="hljs-comment">;</span>
        inMain<span class="hljs-preprocessor">.setUuid</span>(inUuid)<span class="hljs-comment">;</span>
        inMain<span class="hljs-preprocessor">.setInDate</span>(System<span class="hljs-preprocessor">.currentTimeMillis</span>())<span class="hljs-comment">;</span>
        inMainDao<span class="hljs-preprocessor">.create</span>(inMain)<span class="hljs-comment">;</span>

         //////////<span class="hljs-number">2</span>存储inDetail信息///////////
        for(InDetailModel model:inDetails){
            //补全每一个inDetail中的数据
            //需要:inDetailUuid,inMainUuid,bookUuid,sumNum,sumMoney   已组织:bookUuid,sumNum
            //还缺(需补):inDetailUuid,inMainUuid,sumMoney
            model<span class="hljs-preprocessor">.setUuid</span>(uuidDao<span class="hljs-preprocessor">.getNextUuid</span>(UuidModelConstance<span class="hljs-preprocessor">.IN</span>_DETAIL))<span class="hljs-comment">;</span>
            model<span class="hljs-preprocessor">.setInId</span>(inUuid)<span class="hljs-comment">;</span>

            double sumMoney = model<span class="hljs-preprocessor">.getSumNum</span>() * bookEbi<span class="hljs-preprocessor">.getSingle</span>(model<span class="hljs-preprocessor">.getBookId</span>())<span class="hljs-preprocessor">.getInPrice</span>()<span class="hljs-comment">;</span>
            model<span class="hljs-preprocessor">.setSumMoney</span>(sumMoney)<span class="hljs-comment">;</span>
            inDetailDao<span class="hljs-preprocessor">.create</span>(model)<span class="hljs-comment">;</span>
        }
        return true<span class="hljs-comment">;</span>
    }

    @Override
    public Map&lt;InMainModel, List&lt;InDetailModel&gt;&gt; getAll() {
        Map&lt;InMainModel,List&lt;InDetailModel&gt;&gt; map = new TreeMap&lt;InMainModel, List&lt;InDetailModel&gt;&gt;()<span class="hljs-comment">;</span>

        List&lt;InMainModel&gt; inMains = inMainDao<span class="hljs-preprocessor">.getAll</span>()<span class="hljs-comment">;</span>

        for(InMainModel inMain: inMains ){
            //查询条件值对象的创建
            InDetailQueryModel idqm = new InDetailQueryModel()<span class="hljs-comment">;</span>
            String inUuid = inMain<span class="hljs-preprocessor">.getUuid</span>()<span class="hljs-comment">;</span>
            idqm<span class="hljs-preprocessor">.setInId</span>(inUuid)<span class="hljs-comment">;</span>

            List&lt;InDetailModel&gt; details = inDetailDao<span class="hljs-preprocessor">.getbyCondition</span>(idqm)<span class="hljs-comment">;</span>

            map<span class="hljs-preprocessor">.put</span>(inMain, details)<span class="hljs-comment">;</span>
        }

        return map<span class="hljs-comment">;</span>
    }

    @Override
    public Map&lt;InMainModel, List&lt;InDetailModel&gt;&gt; getByCondition(
            InMainQueryModel imqm, InDetailQueryModel idqm) {
        // TODO Auto-generated method stub
        return null<span class="hljs-comment">;</span>
    }

}
</code></pre>



<h2 id="具体实现类的工厂方法inmainebifactory">具体实现类的工厂方法：InMainEbiFactory</h2>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.in.business.factory;

<span class="hljs-keyword">import</span> cn.hncu.bookStore.in.business.ebi.InMainEbi;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.in.business.ebo.InMainEbo;

<span class="hljs-javadoc">/**
 * 工厂方法
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InMainEbiFactory</span> {</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> InMainEbi <span class="hljs-title">getInMainEbi</span>(){
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> InMainEbo();
    }
}
</code></pre>



<h1 id="进货模块的表现层">进货模块的表现层：</h1>



<h2 id="list主界面inlistpanel">List主界面：InListPanel</h2>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-comment">/*
 * InListPanel.java
 *
 * Created on __DATE__, __TIME__
 */</span>

<span class="hljs-keyword">package</span> cn.hncu.bookStore.in.ui;

<span class="hljs-keyword">import</span> java.awt.event.ActionEvent;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-keyword">import</span> javax.swing.JFrame;
<span class="hljs-keyword">import</span> javax.swing.event.ListSelectionEvent;

<span class="hljs-keyword">import</span> cn.hncu.bookStore.in.business.factory.InMainEbiFactory;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.in.vo.InDetailModel;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.in.vo.InMainModel;

<span class="hljs-javadoc">/**
 * 
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InListPanel</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">javax</span>.<span class="hljs-title">swing</span>.<span class="hljs-title">JPanel</span> {</span>

    <span class="hljs-keyword">private</span> JFrame mainFrame = <span class="hljs-keyword">null</span>;
    <span class="hljs-keyword">private</span> Map&lt;InMainModel, List&lt;InDetailModel&gt;&gt; map;

    <span class="hljs-javadoc">/** Creates new form InListPanel */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title">InListPanel</span>(JFrame mainFrame) {
        <span class="hljs-keyword">this</span>.mainFrame = mainFrame;
        initComponents();
        map = InMainEbiFactory.getInMainEbi().getAll();
        myInitData();
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">myInitData</span>() {
        jListInMain.setListData(map.keySet().toArray());
    }

    <span class="hljs-javadoc">/**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */</span>
    <span class="hljs-comment">//GEN-BEGIN:initComponents</span>
    <span class="hljs-comment">// &lt;editor-fold defaultstate="collapsed" desc="Generated Code"&gt;</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initComponents</span>() {

        jLabel1 = <span class="hljs-keyword">new</span> javax.swing.JLabel();
        btnToAdd = <span class="hljs-keyword">new</span> javax.swing.JButton();
        jScrollPane1 = <span class="hljs-keyword">new</span> javax.swing.JScrollPane();
        jListInMain = <span class="hljs-keyword">new</span> javax.swing.JList();
        jScrollPane2 = <span class="hljs-keyword">new</span> javax.swing.JScrollPane();
        jListInDetail = <span class="hljs-keyword">new</span> javax.swing.JList();
        jLabel2 = <span class="hljs-keyword">new</span> javax.swing.JLabel();

        setMinimumSize(<span class="hljs-keyword">new</span> java.awt.Dimension(<span class="hljs-number">800</span>, <span class="hljs-number">600</span>));
        setLayout(<span class="hljs-keyword">null</span>);

        jLabel1.setFont(<span class="hljs-keyword">new</span> java.awt.Font(<span class="hljs-string">"微软雅黑"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">48</span>));
        jLabel1.setForeground(<span class="hljs-keyword">new</span> java.awt.Color(<span class="hljs-number">204</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>));
        jLabel1.setText(<span class="hljs-string">"\u8fdb\u8d27\u5217\u8868"</span>);
        add(jLabel1);
        jLabel1.setBounds(<span class="hljs-number">260</span>, <span class="hljs-number">0</span>, <span class="hljs-number">230</span>, <span class="hljs-number">80</span>);

        btnToAdd.setFont(<span class="hljs-keyword">new</span> java.awt.Font(<span class="hljs-string">"Dialog"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">24</span>));
        btnToAdd.setForeground(<span class="hljs-keyword">new</span> java.awt.Color(<span class="hljs-number">0</span>, <span class="hljs-number">204</span>, <span class="hljs-number">204</span>));
        btnToAdd.setText(<span class="hljs-string">"\u8f6c\u5230\u6dfb\u52a0"</span>);
        btnToAdd.addActionListener(<span class="hljs-keyword">new</span> java.awt.event.ActionListener() {
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">actionPerformed</span>(java.awt.event.ActionEvent evt) {
                btnToAddActionPerformed(evt);
            }
        });
        add(btnToAdd);
        btnToAdd.setBounds(<span class="hljs-number">100</span>, <span class="hljs-number">460</span>, <span class="hljs-number">160</span>, <span class="hljs-number">70</span>);

        jListInMain.setFont(<span class="hljs-keyword">new</span> java.awt.Font(<span class="hljs-string">"宋体"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">18</span>));
        jListInMain.setForeground(<span class="hljs-keyword">new</span> java.awt.Color(<span class="hljs-number">102</span>, <span class="hljs-number">102</span>, <span class="hljs-number">0</span>));
        jListInMain.setModel(<span class="hljs-keyword">new</span> javax.swing.AbstractListModel() {
            String[] strings = { <span class="hljs-string">""</span> };

            <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getSize</span>() {
                <span class="hljs-keyword">return</span> strings.length;
            }

            <span class="hljs-keyword">public</span> Object <span class="hljs-title">getElementAt</span>(<span class="hljs-keyword">int</span> i) {
                <span class="hljs-keyword">return</span> strings[i];
            }
        });
        jListInMain
                .addListSelectionListener(<span class="hljs-keyword">new</span> javax.swing.event.ListSelectionListener() {
                    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">valueChanged</span>(
                            javax.swing.event.ListSelectionEvent evt) {
                        jListInMainValueChanged(evt);
                    }
                });
        jScrollPane1.setViewportView(jListInMain);

        add(jScrollPane1);
        jScrollPane1.setBounds(<span class="hljs-number">50</span>, <span class="hljs-number">110</span>, <span class="hljs-number">320</span>, <span class="hljs-number">300</span>);

        jListInDetail.setFont(<span class="hljs-keyword">new</span> java.awt.Font(<span class="hljs-string">"宋体"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">18</span>));
        jListInDetail.setForeground(<span class="hljs-keyword">new</span> java.awt.Color(<span class="hljs-number">102</span>, <span class="hljs-number">102</span>, <span class="hljs-number">0</span>));
        jListInDetail.setModel(<span class="hljs-keyword">new</span> javax.swing.AbstractListModel() {
            String[] strings = { <span class="hljs-string">""</span> };

            <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getSize</span>() {
                <span class="hljs-keyword">return</span> strings.length;
            }

            <span class="hljs-keyword">public</span> Object <span class="hljs-title">getElementAt</span>(<span class="hljs-keyword">int</span> i) {
                <span class="hljs-keyword">return</span> strings[i];
            }
        });
        jScrollPane2.setViewportView(jListInDetail);

        add(jScrollPane2);
        jScrollPane2.setBounds(<span class="hljs-number">400</span>, <span class="hljs-number">110</span>, <span class="hljs-number">370</span>, <span class="hljs-number">300</span>);

        jLabel2.setFont(<span class="hljs-keyword">new</span> java.awt.Font(<span class="hljs-string">"Dialog"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">14</span>));
        jLabel2.setForeground(<span class="hljs-keyword">new</span> java.awt.Color(<span class="hljs-number">51</span>, <span class="hljs-number">0</span>, <span class="hljs-number">204</span>));
        jLabel2.setText(<span class="hljs-string">"\u8fdb\u8d27\u660e\u7ec6\u5217\u8868\uff1a"</span>);
        add(jLabel2);
        jLabel2.setBounds(<span class="hljs-number">480</span>, <span class="hljs-number">80</span>, <span class="hljs-number">110</span>, <span class="hljs-number">30</span>);
    }<span class="hljs-comment">// &lt;/editor-fold&gt;</span>
    <span class="hljs-comment">//GEN-END:initComponents</span>

    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">jListInMainValueChanged</span>(ListSelectionEvent evt) {
        InMainModel inMain = (InMainModel) jListInMain.getSelectedValue();
        List&lt;InDetailModel&gt; details = map.get(inMain);
        <span class="hljs-comment">//System.out.println(map);</span>
        <span class="hljs-comment">//System.out.println(inMain);</span>
        jListInDetail.setListData(details.toArray());
    }

    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">btnToAddActionPerformed</span>(ActionEvent evt) {
        mainFrame.setContentPane(<span class="hljs-keyword">new</span> InAddPanel(mainFrame));
        mainFrame.validate();
    }

    <span class="hljs-comment">//GEN-BEGIN:variables</span>
    <span class="hljs-comment">// Variables declaration - do not modify</span>
    <span class="hljs-keyword">private</span> javax.swing.JButton btnToAdd;
    <span class="hljs-keyword">private</span> javax.swing.JLabel jLabel1;
    <span class="hljs-keyword">private</span> javax.swing.JLabel jLabel2;
    <span class="hljs-keyword">private</span> javax.swing.JList jListInDetail;
    <span class="hljs-keyword">private</span> javax.swing.JList jListInMain;
    <span class="hljs-keyword">private</span> javax.swing.JScrollPane jScrollPane1;
    <span class="hljs-keyword">private</span> javax.swing.JScrollPane jScrollPane2;
    <span class="hljs-comment">// End of variables declaration//GEN-END:variables</span>

}</code></pre>



<h2 id="添加进货界面类inaddpanel">添加进货界面类：InAddPanel</h2>

<pre class="prettyprint"><code class=" hljs avrasm"><span class="hljs-comment">/*
 * InAddPanel.java
 *
 * Created on __DATE__, __TIME__
 */</span>

package cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.in</span><span class="hljs-preprocessor">.ui</span><span class="hljs-comment">;</span>

import java<span class="hljs-preprocessor">.util</span><span class="hljs-preprocessor">.ArrayList</span><span class="hljs-comment">;</span>
import java<span class="hljs-preprocessor">.util</span><span class="hljs-preprocessor">.List</span><span class="hljs-comment">;</span>

import javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JFrame</span><span class="hljs-comment">;</span>
import javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JOptionPane</span><span class="hljs-comment">;</span>
import javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.plaf</span><span class="hljs-preprocessor">.ListUI</span><span class="hljs-comment">;</span>

import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.book</span><span class="hljs-preprocessor">.business</span><span class="hljs-preprocessor">.ebi</span><span class="hljs-preprocessor">.BookEbi</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.book</span><span class="hljs-preprocessor">.business</span><span class="hljs-preprocessor">.factory</span><span class="hljs-preprocessor">.BookEbiFactory</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.book</span><span class="hljs-preprocessor">.vo</span><span class="hljs-preprocessor">.BookModel</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.in</span><span class="hljs-preprocessor">.business</span><span class="hljs-preprocessor">.factory</span><span class="hljs-preprocessor">.InMainEbiFactory</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.in</span><span class="hljs-preprocessor">.vo</span><span class="hljs-preprocessor">.InDetailModel</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.in</span><span class="hljs-preprocessor">.vo</span><span class="hljs-preprocessor">.InMainModel</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.user</span><span class="hljs-preprocessor">.business</span><span class="hljs-preprocessor">.factory</span><span class="hljs-preprocessor">.UserEbiFactory</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.user</span><span class="hljs-preprocessor">.vo</span><span class="hljs-preprocessor">.UserModel</span><span class="hljs-comment">;</span>

<span class="hljs-comment">/**
 * 
 * @author 陈浩翔
 * 
 * @version 1.0
 */</span>
public class InAddPanel extends javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JPanel</span> {

    private JFrame mainFrame = null<span class="hljs-comment">;</span>

    private List&lt;InDetailModel&gt; details = new ArrayList&lt;InDetailModel&gt;()<span class="hljs-comment">;</span>

    <span class="hljs-comment">/**
     * Creates new form InAddPanel
     * 
     * @param mainFrame
     */</span>
    public InAddPanel(JFrame mainFrame) {
        this<span class="hljs-preprocessor">.mainFrame</span> = mainFrame<span class="hljs-comment">;</span>
        initComponents()<span class="hljs-comment">;</span>
        jtxArea<span class="hljs-preprocessor">.setEditable</span>(false)<span class="hljs-comment">;</span>
        myInitData()<span class="hljs-comment">;</span>
    }

    private void myInitData() {
        // <span class="hljs-number">1</span>完成combBook组合框中数据的初始化
        // 访问book模块，把其中的图书获取出来，并把书名填写到combBook组合框中
        // 我们是UI层，只能访问(对方的)逻辑层
        List&lt;BookModel&gt; books = BookEbiFactory<span class="hljs-preprocessor">.getBookEbi</span>()<span class="hljs-preprocessor">.getAll</span>()<span class="hljs-comment">;</span>
        for (BookModel book : books) {
            combBook<span class="hljs-preprocessor">.addItem</span>(book<span class="hljs-preprocessor">.getUuid</span>() + <span class="hljs-string">","</span> + book<span class="hljs-preprocessor">.getName</span>())<span class="hljs-comment">;</span>
            // 若想更精确地控制每本书显示的信息，可以修改Book的toString()方法
        }

        // <span class="hljs-number">2</span>完成combUser组合框中数据的初始化
        <span class="hljs-comment">/*
         * 模块之间的交接太深(细节太多了，功能可实现，但从开发技术或设计思想来讲不可取) 
          List&lt;UserModel&gt; users =UserEbiFactory.getUserEbi().getAll(); for(UserModel user: users){
          if(user.getType()==UserTypeEnum.IN.getType()){
          combUser.addItem(user.getName()); } }
         */</span>

        List&lt;UserModel&gt; users = UserEbiFactory<span class="hljs-preprocessor">.getUserEbi</span>()<span class="hljs-preprocessor">.getAllIn</span>()<span class="hljs-comment">;</span>
        for (UserModel user : users) {
            combUser<span class="hljs-preprocessor">.addItem</span>(user<span class="hljs-preprocessor">.getName</span>())<span class="hljs-comment">;</span>
        }

    }

    <span class="hljs-comment">/**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */</span>
    //GEN-BEGIN:initComponents
    // &lt;editor-fold defaultstate=<span class="hljs-string">"collapsed"</span> desc=<span class="hljs-string">"Generated Code"</span>&gt;
    private void initComponents() {

        jLabel1 = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JLabel</span>()<span class="hljs-comment">;</span>
        jLabel4 = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JLabel</span>()<span class="hljs-comment">;</span>
        tfdInNum = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JTextField</span>()<span class="hljs-comment">;</span>
        jLabel5 = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JLabel</span>()<span class="hljs-comment">;</span>
        jLabel6 = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JLabel</span>()<span class="hljs-comment">;</span>
        combUser = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JComboBox</span>()<span class="hljs-comment">;</span>
        combBook = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JComboBox</span>()<span class="hljs-comment">;</span>
        jScrollPane1 = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JScrollPane</span>()<span class="hljs-comment">;</span>
        jListDetails = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JList</span>()<span class="hljs-comment">;</span>
        jLabel7 = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JLabel</span>()<span class="hljs-comment">;</span>
        btnAddDetail = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JButton</span>()<span class="hljs-comment">;</span>
        jScrollPane2 = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JScrollPane</span>()<span class="hljs-comment">;</span>
        jtxArea = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JTextArea</span>()<span class="hljs-comment">;</span>
        btnBack = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JButton</span>()<span class="hljs-comment">;</span>
        btnMainAdd = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JButton</span>()<span class="hljs-comment">;</span>

        setMinimumSize(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Dimension</span>(<span class="hljs-number">800</span>, <span class="hljs-number">600</span>))<span class="hljs-comment">;</span>
        setLayout(null)<span class="hljs-comment">;</span>

        jLabel1<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"微软雅黑"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">48</span>))<span class="hljs-comment">;</span>
        jLabel1<span class="hljs-preprocessor">.setForeground</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Color</span>(<span class="hljs-number">204</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>))<span class="hljs-comment">;</span>
        jLabel1<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"\u6dfb\u52a0\u8fdb\u8d27"</span>)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">add</span>(jLabel1)<span class="hljs-comment">;</span>
        jLabel1<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">270</span>, <span class="hljs-number">0</span>, <span class="hljs-number">210</span>, <span class="hljs-number">60</span>)<span class="hljs-comment">;</span>

        jLabel4<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"微软雅黑"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">18</span>))<span class="hljs-comment">;</span>
        jLabel4<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"\u56fe\u4e66\u540d\u79f0:"</span>)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">add</span>(jLabel4)<span class="hljs-comment">;</span>
        jLabel4<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">50</span>, <span class="hljs-number">100</span>, <span class="hljs-number">90</span>, <span class="hljs-number">30</span>)<span class="hljs-comment">;</span>

        tfdInNum<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"Dialog"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">18</span>))<span class="hljs-comment">;</span>
        tfdInNum<span class="hljs-preprocessor">.setAutoscrolls</span>(false)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">add</span>(tfdInNum)<span class="hljs-comment">;</span>
        tfdInNum<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">140</span>, <span class="hljs-number">170</span>, <span class="hljs-number">150</span>, <span class="hljs-number">30</span>)<span class="hljs-comment">;</span>

        jLabel5<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"微软雅黑"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">18</span>))<span class="hljs-comment">;</span>
        jLabel5<span class="hljs-preprocessor">.setForeground</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Color</span>(<span class="hljs-number">255</span>, <span class="hljs-number">51</span>, <span class="hljs-number">51</span>))<span class="hljs-comment">;</span>
        jLabel5<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"  \u8fdb\u8d27\u660e\u7ec6\u5217\u8868\uff1a"</span>)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">add</span>(jLabel5)<span class="hljs-comment">;</span>
        jLabel5<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">10</span>, <span class="hljs-number">220</span>, <span class="hljs-number">140</span>, <span class="hljs-number">30</span>)<span class="hljs-comment">;</span>

        jLabel6<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"微软雅黑"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">18</span>))<span class="hljs-comment">;</span>
        jLabel6<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"\u8fdb\u8d27\u4eba\uff1a"</span>)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">add</span>(jLabel6)<span class="hljs-comment">;</span>
        jLabel6<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">480</span>, <span class="hljs-number">420</span>, <span class="hljs-number">80</span>, <span class="hljs-number">30</span>)<span class="hljs-comment">;</span>

        combUser<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"Dialog"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">14</span>))<span class="hljs-comment">;</span>
        combUser<span class="hljs-preprocessor">.setModel</span>(new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.DefaultComboBoxModel</span>(
                new String[] { <span class="hljs-string">"请选择..."</span> }))<span class="hljs-comment">;</span>
        <span class="hljs-keyword">add</span>(combUser)<span class="hljs-comment">;</span>
        combUser<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">550</span>, <span class="hljs-number">420</span>, <span class="hljs-number">150</span>, <span class="hljs-number">30</span>)<span class="hljs-comment">;</span>

        combBook<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"Dialog"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">14</span>))<span class="hljs-comment">;</span>
        combBook<span class="hljs-preprocessor">.setModel</span>(new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.DefaultComboBoxModel</span>(
                new String[] { <span class="hljs-string">"请选择..."</span> }))<span class="hljs-comment">;</span>
        <span class="hljs-keyword">add</span>(combBook)<span class="hljs-comment">;</span>
        combBook<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">140</span>, <span class="hljs-number">100</span>, <span class="hljs-number">150</span>, <span class="hljs-number">30</span>)<span class="hljs-comment">;</span>

        jListDetails<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"Dialog"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">14</span>))<span class="hljs-comment">;</span>
        jListDetails<span class="hljs-preprocessor">.setForeground</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Color</span>(<span class="hljs-number">255</span>, <span class="hljs-number">51</span>, <span class="hljs-number">51</span>))<span class="hljs-comment">;</span>
        jListDetails<span class="hljs-preprocessor">.setModel</span>(new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.AbstractListModel</span>() {
            String[] strings = { <span class="hljs-string">""</span> }<span class="hljs-comment">;</span>

            public int getSize() {
                return strings<span class="hljs-preprocessor">.length</span><span class="hljs-comment">;</span>
            }

            public Object getElementAt(int i) {
                return strings[i]<span class="hljs-comment">;</span>
            }
        })<span class="hljs-comment">;</span>
        jScrollPane1<span class="hljs-preprocessor">.setViewportView</span>(jListDetails)<span class="hljs-comment">;</span>

        <span class="hljs-keyword">add</span>(jScrollPane1)<span class="hljs-comment">;</span>
        jScrollPane1<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">20</span>, <span class="hljs-number">262</span>, <span class="hljs-number">410</span>, <span class="hljs-number">210</span>)<span class="hljs-comment">;</span>

        jLabel7<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"微软雅黑"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">18</span>))<span class="hljs-comment">;</span>
        jLabel7<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"\u8fdb\u8d27\u6570\u91cf\uff1a"</span>)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">add</span>(jLabel7)<span class="hljs-comment">;</span>
        jLabel7<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">50</span>, <span class="hljs-number">170</span>, <span class="hljs-number">90</span>, <span class="hljs-number">30</span>)<span class="hljs-comment">;</span>

        btnAddDetail<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"Dialog"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">14</span>))<span class="hljs-comment">;</span>
        btnAddDetail<span class="hljs-preprocessor">.setForeground</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Color</span>(<span class="hljs-number">0</span>, <span class="hljs-number">204</span>, <span class="hljs-number">204</span>))<span class="hljs-comment">;</span>
        btnAddDetail<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"\u6dfb\u52a0\u5230\u660e\u7ec6"</span>)<span class="hljs-comment">;</span>
        btnAddDetail<span class="hljs-preprocessor">.addActionListener</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionListener</span>() {
            public void actionPerformed(java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionEvent</span> evt) {
                btnAddDetailActionPerformed(evt)<span class="hljs-comment">;</span>
            }
        })<span class="hljs-comment">;</span>
        <span class="hljs-keyword">add</span>(btnAddDetail)<span class="hljs-comment">;</span>
        btnAddDetail<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">480</span>, <span class="hljs-number">280</span>, <span class="hljs-number">120</span>, <span class="hljs-number">60</span>)<span class="hljs-comment">;</span>

        jtxArea<span class="hljs-preprocessor">.setColumns</span>(<span class="hljs-number">20</span>)<span class="hljs-comment">;</span>
        jtxArea<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"Dialog"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">14</span>))<span class="hljs-comment">;</span>
        jtxArea<span class="hljs-preprocessor">.setForeground</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Color</span>(<span class="hljs-number">0</span>, <span class="hljs-number">153</span>, <span class="hljs-number">51</span>))<span class="hljs-comment">;</span>
        jtxArea<span class="hljs-preprocessor">.setRows</span>(<span class="hljs-number">5</span>)<span class="hljs-comment">;</span>
        jtxArea<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"\u64cd\u4f5c\u8bf4\u660e\uff1a\n1\u3001\u9009\u62e9\u56fe\u4e66\u540d\u79f0\uff0c\u586b\u5199\u8fdb\u8d27\u6570\u91cf\u3002\n2\u3001\u518d\u70b9\u51fb\u4e0b\u65b9\u7684\u6dfb\u52a0\u5230\u660e\u7ec6\u6309\u94ae\uff0c\n      \u6dfb\u52a0\u6570\u636e\u5230\u8fdb\u8d27\u660e\u7ec6\u5217\u8868\uff0c\n      \u5982\u679c\u8fd8\u6709\u56fe\u4e66\uff0c\u91cd\u590d\u524d\u9762\u7684\u64cd\u4f5c\u3002\n3\u3001\u6700\u540e\u70b9\u51fb\u6dfb\u52a0\u6309\u94ae\u3002"</span>)<span class="hljs-comment">;</span>
        jScrollPane2<span class="hljs-preprocessor">.setViewportView</span>(jtxArea)<span class="hljs-comment">;</span>

        <span class="hljs-keyword">add</span>(jScrollPane2)<span class="hljs-comment">;</span>
        jScrollPane2<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">440</span>, <span class="hljs-number">100</span>, <span class="hljs-number">340</span>, <span class="hljs-number">140</span>)<span class="hljs-comment">;</span>

        btnBack<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"Dialog"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">24</span>))<span class="hljs-comment">;</span>
        btnBack<span class="hljs-preprocessor">.setForeground</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Color</span>(<span class="hljs-number">0</span>, <span class="hljs-number">204</span>, <span class="hljs-number">204</span>))<span class="hljs-comment">;</span>
        btnBack<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"\u8fd4\u56de"</span>)<span class="hljs-comment">;</span>
        btnBack<span class="hljs-preprocessor">.addActionListener</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionListener</span>() {
            public void actionPerformed(java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionEvent</span> evt) {
                btnBackActionPerformed(evt)<span class="hljs-comment">;</span>
            }
        })<span class="hljs-comment">;</span>
        <span class="hljs-keyword">add</span>(btnBack)<span class="hljs-comment">;</span>
        btnBack<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">530</span>, <span class="hljs-number">510</span>, <span class="hljs-number">120</span>, <span class="hljs-number">60</span>)<span class="hljs-comment">;</span>

        btnMainAdd<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"Dialog"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">24</span>))<span class="hljs-comment">;</span>
        btnMainAdd<span class="hljs-preprocessor">.setForeground</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Color</span>(<span class="hljs-number">0</span>, <span class="hljs-number">204</span>, <span class="hljs-number">204</span>))<span class="hljs-comment">;</span>
        btnMainAdd<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"\u6dfb\u52a0"</span>)<span class="hljs-comment">;</span>
        btnMainAdd<span class="hljs-preprocessor">.addActionListener</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionListener</span>() {
            public void actionPerformed(java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionEvent</span> evt) {
                btnMainAddActionPerformed(evt)<span class="hljs-comment">;</span>
            }
        })<span class="hljs-comment">;</span>
        <span class="hljs-keyword">add</span>(btnMainAdd)<span class="hljs-comment">;</span>
        btnMainAdd<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">120</span>, <span class="hljs-number">510</span>, <span class="hljs-number">120</span>, <span class="hljs-number">60</span>)<span class="hljs-comment">;</span>
    }// &lt;/editor-fold&gt;
    //GEN-END:initComponents

    private void btnMainAddActionPerformed(java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionEvent</span> evt) {
        //<span class="hljs-number">1</span>收集参数 
        String inUserName = combUser<span class="hljs-preprocessor">.getSelectedItem</span>()<span class="hljs-preprocessor">.toString</span>()<span class="hljs-comment">;</span>
        if(combUser<span class="hljs-preprocessor">.getSelectedIndex</span>()==<span class="hljs-number">0</span>){
            JOptionPane<span class="hljs-preprocessor">.showMessageDialog</span>(mainFrame, <span class="hljs-string">"请选择用户类型！"</span>)<span class="hljs-comment">;</span>
            return <span class="hljs-comment">;</span>
        }
        //System<span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.println</span>(inUserName)<span class="hljs-comment">;</span>

        String inUserUuid = UserEbiFactory<span class="hljs-preprocessor">.getUserEbi</span>()<span class="hljs-preprocessor">.getUserByName</span>(inUserName)<span class="hljs-preprocessor">.getUuid</span>()<span class="hljs-comment">;</span>

        //<span class="hljs-number">2</span>组织参数
        InMainModel inMain = new InMainModel()<span class="hljs-comment">;</span>
        inMain<span class="hljs-preprocessor">.setInUserId</span>(inUserUuid)<span class="hljs-comment">;</span>
        inMain<span class="hljs-preprocessor">.setInUserName</span>(inUserName)<span class="hljs-comment">;//设置：专为外键显示而补的数据</span>

        //<span class="hljs-number">3</span>调用逻辑层
        //System<span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.println</span>(inMain)<span class="hljs-comment">;</span>
        //System<span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.println</span>(details)<span class="hljs-comment">;</span>
        InMainEbiFactory<span class="hljs-preprocessor">.getInMainEbi</span>()<span class="hljs-preprocessor">.create</span>(inMain, details)<span class="hljs-comment">;</span>

        //<span class="hljs-number">4</span>返回到结果页面
        mainFrame<span class="hljs-preprocessor">.setContentPane</span>( new InListPanel(mainFrame))<span class="hljs-comment">;</span>
        mainFrame<span class="hljs-preprocessor">.validate</span>()<span class="hljs-comment">;</span>

    }

    private void btnAddDetailActionPerformed(java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionEvent</span> evt) {
        //<span class="hljs-number">1</span>收集参数
        String str = combBook<span class="hljs-preprocessor">.getSelectedItem</span>()<span class="hljs-preprocessor">.toString</span>()<span class="hljs-comment">;</span>

        //防范未选择图书
        if (combBook<span class="hljs-preprocessor">.getSelectedIndex</span>() == <span class="hljs-number">0</span>) {
            JOptionPane<span class="hljs-preprocessor">.showMessageDialog</span>(mainFrame, <span class="hljs-string">"请选择图书！"</span>)<span class="hljs-comment">;</span>
            return<span class="hljs-comment">;</span>
        }
        String strs[] = str<span class="hljs-preprocessor">.split</span>(<span class="hljs-string">","</span>)<span class="hljs-comment">;</span>
        String bookUuid = strs[<span class="hljs-number">0</span>]<span class="hljs-comment">;</span>
        String bookName = strs[<span class="hljs-number">1</span>]<span class="hljs-comment">;</span>
        //      System<span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.println</span>(bookName)<span class="hljs-comment">;</span>
        //      System<span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.println</span>(bookUuid)<span class="hljs-comment">;</span>

        int sumNum = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
        try {
            sumNum = Integer<span class="hljs-preprocessor">.parseInt</span>(tfdInNum<span class="hljs-preprocessor">.getText</span>())<span class="hljs-comment">;</span>
            if (sumNum &lt; <span class="hljs-number">0</span>) {
                throw new NumberFormatException()<span class="hljs-comment">;</span>
            }
        } catch (NumberFormatException e) {
            JOptionPane<span class="hljs-preprocessor">.showMessageDialog</span>(mainFrame, <span class="hljs-string">"进货数量格式错误！"</span>)<span class="hljs-comment">;</span>
            return<span class="hljs-comment">;</span>
        }

        //<span class="hljs-number">2</span>组织
        InDetailModel detail = new InDetailModel()<span class="hljs-comment">;</span>
        detail<span class="hljs-preprocessor">.setBookId</span>(bookUuid)<span class="hljs-comment">;</span>
        detail<span class="hljs-preprocessor">.setSumNum</span>(sumNum)<span class="hljs-comment">;</span>
        //为显示给用户看，补的数据
        detail<span class="hljs-preprocessor">.setBookName</span>(bookName)<span class="hljs-comment">;</span>

        //<span class="hljs-number">3</span>添加到List当中---真正的明细数据是details，界面上的只是回显信息
        details<span class="hljs-preprocessor">.add</span>(detail)<span class="hljs-comment">;</span>
        echoDetails()<span class="hljs-comment">;</span>
    }

    private void echoDetails() {
        String echoStrs[] = new String[details<span class="hljs-preprocessor">.size</span>()]<span class="hljs-comment">;</span>

        for (int i = <span class="hljs-number">0</span><span class="hljs-comment">; i &lt; details.size(); i++) {</span>
            InDetailModel detail = details<span class="hljs-preprocessor">.get</span>(i)<span class="hljs-comment">;</span>
            echoStrs[i] = <span class="hljs-string">"《"</span> + detail<span class="hljs-preprocessor">.getBookName</span>() + <span class="hljs-string">"》,"</span>
                    + detail<span class="hljs-preprocessor">.getSumNum</span>() + <span class="hljs-string">"本"</span><span class="hljs-comment">;</span>
        }
        jListDetails<span class="hljs-preprocessor">.setListData</span>(echoStrs)<span class="hljs-comment">;</span>
    }

    private void btnBackActionPerformed(java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionEvent</span> evt) {
        back()<span class="hljs-comment">;</span>
    }

    private void back() {
        mainFrame<span class="hljs-preprocessor">.setContentPane</span>(new InListPanel(mainFrame))<span class="hljs-comment">;</span>
        mainFrame<span class="hljs-preprocessor">.validate</span>()<span class="hljs-comment">;</span>
    }

    //GEN-BEGIN:variables
    // Variables declaration - do not modify
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JButton</span> btnAddDetail<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JButton</span> btnBack<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JButton</span> btnMainAdd<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JComboBox</span> combBook<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JComboBox</span> combUser<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JLabel</span> jLabel1<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JLabel</span> jLabel4<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JLabel</span> jLabel5<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JLabel</span> jLabel6<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JLabel</span> jLabel7<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JList</span> jListDetails<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JScrollPane</span> jScrollPane1<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JScrollPane</span> jScrollPane2<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JTextArea</span> jtxArea<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JTextField</span> tfdInNum<span class="hljs-comment">;</span>
    // End of variables declaration//GEN-END:variables

}</code></pre>

<p>好了，这个模块也算是完成了一半了，接下来的就是进货的查询界面没写了。 <br />
还有list界面的那个显示问题。 <br />
下一个系列会解决的！</p></div>&#13;
        <script type="text/javascript">&#13;
            $(function () {&#13;
                $('pre.prettyprint code').each(function () {&#13;
                    var lines = $(this).text().split('\n').length;&#13;
                    var $numbering = $('&lt;ul/&gt;').addClass('pre-numbering').hide();&#13;
                    $(this).addClass('has-numbering').parent().append($numbering);&#13;
                    for (i = 1; i &lt;= lines; i++) {&#13;
                        $numbering.append($('&lt;li/&gt;').text(i));&#13;
                    };&#13;
                    $numbering.fadeIn(1700);&#13;
                });&#13;
            });&#13;
        </script>&#13;
   &#13;
