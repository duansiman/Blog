
        <div class="markdown_views"><p>很容易将建造者模式和工厂方法模式混淆，他们的区别是工厂方法模式侧重生产出相同的对象实例，而建造者模式强调的是对同一个对象实例的生产，不同的生产工艺（方法的执行顺序和对属性的赋值）将产生不同效果的对象</p>

<p>类图 <br />
<img src="http://img.blog.csdn.net/20170321085630777?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcmVucGVuZ2RkeHg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>

<p>java实现</p>

<p>产品类</p>

<pre class="prettyprint"><code class=" hljs cs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> Product {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setPart1</span>(){

    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setPart2</span>(){

    }
}</code></pre>

<p>建造者抽象类</p>



<pre class="prettyprint"><code class=" hljs cs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> AbsBuilder {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> Product <span class="hljs-title">getProduct</span>();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProductPart</span>();

}
</code></pre>

<p>建造者实现类</p>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Product1Builder</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbsBuilder</span> {</span>

    <span class="hljs-keyword">private</span> Product mProduct = <span class="hljs-keyword">new</span> Product();

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> Product <span class="hljs-title">getProduct</span>() {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.mProduct;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProductPart</span>() {

        <span class="hljs-keyword">this</span>.mProduct.setPart1();

        <span class="hljs-keyword">this</span>.mProduct.setPart2();

    }
}</code></pre>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Product3Builder</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbsBuilder</span> {</span>

    <span class="hljs-keyword">private</span> Product mProduct = <span class="hljs-keyword">new</span> Product();

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> Product <span class="hljs-title">getProduct</span>() {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.mProduct;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setProductPart</span>() {
        <span class="hljs-keyword">this</span>.mProduct.setPart2();
    }
}</code></pre>

<p>场景类</p>



<pre class="prettyprint"><code class=" hljs cs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> Client {

    <span class="hljs-keyword">public</span> Product <span class="hljs-title">getProduct1</span>(){
        AbsBuilder builder = <span class="hljs-keyword">new</span> Product1Builder();
        builder.setProductPart();
        <span class="hljs-keyword">return</span> builder.getProduct();
    }

    <span class="hljs-keyword">public</span> Product <span class="hljs-title">getProduct3</span>(){
        AbsBuilder builder = <span class="hljs-keyword">new</span> Product3Builder();
        builder.setProductPart();
        <span class="hljs-keyword">return</span> builder.getProduct();
    }
}</code></pre>

<p>php实现</p>



<pre class="prettyprint"><code class=" hljs php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Product</span>
{</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setPart1</span><span class="hljs-params">()</span>
    {</span>
        <span class="hljs-keyword">echo</span> <span class="hljs-string">'setPart1'</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setPart2</span><span class="hljs-params">()</span>
    {</span>
        <span class="hljs-keyword">echo</span> <span class="hljs-string">'setPart2'</span>;
    }
}


<span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AbsBuilder</span>
{</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getProduct</span><span class="hljs-params">()</span>;</span>

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setProductPart</span><span class="hljs-params">()</span>;</span>
}


<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Product1Builder</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbsBuilder</span>
{</span>

    <span class="hljs-keyword">public</span> <span class="hljs-variable">$product</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">()</span>
    {</span>
        <span class="hljs-variable">$this</span>-&gt;product = <span class="hljs-keyword">new</span> Product;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getProduct</span><span class="hljs-params">()</span>
    {</span>
        <span class="hljs-keyword">return</span> <span class="hljs-variable">$this</span>-&gt;product;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setProductPart</span><span class="hljs-params">()</span>
    {</span>
        <span class="hljs-variable">$this</span>-&gt;product-&gt;setPart1();
        <span class="hljs-variable">$this</span>-&gt;product-&gt;setPart2();

    }

}


<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Product2Builder</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbsBuilder</span>
{</span>

    <span class="hljs-keyword">public</span> <span class="hljs-variable">$product</span>;

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">()</span>
    {</span>
        <span class="hljs-variable">$this</span>-&gt;product = <span class="hljs-keyword">new</span> Product;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getProduct</span><span class="hljs-params">()</span>
    {</span>
        <span class="hljs-keyword">return</span> <span class="hljs-variable">$this</span>-&gt;product;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setProductPart</span><span class="hljs-params">()</span>
    {</span>
        <span class="hljs-variable">$this</span>-&gt;product-&gt;setPart1();

    }

}


<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Client</span>
{</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getProduct1</span><span class="hljs-params">()</span>
    {</span>
        <span class="hljs-variable">$builder</span> = <span class="hljs-keyword">new</span> Product1Builder;
        <span class="hljs-variable">$builder</span>-&gt;setProductPart();
        <span class="hljs-keyword">return</span> <span class="hljs-variable">$builder</span>-&gt;getProduct();
    }
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">getProduct3</span><span class="hljs-params">()</span>
    {</span>
        <span class="hljs-variable">$builder</span> = <span class="hljs-keyword">new</span> Product2Builder;
        <span class="hljs-variable">$builder</span>-&gt;setProductPart();
        <span class="hljs-keyword">return</span> <span class="hljs-variable">$builder</span>-&gt;getProduct();
    }

}

<span class="hljs-variable">$client</span> = <span class="hljs-keyword">new</span> Client;
<span class="hljs-variable">$client</span>-&gt;getProduct1();
<span class="hljs-variable">$client</span>-&gt;getProduct3();</code></pre></div>&#13;
        <script type="text/javascript">&#13;
            $(function () {&#13;
                $('pre.prettyprint code').each(function () {&#13;
                    var lines = $(this).text().split('\n').length;&#13;
                    var $numbering = $('&lt;ul/&gt;').addClass('pre-numbering').hide();&#13;
                    $(this).addClass('has-numbering').parent().append($numbering);&#13;
                    for (i = 1; i &lt;= lines; i++) {&#13;
                        $numbering.append($('&lt;li/&gt;').text(i));&#13;
                    };&#13;
                    $numbering.fadeIn(1700);&#13;
                });&#13;
            });&#13;
        </script>&#13;
   &#13;
