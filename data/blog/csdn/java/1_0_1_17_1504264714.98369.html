
        <div class="markdown_views"><p>场景：当有很多种类的操作时，并且每种操作都有h很多小的步骤，但是他们的总体算法逻辑相同，这种情况适合模板方法模式</p>

<p>类图 <br />
<img src="http://img.blog.csdn.net/20170320081241012?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcmVucGVuZ2RkeHg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>

<p>java实现 <br />
模板方法抽象类</p>



<pre class="prettyprint"><code class=" hljs cs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> AbstractModule {

    <span class="hljs-keyword">public</span> final <span class="hljs-keyword">void</span> <span class="hljs-title">moduleFanction</span>(){
        step1();
        step2();
    }

    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title">step1</span>();

    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title">step2</span>();
}
</code></pre>



<pre class="prettyprint"><code class=" hljs axapta">ublic <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Module1</span> <span class="hljs-inheritance"><span class="hljs-keyword">extends</span></span> <span class="hljs-title">AbstractModule</span> {</span>
    @Override
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> step1() {

    }

    @Override
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> step2() {

    }
}</code></pre>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Module2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractModule</span> {</span>
    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">step1</span>() {

    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">step2</span>() {

    }
}
</code></pre>

<p>php实现</p>



<pre class="prettyprint"><code class=" hljs php">
<span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AbstractModule</span>
{</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">moduleFunction</span><span class="hljs-params">()</span>
    {</span>
        <span class="hljs-variable">$this</span>-&gt;step1();
        <span class="hljs-variable">$this</span>-&gt;step2();
    }

    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">step1</span><span class="hljs-params">()</span>;</span>

    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">step2</span><span class="hljs-params">()</span>;</span>
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Module1</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractModule</span>
{</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">step1</span><span class="hljs-params">()</span>
    {</span>
        <span class="hljs-keyword">echo</span> <span class="hljs-string">'module1 step1'</span>;
    }

    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">step2</span><span class="hljs-params">()</span>
    {</span>
        <span class="hljs-keyword">echo</span> <span class="hljs-string">'module1 step2'</span>;
    }
}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Module2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractModule</span>
{</span>
    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">step1</span><span class="hljs-params">()</span>
    {</span>
        <span class="hljs-keyword">echo</span> <span class="hljs-string">'module2 step1'</span>;
    }

    <span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">step2</span><span class="hljs-params">()</span>
    {</span>
        <span class="hljs-keyword">echo</span> <span class="hljs-string">'module2 step2'</span>;
    }
}

<span class="hljs-variable">$module1</span> = <span class="hljs-keyword">new</span> module1;
<span class="hljs-variable">$module1</span>-&gt;moduleFunction();

<span class="hljs-variable">$module2</span> = <span class="hljs-keyword">new</span> Module2;
<span class="hljs-variable">$module2</span>-&gt;moduleFunction();
</code></pre>

<p>扩展：当有需求是step1一定执行，但是step2，在一定条件下才执行，就要设置钩子方法来控制step2的执行</p>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AbstractModule</span> {</span>

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title">moduleFanction</span>(){
        step1();
        <span class="hljs-keyword">if</span>(isHook()){
            step2();
        }
    }

    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title">step1</span>();

    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title">step2</span>();

    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">isHook</span>(){
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
    }
}</code></pre>

<p>然后子类根据具体额业务逻辑重写isHook方法来控制父类的step2的执行</p></div>&#13;
        <script type="text/javascript">&#13;
            $(function () {&#13;
                $('pre.prettyprint code').each(function () {&#13;
                    var lines = $(this).text().split('\n').length;&#13;
                    var $numbering = $('&lt;ul/&gt;').addClass('pre-numbering').hide();&#13;
                    $(this).addClass('has-numbering').parent().append($numbering);&#13;
                    for (i = 1; i &lt;= lines; i++) {&#13;
                        $numbering.append($('&lt;li/&gt;').text(i));&#13;
                    };&#13;
                    $numbering.fadeIn(1700);&#13;
                });&#13;
            });&#13;
        </script>&#13;
   &#13;
