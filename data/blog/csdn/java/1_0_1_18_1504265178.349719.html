
        <div class="markdown_views"><p><strong>摘要：</strong></p>

<p>　　本文首先从四个方面给出了在使用JSP过程中可能出现中文乱码的情形，具体包括JSP页面中文乱码、JSP源文件中文乱码、GET 请求的请求参数为中文乱码 和 POST 请求的请求参数为中文乱码四种情形，并针对每种情形给出了相应的终极解决方案。</p>

<hr />



<h2 id="一-jsp页面与jsp源文件乱码">一. JSP页面与JSP源文件乱码</h2>

<p>　　在介绍JSP页面与JSP源文件的乱码问题前，首先我们必须对JSP页面中文乱码问题与JSP源文件中文乱码问题有一个清晰的概念，即：</p>

<ul>
<li><font color="red">JSP页面中文乱码问题是指用户在浏览器看到的服务器所返回的jsp页面中，中文字符不能正常显示；</font></li>
<li><p><font color="red">JSP源文件中文乱码问题是指在编辑器保存JSP源文件后，中文字符不能正常显示。</font></p>

<p>因此，这是两个不同层面的问题。接下来，我们分别解决这两个问题。</p></li>
</ul>

<hr />

<p><strong>1、JSP页面乱码</strong></p>

<p>　　我们先在记事本中编写一个JSP程序，如下：</p>



<pre class="prettyprint"><code class="language-jsp hljs xml"><span class="hljs-comment">&lt;!-- 示例1 --&gt;</span>
<span class="vbscript">&lt;%@ page language=<span class="hljs-string">"java"</span> import=<span class="hljs-string">"java.util.*"</span>%&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span>JSP页面中文乱码<span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
        中国<span class="hljs-tag">&lt;<span class="hljs-title">br</span>&gt;</span>
        <span class="vbscript">&lt;%=<span class="hljs-string">"中国"</span> %&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span></code></pre>

<p>　　上面这个JSP程序是在页面显示几句中文而且标题也是中文，运行后在浏览器中显示如图所示：</p>

<p>　　　　　　　　　　　　　　<img src="http://static.zybuluo.com/Rico123/ofk7gofpa4ohqan95j10n9ee/JSP%E9%A1%B5%E9%9D%A2%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81.png" alt="JSP页面中文乱码.png-15.4kB" title="" /></p>

<p>　　<font color="DarkGreen"><b>原因在于没有在JSP中指定 <font color="red"><b>页面显示的编码</b></font></b></font>，消除乱码的解决方案就是将上面代码中的page命令修改成如下所示即可：</p>



<pre class="prettyprint"><code class="language-jsp hljs xml"><span class="hljs-comment">&lt;!-- 示例2 --&gt;</span>
<span class="vbscript">&lt;%@ page language=<span class="hljs-string">"java"</span> import=<span class="hljs-string">"java.util.*"</span> pageEncoding=<span class="hljs-string">"utf-8"</span>%&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span>JSP页面中文乱码<span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
        中国<span class="hljs-tag">&lt;<span class="hljs-title">br</span>&gt;</span>
        <span class="vbscript">&lt;%=<span class="hljs-string">"中国"</span> %&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span></code></pre>

<p>　　再次运行中文正常显示，原理就是<font color="blue"><b> 向页面指定编码为utf-8，那么页面就会按照此编码来显示，于是乱码消失。</b></font></p>

<hr />

<p><strong>2、JSP源文件乱码</strong></p>

<p><font color="blue">1). JSP源文件乱码 与 Eclipse/MyEclipse 对JSP的默认编码设置</font></p>

<p>　　如果我们在Eclipse/MyEclipse中打开上面示例1的jsp源文件，由于Eclipse/MyEclipse中默认的JSP编码格式为ISO-8859-1，所以当打开由其他编辑器编辑的JSP文件时会出现乱码，如图所示：</p>

<p>　　　　　　　　　　　　　<img src="http://static.zybuluo.com/Rico123/c96c5dlv0tyc8aevrkbpny96/JSP%E6%BA%90%E7%A0%81%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81.png" alt="" title="" /></p>

<p>　　对于这个问题，我们只需要更改一下 Eclipse/MyEclipse 中对JSP的默认编码并update就可以了，修改的地方（我的MyEclipse版本为 10）如图所示:</p>

<p>　　　　　　　　　　　　<img src="http://static.zybuluo.com/Rico123/la42m0p79e2obloewgvsy1pu/myeclipse%E5%AF%B9JSP%E6%BA%90%E6%96%87%E4%BB%B6%E7%9A%84%E7%BC%96%E7%A0%81%20.png" alt="myeclipse对JSP源文件的编码 .png-31.6kB" title="" /></p>

<p>　　修改后，对于在Eclipse/MyEclipse所创建的任何一个JSP源文件，其默认编码方式均为 UTF-8，例如：</p>

<p>　　　　　　　　　　　　<img src="http://static.zybuluo.com/Rico123/f35dmmve3yxkgs8il8gymkhz/%E4%BF%AE%E6%94%B9%E5%90%8E%E7%9A%84%E6%95%88%E6%9E%9C.png" alt="修改后的效果.png-23.8kB" title="" /></p>

<hr />

<p>　　如果不做上述修改，如果我们在Eclipse/MyEclipse中编辑的JSP中存在中文字符，那么当我们保存该页面时，会弹出以下对话框：</p>

<p>　　　　　　　　　　　　　<img src="http://static.zybuluo.com/Rico123/tnk3rbd631qc3nh63dz2jilw/iso-8859-1.png" alt="iso-8859-1.png-11kB" title="" /></p>

<p>　　但是，我们如果我们提前按如上步骤设置后，JSP源文件就能正常保存、编译。</p>

<hr />

<p><font color="blue">2). Eclipse/MyEclipse 创建 JSP时 pageEncoding 的默认值设置</font></p>

<p>　　我们在编辑的JSP文件时，尤其在包含中文字符时，一定要在page编译指令中恰当地指明 pageEncoding 的值，否则在浏览器访问该JSP页面时，其中的中文就会显示为乱码。因为一旦缺省 pageEncoding 时，其值就会被默认指定为 “iso-8859-1”，该字符集不支持中文。此外，使用 Eclipse/MyEclipse 进行开发的伙伴们都知道，这两个IDE生成的JSP模板的pageEncoding的默认值是“iso-8859-1”。为方便开发，我们可以更改Eclipse/MyEclipse生成JSP模板时pageEncoding的默认值，修改的地方（我的MyEclipse版本为10）如图所示：</p>

<p>　　　　　　　　　　　　<img src="http://static.zybuluo.com/Rico123/j2oi08rx5tgpt5lqqu36yp94/pageEncoding.png" alt="pageEncoding.png-17.2kB" title="" /></p>

<p>　　这样，<font color="red"><b>通过以上两步的设置，当我们在 Eclipse/MyEclipse 中创建一个新的JSP文件时，该源文件在Eclipse/MyEclipse中的默认编码方式为utf-8，因此就不会导致 JSP源文件乱码；并且其 pageEncoding 的值会被自动设为“utf-8”，这就不会导致JSP页面乱码。</b></font></p>

<hr />



<h2 id="二-get-请求的请求参数为中文情形">二. GET 请求的请求参数为中文情形</h2>

<p><strong>1、URL传递参数中文乱码</strong></p>



<pre class="prettyprint"><code class="language-jsp hljs xml"><span class="hljs-comment">&lt;!-- 请求URL示例：http://localhost:8080/Demo/request/request2.jsp?name=大将&amp;gender=男 --&gt;</span>

<span class="vbscript">&lt;%@ page contentType=<span class="hljs-string">"text/html; charset=utf-8"</span> language=<span class="hljs-string">"java"</span>
    pageEncoding=<span class="hljs-string">"utf-8"</span> errorPage=<span class="hljs-string">""</span> import=<span class="hljs-string">"java.net.*"</span>%&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span>URL传递参数中文乱码<span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>

    <span class="vbscript">&lt;%! <span class="hljs-keyword">private</span> <span class="hljs-built_in">String</span> rawQueryString = <span class="hljs-literal">null</span>;  %&gt;</span>

    <span class="vbscript">&lt;%
        // 获取name请求参数的值
        <span class="hljs-built_in">String</span> name = <span class="hljs-built_in">request</span>.getParameter(<span class="hljs-string">"name"</span>);
        // 获取gender请求参数的值
        <span class="hljs-built_in">String</span> gender = <span class="hljs-built_in">request</span>.getParameter(<span class="hljs-string">"gender"</span>);

        out.print(<span class="hljs-string">"---------------------原生查询字符串-----------------------&lt;/br&gt;"</span>);
        rawQueryString = <span class="hljs-built_in">request</span>.getQueryString();
        out.print(rawQueryString + <span class="hljs-string">"&lt;/br&gt;"</span>);
    %&gt;</span>

    <span class="vbscript">&lt;%
        out.print(<span class="hljs-string">"&lt;/br&gt;---------------------方式一：直接打印请求参数-----------------------&lt;/br&gt;"</span>);
        out.print( <span class="hljs-string">"名字 ： "</span> + name +<span class="hljs-string">"&lt;/br&gt;"</span>);
        out.print( <span class="hljs-string">"性别 ： "</span> + gender + <span class="hljs-string">"&lt;/br&gt;"</span>);
    %&gt;</span>

    <span class="vbscript">&lt;%
        out.print(<span class="hljs-string">"&lt;/br&gt;---------------------方式二：利用String进行转码-----------------------&lt;/br&gt;"</span>);
        out.print( <span class="hljs-string">"名字 ： "</span> + <span class="hljs-keyword">new</span> <span class="hljs-built_in">String</span>(name.getBytes(<span class="hljs-string">"iso-8859-1"</span>),<span class="hljs-string">"utf-8"</span>) +<span class="hljs-string">"&lt;/br&gt;"</span>);
        out.print( <span class="hljs-string">"性别 ： "</span> + <span class="hljs-keyword">new</span> <span class="hljs-built_in">String</span>(gender.getBytes(<span class="hljs-string">"iso-8859-1"</span>),<span class="hljs-string">"utf-8"</span>) +<span class="hljs-string">"&lt;/br&gt;"</span>);
    %&gt;</span>

    <span class="vbscript">&lt;%
        out.print(<span class="hljs-string">"&lt;/br&gt;---------------------方式三：利用URLDecoder进行解码-----------------------&lt;/br&gt;"</span>);
        <span class="hljs-built_in">String</span> queryString = URLDecoder.decode(rawQueryString, <span class="hljs-string">"utf-8"</span>);
        <span class="hljs-built_in">String</span>[] queryParams = queryString.<span class="hljs-built_in">split</span>(<span class="hljs-string">"&amp;"</span>);

        out.print( <span class="hljs-string">"名字 ： "</span> + queryParams[<span class="hljs-number">0</span>].<span class="hljs-built_in">split</span>(<span class="hljs-string">"="</span>)[<span class="hljs-number">1</span>] + <span class="hljs-string">"&lt;/br&gt;"</span>);
        out.print( <span class="hljs-string">"性别 ： "</span> + queryParams[<span class="hljs-number">1</span>].<span class="hljs-built_in">split</span>(<span class="hljs-string">"="</span>)[<span class="hljs-number">1</span>] +<span class="hljs-string">"&lt;/br&gt;"</span>);
    %&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span></code></pre>

<hr />

<p>运行结果如下图所示：</p>

<p>　　　　　　　　　　　　　　<img src="http://static.zybuluo.com/Rico123/7s9qrwvg4bu0jtdwmb4c4iww/GET%20URL%E5%8F%82%E6%95%B0.png" alt="GET URL参数.png-32.9kB" title="" /></p>

<hr />

<p><strong>2、表单提交中文乱码</strong></p>

<p>　　该示例由 “收集参数的表单页” 和 “表单提交参数显示页”两部分构成。</p>

<p>收集参数的表单页:</p>



<pre class="prettyprint"><code class="language-jsp hljs xml"><span class="vbscript">&lt;%@ page contentType=<span class="hljs-string">"text/html; charset=utf-8"</span> language=<span class="hljs-string">"java"</span>
    pageEncoding=<span class="hljs-string">"utf-8"</span> errorPage=<span class="hljs-string">""</span>%&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span>收集参数的表单页<span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">form</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"form"</span> <span class="hljs-attribute">action</span>=<span class="hljs-value">"request1.jsp"</span> <span class="hljs-attribute">method</span>=<span class="hljs-value">"get"</span>&gt;</span>
        用户名：<span class="hljs-tag">&lt;<span class="hljs-title">br</span> /&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"name"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">hr</span> /&gt;</span> 性别：<span class="hljs-tag">&lt;<span class="hljs-title">br</span> /&gt;</span> 男：<span class="hljs-tag">&lt;<span class="hljs-title">input
</span>            <span class="hljs-attribute">type</span>=<span class="hljs-value">"radio"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"gender"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"男"</span>&gt;</span> 女：<span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"radio"</span>
                <span class="hljs-attribute">name</span>=<span class="hljs-value">"gender"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"女"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">hr</span> /&gt;</span> 喜欢的颜色：<span class="hljs-tag">&lt;<span class="hljs-title">br</span> /&gt;</span> 红：<span class="hljs-tag">&lt;<span class="hljs-title">input
</span>                    <span class="hljs-attribute">type</span>=<span class="hljs-value">"checkbox"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"color"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"红"</span>&gt;</span> 绿：<span class="hljs-tag">&lt;<span class="hljs-title">input
</span>                        <span class="hljs-attribute">type</span>=<span class="hljs-value">"checkbox"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"color"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"绿"</span>&gt;</span> 蓝：<span class="hljs-tag">&lt;<span class="hljs-title">input
</span>                            <span class="hljs-attribute">type</span>=<span class="hljs-value">"checkbox"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"color"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"蓝"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">hr</span> /&gt;</span> 来自的国家：<span class="hljs-tag">&lt;<span class="hljs-title">br</span> /&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-title">select</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"country"</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-title">option</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"中国"</span>&gt;</span>中国<span class="hljs-tag">&lt;/<span class="hljs-title">option</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-title">option</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"美国"</span>&gt;</span>美国<span class="hljs-tag">&lt;/<span class="hljs-title">option</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-title">option</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"俄罗斯"</span>&gt;</span>俄罗斯<span class="hljs-tag">&lt;/<span class="hljs-title">option</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-title">select</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-title">hr</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"submit"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"提交"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"reset"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"重置"</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">form</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span></code></pre>

<p>表单提交参数显示页：</p>



<pre class="prettyprint"><code class="language-jsp hljs avrasm">&lt;%@ page language=<span class="hljs-string">"java"</span> import=<span class="hljs-string">"java.util.*,java.net.*"</span>
    contentType=<span class="hljs-string">"text/html; charset=utf-8"</span> pageEncoding=<span class="hljs-string">"utf-8"</span>
    errorPage=<span class="hljs-string">""</span>%&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;表单提交中文乱码&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

    &lt;%! private String rawQueryString = null<span class="hljs-comment">;  %&gt;</span>

    &lt;%
        <span class="hljs-comment">/* 对于get请求，该语句对避免中文参数乱码不起任何作用 */</span>
        request<span class="hljs-preprocessor">.setCharacterEncoding</span>(<span class="hljs-string">"utf-8"</span>)<span class="hljs-comment">;</span>

        String name = request<span class="hljs-preprocessor">.getParameter</span>(<span class="hljs-string">"name"</span>)<span class="hljs-comment">;</span>
        String gender = request<span class="hljs-preprocessor">.getParameter</span>(<span class="hljs-string">"gender"</span>)<span class="hljs-comment">;</span>
        String[] color = request<span class="hljs-preprocessor">.getParameterValues</span>(<span class="hljs-string">"color"</span>)<span class="hljs-comment">;</span>
        String country = request<span class="hljs-preprocessor">.getParameter</span>(<span class="hljs-string">"country"</span>)<span class="hljs-comment">;</span>

        <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"---------------------原生查询字符串-----------------------&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>
        rawQueryString = request<span class="hljs-preprocessor">.getQueryString</span>()<span class="hljs-comment">;</span>
        if (rawQueryString != null)
            <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(rawQueryString + <span class="hljs-string">"&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>
    %&gt;

    &lt;%
        <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"&lt;/br&gt;---------------------方式一：直接打印请求参数-----------------------&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"name: "</span> + name + <span class="hljs-string">"&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"gender: "</span> + gender + <span class="hljs-string">"&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"color: "</span>)<span class="hljs-comment">;</span>
        for (String s : color) {
            <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.println</span>(s)<span class="hljs-comment">;</span>
        }
        <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"country: "</span> + country + <span class="hljs-string">"&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>
    %&gt;

    &lt;%
        <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"&lt;/br&gt;---------------------方式二：利用String进行转码-----------------------&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>

        <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"name: "</span> + new String(name<span class="hljs-preprocessor">.getBytes</span>(<span class="hljs-string">"ISO-8859-1"</span>), <span class="hljs-string">"utf-8"</span>) + <span class="hljs-string">"&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"gender: "</span> + new String(gender<span class="hljs-preprocessor">.getBytes</span>(<span class="hljs-string">"ISO-8859-1"</span>), <span class="hljs-string">"utf-8"</span>) + <span class="hljs-string">"&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"color: "</span>)<span class="hljs-comment">;</span>
        for (String s : color) {
            <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.println</span>(new String(s<span class="hljs-preprocessor">.getBytes</span>(<span class="hljs-string">"ISO-8859-1"</span>), <span class="hljs-string">"utf-8"</span>))<span class="hljs-comment">;</span>
        }
        <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"country: "</span> + new String(country<span class="hljs-preprocessor">.getBytes</span>(<span class="hljs-string">"ISO-8859-1"</span>), <span class="hljs-string">"utf-8"</span>) + <span class="hljs-string">"&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>
    %&gt;

    &lt;%
        <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"&lt;/br&gt;---------------------方式三：利用URLDecoder进行解码-----------------------&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>

        if (rawQueryString != null) {
            String queryString = URLDecoder<span class="hljs-preprocessor">.decode</span>(rawQueryString, <span class="hljs-string">"utf-8"</span>)<span class="hljs-comment">;</span>
            <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"解码后的字符串 ： "</span> + queryString)<span class="hljs-comment">;</span>

            String[] queryParams = queryString<span class="hljs-preprocessor">.split</span>(<span class="hljs-string">"&amp;"</span>)<span class="hljs-comment">;</span>

            <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"name: "</span> + queryParams[<span class="hljs-number">0</span>]<span class="hljs-preprocessor">.split</span>(<span class="hljs-string">"="</span>)[<span class="hljs-number">1</span>] + <span class="hljs-string">"&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>
            <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"gender: "</span> + queryParams[<span class="hljs-number">1</span>]<span class="hljs-preprocessor">.split</span>(<span class="hljs-string">"="</span>)[<span class="hljs-number">1</span>] + <span class="hljs-string">"&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>
            <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"color: "</span>)<span class="hljs-comment">;</span>
            for (String s : queryParams) {
                if(s<span class="hljs-preprocessor">.split</span>(<span class="hljs-string">"="</span>)[<span class="hljs-number">0</span>]<span class="hljs-preprocessor">.equals</span>(<span class="hljs-string">"color"</span>))
                    <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.println</span>(s<span class="hljs-preprocessor">.split</span>(<span class="hljs-string">"="</span>)[<span class="hljs-number">1</span>])<span class="hljs-comment">;</span>
            }
            <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>
            <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"country: "</span> + queryParams[queryParams<span class="hljs-preprocessor">.length</span>-<span class="hljs-number">1</span>]<span class="hljs-preprocessor">.split</span>(<span class="hljs-string">"="</span>)[<span class="hljs-number">1</span>] + <span class="hljs-string">"&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>
        } 
    %&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

<hr />

<p>运行结果如下图所示：</p>

<p>　　　　　　　　　　　　<img src="http://static.zybuluo.com/Rico123/oq6j2c43m8xhqcyc5v7fbala/GET%E8%A1%A8%E5%8D%95%E5%AE%9E%E4%BE%8B%E7%BB%93%E6%9E%9C.png" alt="GET表单实例结果.png-55.1kB" title="" /></p>

<hr />

<p><strong>3、GET 请求的请求参数为中文情形小结</strong></p>

<p>　　<font color="red"><b>只要我们以GET形式提交请求，无论是以表单形式提交还是以URL形式提交，如果参数中存在中文字符，那么我们必须进行相应的转码（借助String类）或者解码（借助URLDecoder类），</b></font>关于 URLDecoder 的详细介绍见我的博文<a href="http://blog.csdn.net/justloveyou_/article/details/57156039">《使用 URLDecoder 和 URLEncoder 对中文进行编码和解码》</a>。特别地，有五点需要注意：</p>

<ul>
<li><p><font color="blue"><b>request.getQueryString() 所返回的原生查询字符串只适用于 GET请求  ，若对 POST请求 使用，则返回 null;</b></font></p></li>
<li><p><font color="blue"><b>利用 URLDecoder 进行解码时，必须先对原生查询字符串解码，而后获取各请求参数。如果先获取各个请求参数，再依次解码，则仍是乱码；</b></font></p></li>
<li><p><font color="blue"><b>使用String进行 转码时，往往都是先从 ISO-8859-1 格式的字符串中取出字节内容，然后再用页面相应的编码格式重新构造一个新的字符串，像本示例（new String(country.getBytes(“ISO-8859-1”), “utf-8”)）中的 一样。这样就可以支持中文字符的正常取值和显示；</b></font></p></li>
<li><p><font color="blue"><b>利用 URLDecoder 进行解码时，所采用的解码字符集取决于浏览器（本文所有实验都是基于 Google Chrome 的）。对于中文环境而言，一般要么是 UTF-8，要么是 GBK ；</b></font></p></li>
<li><p><font color="blue"><b>对于 GET请求，语句 request.setCharacterEncoding(“utf-8”);  对避免中文参数乱码起不到任何作用。</b></font></p>

<p>　　 <br />
　经过上面的处理，GET请求的中文参数乱码问题已经得到解决。但是如果上面的表单中的输入项不止几项，那么每个输入项都需要进行编码转换，那样就很麻烦了。这时，我们就用到了大名鼎鼎的过滤器 filter 了。</p></li>
</ul>

<hr />



<h2 id="三-post-请求的请求参数为中文情形">三. POST 请求的请求参数为中文情形</h2>

<p>　　一般地，我们以POST形式提交请求，都是以表单形式进行并且 form 的 method 属性为 post。下面的示例对上面的示例做了一些修改，也由 “收集参数的表单页” 和 “表单提交参数显示页” 两部分构成：</p>

<p>收集参数的表单页:</p>



<pre class="prettyprint"><code class="language-jsp hljs xml"><span class="vbscript">&lt;%@ page contentType=<span class="hljs-string">"text/html; charset=utf-8"</span> language=<span class="hljs-string">"java"</span>
    pageEncoding=<span class="hljs-string">"utf-8"</span> errorPage=<span class="hljs-string">""</span>%&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span>收集参数的表单页<span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">form</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"form"</span> <span class="hljs-attribute">action</span>=<span class="hljs-value">"request1.jsp"</span> <span class="hljs-attribute">method</span>=<span class="hljs-value">"post"</span>&gt;</span>
        用户名：<span class="hljs-tag">&lt;<span class="hljs-title">br</span> /&gt;</span> <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"name"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">hr</span> /&gt;</span> 性别：<span class="hljs-tag">&lt;<span class="hljs-title">br</span> /&gt;</span> 男：<span class="hljs-tag">&lt;<span class="hljs-title">input
</span>            <span class="hljs-attribute">type</span>=<span class="hljs-value">"radio"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"gender"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"男"</span>&gt;</span> 女：<span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"radio"</span>
                <span class="hljs-attribute">name</span>=<span class="hljs-value">"gender"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"女"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">hr</span> /&gt;</span> 喜欢的颜色：<span class="hljs-tag">&lt;<span class="hljs-title">br</span> /&gt;</span> 红：<span class="hljs-tag">&lt;<span class="hljs-title">input
</span>                    <span class="hljs-attribute">type</span>=<span class="hljs-value">"checkbox"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"color"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"红"</span>&gt;</span> 绿：<span class="hljs-tag">&lt;<span class="hljs-title">input
</span>                        <span class="hljs-attribute">type</span>=<span class="hljs-value">"checkbox"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"color"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"绿"</span>&gt;</span> 蓝：<span class="hljs-tag">&lt;<span class="hljs-title">input
</span>                            <span class="hljs-attribute">type</span>=<span class="hljs-value">"checkbox"</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"color"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"蓝"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">hr</span> /&gt;</span> 来自的国家：<span class="hljs-tag">&lt;<span class="hljs-title">br</span> /&gt;</span>
                                <span class="hljs-tag">&lt;<span class="hljs-title">select</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"country"</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-title">option</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"中国"</span>&gt;</span>中国<span class="hljs-tag">&lt;/<span class="hljs-title">option</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-title">option</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"美国"</span>&gt;</span>美国<span class="hljs-tag">&lt;/<span class="hljs-title">option</span>&gt;</span>
                                    <span class="hljs-tag">&lt;<span class="hljs-title">option</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"俄罗斯"</span>&gt;</span>俄罗斯<span class="hljs-tag">&lt;/<span class="hljs-title">option</span>&gt;</span>
                            <span class="hljs-tag">&lt;/<span class="hljs-title">select</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-title">hr</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"submit"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"提交"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"reset"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"重置"</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">form</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span></code></pre>

<p>表单提交参数显示页：</p>



<pre class="prettyprint"><code class="language-jsp hljs avrasm">&lt;%@ page language=<span class="hljs-string">"java"</span> import=<span class="hljs-string">"java.util.*,java.net.*"</span>
    contentType=<span class="hljs-string">"text/html; charset=utf-8"</span> pageEncoding=<span class="hljs-string">"utf-8"</span>
    errorPage=<span class="hljs-string">""</span>%&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;表单提交中文乱码&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;

    &lt;%! private String rawQueryString = null<span class="hljs-comment">;  %&gt;</span>

    &lt;%
        <span class="hljs-comment">/* 对于post请求，该语句为避免中文参数乱码起到关键作用 */</span>
        request<span class="hljs-preprocessor">.setCharacterEncoding</span>(<span class="hljs-string">"utf-8"</span>)<span class="hljs-comment">;</span>

        String name = request<span class="hljs-preprocessor">.getParameter</span>(<span class="hljs-string">"name"</span>)<span class="hljs-comment">;</span>
        String gender = request<span class="hljs-preprocessor">.getParameter</span>(<span class="hljs-string">"gender"</span>)<span class="hljs-comment">;</span>
        String[] color = request<span class="hljs-preprocessor">.getParameterValues</span>(<span class="hljs-string">"color"</span>)<span class="hljs-comment">;</span>
        String country = request<span class="hljs-preprocessor">.getParameter</span>(<span class="hljs-string">"country"</span>)<span class="hljs-comment">;</span>

        <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"---------------------原生查询字符串-----------------------&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>
        rawQueryString = request<span class="hljs-preprocessor">.getQueryString</span>()<span class="hljs-comment">;</span>
        <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(rawQueryString + <span class="hljs-string">"&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>
    %&gt;

    &lt;%
        <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"&lt;/br&gt;---------------------方式一：直接打印请求参数-----------------------&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"name: "</span> + name + <span class="hljs-string">"&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"gender: "</span> + gender + <span class="hljs-string">"&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"color: "</span>)<span class="hljs-comment">;</span>
        for (String s : color) {
            <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.println</span>(s)<span class="hljs-comment">;</span>
        }
        <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"country: "</span> + country + <span class="hljs-string">"&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>
    %&gt;

    &lt;%
        <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"&lt;/br&gt;---------------------方式二：利用String进行转码-----------------------&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>

        <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"name: "</span> + new String(name<span class="hljs-preprocessor">.getBytes</span>(<span class="hljs-string">"ISO-8859-1"</span>), <span class="hljs-string">"utf-8"</span>) + <span class="hljs-string">"&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"gender: "</span> + new String(gender<span class="hljs-preprocessor">.getBytes</span>(<span class="hljs-string">"ISO-8859-1"</span>), <span class="hljs-string">"utf-8"</span>) + <span class="hljs-string">"&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"color: "</span>)<span class="hljs-comment">;</span>
        for (String s : color) {
            <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.println</span>(new String(s<span class="hljs-preprocessor">.getBytes</span>(<span class="hljs-string">"ISO-8859-1"</span>), <span class="hljs-string">"utf-8"</span>))<span class="hljs-comment">;</span>
        }
        <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"country: "</span> + new String(country<span class="hljs-preprocessor">.getBytes</span>(<span class="hljs-string">"ISO-8859-1"</span>), <span class="hljs-string">"utf-8"</span>) + <span class="hljs-string">"&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>
    %&gt;

    &lt;%
        <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"&lt;/br&gt;---------------------方式三：利用URLDecoder进行解码-----------------------&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>

        if (rawQueryString != null) {
            String queryString = URLDecoder<span class="hljs-preprocessor">.decode</span>(rawQueryString, <span class="hljs-string">"utf-8"</span>)<span class="hljs-comment">;</span>
            <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"解码后的字符串 ： "</span> + queryString)<span class="hljs-comment">;</span>

            String[] queryParams = queryString<span class="hljs-preprocessor">.split</span>(<span class="hljs-string">"&amp;"</span>)<span class="hljs-comment">;</span>

            <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"name: "</span> + queryParams[<span class="hljs-number">0</span>]<span class="hljs-preprocessor">.split</span>(<span class="hljs-string">"="</span>)[<span class="hljs-number">1</span>] + <span class="hljs-string">"&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>
            <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"gender: "</span> + queryParams[<span class="hljs-number">1</span>]<span class="hljs-preprocessor">.split</span>(<span class="hljs-string">"="</span>)[<span class="hljs-number">1</span>] + <span class="hljs-string">"&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>
            <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"color: "</span>)<span class="hljs-comment">;</span>
            for (String s : queryParams) {
                if(s<span class="hljs-preprocessor">.split</span>(<span class="hljs-string">"="</span>)[<span class="hljs-number">0</span>]<span class="hljs-preprocessor">.equals</span>(<span class="hljs-string">"color"</span>))
                    <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.println</span>(s<span class="hljs-preprocessor">.split</span>(<span class="hljs-string">"="</span>)[<span class="hljs-number">1</span>])<span class="hljs-comment">;</span>
            }
            <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>
            <span class="hljs-keyword">out</span><span class="hljs-preprocessor">.print</span>(<span class="hljs-string">"country: "</span> + queryParams[queryParams<span class="hljs-preprocessor">.length</span>-<span class="hljs-number">1</span>]<span class="hljs-preprocessor">.split</span>(<span class="hljs-string">"="</span>)[<span class="hljs-number">1</span>] + <span class="hljs-string">"&lt;/br&gt;"</span>)<span class="hljs-comment">;</span>
        } 
    %&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

<hr />

<p>运行结果如下图所示：</p>

<p>　　　　　　　　　　　　<img src="http://static.zybuluo.com/Rico123/6zozol20lizj6vf5n5fvsnqq/POST%E8%A1%A8%E5%8D%95%E5%8F%82%E6%95%B0.png" alt="POST表单参数.png-32.1kB" title="" /></p>

<hr />

<p>　　根据上面运行结果，我们知道： <font color="red"><b>对于POST请求，若其请求参数包含中文字符，那么我们只需在解析请求参数前加一句如下的代码即可。</b></font><font color="blue"><b>需要注意的是，这种方式对 Get请求起不到任何作用。此外，由于我们对请求已经重新编码，所以已经不需要使用 String类 再进行转码，否则画蛇添足。最后，对于 POST请求，request.getQueryString(); 返回的查询字符串为 null。</b></font></p>



<pre class="prettyprint"><code class="language-java hljs ">request.setCharacterEncoding(<span class="hljs-string">"utf-8"</span>);</code></pre>

<hr />



<h2 id="四-总结">四. 总结</h2>

<p>　　本文首先从四个方面给出了在使用JSP过程中可能出现中文乱码的情形，具体包括JSP页面中文乱码、JSP源文件中文乱码、GET 请求的请求参数为中文乱码 和POST 请求的请求参数为中文乱码四种情形，并针对每种情形给出了相应的终极解决方案。</p>

<p>　　更多关于 JSP技术的细节见我的其他两篇博客：<a href="http://blog.csdn.net/justloveyou_/article/details/55824500"> 《Java Web基础 — Jsp 综述(上)》</a> 和 <a href="http://blog.csdn.net/justloveyou_/article/details/57154560">《Java Web基础 — Jsp 综述(下)》</a>。</p>

<p>　　更多关于 JSP中文乱码问题的解决方案见我的另一篇博客：<a href="http://blog.csdn.net/justloveyou_/article/details/58048879">《 JSP中文乱码问题终极解决方案(上)》</a>。</p>

<hr />

<blockquote>
  <h2 id="引用">引用</h2>
  
  <p><a href="http://blog.csdn.net/beijiguangyong/article/details/7414247">JSP中文乱码问题终极解决方案</a></p>
</blockquote></div>&#13;
        <script type="text/javascript">&#13;
            $(function () {&#13;
                $('pre.prettyprint code').each(function () {&#13;
                    var lines = $(this).text().split('\n').length;&#13;
                    var $numbering = $('&lt;ul/&gt;').addClass('pre-numbering').hide();&#13;
                    $(this).addClass('has-numbering').parent().append($numbering);&#13;
                    for (i = 1; i &lt;= lines; i++) {&#13;
                        $numbering.append($('&lt;li/&gt;').text(i));&#13;
                    };&#13;
                    $numbering.fadeIn(1700);&#13;
                });&#13;
            });&#13;
        </script>&#13;
   &#13;
