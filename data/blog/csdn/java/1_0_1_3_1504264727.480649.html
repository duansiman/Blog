
        <div class="markdown_views"><p>定义一个类，使用它对数据类进行访问，可以减少对数据类的污染，并且可以随意定制数据展示和计算等。</p>

<p>类图 <br />
<img src="http://img.blog.csdn.net/20170411091836917?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcmVucGVuZ2RkeHg=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>

<p>java实现： <br />
数据源抽象类</p>



<pre class="prettyprint"><code class=" hljs cs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> Element {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doSomething</span>();

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title">accept</span>(IVisitor visitor);
}
</code></pre>

<p>数据源实现类</p>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConcreteElement1</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Element</span> {</span>
    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doSomething</span>() {

    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">accept</span>(IVisitor visitor) {
        visitor.visit(<span class="hljs-keyword">this</span>);
    }
}</code></pre>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConcreteElement2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Element</span> {</span>

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doSomething</span>() {

    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">accept</span>(IVisitor visitor) {
        visitor.visit(<span class="hljs-keyword">this</span>);
    }
}</code></pre>

<p>访问者接口</p>



<pre class="prettyprint"><code class=" hljs cs"><span class="hljs-keyword">public</span> <span class="hljs-keyword">interface</span> IVisitor {

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">visit</span>(ConcreteElement1 concreteElement1);

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">visit</span>(ConcreteElement2 concreteElement2);
}
</code></pre>

<p>访问者实现类</p>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Visitor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IVisitor</span> {</span>
    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">visit</span>(ConcreteElement1 concreteElement1) {
        concreteElement1.doSomething();
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">visit</span>(ConcreteElement2 concreteElement2) {
        concreteElement2.doSomething();
    }
}</code></pre>

<p>php实现  </p>

<pre class="prettyprint"><code class=" hljs php"><span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Element</span>
{</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">doSomething</span><span class="hljs-params">()</span>;</span>

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">accept</span><span class="hljs-params">(IVisitor <span class="hljs-variable">$visitor</span>)</span>;</span>
}


<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConcreteElement1</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Element</span>
{</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">doSomething</span><span class="hljs-params">()</span>
    {</span>
        <span class="hljs-keyword">echo</span> <span class="hljs-string">'ConcreteElement1'</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">accept</span><span class="hljs-params">(IVisitor <span class="hljs-variable">$visitor</span>)</span>
    {</span>
        <span class="hljs-variable">$visitor</span>-&gt;visit(<span class="hljs-variable">$this</span>);
    }
}


<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConcreteElement2</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">Element</span>
{</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">doSomething</span><span class="hljs-params">()</span>
    {</span>
        <span class="hljs-keyword">echo</span> <span class="hljs-string">'ConcreteElement2'</span>;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">accept</span><span class="hljs-params">(IVisitor <span class="hljs-variable">$visitor</span>)</span>
    {</span>
        <span class="hljs-variable">$visitor</span>-&gt;visit(<span class="hljs-variable">$this</span>);
    }
}
<span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">IVisitor</span>
{</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">visit</span><span class="hljs-params">(Element <span class="hljs-variable">$element</span>)</span>;</span>

}

<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Visitor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">IVisitor</span>
{</span>
    <span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">visit</span><span class="hljs-params">(Element <span class="hljs-variable">$element</span>)</span>
    {</span>
        <span class="hljs-variable">$element</span>-&gt;doSomething();
    }

}

<span class="hljs-variable">$visitor</span> = <span class="hljs-keyword">new</span> Visitor;

<span class="hljs-variable">$element1</span> = <span class="hljs-keyword">new</span> ConcreteElement1;
<span class="hljs-variable">$element1</span>-&gt;accept(<span class="hljs-variable">$visitor</span>);

<span class="hljs-variable">$element2</span> = <span class="hljs-keyword">new</span> ConcreteElement2;
<span class="hljs-variable">$element2</span>-&gt;accept(<span class="hljs-variable">$visitor</span>);</code></pre></div>&#13;
        <script type="text/javascript">&#13;
            $(function () {&#13;
                $('pre.prettyprint code').each(function () {&#13;
                    var lines = $(this).text().split('\n').length;&#13;
                    var $numbering = $('&lt;ul/&gt;').addClass('pre-numbering').hide();&#13;
                    $(this).addClass('has-numbering').parent().append($numbering);&#13;
                    for (i = 1; i &lt;= lines; i++) {&#13;
                        $numbering.append($('&lt;li/&gt;').text(i));&#13;
                    };&#13;
                    $numbering.fadeIn(1700);&#13;
                });&#13;
            });&#13;
        </script>&#13;
   &#13;
