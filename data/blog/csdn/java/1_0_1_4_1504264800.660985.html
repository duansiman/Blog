
<div><p>Struts2<span style="font-family:宋体">提供两种校验规则：字段校验器配置风格和非字段配置风格。</span></p><p>字段校验器的格式：</p><p>&lt;validators&gt;</p><p>&lt;field name=”被校验的字段名”&gt;</p><p>&lt;field-validator type=”校验器类型名”&gt;</p><p>&lt;param name=”参数名”&gt;<span style="font-family:宋体">参数值</span><span style="font-family:Times New Roman">&lt;/param&gt;</span></p><p>&lt;!—可以有多个参数<span style="font-family:Times New Roman">--&gt;</span></p><p>&lt;message key=”I8Nkey”&gt;<span style="font-family:宋体">校验失败时的提示信息</span><span style="font-family:Times New Roman">&lt;/message&gt;</span></p><p>&lt;/field-validator&gt;</p><p>&lt;/field&gt;</p><p>&lt;!--<span style="font-family:宋体">下一个要校验的字段</span>à</p><p>&lt;/validators&gt;</p><p>字段校验器以<span style="font-family:Times New Roman">&lt;field&gt;</span><span style="font-family:宋体">元素为基本元素，该元素的</span><span style="font-family:Times New Roman">name</span><span style="font-family:宋体">属性用来指定被校验的字段。如果该字段需要多个校验规则，可以使用多个</span><span style="font-family:Times New Roman">&lt;field&gt;</span><span style="font-family:宋体">元素来增加校验规则（也就是一个字段多个校验器）。子元素</span><span style="font-family:Times New Roman">&lt;field-validator&gt;</span><span style="font-family:宋体">用来指定校验规则，具体使用哪个校验器，这取决与属性</span><span style="font-family:Times New Roman">type.</span></p><p>&lt;param&gt;<span style="font-family:宋体">元素用来校验器传递参数，可以有多个参数。</span><span style="font-family:Times New Roman">&lt;message&gt;</span><span style="font-family:宋体">元素用来指定校验器校验失败是的提示信息，其属性</span><span style="font-family:Times New Roman">key</span><span style="font-family:宋体">用来指定国际化信息对应的可以。</span></p><p></p><p>非字段校验器配置风格</p><p>对于非字段校验器，是以校验器优先进行配置的。在这种情况下，以<span style="font-family:Times New Roman">&lt;validator&gt;</span><span style="font-family:宋体">为基本元素（当然，根元素仍然是</span><span style="font-family:Times New Roman">&lt;validators&gt;</span><span style="font-family:宋体">）</span><span style="font-family:Times New Roman">,</span><span style="font-family:宋体">在根元素下可以多个</span><span style="font-family:Times New Roman">&lt;validator&gt;</span><span style="font-family:宋体">元素，每个</span><span style="font-family:Times New Roman">&lt;validator&gt;</span><span style="font-family:宋体">元素的形式如下：</span></p><p>&lt;validator type=”校验器类型名”&gt;</p><p>&lt;param name=”fieldName”&gt;<span style="font-family:宋体">需要被校验的字段名称</span><span style="font-family:Times New Roman">&lt;/param&gt;</span></p><p>&lt;!--<span style="font-family:宋体">下面的</span><span style="font-family:Times New Roman">param</span><span style="font-family:宋体">元素可以有</span><span style="font-family:Times New Roman">0</span><span style="font-family:宋体">个或多个</span><span style="font-family:Times New Roman">--&gt;</span></p><p>&lt;param name=”参数名”&gt;<span style="font-family:宋体">参数值</span><span style="font-family:Times New Roman">&lt;/param&gt;</span></p><p>&lt;message key=”I8Nkey”&gt;<span style="font-family:宋体">校验失败时的提示信息</span><span style="font-family:Times New Roman">&lt;/message&gt;</span></p><p>&lt;/validator&gt;</p><p>每一个<span style="font-family:Times New Roman">&lt;validator&gt;</span><span style="font-family:宋体">元素定义一个校验规则，必须为该元素的</span><span style="font-family:Times New Roman">type</span><span style="font-family:宋体">属性指定值，决定使用的校验器的名字。由于校验器配置风格是以校验器优先的，所以还要为校验指定一个被校验的字段，也就是要校验的</span><span style="font-family:Times New Roman">Action</span><span style="font-family:宋体">属性，可以在</span><span style="font-family:Times New Roman">&lt;param name=</span>”fieldName”&gt;<span style="font-family:宋体">元素中指定，另外还可以通过多个</span><span style="font-family:Times New Roman">&lt;param&gt;</span><span style="font-family:宋体">元素来向校验器传递一些参数。最后同样用</span><span style="font-family:Times New Roman">&lt;message&gt;</span><span style="font-family:宋体">元素来指定校验失败时的提示信息，其属性</span><span style="font-family:Times New Roman">key</span><span style="font-family:宋体">用来指定国际化信息 对应的</span><span style="font-family:Times New Roman">key.</span></p><p>Eg<span style="font-family:宋体">：</span></p><p>&lt;validators&gt;</p><p>&lt;validator type=”requiredstring”&gt;</p><p>&lt;param name=”fieldName”&gt;name&lt;/param&gt;</p><p>&lt;message&gt;<span style="font-family:宋体">姓名不能为空！</span><span style="font-family:Times New Roman">&lt;/message&gt;</span></p><p>&lt;/validator&gt;</p><p>&lt;validator type=”requiredstring”&gt;</p><p>&lt;param name=”fieldName”&gt;pass&lt;/param&gt;</p><p>&lt;message&gt;<span style="font-family:宋体">密码不能为空！</span><span style="font-family:Times New Roman">&lt;/message&gt;</span></p><p>&lt;/validator&gt;</p><p>&lt;/validators&gt;</p><p>规定的这些校验规则是在 <span style="font-family:Times New Roman">xwork2-2.0.4.jar</span><span style="font-family:宋体">中</span></p><p>/com/opensymphony/xwork2/validator/validators/default.xml</p><p><span style="color:#08080">&lt;</span><span style="color:#3f7f7f; background:rgb(192,192,192)">validators</span><span style="color:#08080">&gt;</span></p><p><span style="color:#000000">    </span><span style="color:#08080">&lt;</span><span style="color:#3f7f7f">validator</span> <span style="color:#7f07f">name</span><span style="color:#000000">=</span><span style="color:#2a0ff">"required"</span> <span style="color:#7f07f">class</span><span style="color:#000000">=</span><span style="color:#2a0ff">"com.opensymphony.xwork2.validator.validators.RequiredFieldValidator"</span><span style="color:#08080">/&gt;</span></p><p><span style="color:#000000">    </span><span style="color:#08080">&lt;</span><span style="color:#3f7f7f">validator</span> <span style="color:#7f07f">name</span><span style="color:#000000">=</span><span style="color:#2a0ff">"requiredstring"</span> <span style="color:#7f07f">class</span><span style="color:#000000">=</span><span style="color:#2a0ff">"com.opensymphony.xwork2.validator.validators.RequiredStringValidator"</span><span style="color:#08080">/&gt;</span></p><p><span style="color:#000000">    </span><span style="color:#08080">&lt;</span><span style="color:#3f7f7f">validator</span> <span style="color:#7f07f">name</span><span style="color:#000000">=</span><span style="color:#2a0ff">"int"</span> <span style="color:#7f07f">class</span><span style="color:#000000">=</span><span style="color:#2a0ff">"com.opensymphony.xwork2.validator.validators.IntRangeFieldValidator"</span><span style="color:#08080">/&gt;</span></p><p><span style="color:#000000">    </span><span style="color:#08080">&lt;</span><span style="color:#3f7f7f">validator</span> <span style="color:#7f07f">name</span><span style="color:#000000">=</span><span style="color:#2a0ff">"long"</span> <span style="color:#7f07f">class</span><span style="color:#000000">=</span><span style="color:#2a0ff">"com.opensymphony.xwork2.validator.validators.LongRangeFieldValidator"</span><span style="color:#08080">/&gt;</span></p><p><span style="color:#000000">    </span><span style="color:#08080">&lt;</span><span style="color:#3f7f7f">validator</span> <span style="color:#7f07f">name</span><span style="color:#000000">=</span><span style="color:#2a0ff">"short"</span> <span style="color:#7f07f">class</span><span style="color:#000000">=</span><span style="color:#2a0ff">"com.opensymphony.xwork2.validator.validators.ShortRangeFieldValidator"</span><span style="color:#08080">/&gt;</span></p><p><span style="color:#000000">    </span><span style="color:#08080">&lt;</span><span style="color:#3f7f7f">validator</span> <span style="color:#7f07f">name</span><span style="color:#000000">=</span><span style="color:#2a0ff">"double"</span> <span style="color:#7f07f">class</span><span style="color:#000000">=</span><span style="color:#2a0ff">"com.opensymphony.xwork2.validator.validators.DoubleRangeFieldValidator"</span><span style="color:#08080">/&gt;</span></p><p><span style="color:#000000">    </span><span style="color:#08080">&lt;</span><span style="color:#3f7f7f">validator</span> <span style="color:#7f07f">name</span><span style="color:#000000">=</span><span style="color:#2a0ff">"date"</span> <span style="color:#7f07f">class</span><span style="color:#000000">=</span><span style="color:#2a0ff">"com.opensymphony.xwork2.validator.validators.DateRangeFieldValidator"</span><span style="color:#08080">/&gt;</span></p><p><span style="color:#000000">    </span><span style="color:#08080">&lt;</span><span style="color:#3f7f7f">validator</span> <span style="color:#7f07f">name</span><span style="color:#000000">=</span><span style="color:#2a0ff">"expression"</span> <span style="color:#7f07f">class</span><span style="color:#000000">=</span><span style="color:#2a0ff">"com.opensymphony.xwork2.validator.validators.ExpressionValidator"</span><span style="color:#08080">/&gt;</span></p><p><span style="color:#000000">    </span><span style="color:#08080">&lt;</span><span style="color:#3f7f7f">validator</span> <span style="color:#7f07f">name</span><span style="color:#000000">=</span><span style="color:#2a0ff">"fieldexpression"</span> <span style="color:#7f07f">class</span><span style="color:#000000">=</span><span style="color:#2a0ff">"com.opensymphony.xwork2.validator.validators.FieldExpressionValidator"</span><span style="color:#08080">/&gt;</span></p><p><span style="color:#000000">    </span><span style="color:#08080">&lt;</span><span style="color:#3f7f7f">validator</span> <span style="color:#7f07f">name</span><span style="color:#000000">=</span><span style="color:#2a0ff">"email"</span> <span style="color:#7f07f">class</span><span style="color:#000000">=</span><span style="color:#2a0ff">"com.opensymphony.xwork2.validator.validators.EmailValidator"</span><span style="color:#08080">/&gt;</span></p><p><span style="color:#000000">    </span><span style="color:#08080">&lt;</span><span style="color:#3f7f7f">validator</span> <span style="color:#7f07f">name</span><span style="color:#000000">=</span><span style="color:#2a0ff">"url"</span> <span style="color:#7f07f">class</span><span style="color:#000000">=</span><span style="color:#2a0ff">"com.opensymphony.xwork2.validator.validators.URLValidator"</span><span style="color:#08080">/&gt;</span></p><p><span style="color:#000000">    </span><span style="color:#08080">&lt;</span><span style="color:#3f7f7f">validator</span> <span style="color:#7f07f">name</span><span style="color:#000000">=</span><span style="color:#2a0ff">"visitor"</span> <span style="color:#7f07f">class</span><span style="color:#000000">=</span><span style="color:#2a0ff">"com.opensymphony.xwork2.validator.validators.VisitorFieldValidator"</span><span style="color:#08080">/&gt;</span></p><p><span style="color:#000000">    </span><span style="color:#08080">&lt;</span><span style="color:#3f7f7f">validator</span> <span style="color:#7f07f">name</span><span style="color:#000000">=</span><span style="color:#2a0ff">"conversion"</span> <span style="color:#7f07f">class</span><span style="color:#000000">=</span><span style="color:#2a0ff">"com.opensymphony.xwork2.validator.validators.ConversionErrorFieldValidator"</span><span style="color:#08080">/&gt;</span></p><p><span style="color:#000000">    </span><span style="color:#08080">&lt;</span><span style="color:#3f7f7f">validator</span> <span style="color:#7f07f">name</span><span style="color:#000000">=</span><span style="color:#2a0ff">"stringlength"</span> <span style="color:#7f07f">class</span><span style="color:#000000">=</span><span style="color:#2a0ff">"com.opensymphony.xwork2.validator.validators.StringLengthFieldValidator"</span><span style="color:#08080">/&gt;</span></p><p><span style="color:#000000">    </span><span style="color:#08080">&lt;</span><span style="color:#3f7f7f">validator</span> <span style="color:#7f07f">name</span><span style="color:#000000">=</span><span style="color:#2a0ff">"regex"</span> <span style="color:#7f07f">class</span><span style="color:#000000">=</span><span style="color:#2a0ff">"com.opensymphony.xwork2.validator.validators.RegexFieldValidator"</span><span style="color:#08080">/&gt;</span></p><p><span style="color:#000000">    </span><span style="color:#08080">&lt;</span><span style="color:#3f7f7f">validator</span> <span style="color:#7f07f">name</span><span style="color:#000000">=</span><span style="color:#2a0ff">"conditionalvisitor"</span> <span style="color:#7f07f">class</span><span style="color:#000000">=</span><span style="color:#2a0ff">"com.opensymphony.xwork2.validator.validators.ConditionalVisitorFieldValidator"</span><span style="color:#08080">/&gt;</span></p><p><span style="color:#08080">&lt;/</span><span style="color:#3f7f7f; background:rgb(192,192,192)">validators</span><span style="color:#08080">&gt;</span></p><p></p><p></p><p></p><p></p><p></p><p></p><p></p></div>   &#13;
