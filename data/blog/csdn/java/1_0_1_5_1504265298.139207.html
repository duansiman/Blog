

<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px; text-align:left">&#13;
<span style="color:rgb(255,0,0); font-size:18px"><strong>转载请注明出处：<a target="_blank" href="http://blog.csdn.net/lhy_ycu/article/details/39721563" style="color:rgb(202,0,0); text-decoration:none"></a><a target="_blank" href="http://blog.csdn.net/lhy_ycu/article/details/39755577" style="color:rgb(202,0,0); text-decoration:none"></a><a target="_blank" href="http://blog.csdn.net/lhy_ycu/article/details/39759199" style="color:rgb(202,0,0); text-decoration:none"></a><a target="_blank" href="http://blog.csdn.net/lhy_ycu/article/details/39784403" style="color:rgb(202,0,0); text-decoration:none"></a><a target="_blank" href="http://blog.csdn.net/lhy_ycu/article/details/39804057" style="color:rgb(202,0,0); text-decoration:none"></a><a target="_blank" href="http://blog.csdn.net/lhy_ycu/article/details/39805069" style="color:rgb(202,0,0); text-decoration:none"></a><a target="_blank" href="http://blog.csdn.net/lhy_ycu/article/details/39805735" style="color:rgb(202,0,0); text-decoration:none"></a><a target="_blank" href="http://blog.csdn.net/lhy_ycu/article/details/39806973" style="color:rgb(202,0,0); text-decoration:none"></a><a target="_blank" href="http://blog.csdn.net/lhy_ycu/article/details/39828653" style="color:rgb(202,0,0); text-decoration:none"></a><a target="_blank" href="http://blog.csdn.net/lhy_ycu/article/details/39856435" style="color:rgb(202,0,0); text-decoration:none"></a><a target="_blank" href="http://blog.csdn.net/lhy_ycu/article/details/39863125" style="color:rgb(202,0,0); text-decoration:none"></a><a target="_blank" href="http://blog.csdn.net/lhy_ycu/article/details/39997337" style="color:rgb(202,0,0); text-decoration:none"></a><a target="_blank" href="http://blog.csdn.net/lhy_ycu/article/details/40008711" style="color:rgb(202,0,0); text-decoration:none"></a><a target="_blank" href="http://blog.csdn.net/lhy_ycu/article/details/40018231" style="color:rgb(202,0,0); text-decoration:none"></a><a target="_blank" href="http://blog.csdn.net/lhy_ycu/article/details/40018967">http://blog.csdn.net/lhy_ycu/article/details/40018967</a></strong></span><br />&#13;
</p>&#13;
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px; text-align:left">&#13;
<span style="font-size:18px; color:rgb(255,0,0)"><br />&#13;
</span></p>&#13;
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px; text-align:left">&#13;
</p>&#13;
<span style="font-family:Arial; font-size:14px; line-height:26px; text-align:left"></span><span style="font-family:Arial; font-size:14px; line-height:26px; text-align:left"></span><span style="font-family:Arial; font-size:14px; line-height:26px; text-align:left"></span><span style="font-family:Arial; font-size:14px; line-height:26px; text-align:left"></span><span style="font-family:Arial; font-size:14px; line-height:26px; text-align:left"></span><span style="font-family:Arial; font-size:14px; line-height:26px; text-align:left"></span><span style="font-family:Arial; font-size:14px; line-height:26px; text-align:left"></span><span style="font-family:Arial; font-size:14px; line-height:26px; text-align:left"></span><span style="font-family:Arial; font-size:14px; line-height:26px; text-align:left"></span>&#13;
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px; text-align:left">&#13;
备忘录模式(Memento)： 主要目的是保存一个对象的某个状态，以便在适当的时候恢复对象。</p>&#13;
<h2>一、uml建模：</h2>&#13;
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px; text-align:left">&#13;
<img src="http://img.blog.csdn.net/20141012161705640?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGh5X3ljdQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" /><br />&#13;
</p>&#13;
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px; text-align:left">&#13;
<br />&#13;
</p>&#13;
<h2>二、代码实现</h2>&#13;
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px; text-align:left">&#13;
</p>&#13;
<pre name="code" class="java">/**
 * 备忘录模式(Memento)：主要目的是保存一个对象的某个状态，以便在适当的时候恢复对象
 * 
 * 示例：原始类--&gt; 创建、恢复备忘录
 */
class Original {
	private String state;

	public Original(String state) {
		this.state = state;
	}

	public String getState() {
		return state;
	}

	public void setState(String state) {
		this.state = state;
	}

	/**
	 * 创建备忘录
	 */
	public Memento createMemento() {
		return new Memento(state);
	}

	/**
	 * 恢复备忘录
	 */
	public void recoverMemento(Memento memento) {
		this.state = memento.getState();
	}
}

/**
 * 备忘录
 */
class Memento {
	private String state;

	public Memento(String state) {
		this.state = state;
	}

	public String getState() {
		return state;
	}

	public void setState(String state) {
		this.state = state;
	}
}

/**
 * 用来存储备忘录(持有备忘录实例)：只能存储，不能修改
 */
class Storage {
	private Memento memento;

	public Storage(Memento memento) {
		this.memento = memento;
	}

	public Memento getMemento() {
		return memento;
	}
}

/**
 * 客户端测试类
 * 
 * @author Leo
 */
public class Test {
	public static void main(String[] args) {
		/**
		 * 创建原始对象
		 */
		Original original = new Original("白天模式");
		System.out.println("original初始状态为：" + original.getState());
		/**
		 * 创建备忘录
		 * 
		 * 注意：original.createMemento()会将初始state(白天模式)传给Memento对象
		 * 
		 * 以备需要的时候可以调用storage.getMemento()来拿到该state(白天模式)状态
		 * 
		 * 相当于state(白天模式)这个状态已经委托给了storage这个对象来保存
		 */
		Storage storage = new Storage(original.createMemento());
		original.setState("夜间模式");
		System.out.println("original修改后的状态为：" + original.getState());
		/**
		 * 恢复备忘录
		 */
		original.recoverMemento(storage.getMemento());
		System.out.println("original恢复后的状态为：" + original.getState());
	}
}</pre><br />&#13;
<h2>三、总结</h2>&#13;
<p></p>&#13;
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px; text-align:left">&#13;
Memento备忘录设计模式用来备份一个对象的当前状态，当需要的时候，用这个备份来恢复这个对象在某一个时刻的状态。<br />&#13;
</p>&#13;
<p style="margin-top:0px; margin-bottom:0px; padding-top:0px; padding-bottom:0px; font-family:Arial; font-size:14px; line-height:26px; text-align:left">&#13;
<br />&#13;
</p>&#13;
   &#13;
