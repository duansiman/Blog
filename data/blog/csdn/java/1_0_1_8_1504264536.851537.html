
        <div class="markdown_views"><h1 id="介绍">介绍：</h1>

<p>本软件系列到此，我已经全部写完了。</p>



<h2 id="项目练习目标">项目练习目标 ：</h2>

<p>1、Java应用程序基本分析  <br />
2、培养面向对象编程的基本思想  <br />
3、Java基本设计模式综合应用  <br />
4、掌握分层和接口的基本设计  <br />
5、构建合理的Java应用程序包结构  <br />
6、综合应用JSE所学习的知识  <br />
7、在应用中合理使用集合框架  <br />
8、在应用中综合使用swing的常用组件  <br />
9、基本的表现层的实现机制  <br />
10、IO流和文件的基本操作  <br />
11、培养良好的Java编程习惯  <br />
12、培养调试Java程序的能力，培养改错的能力</p>



<h2 id="项目功能需求">项目功能需求 ：</h2>

<p>1、能进行操作用户的注册，修改基本信息，删除和查询。  <br />
2、能对图书的基本信息进行增加、删除、修改和查询操作。  <br />
3、能填写进货单，一张进货单带有多条具体的进货信息，进货的书籍必须是图书管理里面已经有的；进货的同时修改库存对应书籍的存货量。  <br />
4、能填写销售单，一张销售单带有多条具体的销售信息，销售的书籍必须是图书管理里面已经有的，而且销售的数量不能超过当前库存的数量；销售的同时修改库存对应书籍的存货量。  <br />
5、可以查看库存的明细，可以按照条件进行查找具体的图书的库存值。  <br />
6、权限方面进行简化，做固定的权限控制。把用户按照模块分成不同操作权限的人员，特设一个admin的用户，可以操作全部的功能。</p>

<h2 id="项目基本设计">项目基本设计 ：</h2>

<p>★ 架构设计  <br />
整体框架、模块划分  <br />
模块划分：用户、图书、进货、销售和库存5个模块</p>

<p>★ 系统功能结构设计  <br />
每个功能模块的具体功能子模块</p>

<p>★ 数据库设计  <br />
项目框架实现：分模块、分层、分包、构建应用程序</p>



<h2 id="自己的总结">自己的总结：</h2>

<p>这可以说是自己的第一个项目吧。小项目。O(∩_∩)O哈哈~、 <br />
写到现在也有10多天了，自己比较享受写项目的这个过程，不过因为这个项目是跟着老师指导来做的，所以呢，自己的感触还不是很深，不过现在对分包啊，取名字啊，值对象封装啊，工厂方法，面向接口编程啊，表现层，逻辑层，数据层啊，这些以前用都没用过的，那时候完全不懂得怎么回事，不过在自己写了之后，感觉嘛、也就那么回事。 <br />
O(∩_∩)O~，这种项目开发，还是得自己多练练手，写得多了，自己就熟了。 <br />
以后就是手到擒来。 <br />
下面来看代码吧：</p>



<h1 id="包含main方法的bookstore类">包含main方法的BookStore类：</h1>



<pre class="prettyprint"><code class=" hljs avrasm"><span class="hljs-comment">/*
 * BookStore.java
 *
 * Created on __DATE__, __TIME__
 */</span>

package cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-comment">;</span>

import java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Dimension</span><span class="hljs-comment">;</span>
import java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Toolkit</span><span class="hljs-comment">;</span>
import java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionEvent</span><span class="hljs-comment">;</span>

import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.book</span><span class="hljs-preprocessor">.ui</span><span class="hljs-preprocessor">.BookListPanel</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.in</span><span class="hljs-preprocessor">.ui</span><span class="hljs-preprocessor">.InListPanel</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.login</span><span class="hljs-preprocessor">.ui</span><span class="hljs-preprocessor">.LoginPanel</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.ui</span><span class="hljs-preprocessor">.OutListPanel</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.stock</span><span class="hljs-preprocessor">.ui</span><span class="hljs-preprocessor">.StockListPanel</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.user</span><span class="hljs-preprocessor">.ui</span><span class="hljs-preprocessor">.ListPanel</span><span class="hljs-comment">;</span>

<span class="hljs-comment">/**
 * 
 * @author 陈浩翔
 * @version 1.0  2016-4-20
 */</span>
public class BookStore extends javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JFrame</span> {

    <span class="hljs-comment">/** Creates new form BookStore */</span>
    public BookStore() {
        super(<span class="hljs-string">"书店管理系统---CHX---联系QQ——619699629"</span>)<span class="hljs-comment">;</span>
        initComponents()<span class="hljs-comment">;</span>
        this<span class="hljs-preprocessor">.setContentPane</span>(new LoginPanel(this))<span class="hljs-comment">;</span>
        this<span class="hljs-preprocessor">.setResizable</span>(false)<span class="hljs-comment">;//不能缩放</span>
        this<span class="hljs-preprocessor">.setDefaultCloseOperation</span>(EXIT_ON_CLOSE)<span class="hljs-comment">;</span>
        Dimension scr = Toolkit<span class="hljs-preprocessor">.getDefaultToolkit</span>()<span class="hljs-preprocessor">.getScreenSize</span>()<span class="hljs-comment">;</span>
        this<span class="hljs-preprocessor">.setLocation</span>(scr<span class="hljs-preprocessor">.width</span> / <span class="hljs-number">5</span>, scr<span class="hljs-preprocessor">.height</span> / <span class="hljs-number">5</span>)<span class="hljs-comment">;</span>
    }

    //GEN-BEGIN:initComponents
    // &lt;editor-fold defaultstate=<span class="hljs-string">"collapsed"</span> desc=<span class="hljs-string">"Generated Code"</span>&gt;
    private void initComponents() {

        jLabel1 = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JLabel</span>()<span class="hljs-comment">;</span>
        menuBar = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuBar</span>()<span class="hljs-comment">;</span>
        fileMenu = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenu</span>()<span class="hljs-comment">;</span>
        openMenuItem = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span>()<span class="hljs-comment">;</span>
        saveMenuItem = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span>()<span class="hljs-comment">;</span>
        saveAsMenuItem = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span>()<span class="hljs-comment">;</span>
        exitMenuItem = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span>()<span class="hljs-comment">;</span>
        editMenu = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenu</span>()<span class="hljs-comment">;</span>
        cutMenuItem = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span>()<span class="hljs-comment">;</span>
        copyMenuItem = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span>()<span class="hljs-comment">;</span>
        pasteMenuItem = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span>()<span class="hljs-comment">;</span>
        deleteMenuItem = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span>()<span class="hljs-comment">;</span>
        helpMenu = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenu</span>()<span class="hljs-comment">;</span>
        contentsMenuItem = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span>()<span class="hljs-comment">;</span>
        aboutMenuItem = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span>()<span class="hljs-comment">;</span>
        jMenu1 = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenu</span>()<span class="hljs-comment">;</span>
        jMenuItemUser = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span>()<span class="hljs-comment">;</span>
        jMenuItemBook = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span>()<span class="hljs-comment">;</span>
        jMenuItemIn = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span>()<span class="hljs-comment">;</span>
        jMenuItemOut = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span>()<span class="hljs-comment">;</span>
        jMenuItemStock = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span>()<span class="hljs-comment">;</span>
        jMenuItem1 = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span>()<span class="hljs-comment">;</span>

        setDefaultCloseOperation(javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.WindowConstants</span><span class="hljs-preprocessor">.EXIT</span>_ON_CLOSE)<span class="hljs-comment">;</span>
        setMinimumSize(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Dimension</span>(<span class="hljs-number">800</span>, <span class="hljs-number">600</span>))<span class="hljs-comment">;</span>
        getContentPane()<span class="hljs-preprocessor">.setLayout</span>(null)<span class="hljs-comment">;</span>
        getContentPane()<span class="hljs-preprocessor">.add</span>(jLabel1)<span class="hljs-comment">;</span>
        jLabel1<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>)<span class="hljs-comment">;</span>

        fileMenu<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"File"</span>)<span class="hljs-comment">;</span>

        openMenuItem<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"Open"</span>)<span class="hljs-comment">;</span>
        fileMenu<span class="hljs-preprocessor">.add</span>(openMenuItem)<span class="hljs-comment">;</span>

        saveMenuItem<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"Save"</span>)<span class="hljs-comment">;</span>
        fileMenu<span class="hljs-preprocessor">.add</span>(saveMenuItem)<span class="hljs-comment">;</span>

        saveAsMenuItem<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"Save As ..."</span>)<span class="hljs-comment">;</span>
        fileMenu<span class="hljs-preprocessor">.add</span>(saveAsMenuItem)<span class="hljs-comment">;</span>

        exitMenuItem<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"Exit"</span>)<span class="hljs-comment">;</span>
        exitMenuItem<span class="hljs-preprocessor">.addActionListener</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionListener</span>() {
            public void actionPerformed(java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionEvent</span> evt) {
                exitMenuItemActionPerformed(evt)<span class="hljs-comment">;</span>
            }
        })<span class="hljs-comment">;</span>
        fileMenu<span class="hljs-preprocessor">.add</span>(exitMenuItem)<span class="hljs-comment">;</span>

        menuBar<span class="hljs-preprocessor">.add</span>(fileMenu)<span class="hljs-comment">;</span>

        editMenu<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"Edit"</span>)<span class="hljs-comment">;</span>

        cutMenuItem<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"Cut"</span>)<span class="hljs-comment">;</span>
        editMenu<span class="hljs-preprocessor">.add</span>(cutMenuItem)<span class="hljs-comment">;</span>

        copyMenuItem<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"Copy"</span>)<span class="hljs-comment">;</span>
        editMenu<span class="hljs-preprocessor">.add</span>(copyMenuItem)<span class="hljs-comment">;</span>

        pasteMenuItem<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"Paste"</span>)<span class="hljs-comment">;</span>
        editMenu<span class="hljs-preprocessor">.add</span>(pasteMenuItem)<span class="hljs-comment">;</span>

        deleteMenuItem<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"Delete"</span>)<span class="hljs-comment">;</span>
        editMenu<span class="hljs-preprocessor">.add</span>(deleteMenuItem)<span class="hljs-comment">;</span>

        menuBar<span class="hljs-preprocessor">.add</span>(editMenu)<span class="hljs-comment">;</span>

        helpMenu<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"Help"</span>)<span class="hljs-comment">;</span>

        contentsMenuItem<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"Contents"</span>)<span class="hljs-comment">;</span>
        helpMenu<span class="hljs-preprocessor">.add</span>(contentsMenuItem)<span class="hljs-comment">;</span>

        aboutMenuItem<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"About"</span>)<span class="hljs-comment">;</span>
        helpMenu<span class="hljs-preprocessor">.add</span>(aboutMenuItem)<span class="hljs-comment">;</span>

        menuBar<span class="hljs-preprocessor">.add</span>(helpMenu)<span class="hljs-comment">;</span>

        jMenu1<span class="hljs-preprocessor">.setForeground</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Color</span>(<span class="hljs-number">204</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>))<span class="hljs-comment">;</span>
        jMenu1<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"\u6a21\u5757"</span>)<span class="hljs-comment">;</span>
        jMenu1<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"Dialog"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">14</span>))<span class="hljs-comment">;</span>

        jMenuItemUser<span class="hljs-preprocessor">.setAccelerator</span>(javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.KeyStroke</span><span class="hljs-preprocessor">.getKeyStroke</span>(
                java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.KeyEvent</span><span class="hljs-preprocessor">.VK</span>_U,
                java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.InputEvent</span><span class="hljs-preprocessor">.CTRL</span>_MASK))<span class="hljs-comment">;</span>
        jMenuItemUser<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"Dialog"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">14</span>))<span class="hljs-comment">;</span>
        jMenuItemUser<span class="hljs-preprocessor">.setForeground</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Color</span>(<span class="hljs-number">0</span>, <span class="hljs-number">204</span>, <span class="hljs-number">0</span>))<span class="hljs-comment">;</span>
        jMenuItemUser<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"\u7528\u6237"</span>)<span class="hljs-comment">;</span>
        jMenuItemUser<span class="hljs-preprocessor">.setEnabled</span>(false)<span class="hljs-comment">;</span>
        jMenuItemUser<span class="hljs-preprocessor">.addActionListener</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionListener</span>() {
            public void actionPerformed(java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionEvent</span> evt) {
                jMenuItemUserActionPerformed(evt)<span class="hljs-comment">;</span>
            }
        })<span class="hljs-comment">;</span>
        jMenu1<span class="hljs-preprocessor">.add</span>(jMenuItemUser)<span class="hljs-comment">;</span>

        jMenuItemBook<span class="hljs-preprocessor">.setAccelerator</span>(javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.KeyStroke</span><span class="hljs-preprocessor">.getKeyStroke</span>(
                java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.KeyEvent</span><span class="hljs-preprocessor">.VK</span>_B,
                java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.InputEvent</span><span class="hljs-preprocessor">.CTRL</span>_MASK))<span class="hljs-comment">;</span>
        jMenuItemBook<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"Dialog"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">14</span>))<span class="hljs-comment">;</span>
        jMenuItemBook<span class="hljs-preprocessor">.setForeground</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Color</span>(<span class="hljs-number">0</span>, <span class="hljs-number">204</span>, <span class="hljs-number">51</span>))<span class="hljs-comment">;</span>
        jMenuItemBook<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"\u56fe\u4e66"</span>)<span class="hljs-comment">;</span>
        jMenuItemBook<span class="hljs-preprocessor">.setEnabled</span>(false)<span class="hljs-comment">;</span>
        jMenuItemBook<span class="hljs-preprocessor">.addActionListener</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionListener</span>() {
            public void actionPerformed(java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionEvent</span> evt) {
                jMenuItemBookActionPerformed(evt)<span class="hljs-comment">;</span>
            }
        })<span class="hljs-comment">;</span>
        jMenu1<span class="hljs-preprocessor">.add</span>(jMenuItemBook)<span class="hljs-comment">;</span>

        jMenuItemIn<span class="hljs-preprocessor">.setAccelerator</span>(javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.KeyStroke</span><span class="hljs-preprocessor">.getKeyStroke</span>(
                java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.KeyEvent</span><span class="hljs-preprocessor">.VK</span>_I,
                java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.InputEvent</span><span class="hljs-preprocessor">.CTRL</span>_MASK))<span class="hljs-comment">;</span>
        jMenuItemIn<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"Dialog"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">14</span>))<span class="hljs-comment">;</span>
        jMenuItemIn<span class="hljs-preprocessor">.setForeground</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Color</span>(<span class="hljs-number">0</span>, <span class="hljs-number">204</span>, <span class="hljs-number">0</span>))<span class="hljs-comment">;</span>
        jMenuItemIn<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"\u8fdb\u8d27"</span>)<span class="hljs-comment">;</span>
        jMenuItemIn<span class="hljs-preprocessor">.setEnabled</span>(false)<span class="hljs-comment">;</span>
        jMenuItemIn<span class="hljs-preprocessor">.addActionListener</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionListener</span>() {
            public void actionPerformed(java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionEvent</span> evt) {
                jMenuItemInActionPerformed(evt)<span class="hljs-comment">;</span>
            }
        })<span class="hljs-comment">;</span>
        jMenu1<span class="hljs-preprocessor">.add</span>(jMenuItemIn)<span class="hljs-comment">;</span>

        jMenuItemOut<span class="hljs-preprocessor">.setAccelerator</span>(javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.KeyStroke</span><span class="hljs-preprocessor">.getKeyStroke</span>(
                java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.KeyEvent</span><span class="hljs-preprocessor">.VK</span>_O,
                java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.InputEvent</span><span class="hljs-preprocessor">.CTRL</span>_MASK))<span class="hljs-comment">;</span>
        jMenuItemOut<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"Dialog"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">14</span>))<span class="hljs-comment">;</span>
        jMenuItemOut<span class="hljs-preprocessor">.setForeground</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Color</span>(<span class="hljs-number">0</span>, <span class="hljs-number">204</span>, <span class="hljs-number">0</span>))<span class="hljs-comment">;</span>
        jMenuItemOut<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"\u9500\u552e"</span>)<span class="hljs-comment">;</span>
        jMenuItemOut<span class="hljs-preprocessor">.setEnabled</span>(false)<span class="hljs-comment">;</span>
        jMenuItemOut<span class="hljs-preprocessor">.addActionListener</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionListener</span>() {
            public void actionPerformed(java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionEvent</span> evt) {
                jMenuItemOutActionPerformed(evt)<span class="hljs-comment">;</span>
            }
        })<span class="hljs-comment">;</span>
        jMenu1<span class="hljs-preprocessor">.add</span>(jMenuItemOut)<span class="hljs-comment">;</span>

        jMenuItemStock<span class="hljs-preprocessor">.setAccelerator</span>(javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.KeyStroke</span><span class="hljs-preprocessor">.getKeyStroke</span>(
                java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.KeyEvent</span><span class="hljs-preprocessor">.VK</span>_S,
                java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.InputEvent</span><span class="hljs-preprocessor">.CTRL</span>_MASK))<span class="hljs-comment">;</span>
        jMenuItemStock<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"Dialog"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">14</span>))<span class="hljs-comment">;</span>
        jMenuItemStock<span class="hljs-preprocessor">.setForeground</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Color</span>(<span class="hljs-number">0</span>, <span class="hljs-number">204</span>, <span class="hljs-number">0</span>))<span class="hljs-comment">;</span>
        jMenuItemStock<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"\u5e93\u5b58"</span>)<span class="hljs-comment">;</span>
        jMenuItemStock<span class="hljs-preprocessor">.setEnabled</span>(false)<span class="hljs-comment">;</span>
        jMenuItemStock<span class="hljs-preprocessor">.addActionListener</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionListener</span>() {
            public void actionPerformed(java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionEvent</span> evt) {
                jMenuItemStockActionPerformed(evt)<span class="hljs-comment">;</span>
            }
        })<span class="hljs-comment">;</span>
        jMenu1<span class="hljs-preprocessor">.add</span>(jMenuItemStock)<span class="hljs-comment">;</span>

        jMenuItem1<span class="hljs-preprocessor">.setAccelerator</span>(javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.KeyStroke</span><span class="hljs-preprocessor">.getKeyStroke</span>(
                java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.KeyEvent</span><span class="hljs-preprocessor">.VK</span>_DELETE,
                java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.InputEvent</span><span class="hljs-preprocessor">.CTRL</span>_MASK))<span class="hljs-comment">;</span>
        jMenuItem1<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"Dialog"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">14</span>))<span class="hljs-comment">;</span>
        jMenuItem1<span class="hljs-preprocessor">.setForeground</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Color</span>(<span class="hljs-number">0</span>, <span class="hljs-number">204</span>, <span class="hljs-number">0</span>))<span class="hljs-comment">;</span>
        jMenuItem1<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"\u6ce8\u9500"</span>)<span class="hljs-comment">;</span>
        jMenuItem1<span class="hljs-preprocessor">.addActionListener</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionListener</span>() {
            public void actionPerformed(java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionEvent</span> evt) {
                jMenuItem1ActionPerformed(evt)<span class="hljs-comment">;</span>
            }
        })<span class="hljs-comment">;</span>
        jMenu1<span class="hljs-preprocessor">.add</span>(jMenuItem1)<span class="hljs-comment">;</span>

        menuBar<span class="hljs-preprocessor">.add</span>(jMenu1)<span class="hljs-comment">;</span>

        setJMenuBar(menuBar)<span class="hljs-comment">;</span>

        pack()<span class="hljs-comment">;</span>
    }// &lt;/editor-fold&gt;
    //GEN-END:initComponents

    <span class="hljs-comment">/**
     * 进入销售模块
     * @param evt
     */</span>
    protected void jMenuItemOutActionPerformed(ActionEvent evt) {
        this<span class="hljs-preprocessor">.setContentPane</span>(new OutListPanel(this))<span class="hljs-comment">;</span>
        this<span class="hljs-preprocessor">.validate</span>()<span class="hljs-comment">;</span>
    }

    <span class="hljs-comment">/**
     * 进入库存模块
     * @param evt
     */</span>
    protected void jMenuItemStockActionPerformed(ActionEvent evt) {
        this<span class="hljs-preprocessor">.setContentPane</span>(new StockListPanel(this))<span class="hljs-comment">;</span>
        this<span class="hljs-preprocessor">.validate</span>()<span class="hljs-comment">;</span>
    }

    <span class="hljs-comment">/**
     * 监听进入进货列表
     * @param evt
     */</span>
    private void jMenuItemInActionPerformed(java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionEvent</span> evt) {
        this<span class="hljs-preprocessor">.setContentPane</span>(new InListPanel(this))<span class="hljs-comment">;</span>
        this<span class="hljs-preprocessor">.validate</span>()<span class="hljs-comment">;</span>
    }

    <span class="hljs-comment">/**
     * 注销菜单项
     * @param evt
     */</span>
    private void jMenuItem1ActionPerformed(java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionEvent</span> evt) {
        this<span class="hljs-preprocessor">.setContentPane</span>(new LoginPanel(this))<span class="hljs-comment">;</span>
        this<span class="hljs-preprocessor">.validate</span>()<span class="hljs-comment">;</span>
        jMenuItemUser<span class="hljs-preprocessor">.setEnabled</span>(false)<span class="hljs-comment">;</span>
        jMenuItemBook<span class="hljs-preprocessor">.setEnabled</span>(false)<span class="hljs-comment">;</span>
        jMenuItemIn<span class="hljs-preprocessor">.setEnabled</span>(false)<span class="hljs-comment">;</span>
        jMenuItemOut<span class="hljs-preprocessor">.setEnabled</span>(false)<span class="hljs-comment">;</span>
        jMenuItemStock<span class="hljs-preprocessor">.setEnabled</span>(false)<span class="hljs-comment">;</span>
    }

    <span class="hljs-comment">/**
     * 监听进入图书模块
     * @param evt
     */</span>
    private void jMenuItemBookActionPerformed(java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionEvent</span> evt) {
        this<span class="hljs-preprocessor">.setContentPane</span>(new BookListPanel(this))<span class="hljs-comment">;</span>
        this<span class="hljs-preprocessor">.validate</span>()<span class="hljs-comment">;</span>
    }

    <span class="hljs-comment">/**
     * 监听进入用户模块
     * @param evt
     */</span>
    private void jMenuItemUserActionPerformed(java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionEvent</span> evt) {
        this<span class="hljs-preprocessor">.setContentPane</span>(new ListPanel(this))<span class="hljs-comment">;</span>
        this<span class="hljs-preprocessor">.validate</span>()<span class="hljs-comment">;</span>

    }

    private void exitMenuItemActionPerformed(java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionEvent</span> evt) {//GEN-FIRST:event_exitMenuItemActionPerformed
        System<span class="hljs-preprocessor">.exit</span>(<span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
    }//GEN-LAST:event_exitMenuItemActionPerformed

    <span class="hljs-comment">/**
     * @param 主函数 args the command line arguments
     */</span>
    public static void main(String args[]) {
        java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.EventQueue</span><span class="hljs-preprocessor">.invokeLater</span>(new Runnable() {
            public void run() {
                new BookStore()<span class="hljs-preprocessor">.setVisible</span>(true)<span class="hljs-comment">;</span>
            }
        })<span class="hljs-comment">;</span>
    }

    public javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span> getjMenuItemBook() {
        return jMenuItemBook<span class="hljs-comment">;</span>
    }

    public javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span> getjMenuItemIn() {
        return jMenuItemIn<span class="hljs-comment">;</span>
    }

    public javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span> getjMenuItemOut() {
        return jMenuItemOut<span class="hljs-comment">;</span>
    }

    public javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span> getjMenuItemStock() {
        return jMenuItemStock<span class="hljs-comment">;</span>
    }

    public javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span> getjMenuItemUser() {
        return jMenuItemUser<span class="hljs-comment">;</span>
    }

    //GEN-BEGIN:variables
    // Variables declaration - do not modify
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span> aboutMenuItem<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span> contentsMenuItem<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span> copyMenuItem<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span> cutMenuItem<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span> deleteMenuItem<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenu</span> editMenu<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span> exitMenuItem<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenu</span> fileMenu<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenu</span> helpMenu<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JLabel</span> jLabel1<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenu</span> jMenu1<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span> jMenuItem1<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span> jMenuItemBook<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span> jMenuItemIn<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span> jMenuItemOut<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span> jMenuItemStock<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span> jMenuItemUser<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuBar</span> menuBar<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span> openMenuItem<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span> pasteMenuItem<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span> saveAsMenuItem<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JMenuItem</span> saveMenuItem<span class="hljs-comment">;</span>
    // End of variables declaration//GEN-END:variables

}</code></pre>

<h1 id="登录模块的源代码">登录模块的源代码：</h1>



<h2 id="逻辑层接口loginebi">逻辑层接口LoginEbi：</h2>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.login.business.ebi;
<span class="hljs-javadoc">/**
 * 用户登录模块的逻辑层接口
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0  2016-4-20
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">LoginEbi</span> {</span>
    <span class="hljs-javadoc">/**
     * 用户登录的方法
     *<span class="hljs-javadoctag"> @param</span> name 用户名
     *<span class="hljs-javadoctag"> @param</span> pwd  密码
     *<span class="hljs-javadoctag"> @return</span> 返回字符串，若登录成功则返回null，如果失败则返回相应的错误信息如用户名不存在或密码不正确
     */</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title">login</span>(String name,String pwd);    
}
</code></pre>



<h2 id="实现类loginebo">实现类LoginEbo：</h2>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.login.business.ebo;

<span class="hljs-keyword">import</span> cn.hncu.bookStore.login.business.ebi.LoginEbi;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.user.business.ebi.UserEbi;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.user.business.factory.UserEbiFactory;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.user.vo.UserModel;

<span class="hljs-javadoc">/**
 * 登录模块的实现类
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0  2016-4-20
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginEbo</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">LoginEbi</span>{</span>

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title">login</span>(String name, String pwd) {
        UserEbi ebi = UserEbiFactory.getUserEbi();
        UserModel user = ebi.getUserByName(name);
        <span class="hljs-keyword">if</span>(user==<span class="hljs-keyword">null</span>){
            <span class="hljs-keyword">return</span> <span class="hljs-string">"对不起，该用户不存在!"</span>;
        }
        <span class="hljs-keyword">if</span>(!user.getPwd().equals(pwd)){
            <span class="hljs-keyword">return</span> <span class="hljs-string">"您输入的密码不正确!"</span>;            
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;
    }

}
</code></pre>



<h2 id="工厂类loginebifactory">工厂类LoginEbiFactory：</h2>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.login.business.factory;

<span class="hljs-keyword">import</span> cn.hncu.bookStore.login.business.ebi.LoginEbi;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.login.business.ebo.LoginEbo;

<span class="hljs-javadoc">/**
 * 登录模块的工厂类
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0  2016-4-20
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginEbiFactory</span> {</span>

    <span class="hljs-javadoc">/**
     * 工厂方法
     *<span class="hljs-javadoctag"> @return</span>
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> LoginEbi <span class="hljs-title">getLoginEbi</span>(){
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> LoginEbo();
    }
}
</code></pre>



<h2 id="表现层登录界面loginpanel">表现层登录界面LoginPanel：</h2>

<pre class="prettyprint"><code class=" hljs avrasm"><span class="hljs-comment">/*
 * LoginPanel.java
 *
 * Created on __DATE__, __TIME__
 */</span>

package cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.login</span><span class="hljs-preprocessor">.ui</span><span class="hljs-comment">;</span>

import javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JOptionPane</span><span class="hljs-comment">;</span>

import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.BookStore</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.common</span><span class="hljs-preprocessor">.UserTypeEnum</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.login</span><span class="hljs-preprocessor">.business</span><span class="hljs-preprocessor">.factory</span><span class="hljs-preprocessor">.LoginEbiFactory</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.user</span><span class="hljs-preprocessor">.business</span><span class="hljs-preprocessor">.factory</span><span class="hljs-preprocessor">.UserEbiFactory</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.user</span><span class="hljs-preprocessor">.vo</span><span class="hljs-preprocessor">.UserModel</span><span class="hljs-comment">;</span>

<span class="hljs-comment">/**
 * 
 * @author 陈浩翔
 *
 * @version 1.0  2016-4-20
 */</span>
public class LoginPanel extends javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JPanel</span> {
    private BookStore mainFrame = null<span class="hljs-comment">;</span>

    <span class="hljs-comment">/** Creates new form LoginPanel */</span>
    public LoginPanel(BookStore mainFrame) {
        this<span class="hljs-preprocessor">.mainFrame</span> = mainFrame<span class="hljs-comment">;</span>
        initComponents()<span class="hljs-comment">;</span>
    }

    //GEN-BEGIN:initComponents
    // &lt;editor-fold defaultstate=<span class="hljs-string">"collapsed"</span> desc=<span class="hljs-string">"Generated Code"</span>&gt;
    private void initComponents() {

        jLabel1 = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JLabel</span>()<span class="hljs-comment">;</span>
        jLabel2 = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JLabel</span>()<span class="hljs-comment">;</span>
        tfdName = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JTextField</span>()<span class="hljs-comment">;</span>
        jLabel3 = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JLabel</span>()<span class="hljs-comment">;</span>
        tfpPwd = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JPasswordField</span>()<span class="hljs-comment">;</span>
        btnLogin = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JButton</span>()<span class="hljs-comment">;</span>
        btnHelp = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JButton</span>()<span class="hljs-comment">;</span>

        setMinimumSize(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Dimension</span>(<span class="hljs-number">800</span>, <span class="hljs-number">600</span>))<span class="hljs-comment">;</span>
        setLayout(null)<span class="hljs-comment">;</span>

        jLabel1<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"Dialog"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">48</span>))<span class="hljs-comment">;</span>
        jLabel1<span class="hljs-preprocessor">.setForeground</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Color</span>(<span class="hljs-number">255</span>, <span class="hljs-number">51</span>, <span class="hljs-number">0</span>))<span class="hljs-comment">;</span>
        jLabel1<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"\u767b\u5f55"</span>)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">add</span>(jLabel1)<span class="hljs-comment">;</span>
        jLabel1<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">320</span>, <span class="hljs-number">20</span>, <span class="hljs-number">140</span>, <span class="hljs-number">120</span>)<span class="hljs-comment">;</span>

        jLabel2<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"宋体"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">24</span>))<span class="hljs-comment">;</span>
        jLabel2<span class="hljs-preprocessor">.setForeground</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Color</span>(<span class="hljs-number">51</span>, <span class="hljs-number">0</span>, <span class="hljs-number">255</span>))<span class="hljs-comment">;</span>
        jLabel2<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"\u5bc6 \u7801:"</span>)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">add</span>(jLabel2)<span class="hljs-comment">;</span>
        jLabel2<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">210</span>, <span class="hljs-number">330</span>, <span class="hljs-number">80</span>, <span class="hljs-number">40</span>)<span class="hljs-comment">;</span>

        tfdName<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"微软雅黑"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">24</span>))<span class="hljs-comment">;</span>
        <span class="hljs-keyword">add</span>(tfdName)<span class="hljs-comment">;</span>
        tfdName<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">310</span>, <span class="hljs-number">220</span>, <span class="hljs-number">190</span>, <span class="hljs-number">40</span>)<span class="hljs-comment">;</span>

        jLabel3<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"宋体"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">24</span>))<span class="hljs-comment">;</span>
        jLabel3<span class="hljs-preprocessor">.setForeground</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Color</span>(<span class="hljs-number">51</span>, <span class="hljs-number">0</span>, <span class="hljs-number">255</span>))<span class="hljs-comment">;</span>
        jLabel3<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"\u7528\u6237\u540d:"</span>)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">add</span>(jLabel3)<span class="hljs-comment">;</span>
        jLabel3<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">200</span>, <span class="hljs-number">220</span>, <span class="hljs-number">120</span>, <span class="hljs-number">40</span>)<span class="hljs-comment">;</span>

        tfpPwd<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"宋体"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">24</span>))<span class="hljs-comment">;</span>
        <span class="hljs-keyword">add</span>(tfpPwd)<span class="hljs-comment">;</span>
        tfpPwd<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">310</span>, <span class="hljs-number">330</span>, <span class="hljs-number">190</span>, <span class="hljs-number">40</span>)<span class="hljs-comment">;</span>

        btnLogin<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"Dialog"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">24</span>))<span class="hljs-comment">;</span>
        btnLogin<span class="hljs-preprocessor">.setForeground</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Color</span>(<span class="hljs-number">51</span>, <span class="hljs-number">0</span>, <span class="hljs-number">255</span>))<span class="hljs-comment">;</span>
        btnLogin<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"\u767b\u5f55"</span>)<span class="hljs-comment">;</span>
        btnLogin<span class="hljs-preprocessor">.addActionListener</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionListener</span>() {
            public void actionPerformed(java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionEvent</span> evt) {
                btnLoginActionPerformed(evt)<span class="hljs-comment">;</span>
            }
        })<span class="hljs-comment">;</span>
        <span class="hljs-keyword">add</span>(btnLogin)<span class="hljs-comment">;</span>
        btnLogin<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">150</span>, <span class="hljs-number">440</span>, <span class="hljs-number">120</span>, <span class="hljs-number">70</span>)<span class="hljs-comment">;</span>

        btnHelp<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"Dialog"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">24</span>))<span class="hljs-comment">;</span>
        btnHelp<span class="hljs-preprocessor">.setForeground</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Color</span>(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">255</span>))<span class="hljs-comment">;</span>
        btnHelp<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"\u5e2e\u52a9"</span>)<span class="hljs-comment">;</span>
        btnHelp<span class="hljs-preprocessor">.addActionListener</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionListener</span>() {
            public void actionPerformed(java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionEvent</span> evt) {
                btnHelpActionPerformed(evt)<span class="hljs-comment">;</span>
            }
        })<span class="hljs-comment">;</span>
        <span class="hljs-keyword">add</span>(btnHelp)<span class="hljs-comment">;</span>
        btnHelp<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">450</span>, <span class="hljs-number">440</span>, <span class="hljs-number">130</span>, <span class="hljs-number">70</span>)<span class="hljs-comment">;</span>
    }// &lt;/editor-fold&gt;
    //GEN-END:initComponents

    private void btnHelpActionPerformed(java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionEvent</span> evt) {
        mainFrame<span class="hljs-preprocessor">.setContentPane</span>(new LoginHelp(mainFrame))<span class="hljs-comment">;</span>
        mainFrame<span class="hljs-preprocessor">.validate</span>()<span class="hljs-comment">;</span>
    }

    private void btnLoginActionPerformed(java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionEvent</span> evt) {
        //<span class="hljs-number">1</span>收集
        String name = tfdName<span class="hljs-preprocessor">.getText</span>()<span class="hljs-comment">;</span>
        String pwd = new String(tfpPwd<span class="hljs-preprocessor">.getPassword</span>())<span class="hljs-comment">;</span>

        if(name<span class="hljs-preprocessor">.equals</span>(<span class="hljs-string">"admin"</span>)&amp;&amp;pwd<span class="hljs-preprocessor">.equals</span>(<span class="hljs-string">"123456"</span>)){
            mainFrame<span class="hljs-preprocessor">.getjMenuItemUser</span>()<span class="hljs-preprocessor">.setEnabled</span>(true)<span class="hljs-comment">;</span>
            mainFrame<span class="hljs-preprocessor">.getjMenuItemBook</span>()<span class="hljs-preprocessor">.setEnabled</span>(true)<span class="hljs-comment">;</span>
            mainFrame<span class="hljs-preprocessor">.getjMenuItemIn</span>()<span class="hljs-preprocessor">.setEnabled</span>(true)<span class="hljs-comment">;</span>
            mainFrame<span class="hljs-preprocessor">.getjMenuItemOut</span>()<span class="hljs-preprocessor">.setEnabled</span>(true)<span class="hljs-comment">;</span>
            mainFrame<span class="hljs-preprocessor">.getjMenuItemStock</span>()<span class="hljs-preprocessor">.setEnabled</span>(true)<span class="hljs-comment">;</span>

            mainFrame<span class="hljs-preprocessor">.setContentPane</span>(new LoginWelcomePanel())<span class="hljs-comment">;</span>
            mainFrame<span class="hljs-preprocessor">.validate</span>()<span class="hljs-comment">;</span>
        }

        //<span class="hljs-number">2</span>组织---没有值对象，不组织了      
        //<span class="hljs-number">3</span>调用逻辑层
        String result = LoginEbiFactory<span class="hljs-preprocessor">.getLoginEbi</span>()<span class="hljs-preprocessor">.login</span>(name, pwd)<span class="hljs-comment">;</span>

        //<span class="hljs-number">4</span>返回到结果页面
        if (result != null) {
            JOptionPane<span class="hljs-preprocessor">.showMessageDialog</span>(mainFrame, result)<span class="hljs-comment">;</span>
            return<span class="hljs-comment">;</span>
        }

        //接下来，登录成功的情况
        //把该用户类型所对应的模块点亮
        UserModel user = UserEbiFactory<span class="hljs-preprocessor">.getUserEbi</span>()<span class="hljs-preprocessor">.getUserByName</span>(name)<span class="hljs-comment">;</span>
        //超级管理员，点亮所有模块
        if (user<span class="hljs-preprocessor">.getType</span>() == UserTypeEnum<span class="hljs-preprocessor">.ADMIN</span><span class="hljs-preprocessor">.getType</span>()) {
            mainFrame<span class="hljs-preprocessor">.getjMenuItemUser</span>()<span class="hljs-preprocessor">.setEnabled</span>(true)<span class="hljs-comment">;</span>
            mainFrame<span class="hljs-preprocessor">.getjMenuItemBook</span>()<span class="hljs-preprocessor">.setEnabled</span>(true)<span class="hljs-comment">;</span>
            mainFrame<span class="hljs-preprocessor">.getjMenuItemIn</span>()<span class="hljs-preprocessor">.setEnabled</span>(true)<span class="hljs-comment">;</span>
            mainFrame<span class="hljs-preprocessor">.getjMenuItemOut</span>()<span class="hljs-preprocessor">.setEnabled</span>(true)<span class="hljs-comment">;</span>
            mainFrame<span class="hljs-preprocessor">.getjMenuItemStock</span>()<span class="hljs-preprocessor">.setEnabled</span>(true)<span class="hljs-comment">;</span>
        }

        //图书管理员，点亮图书模块
        if (user<span class="hljs-preprocessor">.getType</span>() == UserTypeEnum<span class="hljs-preprocessor">.BOOK</span><span class="hljs-preprocessor">.getType</span>()) {
            mainFrame<span class="hljs-preprocessor">.getjMenuItemBook</span>()<span class="hljs-preprocessor">.setEnabled</span>(true)<span class="hljs-comment">;</span>
        }
        //进货管理员，点亮进货模块
        if (user<span class="hljs-preprocessor">.getType</span>() == UserTypeEnum<span class="hljs-preprocessor">.IN</span><span class="hljs-preprocessor">.getType</span>()) {
            mainFrame<span class="hljs-preprocessor">.getjMenuItemIn</span>()<span class="hljs-preprocessor">.setEnabled</span>(true)<span class="hljs-comment">;</span>
        }
        //销售管理员，点亮销售模块
        if (user<span class="hljs-preprocessor">.getType</span>() == UserTypeEnum<span class="hljs-preprocessor">.OUT</span><span class="hljs-preprocessor">.getType</span>()) {
            mainFrame<span class="hljs-preprocessor">.getjMenuItemOut</span>()<span class="hljs-preprocessor">.setEnabled</span>(true)<span class="hljs-comment">;</span>
        }
        //库存管理员，点亮库存模块
        if (user<span class="hljs-preprocessor">.getType</span>() == UserTypeEnum<span class="hljs-preprocessor">.STOCK</span><span class="hljs-preprocessor">.getType</span>()) {
            mainFrame<span class="hljs-preprocessor">.getjMenuItemStock</span>()<span class="hljs-preprocessor">.setEnabled</span>(true)<span class="hljs-comment">;</span>
        }

        mainFrame<span class="hljs-preprocessor">.setContentPane</span>(new LoginWelcomePanel())<span class="hljs-comment">;</span>
        mainFrame<span class="hljs-preprocessor">.validate</span>()<span class="hljs-comment">;</span>
    }

    //GEN-BEGIN:variables
    // Variables declaration - do not modify
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JButton</span> btnHelp<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JButton</span> btnLogin<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JLabel</span> jLabel1<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JLabel</span> jLabel2<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JLabel</span> jLabel3<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JTextField</span> tfdName<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JPasswordField</span> tfpPwd<span class="hljs-comment">;</span>
    // End of variables declaration//GEN-END:variables

}</code></pre>



<h2 id="表现层欢迎界面loginwelcomepanel">表现层欢迎界面LoginWelcomePanel：</h2>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-comment">/*
 * LoginWelcomePanel.java
 *
 * Created on __DATE__, __TIME__
 */</span>

<span class="hljs-keyword">package</span> cn.hncu.bookStore.login.ui;

<span class="hljs-javadoc">/**
 * 
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0  2016-4-20
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginWelcomePanel</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">javax</span>.<span class="hljs-title">swing</span>.<span class="hljs-title">JPanel</span> {</span>

    <span class="hljs-javadoc">/** Creates new form LoginWelcomePanel */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title">LoginWelcomePanel</span>() {
        initComponents();
    }

    <span class="hljs-javadoc">/** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */</span>
    <span class="hljs-comment">//GEN-BEGIN:initComponents</span>
    <span class="hljs-comment">// &lt;editor-fold defaultstate="collapsed" desc="Generated Code"&gt;</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initComponents</span>() {

        jLabel1 = <span class="hljs-keyword">new</span> javax.swing.JLabel();

        setMinimumSize(<span class="hljs-keyword">new</span> java.awt.Dimension(<span class="hljs-number">800</span>, <span class="hljs-number">600</span>));
        setLayout(<span class="hljs-keyword">null</span>);

        jLabel1.setFont(<span class="hljs-keyword">new</span> java.awt.Font(<span class="hljs-string">"Dialog"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">36</span>));
        jLabel1.setForeground(<span class="hljs-keyword">new</span> java.awt.Color(<span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>));
        jLabel1.setText(<span class="hljs-string">"\u6b22\u8fce\u767b\u5f55\uff0c\u592a\u9633\u6bcf\u5929\u90fd\u662f\u65b0\u7684\uff01\uff01"</span>);
        add(jLabel1);
        jLabel1.setBounds(<span class="hljs-number">100</span>, <span class="hljs-number">190</span>, <span class="hljs-number">590</span>, <span class="hljs-number">170</span>);
    }<span class="hljs-comment">// &lt;/editor-fold&gt;</span>
    <span class="hljs-comment">//GEN-END:initComponents</span>

    <span class="hljs-comment">//GEN-BEGIN:variables</span>
    <span class="hljs-comment">// Variables declaration - do not modify</span>
    <span class="hljs-keyword">private</span> javax.swing.JLabel jLabel1;
    <span class="hljs-comment">// End of variables declaration//GEN-END:variables</span>

}</code></pre>



<h2 id="表现层帮助界面loginhelp">表现层帮助界面LoginHelp：</h2>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-comment">/*
 * LoginHelp.java
 *
 * Created on __DATE__, __TIME__
 */</span>

<span class="hljs-keyword">package</span> cn.hncu.bookStore.login.ui;

<span class="hljs-keyword">import</span> javax.swing.JFrame;

<span class="hljs-keyword">import</span> cn.hncu.bookStore.BookStore;

<span class="hljs-javadoc">/**
 * 
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0  2016-4-20
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginHelp</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">javax</span>.<span class="hljs-title">swing</span>.<span class="hljs-title">JPanel</span> {</span>

    <span class="hljs-keyword">private</span> JFrame mainFrame = <span class="hljs-keyword">null</span>;

    <span class="hljs-javadoc">/** Creates new form LoginHelp 
     *<span class="hljs-javadoctag"> @param</span> mainFrame */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title">LoginHelp</span>(JFrame mainFrame) {
        <span class="hljs-keyword">this</span>.mainFrame = mainFrame;
        initComponents();
    }

    <span class="hljs-javadoc">/** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */</span>
    <span class="hljs-comment">//GEN-BEGIN:initComponents</span>
    <span class="hljs-comment">// &lt;editor-fold defaultstate="collapsed" desc="Generated Code"&gt;</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initComponents</span>() {

        jLabel1 = <span class="hljs-keyword">new</span> javax.swing.JLabel();

        setMinimumSize(<span class="hljs-keyword">new</span> java.awt.Dimension(<span class="hljs-number">800</span>, <span class="hljs-number">600</span>));
        setLayout(<span class="hljs-keyword">null</span>);

        jLabel1.setFont(<span class="hljs-keyword">new</span> java.awt.Font(<span class="hljs-string">"Dialog"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">14</span>));
        jLabel1.setText(<span class="hljs-string">"\u5982\u679c\u4f60\u4e0d\u5c0f\u5fc3\u628a\u7528\u6237\u6587\u4ef6\u5220\u9664\u4e86\uff0c\u53ef\u4ee5\u5229\u7528admin\u8d85\u7ea7\u7ba1\u7406\u5458\u767b\u5f55\uff0c\u5bc6\u7801\u4e3a:123456"</span>);
        add(jLabel1);
        jLabel1.setBounds(<span class="hljs-number">90</span>, <span class="hljs-number">250</span>, <span class="hljs-number">590</span>, <span class="hljs-number">80</span>);
    }<span class="hljs-comment">// &lt;/editor-fold&gt;</span>
    <span class="hljs-comment">//GEN-END:initComponents</span>

    <span class="hljs-comment">//GEN-BEGIN:variables</span>
    <span class="hljs-comment">// Variables declaration - do not modify</span>
    <span class="hljs-keyword">private</span> javax.swing.JLabel jLabel1;
    <span class="hljs-comment">// End of variables declaration//GEN-END:variables</span>

}</code></pre>



<h1 id="库存模块stock">库存模块：Stock</h1>



<h2 id="数据层接口stockdao">数据层接口StockDao：</h2>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.stock.dao.dao;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">import</span> cn.hncu.bookStore.stock.vo.StockModel;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.stock.vo.StockQueryModel;

<span class="hljs-javadoc">/**
 * 库存模块的数据层接口
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0  2016-4-20
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">StockDao</span> {</span>
    <span class="hljs-javadoc">/**
     * 创建一个库存对象
     *<span class="hljs-javadoctag"> @param</span> stock
     *<span class="hljs-javadoctag"> @return</span>
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">create</span>(StockModel stock);

    <span class="hljs-javadoc">/**
     * 
     *<span class="hljs-javadoctag"> @return</span> 返回所有的库存对象数据
     */</span>
    <span class="hljs-keyword">public</span> List&lt;StockModel&gt; <span class="hljs-title">getAl</span>();

    <span class="hljs-javadoc">/**
     * 根据uuid  -- 修改为传入的库存对象
     *<span class="hljs-javadoctag"> @param</span> stock
     *<span class="hljs-javadoctag"> @return</span>
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">update</span>(StockModel stock);

    <span class="hljs-javadoc">/**
     * 查询 符合条件 的 库存对象集合
     *<span class="hljs-javadoctag"> @param</span> sqm---查询条件
     *<span class="hljs-javadoctag"> @return</span>---符合条件的库存对象集合
     */</span>
    <span class="hljs-keyword">public</span> List&lt;StockModel&gt; <span class="hljs-title">getByCondition</span>(StockQueryModel sqm);

    <span class="hljs-javadoc">/**
     * 根据uuid查找当前的uuid对应的库存对象
     *<span class="hljs-javadoctag"> @param</span> uuid
     *<span class="hljs-javadoctag"> @return</span>
     */</span>
    <span class="hljs-keyword">public</span> StockModel <span class="hljs-title">getSingle</span>(String uuid);

}
</code></pre>



<h2 id="数据层实现类stockdaoimpl">数据层实现类StockDaoImpl：</h2>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.stock.dao.impl;

<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">import</span> cn.hncu.bookStore.stock.dao.dao.StockDao;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.stock.vo.StockModel;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.stock.vo.StockQueryModel;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.util.FileIoUtil;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.util.StringComparison;

<span class="hljs-javadoc">/**
 * 库存模块数据层的实现类  
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0  2016-4-20
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StockDaoImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">StockDao</span>{</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String FILE_NAME = <span class="hljs-string">"Stock.txt"</span>;

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">create</span>(StockModel stock) {
        List&lt;StockModel&gt; lists = FileIoUtil.readFormFile(FILE_NAME);
        <span class="hljs-keyword">for</span>(StockModel model :lists){
            <span class="hljs-keyword">if</span>(model.getUuid().equals(stock.getUuid())){
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
            }
        }
        lists.add(stock);
        FileIoUtil.write2file(lists, FILE_NAME);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;StockModel&gt; <span class="hljs-title">getAl</span>() {
        <span class="hljs-keyword">return</span> FileIoUtil.readFormFile(FILE_NAME);
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">update</span>(StockModel stock) {
        List&lt;StockModel&gt; lists = FileIoUtil.readFormFile(FILE_NAME);
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;lists.size();i++){
            <span class="hljs-keyword">if</span>(lists.get(i).getUuid().equals(stock.getUuid())){
                lists.set(i, stock);
                FileIoUtil.write2file(lists, FILE_NAME);
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;StockModel&gt; <span class="hljs-title">getByCondition</span>(StockQueryModel sqm) {
        List&lt;StockModel&gt; lists = FileIoUtil.readFormFile(FILE_NAME);
        List&lt;StockModel&gt; results = <span class="hljs-keyword">new</span> ArrayList&lt;StockModel&gt;();

        <span class="hljs-keyword">for</span>(StockModel model : lists){
            <span class="hljs-comment">//卫条件</span>

            <span class="hljs-comment">//比较库存ID</span>
            <span class="hljs-keyword">if</span>(!StringComparison.stringEquals(model.getUuid(), sqm.getUuid())){
                <span class="hljs-keyword">continue</span>;
            }

            <span class="hljs-comment">//比较图书ID</span>
            <span class="hljs-keyword">if</span>(!StringComparison.stringEquals(model.getBookUuid(), sqm.getBookUuid())){
                <span class="hljs-keyword">continue</span>;
            }

            <span class="hljs-comment">//库存查询最小数量</span>
            <span class="hljs-keyword">if</span>(sqm.getSumNum()&gt;<span class="hljs-number">0</span>){
                <span class="hljs-keyword">if</span>(sqm.getSumNum()&gt;model.getSumNum()){
                    <span class="hljs-keyword">continue</span>;
                }
            }

            <span class="hljs-comment">//库存查询最大数量</span>
            <span class="hljs-keyword">if</span>(sqm.getSumNum2()&gt;<span class="hljs-number">0</span>){
                <span class="hljs-keyword">if</span>(sqm.getSumNum2()&lt;model.getSumNum()){
                    <span class="hljs-keyword">continue</span>;
                }
            }

            results.add(model);
        }
        <span class="hljs-keyword">return</span> results;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> StockModel <span class="hljs-title">getSingle</span>(String uuid) {
        List&lt;StockModel&gt; lists = FileIoUtil.readFormFile(FILE_NAME);
        <span class="hljs-keyword">for</span>(StockModel model : lists){
            <span class="hljs-keyword">if</span>(model.getUuid().equals(uuid)){
                <span class="hljs-comment">//找到uuid相同，直接返回库存对象</span>
                <span class="hljs-keyword">return</span> model;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;
    }

}
</code></pre>

<h2 id="数据层工厂方法stockdaofactory">数据层工厂方法StockDaoFactory：</h2>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.stock.dao.factory;

<span class="hljs-keyword">import</span> cn.hncu.bookStore.stock.dao.dao.StockDao;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.stock.dao.impl.StockDaoImpl;

<span class="hljs-javadoc">/**
 * 工厂类-库存
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0  2016-4-20
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StockDaoFactory</span> {</span>
    <span class="hljs-javadoc">/**
     * 工厂方法
     *<span class="hljs-javadoctag"> @return</span> --- new 一个数据层实例
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> StockDao <span class="hljs-title">getStockDao</span>(){
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> StockDaoImpl();
    }

}
</code></pre>



<h2 id="逻辑层接口stockebi">逻辑层接口StockEbi：</h2>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.stock.business.ebi;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">import</span> cn.hncu.bookStore.stock.vo.StockModel;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.stock.vo.StockQueryModel;


<span class="hljs-javadoc">/**
 * 库存逻辑层的接口
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0  2016-4-20
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">StockEbi</span> {</span>
    <span class="hljs-javadoc">/**
     * 得到所有的库存对象
     *<span class="hljs-javadoctag"> @return</span>---所有的库存对象集合
     */</span>
    <span class="hljs-keyword">public</span> List&lt;StockModel&gt; <span class="hljs-title">getAll</span>();

    <span class="hljs-javadoc">/**
     * 根据查询条件，查询所有符合条件的库存对象
     *<span class="hljs-javadoctag"> @param</span> sqm---查询条件
     *<span class="hljs-javadoctag"> @return</span>---所有符合条件的库存对象集合
     */</span>
    <span class="hljs-keyword">public</span> List&lt;StockModel&gt; <span class="hljs-title">getByCondition</span>(StockQueryModel sqm);

}
</code></pre>



<h2 id="逻辑层实现类stockebo">逻辑层实现类StockEbo:</h2>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.stock.business.ebo;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">import</span> cn.hncu.bookStore.stock.business.ebi.StockEbi;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.stock.dao.dao.StockDao;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.stock.dao.factory.StockDaoFactory;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.stock.vo.StockModel;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.stock.vo.StockQueryModel;

<span class="hljs-javadoc">/**
 * 库存逻辑层实现类
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0  2016-4-20
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StockEbo</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">StockEbi</span>{</span>
    <span class="hljs-comment">//注入 dao </span>
    StockDao dao = StockDaoFactory.getStockDao();

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;StockModel&gt; <span class="hljs-title">getAll</span>() {
        <span class="hljs-keyword">return</span> dao.getAl();
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;StockModel&gt; <span class="hljs-title">getByCondition</span>(StockQueryModel sqm) {
        <span class="hljs-keyword">return</span> dao.getByCondition(sqm);
    }

}
</code></pre>



<h2 id="逻辑层工厂类stockebifactory">逻辑层工厂类StockEbiFactory：</h2>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.stock.business.factory;

<span class="hljs-keyword">import</span> cn.hncu.bookStore.stock.business.ebi.StockEbi;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.stock.business.ebo.StockEbo;

<span class="hljs-javadoc">/**
 * 库存逻辑层工厂类
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0  2016-4-20
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StockEbiFactory</span> {</span>
    <span class="hljs-javadoc">/**
     * 工厂方法
     *<span class="hljs-javadoctag"> @return</span>---new一个逻辑层实现类
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> StockEbi <span class="hljs-title">getStockEbi</span>(){
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> StockEbo();
    }
}
</code></pre>



<h2 id="值对象stockmodel">值对象StockModel：</h2>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.stock.vo;

<span class="hljs-keyword">import</span> java.io.Serializable;

<span class="hljs-javadoc">/**
 * 库存封装值对象
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StockModel</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Serializable</span>{</span>
    <span class="hljs-comment">//库存编号</span>
    <span class="hljs-keyword">private</span> String uuid;
    <span class="hljs-comment">//图书编号</span>
    <span class="hljs-keyword">private</span> String bookUuid;
    <span class="hljs-comment">//库存数量</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> sumNum;

    <span class="hljs-comment">//为显示给用户看而补的</span>
    <span class="hljs-keyword">private</span> String bookName;

    <span class="hljs-keyword">public</span> String <span class="hljs-title">getUuid</span>() {
        <span class="hljs-keyword">return</span> uuid;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUuid</span>(String uuid) {
        <span class="hljs-keyword">this</span>.uuid = uuid;
    }
    <span class="hljs-keyword">public</span> String <span class="hljs-title">getBookUuid</span>() {
        <span class="hljs-keyword">return</span> bookUuid;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setBookUuid</span>(String bookUuid) {
        <span class="hljs-keyword">this</span>.bookUuid = bookUuid;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getSumNum</span>() {
        <span class="hljs-keyword">return</span> sumNum;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setSumNum</span>(<span class="hljs-keyword">int</span> sumNum) {
        <span class="hljs-keyword">this</span>.sumNum = sumNum;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title">getBookName</span>() {
        <span class="hljs-keyword">return</span> bookName;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setBookName</span>(String bookName) {
        <span class="hljs-keyword">this</span>.bookName = bookName;
    }
    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">hashCode</span>() {
        <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> prime = <span class="hljs-number">31</span>;
        <span class="hljs-keyword">int</span> result = <span class="hljs-number">1</span>;
        result = prime * result + ((uuid == <span class="hljs-keyword">null</span>) ? <span class="hljs-number">0</span> : uuid.hashCode());
        <span class="hljs-keyword">return</span> result;
    }
    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">equals</span>(Object obj) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> == obj)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
        <span class="hljs-keyword">if</span> (obj == <span class="hljs-keyword">null</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        <span class="hljs-keyword">if</span> (getClass() != obj.getClass())
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        StockModel other = (StockModel) obj;
        <span class="hljs-keyword">if</span> (uuid == <span class="hljs-keyword">null</span>) {
            <span class="hljs-keyword">if</span> (other.uuid != <span class="hljs-keyword">null</span>)
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!uuid.equals(other.uuid))
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
    }
    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span>() {
        <span class="hljs-keyword">return</span> <span class="hljs-string">"库存编号:"</span>+uuid + <span class="hljs-string">", 《"</span> + bookName
                + <span class="hljs-string">"》, 库存数量:"</span> + sumNum+<span class="hljs-string">"本"</span>;
    }




}
</code></pre>



<h2 id="查询值对象stockquerymodel">查询值对象StockQueryModel：</h2>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.stock.vo;
<span class="hljs-javadoc">/**
 * 库存查询值对象封装
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StockQueryModel</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">StockModel</span>{</span>
    <span class="hljs-comment">//最大的图书库存数量</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> sumNum2;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getSumNum2</span>() {
        <span class="hljs-keyword">return</span> sumNum2;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setSumNum2</span>(<span class="hljs-keyword">int</span> sumNum2) {
        <span class="hljs-keyword">this</span>.sumNum2 = sumNum2;
    }



}
</code></pre>



<h2 id="表现层库存列表stocklistpanel">表现层库存列表StockListPanel：</h2>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-comment">/*
 * StockListPanel.java
 *
 * Created on __DATE__, __TIME__
 */</span>

<span class="hljs-keyword">package</span> cn.hncu.bookStore.stock.ui;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">import</span> javax.swing.JFrame;

<span class="hljs-keyword">import</span> cn.hncu.bookStore.stock.business.factory.StockEbiFactory;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.stock.vo.StockModel;

<span class="hljs-javadoc">/**
 * 
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0  2016-4-20
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StockListPanel</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">javax</span>.<span class="hljs-title">swing</span>.<span class="hljs-title">JPanel</span> {</span>

    <span class="hljs-keyword">private</span> JFrame mainFrame = <span class="hljs-keyword">null</span>;

    <span class="hljs-javadoc">/** Creates new form StockListPanel */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-title">StockListPanel</span>(JFrame mainFrame) {
        <span class="hljs-keyword">this</span>.mainFrame = mainFrame;
        initComponents();
        myInitData();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-title">StockListPanel</span>(JFrame mainFrame, List&lt;StockModel&gt; results) {
        <span class="hljs-keyword">this</span>.mainFrame = mainFrame;
        initComponents();
        jListStocks.setListData(results.toArray());
    }

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">myInitData</span>() {
        List&lt;StockModel&gt; lists = StockEbiFactory.getStockEbi().getAll();
        jListStocks.setListData(lists.toArray());
    }

    <span class="hljs-javadoc">/** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */</span>
    <span class="hljs-comment">//GEN-BEGIN:initComponents</span>
    <span class="hljs-comment">// &lt;editor-fold defaultstate="collapsed" desc="Generated Code"&gt;</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">initComponents</span>() {

        jLabel1 = <span class="hljs-keyword">new</span> javax.swing.JLabel();
        jScrollPane1 = <span class="hljs-keyword">new</span> javax.swing.JScrollPane();
        jListStocks = <span class="hljs-keyword">new</span> javax.swing.JList();
        btnQuery = <span class="hljs-keyword">new</span> javax.swing.JButton();

        setMinimumSize(<span class="hljs-keyword">new</span> java.awt.Dimension(<span class="hljs-number">800</span>, <span class="hljs-number">600</span>));
        setLayout(<span class="hljs-keyword">null</span>);

        jLabel1.setFont(<span class="hljs-keyword">new</span> java.awt.Font(<span class="hljs-string">"微软雅黑"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">48</span>));
        jLabel1.setForeground(<span class="hljs-keyword">new</span> java.awt.Color(<span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>));
        jLabel1.setText(<span class="hljs-string">"\u5e93\u5b58\u5217\u8868"</span>);
        add(jLabel1);
        jLabel1.setBounds(<span class="hljs-number">280</span>, <span class="hljs-number">0</span>, <span class="hljs-number">220</span>, <span class="hljs-number">90</span>);

        jListStocks.setFont(<span class="hljs-keyword">new</span> java.awt.Font(<span class="hljs-string">"微软雅黑"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">18</span>));
        jListStocks.setForeground(<span class="hljs-keyword">new</span> java.awt.Color(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">153</span>));
        jListStocks.setModel(<span class="hljs-keyword">new</span> javax.swing.AbstractListModel() {
            String[] strings = { <span class="hljs-string">""</span> };

            <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getSize</span>() {
                <span class="hljs-keyword">return</span> strings.length;
            }

            <span class="hljs-keyword">public</span> Object <span class="hljs-title">getElementAt</span>(<span class="hljs-keyword">int</span> i) {
                <span class="hljs-keyword">return</span> strings[i];
            }
        });
        jScrollPane1.setViewportView(jListStocks);

        add(jScrollPane1);
        jScrollPane1.setBounds(<span class="hljs-number">120</span>, <span class="hljs-number">100</span>, <span class="hljs-number">520</span>, <span class="hljs-number">320</span>);

        btnQuery.setFont(<span class="hljs-keyword">new</span> java.awt.Font(<span class="hljs-string">"Dialog"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">36</span>));
        btnQuery.setForeground(<span class="hljs-keyword">new</span> java.awt.Color(<span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">51</span>));
        btnQuery.setText(<span class="hljs-string">"\u67e5\u8be2\u5e93\u5b58"</span>);
        btnQuery.addActionListener(<span class="hljs-keyword">new</span> java.awt.event.ActionListener() {
            <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">actionPerformed</span>(java.awt.event.ActionEvent evt) {
                btnQueryActionPerformed(evt);
            }
        });
        add(btnQuery);
        btnQuery.setBounds(<span class="hljs-number">270</span>, <span class="hljs-number">440</span>, <span class="hljs-number">190</span>, <span class="hljs-number">90</span>);
    }<span class="hljs-comment">// &lt;/editor-fold&gt;</span>
    <span class="hljs-comment">//GEN-END:initComponents</span>

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">btnQueryActionPerformed</span>(java.awt.event.ActionEvent evt) {
        mainFrame.setContentPane(<span class="hljs-keyword">new</span> StockQueryPanel(mainFrame));
        mainFrame.validate();
    }

    <span class="hljs-comment">//GEN-BEGIN:variables</span>
    <span class="hljs-comment">// Variables declaration - do not modify</span>
    <span class="hljs-keyword">private</span> javax.swing.JButton btnQuery;
    <span class="hljs-keyword">private</span> javax.swing.JLabel jLabel1;
    <span class="hljs-keyword">private</span> javax.swing.JList jListStocks;
    <span class="hljs-keyword">private</span> javax.swing.JScrollPane jScrollPane1;
    <span class="hljs-comment">// End of variables declaration//GEN-END:variables</span>

}</code></pre>



<h2 id="表现层库存查询stockquerypanel">表现层库存查询StockQueryPanel：</h2>

<pre class="prettyprint"><code class=" hljs avrasm"><span class="hljs-comment">/*
 * StockQueryPanel.java
 *
 * Created on __DATE__, __TIME__
 */</span>

package cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.stock</span><span class="hljs-preprocessor">.ui</span><span class="hljs-comment">;</span>

import java<span class="hljs-preprocessor">.util</span><span class="hljs-preprocessor">.List</span><span class="hljs-comment">;</span>

import javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JFrame</span><span class="hljs-comment">;</span>
import javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JOptionPane</span><span class="hljs-comment">;</span>

import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.book</span><span class="hljs-preprocessor">.business</span><span class="hljs-preprocessor">.factory</span><span class="hljs-preprocessor">.BookEbiFactory</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.book</span><span class="hljs-preprocessor">.vo</span><span class="hljs-preprocessor">.BookModel</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.stock</span><span class="hljs-preprocessor">.business</span><span class="hljs-preprocessor">.factory</span><span class="hljs-preprocessor">.StockEbiFactory</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.stock</span><span class="hljs-preprocessor">.vo</span><span class="hljs-preprocessor">.StockModel</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.stock</span><span class="hljs-preprocessor">.vo</span><span class="hljs-preprocessor">.StockQueryModel</span><span class="hljs-comment">;</span>

<span class="hljs-comment">/**
 * 
 * @author 陈浩翔
 *
 * @version 1.0  2016-4-20
 */</span>
public class StockQueryPanel extends javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JPanel</span> {

    private JFrame mainFrame = null<span class="hljs-comment">;</span>

    <span class="hljs-comment">/** Creates new form StockQueryPanel 
     * @param mainFrame */</span>
    public StockQueryPanel(JFrame mainFrame) {
        this<span class="hljs-preprocessor">.mainFrame</span> = mainFrame<span class="hljs-comment">;</span>
        initComponents()<span class="hljs-comment">;</span>
        myInitData()<span class="hljs-comment">;</span>
    }

    <span class="hljs-comment">/**
     * 初始化图书box
     */</span>
    private void myInitData() {
        List&lt;BookModel&gt; books = BookEbiFactory<span class="hljs-preprocessor">.getBookEbi</span>()<span class="hljs-preprocessor">.getAll</span>()<span class="hljs-comment">;</span>
        for(BookModel book:books){
            combBook<span class="hljs-preprocessor">.addItem</span>(book<span class="hljs-preprocessor">.getName</span>())<span class="hljs-comment">;</span>
        }
    }

    <span class="hljs-comment">/** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */</span>
    //GEN-BEGIN:initComponents
    // &lt;editor-fold defaultstate=<span class="hljs-string">"collapsed"</span> desc=<span class="hljs-string">"Generated Code"</span>&gt;
    private void initComponents() {

        jLabel1 = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JLabel</span>()<span class="hljs-comment">;</span>
        jLabel7 = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JLabel</span>()<span class="hljs-comment">;</span>
        tfdStockUuid = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JTextField</span>()<span class="hljs-comment">;</span>
        jLabel5 = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JLabel</span>()<span class="hljs-comment">;</span>
        combBook = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JComboBox</span>()<span class="hljs-comment">;</span>
        jLabel8 = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JLabel</span>()<span class="hljs-comment">;</span>
        tfdStockNum = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JTextField</span>()<span class="hljs-comment">;</span>
        jLabel11 = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JLabel</span>()<span class="hljs-comment">;</span>
        tfdStockNum2 = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JTextField</span>()<span class="hljs-comment">;</span>
        btnQuery = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JButton</span>()<span class="hljs-comment">;</span>
        btnBack = new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JButton</span>()<span class="hljs-comment">;</span>

        setMinimumSize(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Dimension</span>(<span class="hljs-number">800</span>, <span class="hljs-number">600</span>))<span class="hljs-comment">;</span>
        setLayout(null)<span class="hljs-comment">;</span>

        jLabel1<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"Dialog"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">48</span>))<span class="hljs-comment">;</span>
        jLabel1<span class="hljs-preprocessor">.setForeground</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Color</span>(<span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>))<span class="hljs-comment">;</span>
        jLabel1<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"\u5e93\u5b58\u67e5\u8be2"</span>)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">add</span>(jLabel1)<span class="hljs-comment">;</span>
        jLabel1<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">270</span>, <span class="hljs-number">0</span>, <span class="hljs-number">230</span>, <span class="hljs-number">90</span>)<span class="hljs-comment">;</span>

        jLabel7<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"微软雅黑"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">18</span>))<span class="hljs-comment">;</span>
        jLabel7<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"\u5e93\u5b58\u7f16\u53f7:"</span>)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">add</span>(jLabel7)<span class="hljs-comment">;</span>
        jLabel7<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">80</span>, <span class="hljs-number">160</span>, <span class="hljs-number">80</span>, <span class="hljs-number">30</span>)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">add</span>(tfdStockUuid)<span class="hljs-comment">;</span>
        tfdStockUuid<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">180</span>, <span class="hljs-number">160</span>, <span class="hljs-number">150</span>, <span class="hljs-number">30</span>)<span class="hljs-comment">;</span>

        jLabel5<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"微软雅黑"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">18</span>))<span class="hljs-comment">;</span>
        jLabel5<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"\u56fe\u4e66:"</span>)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">add</span>(jLabel5)<span class="hljs-comment">;</span>
        jLabel5<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">430</span>, <span class="hljs-number">150</span>, <span class="hljs-number">50</span>, <span class="hljs-number">30</span>)<span class="hljs-comment">;</span>

        combBook<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"Dialog"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">18</span>))<span class="hljs-comment">;</span>
        combBook<span class="hljs-preprocessor">.setModel</span>(new javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.DefaultComboBoxModel</span>(
                new String[] { <span class="hljs-string">"查询所有"</span> }))<span class="hljs-comment">;</span>
        <span class="hljs-keyword">add</span>(combBook)<span class="hljs-comment">;</span>
        combBook<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">490</span>, <span class="hljs-number">150</span>, <span class="hljs-number">190</span>, <span class="hljs-number">30</span>)<span class="hljs-comment">;</span>

        jLabel8<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"微软雅黑"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">18</span>))<span class="hljs-comment">;</span>
        jLabel8<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"\u5e93\u5b58\u6700\u5c0f\u6570\u91cf:"</span>)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">add</span>(jLabel8)<span class="hljs-comment">;</span>
        jLabel8<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">50</span>, <span class="hljs-number">270</span>, <span class="hljs-number">140</span>, <span class="hljs-number">30</span>)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">add</span>(tfdStockNum)<span class="hljs-comment">;</span>
        tfdStockNum<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">180</span>, <span class="hljs-number">270</span>, <span class="hljs-number">150</span>, <span class="hljs-number">30</span>)<span class="hljs-comment">;</span>

        jLabel11<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"微软雅黑"</span>, <span class="hljs-number">0</span>, <span class="hljs-number">18</span>))<span class="hljs-comment">;</span>
        jLabel11<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"\u5e93\u5b58\u6700\u5927\u6570\u91cf:"</span>)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">add</span>(jLabel11)<span class="hljs-comment">;</span>
        jLabel11<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">360</span>, <span class="hljs-number">270</span>, <span class="hljs-number">120</span>, <span class="hljs-number">30</span>)<span class="hljs-comment">;</span>
        <span class="hljs-keyword">add</span>(tfdStockNum2)<span class="hljs-comment">;</span>
        tfdStockNum2<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">490</span>, <span class="hljs-number">270</span>, <span class="hljs-number">190</span>, <span class="hljs-number">30</span>)<span class="hljs-comment">;</span>

        btnQuery<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"Dialog"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">24</span>))<span class="hljs-comment">;</span>
        btnQuery<span class="hljs-preprocessor">.setForeground</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Color</span>(<span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">51</span>))<span class="hljs-comment">;</span>
        btnQuery<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"\u67e5\u8be2"</span>)<span class="hljs-comment">;</span>
        btnQuery<span class="hljs-preprocessor">.addActionListener</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionListener</span>() {
            public void actionPerformed(java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionEvent</span> evt) {
                btnQueryActionPerformed(evt)<span class="hljs-comment">;</span>
            }
        })<span class="hljs-comment">;</span>
        <span class="hljs-keyword">add</span>(btnQuery)<span class="hljs-comment">;</span>
        btnQuery<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">140</span>, <span class="hljs-number">410</span>, <span class="hljs-number">120</span>, <span class="hljs-number">70</span>)<span class="hljs-comment">;</span>

        btnBack<span class="hljs-preprocessor">.setFont</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Font</span>(<span class="hljs-string">"Dialog"</span>, <span class="hljs-number">1</span>, <span class="hljs-number">24</span>))<span class="hljs-comment">;</span>
        btnBack<span class="hljs-preprocessor">.setForeground</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.Color</span>(<span class="hljs-number">255</span>, <span class="hljs-number">0</span>, <span class="hljs-number">51</span>))<span class="hljs-comment">;</span>
        btnBack<span class="hljs-preprocessor">.setText</span>(<span class="hljs-string">"\u8fd4\u56de"</span>)<span class="hljs-comment">;</span>
        btnBack<span class="hljs-preprocessor">.addActionListener</span>(new java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionListener</span>() {
            public void actionPerformed(java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionEvent</span> evt) {
                btnBackActionPerformed(evt)<span class="hljs-comment">;</span>
            }
        })<span class="hljs-comment">;</span>
        <span class="hljs-keyword">add</span>(btnBack)<span class="hljs-comment">;</span>
        btnBack<span class="hljs-preprocessor">.setBounds</span>(<span class="hljs-number">490</span>, <span class="hljs-number">410</span>, <span class="hljs-number">120</span>, <span class="hljs-number">70</span>)<span class="hljs-comment">;</span>
    }// &lt;/editor-fold&gt;
    //GEN-END:initComponents

    private void btnQueryActionPerformed(java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionEvent</span> evt) {
        // <span class="hljs-number">1</span>收集参数(且验证输入有效性)
        //库存编号
        String uuid = tfdStockUuid<span class="hljs-preprocessor">.getText</span>()<span class="hljs-comment">;</span>
        //图书编号
        String bookUuid = null<span class="hljs-comment">;</span>
        if (combBook<span class="hljs-preprocessor">.getSelectedIndex</span>() &gt; <span class="hljs-number">0</span>) {
            bookUuid = BookEbiFactory<span class="hljs-preprocessor">.getBookEbi</span>()
                    <span class="hljs-preprocessor">.getBookByName</span>(combBook<span class="hljs-preprocessor">.getSelectedItem</span>()<span class="hljs-preprocessor">.toString</span>())
                    <span class="hljs-preprocessor">.getUuid</span>()<span class="hljs-comment">;</span>
        }

        //库存最小数量
        int sumNum = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
        if (tfdStockNum<span class="hljs-preprocessor">.getText</span>() != null
                &amp;&amp; tfdStockNum<span class="hljs-preprocessor">.getText</span>()<span class="hljs-preprocessor">.trim</span>()<span class="hljs-preprocessor">.length</span>() &gt; <span class="hljs-number">0</span>) {
            try {
                sumNum = Integer<span class="hljs-preprocessor">.parseInt</span>(tfdStockNum<span class="hljs-preprocessor">.getText</span>())<span class="hljs-comment">;</span>
                if (sumNum &lt; <span class="hljs-number">0</span>) {
                    throw new NumberFormatException()<span class="hljs-comment">;</span>
                }
            } catch (NumberFormatException e) {
                JOptionPane<span class="hljs-preprocessor">.showMessageDialog</span>(mainFrame, <span class="hljs-string">"库存最小数量必须输入正整数!"</span>)<span class="hljs-comment">;</span>
                return<span class="hljs-comment">;</span>
            }
        }

        //库存最大数量
        int sumNum2 = <span class="hljs-number">0</span><span class="hljs-comment">;</span>
        if (tfdStockNum2<span class="hljs-preprocessor">.getText</span>() != null
                &amp;&amp; tfdStockNum2<span class="hljs-preprocessor">.getText</span>()<span class="hljs-preprocessor">.trim</span>()<span class="hljs-preprocessor">.length</span>() &gt; <span class="hljs-number">0</span>) {
            try {
                sumNum2 = Integer<span class="hljs-preprocessor">.parseInt</span>(tfdStockNum2<span class="hljs-preprocessor">.getText</span>())<span class="hljs-comment">;</span>
                if (sumNum2 &lt; <span class="hljs-number">0</span>) {
                    throw new NumberFormatException()<span class="hljs-comment">;</span>
                }
            } catch (NumberFormatException e) {
                JOptionPane<span class="hljs-preprocessor">.showMessageDialog</span>(mainFrame, <span class="hljs-string">"库存最大数量必须输入正整数!"</span>)<span class="hljs-comment">;</span>
                return<span class="hljs-comment">;</span>
            }
        }

        // <span class="hljs-number">2</span>组织参数----StockQueryModel
        StockQueryModel sqm = new StockQueryModel()<span class="hljs-comment">;</span>
        sqm<span class="hljs-preprocessor">.setUuid</span>(uuid)<span class="hljs-comment">;</span>
        sqm<span class="hljs-preprocessor">.setBookUuid</span>(bookUuid)<span class="hljs-comment">;</span>
        sqm<span class="hljs-preprocessor">.setSumNum</span>(sumNum)<span class="hljs-comment">;</span>
        sqm<span class="hljs-preprocessor">.setSumNum</span>2(sumNum2)<span class="hljs-comment">;</span>

        // <span class="hljs-number">3</span>调用逻辑层
        List&lt;StockModel&gt; results = StockEbiFactory<span class="hljs-preprocessor">.getStockEbi</span>()
                <span class="hljs-preprocessor">.getByCondition</span>(sqm)<span class="hljs-comment">;</span>

        // <span class="hljs-number">4</span>返回到结果页面
        mainFrame<span class="hljs-preprocessor">.setContentPane</span>(new StockListPanel(mainFrame, results))<span class="hljs-comment">;</span>
        mainFrame<span class="hljs-preprocessor">.validate</span>()<span class="hljs-comment">;</span>
    }

    private void btnBackActionPerformed(java<span class="hljs-preprocessor">.awt</span><span class="hljs-preprocessor">.event</span><span class="hljs-preprocessor">.ActionEvent</span> evt) {
        back()<span class="hljs-comment">;</span>
    }

    private void back() {
        mainFrame<span class="hljs-preprocessor">.setContentPane</span>(new StockListPanel(mainFrame))<span class="hljs-comment">;</span>
        mainFrame<span class="hljs-preprocessor">.validate</span>()<span class="hljs-comment">;</span>
    }

    //GEN-BEGIN:variables
    // Variables declaration - do not modify
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JButton</span> btnBack<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JButton</span> btnQuery<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JComboBox</span> combBook<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JLabel</span> jLabel1<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JLabel</span> jLabel11<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JLabel</span> jLabel5<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JLabel</span> jLabel7<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JLabel</span> jLabel8<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JTextField</span> tfdStockNum<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JTextField</span> tfdStockNum2<span class="hljs-comment">;</span>
    private javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JTextField</span> tfdStockUuid<span class="hljs-comment">;</span>
    // End of variables declaration//GEN-END:variables

}</code></pre>



<h1 id="进货模块">进货模块：</h1>

<p>进货模块的逻辑层接口，在写了库存模块之后改了一点,增加了和库存模块的串接：</p>

<h2 id="逻辑层接口inmainebo">逻辑层接口InMainEbo：</h2>

<pre class="prettyprint"><code class=" hljs avrasm">package cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.in</span><span class="hljs-preprocessor">.business</span><span class="hljs-preprocessor">.ebo</span><span class="hljs-comment">;</span>

import java<span class="hljs-preprocessor">.util</span><span class="hljs-preprocessor">.List</span><span class="hljs-comment">;</span>
import java<span class="hljs-preprocessor">.util</span><span class="hljs-preprocessor">.Map</span><span class="hljs-comment">;</span>
import java<span class="hljs-preprocessor">.util</span><span class="hljs-preprocessor">.TreeMap</span><span class="hljs-comment">;</span>

import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.book</span><span class="hljs-preprocessor">.business</span><span class="hljs-preprocessor">.ebi</span><span class="hljs-preprocessor">.BookEbi</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.book</span><span class="hljs-preprocessor">.business</span><span class="hljs-preprocessor">.factory</span><span class="hljs-preprocessor">.BookEbiFactory</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.common</span><span class="hljs-preprocessor">.UuidModelConstance</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.common</span><span class="hljs-preprocessor">.uuid</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.UuidDao</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.common</span><span class="hljs-preprocessor">.uuid</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.factory</span><span class="hljs-preprocessor">.UuidDaoFactory</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.in</span><span class="hljs-preprocessor">.business</span><span class="hljs-preprocessor">.ebi</span><span class="hljs-preprocessor">.InMainEbi</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.in</span><span class="hljs-preprocessor">.business</span><span class="hljs-preprocessor">.factory</span><span class="hljs-preprocessor">.InMainEbiFactory</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.in</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.InDetailDao</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.in</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.InMainDao</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.in</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.factory</span><span class="hljs-preprocessor">.InDetailDaoFactory</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.in</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.factory</span><span class="hljs-preprocessor">.InMainDaoFactory</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.in</span><span class="hljs-preprocessor">.vo</span><span class="hljs-preprocessor">.InDetailModel</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.in</span><span class="hljs-preprocessor">.vo</span><span class="hljs-preprocessor">.InDetailQueryModel</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.in</span><span class="hljs-preprocessor">.vo</span><span class="hljs-preprocessor">.InMainModel</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.in</span><span class="hljs-preprocessor">.vo</span><span class="hljs-preprocessor">.InMainQueryModel</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.stock</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.StockDao</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.stock</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.factory</span><span class="hljs-preprocessor">.StockDaoFactory</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.stock</span><span class="hljs-preprocessor">.vo</span><span class="hljs-preprocessor">.StockModel</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.stock</span><span class="hljs-preprocessor">.vo</span><span class="hljs-preprocessor">.StockQueryModel</span><span class="hljs-comment">;</span>

<span class="hljs-comment">/**
 * 
 * @author 陈浩翔
 *
 * @version 1.0
 */</span>
public class InMainEbo implements InMainEbi{
    //注入dao

    InMainDao inMainDao = InMainDaoFactory<span class="hljs-preprocessor">.getInMainDao</span>()<span class="hljs-comment">;</span>
    InDetailDao inDetailDao = InDetailDaoFactory<span class="hljs-preprocessor">.getInDetailDao</span>()<span class="hljs-comment">;</span>
    UuidDao uuidDao = UuidDaoFactory<span class="hljs-preprocessor">.getUuidDao</span>()<span class="hljs-comment">;</span>
    BookEbi bookEbi = BookEbiFactory<span class="hljs-preprocessor">.getBookEbi</span>()<span class="hljs-comment">;</span>

    @Override
    public boolean create(InMainModel inMain, List&lt;InDetailModel&gt; inDetails) {
        //////////<span class="hljs-number">1</span>存储inMain信息///////////
        //补全inMain中的数据
        //需要:inUuid,inDate,inUserUuid   已组织:inUserUuid
        //还缺(需补):inUuid,inDate
        String inUuid = uuidDao<span class="hljs-preprocessor">.getNextUuid</span>(UuidModelConstance<span class="hljs-preprocessor">.IN</span>_MAIN)<span class="hljs-comment">;</span>
        inMain<span class="hljs-preprocessor">.setUuid</span>(inUuid)<span class="hljs-comment">;</span>
        inMain<span class="hljs-preprocessor">.setInDate</span>(System<span class="hljs-preprocessor">.currentTimeMillis</span>())<span class="hljs-comment">;</span>
        inMainDao<span class="hljs-preprocessor">.create</span>(inMain)<span class="hljs-comment">;</span>

         //////////<span class="hljs-number">2</span>存储inDetail信息///////////
        for(InDetailModel model:inDetails){
            //补全每一个inDetail中的数据
            //需要:inDetailUuid,inMainUuid,bookUuid,sumNum,sumMoney   已组织:bookUuid,sumNum
            //还缺(需补):inDetailUuid,inMainUuid,sumMoney
            model<span class="hljs-preprocessor">.setUuid</span>(uuidDao<span class="hljs-preprocessor">.getNextUuid</span>(UuidModelConstance<span class="hljs-preprocessor">.IN</span>_DETAIL))<span class="hljs-comment">;</span>
            model<span class="hljs-preprocessor">.setInId</span>(inUuid)<span class="hljs-comment">;</span>

            double sumMoney = model<span class="hljs-preprocessor">.getSumNum</span>() * bookEbi<span class="hljs-preprocessor">.getSingle</span>(model<span class="hljs-preprocessor">.getBookId</span>())<span class="hljs-preprocessor">.getInPrice</span>()<span class="hljs-comment">;</span>
            model<span class="hljs-preprocessor">.setSumMoney</span>(sumMoney)<span class="hljs-comment">;</span>
            inDetailDao<span class="hljs-preprocessor">.create</span>(model)<span class="hljs-comment">;</span>

            //////////※※※<span class="hljs-number">3</span> 图书入库--到库存表格///////////
            putInStock(model<span class="hljs-preprocessor">.getBookId</span>(),model<span class="hljs-preprocessor">.getSumNum</span>())<span class="hljs-comment">;</span>

        }
        return true<span class="hljs-comment">;</span>
    }

    <span class="hljs-comment">/**
     * 入库动作
     * @param bookId
     * @param bookName
     */</span>
    private void putInStock(String bookId, int sumNum) {
        //注入Stock模块的dao
        StockDao dao = StockDaoFactory<span class="hljs-preprocessor">.getStockDao</span>()<span class="hljs-comment">;</span>

        //查询库存，看看是否已经存在该bookUuid所对应的书，如果没有则库存数据为sumNum，否则为在原有基础上再加上sumNum
        StockQueryModel sqm = new StockQueryModel()<span class="hljs-comment">;</span>
        sqm<span class="hljs-preprocessor">.setBookUuid</span>(bookId)<span class="hljs-comment">;</span>
        List&lt;StockModel&gt; lists = dao<span class="hljs-preprocessor">.getByCondition</span>(sqm)<span class="hljs-comment">;</span>

        //库存中没有这种书
        if(lists==null||lists<span class="hljs-preprocessor">.size</span>()==<span class="hljs-number">0</span>){
            //表现层只负责组织进货模块的值对象，库存模块我们在逻辑层自己补
            StockModel stock = new StockModel()<span class="hljs-comment">;</span>

            //补:库存编号 uuid
            stock<span class="hljs-preprocessor">.setUuid</span>(UuidDaoFactory<span class="hljs-preprocessor">.getUuidDao</span>()<span class="hljs-preprocessor">.getNextUuid</span>(UuidModelConstance<span class="hljs-preprocessor">.STOCK</span>))<span class="hljs-comment">;</span>

            //补: bookName 专为显示给用户看的书名
            stock<span class="hljs-preprocessor">.setBookName</span>(BookEbiFactory<span class="hljs-preprocessor">.getBookEbi</span>()<span class="hljs-preprocessor">.getSingle</span>(bookId)<span class="hljs-preprocessor">.getName</span>())<span class="hljs-comment">;</span>
            stock<span class="hljs-preprocessor">.setBookUuid</span>(bookId)<span class="hljs-comment">;</span>

            stock<span class="hljs-preprocessor">.setSumNum</span>(sumNum)<span class="hljs-comment">;</span>

            dao<span class="hljs-preprocessor">.create</span>(stock)<span class="hljs-comment">;</span>

        }else{//库存中已经存在该图书对应的库存记录
            StockModel stock = lists<span class="hljs-preprocessor">.get</span>(<span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
            stock<span class="hljs-preprocessor">.setSumNum</span>( stock<span class="hljs-preprocessor">.getSumNum</span>()+sumNum )<span class="hljs-comment">;</span>
            dao<span class="hljs-preprocessor">.update</span>(stock)<span class="hljs-comment">;</span>
        }

    }

    @Override
    public Map&lt;InMainModel, List&lt;InDetailModel&gt;&gt; getAll() {
        Map&lt;InMainModel,List&lt;InDetailModel&gt;&gt; map = new TreeMap&lt;InMainModel, List&lt;InDetailModel&gt;&gt;()<span class="hljs-comment">;</span>

        List&lt;InMainModel&gt; inMains = inMainDao<span class="hljs-preprocessor">.getAll</span>()<span class="hljs-comment">;</span>

        for(InMainModel inMain: inMains ){
            //查询条件值对象的创建
            InDetailQueryModel idqm = new InDetailQueryModel()<span class="hljs-comment">;</span>
            String inUuid = inMain<span class="hljs-preprocessor">.getUuid</span>()<span class="hljs-comment">;</span>
            idqm<span class="hljs-preprocessor">.setInId</span>(inUuid)<span class="hljs-comment">;</span>

            List&lt;InDetailModel&gt; details = inDetailDao<span class="hljs-preprocessor">.getbyCondition</span>(idqm)<span class="hljs-comment">;</span>

            map<span class="hljs-preprocessor">.put</span>(inMain, details)<span class="hljs-comment">;</span>
        }

        return map<span class="hljs-comment">;</span>
    }

    @Override
    public Map&lt;InMainModel, List&lt;InDetailModel&gt;&gt; getByCondition(
            InMainQueryModel imqm, InDetailQueryModel idqm) {
        Map&lt;InMainModel, List&lt;InDetailModel&gt;&gt; map = new TreeMap&lt;InMainModel, List&lt;InDetailModel&gt;&gt;()<span class="hljs-comment">;</span>

        List&lt;InMainModel&gt; list = inMainDao<span class="hljs-preprocessor">.getbyCondition</span>(imqm)<span class="hljs-comment">;</span>

        for(InMainModel inMain : list){
            idqm<span class="hljs-preprocessor">.setInId</span>(inMain<span class="hljs-preprocessor">.getUuid</span>())<span class="hljs-comment">;</span>

            List&lt;InDetailModel&gt; details = inDetailDao<span class="hljs-preprocessor">.getbyCondition</span>(idqm)<span class="hljs-comment">;</span>
            if(details<span class="hljs-preprocessor">.size</span>()!=<span class="hljs-number">0</span>){
                map<span class="hljs-preprocessor">.put</span>(inMain, details)<span class="hljs-comment">;</span>
            }
        }

        return map<span class="hljs-comment">;</span>
    }

}
</code></pre>



<h1 id="销售模块">销售模块：</h1>

<p>销售模块的逻辑层接口也增加了和库存模块的串接：</p>



<h2 id="逻辑层接口outmainebo">逻辑层接口OutMainEbo：</h2>

<pre class="prettyprint"><code class=" hljs avrasm">package cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.business</span><span class="hljs-preprocessor">.ebo</span><span class="hljs-comment">;</span>

import java<span class="hljs-preprocessor">.util</span><span class="hljs-preprocessor">.List</span><span class="hljs-comment">;</span>
import java<span class="hljs-preprocessor">.util</span><span class="hljs-preprocessor">.Map</span><span class="hljs-comment">;</span>
import java<span class="hljs-preprocessor">.util</span><span class="hljs-preprocessor">.TreeMap</span><span class="hljs-comment">;</span>

import javax<span class="hljs-preprocessor">.swing</span><span class="hljs-preprocessor">.JOptionPane</span><span class="hljs-comment">;</span>

import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.book</span><span class="hljs-preprocessor">.business</span><span class="hljs-preprocessor">.ebi</span><span class="hljs-preprocessor">.BookEbi</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.book</span><span class="hljs-preprocessor">.business</span><span class="hljs-preprocessor">.factory</span><span class="hljs-preprocessor">.BookEbiFactory</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.common</span><span class="hljs-preprocessor">.UuidModelConstance</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.common</span><span class="hljs-preprocessor">.uuid</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.UuidDao</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.common</span><span class="hljs-preprocessor">.uuid</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.factory</span><span class="hljs-preprocessor">.UuidDaoFactory</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.business</span><span class="hljs-preprocessor">.ebi</span><span class="hljs-preprocessor">.OutMainEbi</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.OutDetailDao</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.OutMainDao</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.factory</span><span class="hljs-preprocessor">.OutDetailDaoFactory</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.factory</span><span class="hljs-preprocessor">.OutMainDaoFactory</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.vo</span><span class="hljs-preprocessor">.OutDetailModel</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.vo</span><span class="hljs-preprocessor">.OutDetailQueryModel</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.vo</span><span class="hljs-preprocessor">.OutMainModel</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.vo</span><span class="hljs-preprocessor">.OutMainQueryModel</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.stock</span><span class="hljs-preprocessor">.business</span><span class="hljs-preprocessor">.factory</span><span class="hljs-preprocessor">.StockEbiFactory</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.stock</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.StockDao</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.stock</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.factory</span><span class="hljs-preprocessor">.StockDaoFactory</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.stock</span><span class="hljs-preprocessor">.vo</span><span class="hljs-preprocessor">.StockModel</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.stock</span><span class="hljs-preprocessor">.vo</span><span class="hljs-preprocessor">.StockQueryModel</span><span class="hljs-comment">;</span>

<span class="hljs-comment">/**
 * 
 * @author 陈浩翔
 *
 * @version 1.0
 */</span>
public class OutMainEbo implements OutMainEbi{
    //注入dao

    OutMainDao outMainDao = OutMainDaoFactory<span class="hljs-preprocessor">.getOutMainDao</span>()<span class="hljs-comment">;</span>
    OutDetailDao outDetailDao = OutDetailDaoFactory<span class="hljs-preprocessor">.getOutDetailDao</span>()<span class="hljs-comment">;</span>
    UuidDao uuidDao = UuidDaoFactory<span class="hljs-preprocessor">.getUuidDao</span>()<span class="hljs-comment">;</span>
    BookEbi bookEbi = BookEbiFactory<span class="hljs-preprocessor">.getBookEbi</span>()<span class="hljs-comment">;</span>

    @Override
    public boolean create(OutMainModel outMain, List&lt;OutDetailModel&gt; outDetails) {
        //※※※库存操作<span class="hljs-number">1</span>：在添加销售信息之前要进行防护:检查库存，看是否可能库存不够。如果不够，本次添加直接失败,不进行数据存储---return false<span class="hljs-comment">;</span>
        //检查库存----用明细单(outDetail)中的bookUuid
        //注入Stock模块的dao
        StockDao stockDao = StockDaoFactory<span class="hljs-preprocessor">.getStockDao</span>()<span class="hljs-comment">;</span>
        for(OutDetailModel detail : outDetails){
            StockQueryModel sqm = new StockQueryModel()<span class="hljs-comment">;</span>
            sqm<span class="hljs-preprocessor">.setBookUuid</span>(detail<span class="hljs-preprocessor">.getBookId</span>())<span class="hljs-comment">;</span>
            List&lt;StockModel&gt; lists = stockDao<span class="hljs-preprocessor">.getByCondition</span>(sqm)<span class="hljs-comment">;</span>
            if(lists==null||lists<span class="hljs-preprocessor">.size</span>()==<span class="hljs-number">0</span>){//库存中没有该图书信息
                JOptionPane<span class="hljs-preprocessor">.showMessageDialog</span>(null, <span class="hljs-string">"库存中不存在《"</span>+detail<span class="hljs-preprocessor">.getBookName</span>()+<span class="hljs-string">"》,本次销售添加失败!"</span>)<span class="hljs-comment">;</span>
                return false<span class="hljs-comment">;</span>
            }else {
                StockModel sm = lists<span class="hljs-preprocessor">.get</span>(<span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
                if(sm<span class="hljs-preprocessor">.getSumNum</span>()&lt;detail<span class="hljs-preprocessor">.getSumNum</span>()){
                    JOptionPane<span class="hljs-preprocessor">.showMessageDialog</span>(null, <span class="hljs-string">"库存中《"</span>+detail<span class="hljs-preprocessor">.getBookName</span>()+<span class="hljs-string">"》数量不足,本次销售添加失败!"</span>)<span class="hljs-comment">;</span>
                    return false<span class="hljs-comment">;</span>
                }
            }

        }



        //////////<span class="hljs-number">1</span>存储outMain信息///////////
        //补全outMain中的数据
        //需要:inUuid,inDate,inUserUuid   已组织:inUserUuid
        //还缺(需补):inUuid,inDate
        String outUuid = uuidDao<span class="hljs-preprocessor">.getNextUuid</span>(UuidModelConstance<span class="hljs-preprocessor">.OUT</span>_MAIN)<span class="hljs-comment">;</span>
        outMain<span class="hljs-preprocessor">.setUuid</span>(outUuid)<span class="hljs-comment">;</span>
        outMain<span class="hljs-preprocessor">.setOutDate</span>(System<span class="hljs-preprocessor">.currentTimeMillis</span>())<span class="hljs-comment">;</span>
        outMainDao<span class="hljs-preprocessor">.create</span>(outMain)<span class="hljs-comment">;</span>

         //////////<span class="hljs-number">2</span>存储inDetail信息///////////
        for(OutDetailModel model:outDetails){
            //补全每一个inDetail中的数据
            //需要:inDetailUuid,outMainUuid,bookUuid,sumNum,sumMoney   已组织:bookUuid,sumNum
            //还缺(需补):inDetailUuid,outMainUuid,sumMoney
            model<span class="hljs-preprocessor">.setUuid</span>(uuidDao<span class="hljs-preprocessor">.getNextUuid</span>(UuidModelConstance<span class="hljs-preprocessor">.OUT</span>_DETAIL))<span class="hljs-comment">;</span>
            model<span class="hljs-preprocessor">.setOutId</span>(outUuid)<span class="hljs-comment">;</span>

            double sumMoney = model<span class="hljs-preprocessor">.getSumNum</span>() * bookEbi<span class="hljs-preprocessor">.getSingle</span>(model<span class="hljs-preprocessor">.getBookId</span>())<span class="hljs-preprocessor">.getSalePrice</span>()<span class="hljs-comment">;</span>
            model<span class="hljs-preprocessor">.setSumMoney</span>(sumMoney)<span class="hljs-comment">;</span>
            outDetailDao<span class="hljs-preprocessor">.create</span>(model)<span class="hljs-comment">;</span>


            //※※※库存操作<span class="hljs-number">2</span>：更新库存---把对应的每种图书的数量  减去  这次销售的数量
            StockQueryModel sqm = new StockQueryModel()<span class="hljs-comment">;</span>
            sqm<span class="hljs-preprocessor">.setBookUuid</span>(model<span class="hljs-preprocessor">.getBookId</span>())<span class="hljs-comment">;</span>
            List&lt;StockModel&gt; stocks = StockEbiFactory<span class="hljs-preprocessor">.getStockEbi</span>()<span class="hljs-preprocessor">.getByCondition</span>(sqm)<span class="hljs-comment">;</span>
            //经过之前的防护，list里面一定有一个值，而且库存一定可以更新成功
            StockModel stock = stocks<span class="hljs-preprocessor">.get</span>(<span class="hljs-number">0</span>)<span class="hljs-comment">;</span>
            stock<span class="hljs-preprocessor">.setSumNum</span>(stock<span class="hljs-preprocessor">.getSumNum</span>()-model<span class="hljs-preprocessor">.getSumNum</span>())<span class="hljs-comment">;</span>
            StockDaoFactory<span class="hljs-preprocessor">.getStockDao</span>()<span class="hljs-preprocessor">.update</span>(stock)<span class="hljs-comment">;</span>

        }
        return true<span class="hljs-comment">;</span>
    }

    @Override
    public Map&lt;OutMainModel, List&lt;OutDetailModel&gt;&gt; getAll() {
        Map&lt;OutMainModel,List&lt;OutDetailModel&gt;&gt; map = new TreeMap&lt;OutMainModel, List&lt;OutDetailModel&gt;&gt;()<span class="hljs-comment">;</span>

        List&lt;OutMainModel&gt; outMains = outMainDao<span class="hljs-preprocessor">.getAll</span>()<span class="hljs-comment">;</span>

        for(OutMainModel outMain: outMains ){
            //查询条件值对象的创建
            OutDetailQueryModel odqm = new OutDetailQueryModel()<span class="hljs-comment">;</span>
            String inUuid = outMain<span class="hljs-preprocessor">.getUuid</span>()<span class="hljs-comment">;</span>
            odqm<span class="hljs-preprocessor">.setOutId</span>(inUuid)<span class="hljs-comment">;</span>

            List&lt;OutDetailModel&gt; details = outDetailDao<span class="hljs-preprocessor">.getbyCondition</span>(odqm)<span class="hljs-comment">;</span>

            map<span class="hljs-preprocessor">.put</span>(outMain, details)<span class="hljs-comment">;</span>
        }

        return map<span class="hljs-comment">;</span>
    }

    @Override
    public Map&lt;OutMainModel, List&lt;OutDetailModel&gt;&gt; getByCondition(
            OutMainQueryModel imqm, OutDetailQueryModel odqm) {
        Map&lt;OutMainModel, List&lt;OutDetailModel&gt;&gt; map = new TreeMap&lt;OutMainModel, List&lt;OutDetailModel&gt;&gt;()<span class="hljs-comment">;</span>

        List&lt;OutMainModel&gt; list = outMainDao<span class="hljs-preprocessor">.getbyCondition</span>(imqm)<span class="hljs-comment">;</span>

        for(OutMainModel outMain : list){
            odqm<span class="hljs-preprocessor">.setOutId</span>(outMain<span class="hljs-preprocessor">.getUuid</span>())<span class="hljs-comment">;</span>

            List&lt;OutDetailModel&gt; details = outDetailDao<span class="hljs-preprocessor">.getbyCondition</span>(odqm)<span class="hljs-comment">;</span>
            if(details<span class="hljs-preprocessor">.size</span>()!=<span class="hljs-number">0</span>){
                map<span class="hljs-preprocessor">.put</span>(outMain, details)<span class="hljs-comment">;</span>
            }
        }

        return map<span class="hljs-comment">;</span>
    }

}
</code></pre>



<h1 id="展示图片">展示图片：</h1>



<h2 id="登录界面">登录界面：</h2>

<p>菜单项，除了注销是点亮之外，其他的都是暗的。 <br />
<img src="http://img.blog.csdn.net/20160420170941493" alt="登录界面" title="" /></p>



<h2 id="帮助界面">帮助界面：</h2>

<p>当用户文件被删除了之后，就只能通过这个账号登录了。</p>

<p><img src="http://img.blog.csdn.net/20160420171054072" alt="" title="" /></p>



<h2 id="管理员登录后的欢迎界面">管理员登录后的欢迎界面：</h2>

<p>这个是管理员登录的欢迎界面，可以看到所有的菜单项都被点亮了的。</p>

<p><img src="http://img.blog.csdn.net/20160420171140291" alt="" title="" /></p>



<h2 id="库存管理用户登录后的库存界面">库存管理用户登录后的库存界面：</h2>

<p>可以看到，菜单项只有库存那一项是点亮的。</p>

<p><img src="http://img.blog.csdn.net/20160420171233713" alt="" title="" /></p>



<h2 id="销售管理用户登录后的销售界面">销售管理用户登录后的销售界面：</h2>

<p>可以看到，菜单项只有销售那一项是点亮的。 <br />
<img src="http://img.blog.csdn.net/20160420171923731" alt="这里写图片描述" title="" /></p>

<p>其他的都是，一个模块的用户对应相应的模块！</p>

<p>本系列就到此结束啦。 <br />
可能有一些小bug，我也就没去改了，时间比较紧，O(∩_∩)O哈哈~，大家有兴趣的可以去改改，做做。</p>

<p>所有代码的百度云链接： <br />
链接: <a href="http://pan.baidu.com/s/1c2ob5r6">http://pan.baidu.com/s/1c2ob5r6</a> 密码: u6jv</p></div>&#13;
        <script type="text/javascript">&#13;
            $(function () {&#13;
                $('pre.prettyprint code').each(function () {&#13;
                    var lines = $(this).text().split('\n').length;&#13;
                    var $numbering = $('&lt;ul/&gt;').addClass('pre-numbering').hide();&#13;
                    $(this).addClass('has-numbering').parent().append($numbering);&#13;
                    for (i = 1; i &lt;= lines; i++) {&#13;
                        $numbering.append($('&lt;li/&gt;').text(i));&#13;
                    };&#13;
                    $numbering.fadeIn(1700);&#13;
                });&#13;
            });&#13;
        </script>&#13;
   &#13;
