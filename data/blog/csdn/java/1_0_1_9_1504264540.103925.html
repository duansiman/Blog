
        <div class="markdown_views"><h1 id="本系列前面博客的链接">本系列前面博客的链接：</h1>

<p>Java-单机版的书店管理系统(练习设计模块和思想_系列 七 ) <br />
<a href="http://blog.csdn.net/qq_26525215/article/details/51190696">http://blog.csdn.net/qq_26525215/article/details/51190696</a></p>

<p>Java-单机版的书店管理系统(练习设计模块和思想_系列 六 )  <br />
<a href="http://blog.csdn.net/qq_26525215/article/details/51169277">http://blog.csdn.net/qq_26525215/article/details/51169277</a></p>

<p>Java-单机版的书店管理系统(练习设计模块和思想_系列 五 )  <br />
<a href="http://blog.csdn.net/qq_26525215/article/details/51136848">http://blog.csdn.net/qq_26525215/article/details/51136848</a></p>

<p>Java-单机版的书店管理系统(练习设计模块和思想_系列 四(2) )：  <br />
<a href="http://blog.csdn.net/qq_26525215/article/details/51117135">http://blog.csdn.net/qq_26525215/article/details/51117135</a></p>

<p>Java-单机版的书店管理系统(练习设计模块和思想_系列 四(1) )：  <br />
<a href="http://blog.csdn.net/qq_26525215/article/details/51116429">http://blog.csdn.net/qq_26525215/article/details/51116429</a></p>

<p>Java-单机版的书店管理系统(练习设计模块和思想_系列 三 )：  <br />
<a href="http://blog.csdn.net/qq_26525215/article/details/51099202">http://blog.csdn.net/qq_26525215/article/details/51099202</a></p>

<p>Java-单机版的书店管理系统(练习设计模块和思想_系列 二 )：  <br />
<a href="http://blog.csdn.net/qq_26525215/article/details/51089734">http://blog.csdn.net/qq_26525215/article/details/51089734</a></p>

<p>Java-单机版的书店管理系统(练习设计模块和思想_系列 一 )：  <br />
<a href="http://blog.csdn.net/qq_26525215/article/details/51073546">http://blog.csdn.net/qq_26525215/article/details/51073546</a></p>



<h1 id="介绍">介绍：</h1>

<p>完成了销售模块。</p>

<p>因为销售模块和进货模块惊人的相似， <br />
我就利用代码拷贝技术，直接拷贝进货模块的代码了，只是改了类名和变量名。 <br />
这对于以后在公司开发项目是有好处的， <br />
能节省大量的时间！而且不容易出错。大家如果以后开发项目可以学学这种拷贝代码，修改代码名称类名来完成功能几乎一样的模块。</p>



<h1 id="销售模块源代码">销售模块源代码：</h1>



<h2 id="值对象封装outmainmodel">值对象封装OutMainModel：</h2>



<pre class="prettyprint"><code class=" hljs scala"><span class="hljs-keyword">package</span> cn.hncu.bookStore.out.vo;

<span class="hljs-keyword">import</span> java.io.Serializable;

<span class="hljs-keyword">import</span> cn.hncu.bookStore.util.DateUtil;

<span class="hljs-javadoc">/**
 * 销售管理值对象封装
 * <span class="hljs-javadoctag">@author</span> 陈浩翔
 *
 * <span class="hljs-javadoctag">@version</span> 1.0
 */</span>
public <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OutMainModel</span> <span class="hljs-title">implements</span> <span class="hljs-title">Serializable</span>, <span class="hljs-title">Comparable</span>&lt;<span class="hljs-title">OutMainModel</span>&gt;{</span>
    <span class="hljs-comment">//销售单编号</span>
    <span class="hljs-keyword">private</span> String uuid;
    <span class="hljs-comment">//销售时间</span>
    <span class="hljs-keyword">private</span> long outDate;
    <span class="hljs-comment">//销售人员编号</span>
    <span class="hljs-keyword">private</span> String outUserId;

    <span class="hljs-comment">/* 
       如果某个字段是外键，同时又需要在当前表中相应表现层显示出用户能看得懂
     的信息,则需要补一个专用于信息显示(给用户看)的字段。
     */</span>
    <span class="hljs-keyword">private</span> String outUserName;

    public String getOutUserName() {
        <span class="hljs-keyword">return</span> outUserName;
    }

    public void setOutUserName(String outUserName) {
        <span class="hljs-keyword">this</span>.outUserName = outUserName;
    }

    <span class="hljs-javadoc">/**
     * 
     * <span class="hljs-javadoctag">@return</span> ---返回销售单编号(String型)
     */</span>
    public String getUuid() {
        <span class="hljs-keyword">return</span> uuid;
    }

    <span class="hljs-javadoc">/**
     * 
     * <span class="hljs-javadoctag">@param</span> uuid---设置销售单编号(String型)
     */</span>
    public void setUuid(String uuid) {
        <span class="hljs-keyword">this</span>.uuid = uuid;
    }

    <span class="hljs-javadoc">/**
     * 
     * <span class="hljs-javadoctag">@return</span>---返回销售时间(long型)
     */</span>
    public long getOutDate() {
        <span class="hljs-keyword">return</span> outDate;
    }

    <span class="hljs-javadoc">/**
     * 
     * <span class="hljs-javadoctag">@param</span> outDate---设置销售时间(long型)
     */</span>
    public void setOutDate(long outDate) {
        <span class="hljs-keyword">this</span>.outDate = outDate;
    }

    <span class="hljs-javadoc">/**
     * 
     * <span class="hljs-javadoctag">@return</span>---返回销售人员编号(String型)
     */</span>
    public String getOutUserId() {
        <span class="hljs-keyword">return</span> outUserId;
    }

    <span class="hljs-javadoc">/**
     * 
     * <span class="hljs-javadoctag">@param</span> outUserId---设置销售人员编号(String型)
     */</span>
    public void setOutUserId(String outUserId) {
        <span class="hljs-keyword">this</span>.outUserId = outUserId;
    }

    <span class="hljs-annotation">@Override</span>
    public int hashCode() {
        <span class="hljs-keyword">final</span> int prime = <span class="hljs-number">31</span>;
        int result = <span class="hljs-number">1</span>;
        result = prime * result + ((uuid == <span class="hljs-keyword">null</span>) ? <span class="hljs-number">0</span> : uuid.hashCode());
        <span class="hljs-keyword">return</span> result;
    }

    <span class="hljs-annotation">@Override</span>
    public boolean equals(Object obj) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> == obj)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
        <span class="hljs-keyword">if</span> (obj == <span class="hljs-keyword">null</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        <span class="hljs-keyword">if</span> (getClass() != obj.getClass())
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        OutMainModel other = (OutMainModel) obj;
        <span class="hljs-keyword">if</span> (uuid == <span class="hljs-keyword">null</span>) {
            <span class="hljs-keyword">if</span> (other.uuid != <span class="hljs-keyword">null</span>)
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!uuid.equals(other.uuid))
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
    }

    <span class="hljs-annotation">@Override</span>
    public String toString() {
        <span class="hljs-keyword">return</span> uuid + <span class="hljs-string">", "</span> + outUserName
                + <span class="hljs-string">", "</span> + DateUtil.long2String(outDate);
    }

    <span class="hljs-annotation">@Override</span>
    public int compareTo(OutMainModel o) {
        <span class="hljs-keyword">return</span> Integer.parseInt(uuid)-Integer.parseInt(o.uuid);
    }
}
</code></pre>

<p>值对象查询封装OutMainQueryModel：</p>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.out.vo;

<span class="hljs-javadoc">/**
 * 销售查询值对象封装
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OutMainQueryModel</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">OutMainModel</span> {</span>

    <span class="hljs-comment">//需要查询的最大时间</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">long</span> outDate2;

    <span class="hljs-javadoc">/**
     * 
     *<span class="hljs-javadoctag"> @return</span>---需要查询的最大时间值
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">long</span> <span class="hljs-title">getOutDate2</span>() {
        <span class="hljs-keyword">return</span> outDate2;
    }

    <span class="hljs-javadoc">/**
     * 
     *<span class="hljs-javadoctag"> @param</span> outDate2---设置需要查询的最大时间
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setOutDate2</span>(<span class="hljs-keyword">long</span> inDate2) {
        <span class="hljs-keyword">this</span>.outDate2 = outDate2;
    }

}
</code></pre>

<p>销售明细值对象封装OutDetailModel：</p>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.out.vo;

<span class="hljs-keyword">import</span> java.io.Serializable;

<span class="hljs-javadoc">/**
 * 销售明细管理的值对象封装
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OutDetailModel</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Serializable</span>{</span>
    <span class="hljs-comment">//销售明细编号</span>
    <span class="hljs-keyword">private</span> String uuid;
    <span class="hljs-comment">//销售单编号</span>
    <span class="hljs-keyword">private</span> String outId;
    <span class="hljs-comment">//图书编号</span>
    <span class="hljs-keyword">private</span> String bookId;
    <span class="hljs-comment">//销售数量</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> sumNum;
    <span class="hljs-comment">//销售总金额</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">double</span> sumMoney;

    <span class="hljs-comment">//为把书名显示给用户看，给bookUuid添加一个bookName属性</span>
    <span class="hljs-keyword">private</span> String bookName;



    <span class="hljs-keyword">public</span> String <span class="hljs-title">getBookName</span>() {
        <span class="hljs-keyword">return</span> bookName;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setBookName</span>(String bookName) {
        <span class="hljs-keyword">this</span>.bookName = bookName;
    }
    <span class="hljs-keyword">public</span> String <span class="hljs-title">getUuid</span>() {
        <span class="hljs-keyword">return</span> uuid;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setUuid</span>(String uuid) {
        <span class="hljs-keyword">this</span>.uuid = uuid;
    }
    <span class="hljs-keyword">public</span> String <span class="hljs-title">getOutId</span>() {
        <span class="hljs-keyword">return</span> outId;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setOutId</span>(String outId) {
        <span class="hljs-keyword">this</span>.outId = outId;
    }
    <span class="hljs-keyword">public</span> String <span class="hljs-title">getBookId</span>() {
        <span class="hljs-keyword">return</span> bookId;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setBookId</span>(String bookId) {
        <span class="hljs-keyword">this</span>.bookId = bookId;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getSumNum</span>() {
        <span class="hljs-keyword">return</span> sumNum;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setSumNum</span>(<span class="hljs-keyword">int</span> sumNum) {
        <span class="hljs-keyword">this</span>.sumNum = sumNum;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">double</span> <span class="hljs-title">getSumMoney</span>() {
        <span class="hljs-keyword">return</span> sumMoney;
    }
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setSumMoney</span>(<span class="hljs-keyword">double</span> sumMoney) {
        <span class="hljs-keyword">this</span>.sumMoney = sumMoney;
    }


    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">hashCode</span>() {
        <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> prime = <span class="hljs-number">31</span>;
        <span class="hljs-keyword">int</span> result = <span class="hljs-number">1</span>;
        result = prime * result + ((uuid == <span class="hljs-keyword">null</span>) ? <span class="hljs-number">0</span> : uuid.hashCode());
        <span class="hljs-keyword">return</span> result;
    }
    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">equals</span>(Object obj) {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> == obj)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
        <span class="hljs-keyword">if</span> (obj == <span class="hljs-keyword">null</span>)
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        <span class="hljs-keyword">if</span> (getClass() != obj.getClass())
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        OutDetailModel other = (OutDetailModel) obj;
        <span class="hljs-keyword">if</span> (uuid == <span class="hljs-keyword">null</span>) {
            <span class="hljs-keyword">if</span> (other.uuid != <span class="hljs-keyword">null</span>)
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (!uuid.equals(other.uuid))
            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
    }
    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span>() {
        <span class="hljs-keyword">return</span> uuid +<span class="hljs-string">", "</span>+bookName + <span class="hljs-string">", "</span> + sumNum
                + <span class="hljs-string">"本, "</span> + sumMoney + <span class="hljs-string">"元"</span>;
    }





}
</code></pre>



<h2 id="销售明细查询值对象封装outdetailquerymodel">销售明细查询值对象封装OutDetailQueryModel：</h2>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.out.vo;

<span class="hljs-javadoc">/**
 * 销售明细查询值对象封装
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OutDetailQueryModel</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">OutDetailModel</span> {</span>

    <span class="hljs-comment">//需要查询的最大销售数量</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> sumNum2;
    <span class="hljs-comment">//需要查询的最大销售金额</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">double</span> sumMoney2;

    <span class="hljs-javadoc">/**
     * 
     *<span class="hljs-javadoctag"> @return</span>---返回需要查询的最大销售数量
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getSumNum2</span>() {
        <span class="hljs-keyword">return</span> sumNum2;
    }
    <span class="hljs-javadoc">/**
     * 
     *<span class="hljs-javadoctag"> @param</span> sumNum2---设置需要查询的最大销售数量
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setSumNum2</span>(<span class="hljs-keyword">int</span> sumNum2) {
        <span class="hljs-keyword">this</span>.sumNum2 = sumNum2;
    }

    <span class="hljs-javadoc">/**
     * 
     *<span class="hljs-javadoctag"> @return</span>---返回需要查询的最大销售金额
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">double</span> <span class="hljs-title">getSumMoney2</span>() {
        <span class="hljs-keyword">return</span> sumMoney2;
    }

    <span class="hljs-javadoc">/**
     * 
     *<span class="hljs-javadoctag"> @param</span> sumMoney2---设置需要查询的最大销售金额
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setSumMoney2</span>(<span class="hljs-keyword">double</span> sumMoney2) {
        <span class="hljs-keyword">this</span>.sumMoney2 = sumMoney2;
    }

}
</code></pre>

<h2 id="数据层接口outmaindao">数据层接口OutMainDao：</h2>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.out.dao.dao;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">import</span> cn.hncu.bookStore.out.vo.OutMainModel;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.out.vo.OutMainQueryModel;

<span class="hljs-javadoc">/**
 * 销售管理数据层接口
 * 
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 * 
 *<span class="hljs-javadoctag"> @version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">OutMainDao</span> {</span>

    <span class="hljs-javadoc">/**
     * 创建一个销售数据对象
     *<span class="hljs-javadoctag"> @param</span> outMain---需要创建的销售数据对象
     *<span class="hljs-javadoctag"> @return</span>---true 表示创建成功，false 表示创建失败
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">create</span>(OutMainModel outMain);

    <span class="hljs-javadoc">/**
     * 删除一个销售数据对象
     *<span class="hljs-javadoctag"> @param</span> uuid---销售单的编号-唯一的
     *<span class="hljs-javadoctag"> @return</span>---true表示删除成功， false表示删除失败
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">delete</span>(String uuid);

    <span class="hljs-javadoc">/**
     * 修改一个销售数据的对象
     *<span class="hljs-javadoctag"> @param</span> outMain---需要修改的销售管理对象
     *<span class="hljs-javadoctag"> @return</span>---true表示修改成功，false表示修改失败
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">update</span>(OutMainModel outMain);

    <span class="hljs-javadoc">/**
     * 根据销售单编号，得到销售对象的其他信息资料
     *<span class="hljs-javadoctag"> @param</span> uuid---销售单编号
     *<span class="hljs-javadoctag"> @return</span>---该对象的其他其他信息资料
     */</span>
    <span class="hljs-keyword">public</span> OutMainModel <span class="hljs-title">getSingle</span>(String uuid);

    <span class="hljs-javadoc">/**
     * 
     *<span class="hljs-javadoctag"> @return</span>---所有的销售管理对象信息
     */</span>
    <span class="hljs-keyword">public</span> List&lt;OutMainModel&gt; <span class="hljs-title">getAll</span>();

    <span class="hljs-javadoc">/**
     * 查找销售管理对象
     *<span class="hljs-javadoctag"> @param</span> imqm---查找条件！
     *<span class="hljs-javadoctag"> @return</span>---满足查找条件的所有OutMainModel对象
     */</span>
    <span class="hljs-keyword">public</span> List&lt;OutMainModel&gt; <span class="hljs-title">getbyCondition</span>(OutMainQueryModel omqm);
}
</code></pre>



<h2 id="数据层接口outdetaildao">数据层接口OutDetailDao：</h2>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.out.dao.dao;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">import</span> cn.hncu.bookStore.out.vo.OutDetailModel;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.out.vo.OutDetailQueryModel;

<span class="hljs-javadoc">/**
 * 销售明细管理数据层接口
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">OutDetailDao</span> {</span>
    <span class="hljs-javadoc">/**
     * 创建一个销售明细数据对象
     *<span class="hljs-javadoctag"> @param</span> outMain---需要创建的销售明细数据对象
     *<span class="hljs-javadoctag"> @return</span>---true 表示创建成功，false 表示创建失败
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">create</span>(OutDetailModel outDetail);

    <span class="hljs-javadoc">/**
     * 删除一个销售明细数据对象
     *<span class="hljs-javadoctag"> @param</span> uuid---销售明细单的编号-唯一的
     *<span class="hljs-javadoctag"> @return</span>---true表示删除成功， false表示删除失败
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">delete</span>(String uuid);

    <span class="hljs-javadoc">/**
     * 修改一个销售明细数据的对象
     *<span class="hljs-javadoctag"> @param</span> outMain---需要修改的销售管理明细对象
     *<span class="hljs-javadoctag"> @return</span>---true表示修改成功，false表示修改失败
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">update</span>(OutDetailModel outDetail);

    <span class="hljs-javadoc">/**
     * 根据销售明细单编号，得到销售明细对象的其他信息资料
     *<span class="hljs-javadoctag"> @param</span> uuid---销售明细单编号
     *<span class="hljs-javadoctag"> @return</span>---该对象的其他其他信息资料
     */</span>
    <span class="hljs-keyword">public</span> OutDetailModel <span class="hljs-title">getSingle</span>(String uuid);

    <span class="hljs-javadoc">/**
     * 
     *<span class="hljs-javadoctag"> @return</span>---所有的销售明细管理对象信息
     */</span>
    <span class="hljs-keyword">public</span> List&lt;OutDetailModel&gt; <span class="hljs-title">getAll</span>();

    <span class="hljs-javadoc">/**
     * 查找销售明细管理对象
     *<span class="hljs-javadoctag"> @param</span> omqm---查找条件！
     *<span class="hljs-javadoctag"> @return</span>---满足查找条件的所有OutDetailModel对象
     */</span>
    <span class="hljs-keyword">public</span> List&lt;OutDetailModel&gt; <span class="hljs-title">getbyCondition</span>(OutDetailQueryModel odqm);
}
</code></pre>



<h2 id="数据层实现类outmaindaoserimpl">数据层实现类OutMainDaoSerImpl：</h2>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.out.dao.impl;

<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">import</span> cn.hncu.bookStore.out.dao.dao.OutMainDao;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.out.vo.OutMainModel;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.out.vo.OutMainQueryModel;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.util.FileIoUtil;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.util.StringComparison;

<span class="hljs-javadoc">/**
 * 销售管理的实现类
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OutMainDaoSerImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">OutMainDao</span> {</span>

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String FILE_NAME = <span class="hljs-string">"OutMain.txt"</span>;
    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">create</span>(OutMainModel outMain) {
        List&lt;OutMainModel&gt; list = FileIoUtil.readFormFile(FILE_NAME);
        <span class="hljs-keyword">for</span>(OutMainModel model:list){
            <span class="hljs-keyword">if</span>(model.getUuid().equals(outMain.getUuid())){<span class="hljs-comment">//存在，则不能添加</span>
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
            }
        }
        list.add(outMain);
        FileIoUtil.write2file(list, FILE_NAME);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">delete</span>(String uuid) {
        List&lt;OutMainModel&gt; list = FileIoUtil.readFormFile(FILE_NAME);
        <span class="hljs-keyword">for</span>(OutMainModel model:list){
            <span class="hljs-keyword">if</span>(model.getUuid().equals(uuid)){<span class="hljs-comment">//存在，则删除</span>
                list.remove(model);
                FileIoUtil.write2file(list, FILE_NAME);
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">update</span>(OutMainModel outMain) {
        List&lt;OutMainModel&gt; list = FileIoUtil.readFormFile(FILE_NAME);
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;list.size();i++){
            OutMainModel model = list.get(i);
            <span class="hljs-keyword">if</span>(model.getUuid().equals(outMain.getUuid())){<span class="hljs-comment">//存在，则修改</span>
                list.set(i, outMain);
                FileIoUtil.write2file(list, FILE_NAME);
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> OutMainModel <span class="hljs-title">getSingle</span>(String uuid) {
        List&lt;OutMainModel&gt; list = FileIoUtil.readFormFile(FILE_NAME);
        <span class="hljs-keyword">for</span>(OutMainModel model:list){
            <span class="hljs-keyword">if</span>(model.getUuid().equals(uuid)){<span class="hljs-comment">//存在，则返回</span>
                <span class="hljs-keyword">return</span> model;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;OutMainModel&gt; <span class="hljs-title">getAll</span>() {
        <span class="hljs-keyword">return</span> FileIoUtil.readFormFile(FILE_NAME);
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;OutMainModel&gt; <span class="hljs-title">getbyCondition</span>(OutMainQueryModel omqm) {
        List&lt;OutMainModel&gt; lists = FileIoUtil.readFormFile(FILE_NAME);
        List&lt;OutMainModel&gt; results = <span class="hljs-keyword">new</span> ArrayList&lt;OutMainModel&gt;();
        <span class="hljs-keyword">for</span>(OutMainModel model : lists){



            <span class="hljs-keyword">if</span>(!StringComparison.stringEquals( model.getUuid(),omqm.getUuid())){
                <span class="hljs-keyword">continue</span>;
            }

            <span class="hljs-keyword">if</span>(!StringComparison.stringEquals(model.getOutUserId(), omqm.getOutUserId())){
                <span class="hljs-keyword">continue</span>;
            }
            <span class="hljs-keyword">if</span>(omqm.getOutDate()&gt;<span class="hljs-number">0</span>){
                <span class="hljs-keyword">if</span>(model.getOutDate()&lt;omqm.getOutDate()){
                    <span class="hljs-keyword">continue</span>;
                }
            }
            <span class="hljs-keyword">if</span>(omqm.getOutDate2()&gt;<span class="hljs-number">0</span>){
                <span class="hljs-keyword">if</span>(model.getOutDate()&gt;omqm.getOutDate2()){
                    <span class="hljs-keyword">continue</span>;
                }
            }
            results.add(model);
        }
        <span class="hljs-keyword">return</span> results;
    }

}
</code></pre>



<h2 id="数据层实现类outdetaildaoserimpl">数据层实现类OutDetailDaoSerImpl：</h2>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.out.dao.impl;

<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">import</span> cn.hncu.bookStore.out.dao.dao.OutDetailDao;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.out.dao.factory.OutDetailDaoFactory;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.out.vo.OutDetailModel;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.out.vo.OutDetailQueryModel;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.util.FileIoUtil;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.util.StringComparison;

<span class="hljs-javadoc">/**
 * 销售明细的实现类
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OutDetailDaoSerImpl</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">OutDetailDao</span>{</span>
    <span class="hljs-comment">//销售明细数据的存储的文件名</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> String FILE_NAME = <span class="hljs-string">"OutDetail.txt"</span>;

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">create</span>(OutDetailModel outDetail) {
        List&lt;OutDetailModel&gt; lists = FileIoUtil.readFormFile(FILE_NAME);

        <span class="hljs-keyword">for</span>(OutDetailModel model: lists){
            <span class="hljs-comment">//已经存在这个Uuid，不能添加</span>
            <span class="hljs-keyword">if</span>(model.getUuid().equals(outDetail.getUuid())){
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
            }
        }

        lists.add(outDetail);
        FileIoUtil.write2file(lists, FILE_NAME);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">delete</span>(String uuid) {
        List&lt;OutDetailModel&gt; list = FileIoUtil.readFormFile(FILE_NAME);
        <span class="hljs-keyword">for</span>(OutDetailModel model: list){
            <span class="hljs-comment">//存在，就删除</span>
            <span class="hljs-keyword">if</span>(model.getUuid().equals(uuid)){
                list.remove(model);
                FileIoUtil.write2file(list, FILE_NAME);
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">update</span>(OutDetailModel outDetail) {
        List&lt;OutDetailModel&gt; list  = FileIoUtil.readFormFile(FILE_NAME);
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;list.size();i++){
            <span class="hljs-comment">//找到了，就修改</span>
            <span class="hljs-keyword">if</span>(list.get(i).getUuid().equals(outDetail.getUuid())){
                list.set(i, outDetail);
                FileIoUtil.write2file(list, FILE_NAME);
                <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> OutDetailModel <span class="hljs-title">getSingle</span>(String uuid) {
        List&lt;OutDetailModel&gt; list = FileIoUtil.readFormFile(FILE_NAME);
        <span class="hljs-keyword">for</span>(OutDetailModel model : list){
            <span class="hljs-comment">//找到了，就返回</span>
            <span class="hljs-keyword">if</span>(model.getUuid().equals(uuid)){
                <span class="hljs-keyword">return</span> model;
            }
        }
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;OutDetailModel&gt; <span class="hljs-title">getAll</span>() {
        <span class="hljs-keyword">return</span> FileIoUtil.readFormFile(FILE_NAME);
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> List&lt;OutDetailModel&gt; <span class="hljs-title">getbyCondition</span>(OutDetailQueryModel odqm) {
        List&lt;OutDetailModel&gt; lists = getAll();
        List&lt;OutDetailModel&gt; resulits = <span class="hljs-keyword">new</span> ArrayList&lt;OutDetailModel&gt;();
        <span class="hljs-keyword">for</span>(OutDetailModel model:lists){

            <span class="hljs-keyword">if</span>(!StringComparison.stringEquals(model.getUuid(), odqm.getUuid())){
                <span class="hljs-keyword">continue</span>;
            }

            <span class="hljs-keyword">if</span>(!StringComparison.stringEquals(model.getOutId(), odqm.getOutId())){
                <span class="hljs-keyword">continue</span>;
            }

            <span class="hljs-keyword">if</span>(!StringComparison.stringEquals(model.getBookId(), odqm.getBookId())){
                <span class="hljs-keyword">continue</span>;
            }

            <span class="hljs-keyword">if</span>(odqm.getSumNum()&gt;<span class="hljs-number">0</span>){
                <span class="hljs-keyword">if</span>(model.getSumNum()&lt;odqm.getSumNum()){
                    <span class="hljs-keyword">continue</span>;
                }
            }
            <span class="hljs-keyword">if</span>(odqm.getSumNum2()&gt;<span class="hljs-number">0</span>){
                <span class="hljs-keyword">if</span>(model.getSumNum()&gt;odqm.getSumNum2()){
                    <span class="hljs-keyword">continue</span>;
                }
            }

            <span class="hljs-keyword">if</span>(odqm.getSumMoney()&gt;<span class="hljs-number">0</span>){
                <span class="hljs-keyword">if</span>(model.getSumMoney()&lt;odqm.getSumMoney()){
                    <span class="hljs-keyword">continue</span>;
                }
            }
            <span class="hljs-keyword">if</span>(odqm.getSumMoney2()&gt;<span class="hljs-number">0</span>){
                <span class="hljs-keyword">if</span>(model.getSumMoney()&gt;odqm.getSumMoney2()){
                    <span class="hljs-keyword">continue</span>;
                }
            }

            resulits.add(model);
        }
        <span class="hljs-keyword">return</span> resulits;
    }

}
</code></pre>



<h2 id="数据层工厂类outmaindaofactory">数据层工厂类OutMainDaoFactory：</h2>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.out.dao.factory;

<span class="hljs-keyword">import</span> cn.hncu.bookStore.out.dao.dao.OutMainDao;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.out.dao.impl.OutMainDaoSerImpl;

<span class="hljs-javadoc">/**
 * 工厂方法---new 一个销售实现类
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *<span class="hljs-javadoctag"> @version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OutMainDaoFactory</span> {</span>

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> OutMainDao <span class="hljs-title">getOutMainDao</span>(){
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> OutMainDaoSerImpl();
    }
}
</code></pre>



<h2 id="数据层工厂类outdetaildaofactory">数据层工厂类OutDetailDaoFactory：</h2>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.out.dao.factory;

<span class="hljs-keyword">import</span> cn.hncu.bookStore.out.dao.dao.OutDetailDao;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.out.dao.impl.OutDetailDaoSerImpl;

<span class="hljs-javadoc">/**
 * 工厂方法----new 一个销售明细的实现类
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OutDetailDaoFactory</span> {</span>

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> OutDetailDao <span class="hljs-title">getOutDetailDao</span>(){
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> OutDetailDaoSerImpl();
    }
}
</code></pre>



<h2 id="逻辑层接口outmainebi">逻辑层接口OutMainEbi：</h2>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.out.business.ebi;

<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-keyword">import</span> cn.hncu.bookStore.out.vo.OutMainQueryModel;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.out.vo.OutDetailModel;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.out.vo.OutDetailQueryModel;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.out.vo.OutMainModel;

<span class="hljs-javadoc">/**
 * 
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *<span class="hljs-javadoctag"> @version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">OutMainEbi</span> {</span>

    <span class="hljs-javadoc">/**
     * 创建一个销售模块数据-
     *<span class="hljs-javadoctag"> @param</span> inMain---销售数据
     *<span class="hljs-javadoctag"> @param</span> outDetails---销售明细数据
     *<span class="hljs-javadoctag"> @return</span>---返回true表示创建成功，false表示创建失败
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">create</span>(OutMainModel inMain,List&lt;OutDetailModel&gt; outDetails);

    <span class="hljs-javadoc">/**
     * 
     *<span class="hljs-javadoctag"> @return</span>---返回所有的销售模块（包括销售明细）的集合
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> Map&lt;OutMainModel, List&lt;OutDetailModel&gt;&gt; <span class="hljs-title">getAll</span>();

    <span class="hljs-javadoc">/**
     * 
     *<span class="hljs-javadoctag"> @param</span> omqm---销售管理需要查找的条件
     *<span class="hljs-javadoctag"> @param</span> idqm---销售明细需要查找的条件
     *<span class="hljs-javadoctag"> @return</span>---满足条件的所有销售数据的Map集合
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> Map&lt;OutMainModel, List&lt;OutDetailModel&gt;&gt; <span class="hljs-title">getByCondition</span>(OutMainQueryModel omqm,OutDetailQueryModel odqm);

}
</code></pre>



<h2 id="逻辑层实现类outmainebo">逻辑层实现类OutMainEbo：</h2>



<pre class="prettyprint"><code class=" hljs avrasm">package cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.business</span><span class="hljs-preprocessor">.ebo</span><span class="hljs-comment">;</span>

import java<span class="hljs-preprocessor">.util</span><span class="hljs-preprocessor">.List</span><span class="hljs-comment">;</span>
import java<span class="hljs-preprocessor">.util</span><span class="hljs-preprocessor">.Map</span><span class="hljs-comment">;</span>
import java<span class="hljs-preprocessor">.util</span><span class="hljs-preprocessor">.TreeMap</span><span class="hljs-comment">;</span>

import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.book</span><span class="hljs-preprocessor">.business</span><span class="hljs-preprocessor">.ebi</span><span class="hljs-preprocessor">.BookEbi</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.book</span><span class="hljs-preprocessor">.business</span><span class="hljs-preprocessor">.factory</span><span class="hljs-preprocessor">.BookEbiFactory</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.common</span><span class="hljs-preprocessor">.UuidModelConstance</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.common</span><span class="hljs-preprocessor">.uuid</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.UuidDao</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.common</span><span class="hljs-preprocessor">.uuid</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.factory</span><span class="hljs-preprocessor">.UuidDaoFactory</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.business</span><span class="hljs-preprocessor">.ebi</span><span class="hljs-preprocessor">.OutMainEbi</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.OutDetailDao</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.OutMainDao</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.factory</span><span class="hljs-preprocessor">.OutDetailDaoFactory</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.dao</span><span class="hljs-preprocessor">.factory</span><span class="hljs-preprocessor">.OutMainDaoFactory</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.vo</span><span class="hljs-preprocessor">.OutDetailModel</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.vo</span><span class="hljs-preprocessor">.OutDetailQueryModel</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.vo</span><span class="hljs-preprocessor">.OutMainModel</span><span class="hljs-comment">;</span>
import cn<span class="hljs-preprocessor">.hncu</span><span class="hljs-preprocessor">.bookStore</span><span class="hljs-preprocessor">.out</span><span class="hljs-preprocessor">.vo</span><span class="hljs-preprocessor">.OutMainQueryModel</span><span class="hljs-comment">;</span>

<span class="hljs-comment">/**
 * 
 * @author 陈浩翔
 *
 * @version 1.0
 */</span>
public class OutMainEbo implements OutMainEbi{
    //注入dao

    OutMainDao outMainDao = OutMainDaoFactory<span class="hljs-preprocessor">.getOutMainDao</span>()<span class="hljs-comment">;</span>
    OutDetailDao outDetailDao = OutDetailDaoFactory<span class="hljs-preprocessor">.getOutDetailDao</span>()<span class="hljs-comment">;</span>
    UuidDao uuidDao = UuidDaoFactory<span class="hljs-preprocessor">.getUuidDao</span>()<span class="hljs-comment">;</span>
    BookEbi bookEbi = BookEbiFactory<span class="hljs-preprocessor">.getBookEbi</span>()<span class="hljs-comment">;</span>

    @Override
    public boolean create(OutMainModel outMain, List&lt;OutDetailModel&gt; outDetails) {
        //////////<span class="hljs-number">1</span>存储outMain信息///////////
        //补全outMain中的数据
        //需要:inUuid,inDate,inUserUuid   已组织:inUserUuid
        //还缺(需补):inUuid,inDate
        String outUuid = uuidDao<span class="hljs-preprocessor">.getNextUuid</span>(UuidModelConstance<span class="hljs-preprocessor">.OUT</span>_MAIN)<span class="hljs-comment">;</span>
        outMain<span class="hljs-preprocessor">.setUuid</span>(outUuid)<span class="hljs-comment">;</span>
        outMain<span class="hljs-preprocessor">.setOutDate</span>(System<span class="hljs-preprocessor">.currentTimeMillis</span>())<span class="hljs-comment">;</span>
        outMainDao<span class="hljs-preprocessor">.create</span>(outMain)<span class="hljs-comment">;</span>

         //////////<span class="hljs-number">2</span>存储inDetail信息///////////
        for(OutDetailModel model:outDetails){
            //补全每一个inDetail中的数据
            //需要:inDetailUuid,outMainUuid,bookUuid,sumNum,sumMoney   已组织:bookUuid,sumNum
            //还缺(需补):inDetailUuid,outMainUuid,sumMoney
            model<span class="hljs-preprocessor">.setUuid</span>(uuidDao<span class="hljs-preprocessor">.getNextUuid</span>(UuidModelConstance<span class="hljs-preprocessor">.OUT</span>_DETAIL))<span class="hljs-comment">;</span>
            model<span class="hljs-preprocessor">.setOutId</span>(outUuid)<span class="hljs-comment">;</span>

            double sumMoney = model<span class="hljs-preprocessor">.getSumNum</span>() * bookEbi<span class="hljs-preprocessor">.getSingle</span>(model<span class="hljs-preprocessor">.getBookId</span>())<span class="hljs-preprocessor">.getSalePrice</span>()<span class="hljs-comment">;</span>
            model<span class="hljs-preprocessor">.setSumMoney</span>(sumMoney)<span class="hljs-comment">;</span>
            outDetailDao<span class="hljs-preprocessor">.create</span>(model)<span class="hljs-comment">;</span>
        }
        return true<span class="hljs-comment">;</span>
    }

    @Override
    public Map&lt;OutMainModel, List&lt;OutDetailModel&gt;&gt; getAll() {
        Map&lt;OutMainModel,List&lt;OutDetailModel&gt;&gt; map = new TreeMap&lt;OutMainModel, List&lt;OutDetailModel&gt;&gt;()<span class="hljs-comment">;</span>

        List&lt;OutMainModel&gt; outMains = outMainDao<span class="hljs-preprocessor">.getAll</span>()<span class="hljs-comment">;</span>

        for(OutMainModel outMain: outMains ){
            //查询条件值对象的创建
            OutDetailQueryModel odqm = new OutDetailQueryModel()<span class="hljs-comment">;</span>
            String inUuid = outMain<span class="hljs-preprocessor">.getUuid</span>()<span class="hljs-comment">;</span>
            odqm<span class="hljs-preprocessor">.setOutId</span>(inUuid)<span class="hljs-comment">;</span>

            List&lt;OutDetailModel&gt; details = outDetailDao<span class="hljs-preprocessor">.getbyCondition</span>(odqm)<span class="hljs-comment">;</span>

            map<span class="hljs-preprocessor">.put</span>(outMain, details)<span class="hljs-comment">;</span>
        }

        return map<span class="hljs-comment">;</span>
    }

    @Override
    public Map&lt;OutMainModel, List&lt;OutDetailModel&gt;&gt; getByCondition(
            OutMainQueryModel imqm, OutDetailQueryModel odqm) {
        Map&lt;OutMainModel, List&lt;OutDetailModel&gt;&gt; map = new TreeMap&lt;OutMainModel, List&lt;OutDetailModel&gt;&gt;()<span class="hljs-comment">;</span>

        List&lt;OutMainModel&gt; list = outMainDao<span class="hljs-preprocessor">.getbyCondition</span>(imqm)<span class="hljs-comment">;</span>

        for(OutMainModel outMain : list){
            odqm<span class="hljs-preprocessor">.setOutId</span>(outMain<span class="hljs-preprocessor">.getUuid</span>())<span class="hljs-comment">;</span>

            List&lt;OutDetailModel&gt; details = outDetailDao<span class="hljs-preprocessor">.getbyCondition</span>(odqm)<span class="hljs-comment">;</span>
            if(details<span class="hljs-preprocessor">.size</span>()!=<span class="hljs-number">0</span>){
                map<span class="hljs-preprocessor">.put</span>(outMain, details)<span class="hljs-comment">;</span>
            }
        }

        return map<span class="hljs-comment">;</span>
    }

}
</code></pre>



<h2 id="逻辑层工厂方法outmainebifactory">逻辑层工厂方法OutMainEbiFactory：</h2>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> cn.hncu.bookStore.out.business.factory;

<span class="hljs-keyword">import</span> cn.hncu.bookStore.out.business.ebi.OutMainEbi;
<span class="hljs-keyword">import</span> cn.hncu.bookStore.out.business.ebo.OutMainEbo;

<span class="hljs-javadoc">/**
 * 工厂方法
 *<span class="hljs-javadoctag"> @author</span> 陈浩翔
 *
 *<span class="hljs-javadoctag"> @version</span> 1.0
 */</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OutMainEbiFactory</span> {</span>
    <span class="hljs-javadoc">/**
     * 
     *<span class="hljs-javadoctag"> @return</span>---new一个逻辑层的接口的实例
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> OutMainEbi <span class="hljs-title">getOutMainEbi</span>(){
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> OutMainEbo();
    }
}
</code></pre>

<p>表现层的代码我就不直接这样写了。。。 <br />
表现层的大部分代码是自动生成的，只有监听和初始化box是自己写的。</p>

<p>其他所有代码的百度云链接： <br />
<a href="http://pan.baidu.com/s/1jH7RNQu">http://pan.baidu.com/s/1jH7RNQu</a></p>

<p>其他系列也是这样，我在写博客时，我都把我目前写到哪了的所有代码都上传了的。有兴趣的，可以去看看。有bug什么的，欢迎评论。</p></div>&#13;
        <script type="text/javascript">&#13;
            $(function () {&#13;
                $('pre.prettyprint code').each(function () {&#13;
                    var lines = $(this).text().split('\n').length;&#13;
                    var $numbering = $('&lt;ul/&gt;').addClass('pre-numbering').hide();&#13;
                    $(this).addClass('has-numbering').parent().append($numbering);&#13;
                    for (i = 1; i &lt;= lines; i++) {&#13;
                        $numbering.append($('&lt;li/&gt;').text(i));&#13;
                    };&#13;
                    $numbering.fadeIn(1700);&#13;
                });&#13;
            });&#13;
        </script>&#13;
   &#13;
