
<p>%<br />&lt;s:select&gt;<br /> list:需要进行迭代的list集合<br /> listKey:需要提交的值<br /> listValue:需要在页面上显示的值<br />============================<br />优化<br />1.Action<br />Action中存在重复的代码<br /> 从DepartmentAction/RoleAction/UserAction中抽取一个公共的BaseAction.<br /> 1.BaseAction中使用泛型,泛型的具体类型(Class)通过在构造方法中得到.<br /> 如果model为null,就用具体类型newInstance()生成model.为什么model可能不为null?</p><p>2.Dao和Service==&gt;3层改成两层<br />去掉dao层的具体的实现类xxxDaoImpl.而让service直接操作数据库<br /> service中直接使用session对数据库进行操作.<br /> 1.service接口可以继承BaseDao<br /> 2.ServiceImpl可以继承BaseDaoImpl<br /> 注意:在BaseDaoImpl上添加@Transactional注解</p><p> @Transactional可以被继承<br /> 如果没有这个注解,在调用getCurrentSession()获取session时,会报错:<br />  No Hibernate session bounded to ...</p><p>3.jsp<br /> /WEB-INF/jsp/public/common.jspf<br /> 1.抽取公共的js文件生成公共的common.jspf,然后在页面中用&lt;%@ include file="/WEB-INF/jsp/public/common.jspf"%&gt;调用(静态包含和动态包含)<br />  common.jspf中除了包含公共的js外,还包含公共的自定义标签的导入<br /> 2.addUI.jsp和editUI.jsp==&gt;改成save.jsp<br /> 一般情况下，添加页面和修改页面可以使用同一个.<br />  1.&lt;s:hidden name="id"/&gt;<br />  2.&lt;s:form action="departmentAction_%{id == null ? 'add' : 'edit'}"/&gt;<br />  最后修改struts.xml中&lt;result&gt;对应的jsp页面</p><p>==================================================<br />完成增删改查功能的步骤<br />一、做action相关的准备<br /> 1.创建xxxAction extends BaseAction<br /> 2.定义出Action中的方法,要写出方法名、作用、返回值<br /> 3.创建出所用到的jsp页面(内容先不写)<br /> 4.配置:<br />  1.Spring==&gt;在xxxAction上添加注解@Controller和@Scope<br />  2.Struts2==&gt;在struts.xml中添加<br />  &lt;action name="" class="" method=""&gt;..&lt;/action&gt;<br />二、做service相关的配置<br /> 1.创建接口XxxService继承BaseDao<br /> 2.创建实现类XxxServiceImpl继承BaseDaoImpl<br /> 3.配置：在XxxServiceImpl上添加注解@Service<br /> 4.声明：在BaseAction上声明各个service作为成员变量,并在变量上添加注解@Resource<br />三、填空<br /> 1.Action方法<br />  .......<br /> 2.新增的的Service方法<br /> 3.jsp页面的内容<br />  1.拷贝静态页面中的方法到jsp中<br />  2.&lt;%@ include file="/WEB-INF/jsp/public/common.jspf"%&gt;<br />  3. ../替换成${pageContext.request.contextPath}/<br />  4.改页面内容(使用自定义标签)<br />   1.列表页面<br />   &lt;s:iterator value=".."&gt;<br />   &lt;s:a action=".." onclik=""&gt;<br />   注意:onclick中的c小写<br />   2.表单页面(saveUI.jsp)<br />   &lt;s:form action="departmentAction_%{id==null?'add':'edit'}"&gt;<br />    &lt;s:hidden name=""&gt;<br />    &lt;s:textfield&gt;<br />    &lt;s:textarea&gt;<br />    &lt;s:select name="" list=".." listKey=".." listValue=".."&gt;<br />    &lt;s:radio name="gender" list="#{'男':'男','女':'女'}" listKey="" listValue=""&gt;<br />     其中:#{'男':'男','女':'女'}可以简写成#{'男','女'}<br />    &lt;s:checkbox&gt;<br />    &lt;s:submit&gt;<br />   &lt;/s:form&gt;</p><p>   &lt;select multiple="true" size="10"&gt;对应的struts标签<br />   &lt;s:select name="" mutiple="true" cssClass="" list="#roleList" listKey="id" listValue="name"&gt;</p><p>未完成的任务<br /> // TODO<br /> Tasks</p>   &#13;
