

<p>1、导入jar</p>&#13;
<p><img alt="" src="http://img.blog.csdn.net/20140521003847765?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdG90b3R1enVvcXVhbg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" /></p>&#13;
<p><img alt="" src="http://img.blog.csdn.net/20140521003637671?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdG90b3R1enVvcXVhbg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" /></p>&#13;
<p><img alt="" src="http://img.blog.csdn.net/20140521003749453?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdG90b3R1enVvcXVhbg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" /></p>&#13;
<p><span style="background-color:rgb(255,255,51)">2、web.xml配置</span></p>&#13;
<p>&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br />&#13;
&lt;web-app version="2.4" <br />&#13;
 xmlns="<a target="_blank" href="http://java.sun.com/xml/ns/j2ee">http://java.sun.com/xml/ns/j2ee</a>"<br />&#13;
 xmlns:xsi="<a target="_blank" href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a>"<br />&#13;
 xsi:schemaLocation="<a target="_blank" href="http://java.sun.com/xml/ns/j2ee">http://java.sun.com/xml/ns/j2ee</a><br />&#13;
 <a target="_blank" href="http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd</a>"&gt;<br />&#13;
 <br />&#13;
 &lt;!-- 通过上下文参数指定spring配置文件的位置 --&gt;<br />&#13;
 &lt;context-param&gt;<br />&#13;
  &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;<br />&#13;
  &lt;param-value&gt;classpath:beans.xml&lt;/param-value&gt;<br />&#13;
 &lt;/context-param&gt;<br />&#13;
 &lt;listener&gt;<br />&#13;
  &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;<br />&#13;
 &lt;/listener&gt;<br />&#13;
 <br />&#13;
 &lt;servlet&gt;<br />&#13;
  &lt;servlet-name&gt;action&lt;/servlet-name&gt;<br />&#13;
  &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;<br />&#13;
  &lt;init-param&gt;<br />&#13;
   &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;<br />&#13;
   &lt;param-value&gt;classpath:springMVC.xml&lt;/param-value&gt;<br />&#13;
  &lt;/init-param&gt;<br />&#13;
 &lt;/servlet&gt;<br />&#13;
 &lt;servlet-mapping&gt;<br />&#13;
  &lt;servlet-name&gt;action&lt;/servlet-name&gt;<br />&#13;
  &lt;url-pattern&gt;/&lt;/url-pattern&gt;<br />&#13;
 &lt;/servlet-mapping&gt;<br />&#13;
  &lt;welcome-file-list&gt;<br />&#13;
    &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;<br />&#13;
  &lt;/welcome-file-list&gt;<br />&#13;
&lt;/web-app&gt;<br />&#13;
<span style="background-color:rgb(255,255,51)">3、bean.xml配置</span></p>&#13;
<p>&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br />&#13;
&lt;beans xmlns="<a target="_blank" href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a>"<br />&#13;
 xmlns:xsi="<a target="_blank" href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a>"<br />&#13;
 xmlns:mvc="<a target="_blank" href="http://www.springframework.org/schema/mvc">http://www.springframework.org/schema/mvc</a>"<br />&#13;
 xmlns:context="<a target="_blank" href="http://www.springframework.org/schema/context">http://www.springframework.org/schema/context</a>"<br />&#13;
 xmlns:aop="<a target="_blank" href="http://www.springframework.org/schema/aop">http://www.springframework.org/schema/aop</a>"<br />&#13;
 xmlns:tx="<a target="_blank" href="http://www.springframework.org/schema/tx">http://www.springframework.org/schema/tx</a>"<br />&#13;
 xsi:schemaLocation="<a target="_blank" href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/beans/spring-beans.xsd">http://www.springframework.org/schema/beans/spring-beans.xsd</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/mvc">http://www.springframework.org/schema/mvc</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/context">http://www.springframework.org/schema/context</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/context/spring-context-3.0.xsd">http://www.springframework.org/schema/context/spring-context-3.0.xsd</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/aop">http://www.springframework.org/schema/aop</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/aop/spring-aop-3.0.xsd">http://www.springframework.org/schema/aop/spring-aop-3.0.xsd</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/tx">http://www.springframework.org/schema/tx</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">http://www.springframework.org/schema/tx/spring-tx-3.0.xsd</a> "&gt;<br />&#13;
 &lt;!-- 注解驱动 --&gt;<br />&#13;
 &lt;mvc:annotation-driven/&gt;<br />&#13;
 &lt;!-- 组件扫描 --&gt;<br />&#13;
 &lt;context:component-scan base-package="cn.itcast.springmvc"&gt;&lt;/context:component-scan&gt;<br />&#13;
 <br />&#13;
 &lt;!-- 定义数据源 --&gt;<br />&#13;
 &lt;bean id="ds" class="com.mchange.v2.c3p0.ComboPooledDataSource"&gt;<br />&#13;
  &lt;property name="driverClass" value="com.mysql.jdbc.Driver"&gt;&lt;/property&gt;<br />&#13;
  &lt;property name="jdbcUrl" value="jdbc:mysql://localhost:3306/springmvc"&gt;&lt;/property&gt;<br />&#13;
  &lt;property name="user" value="root"&gt;&lt;/property&gt;<br />&#13;
  &lt;property name="password" value="123456"&gt;&lt;/property&gt;<br />&#13;
  &lt;property name="initialPoolSize" value="10"&gt;&lt;/property&gt;<br />&#13;
  &lt;property name="maxPoolSize" value="50"&gt;&lt;/property&gt;<br />&#13;
  &lt;property name="minPoolSize" value="10"&gt;&lt;/property&gt;<br />&#13;
 &lt;/bean&gt;<br />&#13;
 <br />&#13;
 &lt;bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean"&gt;<br />&#13;
  &lt;property name="dataSource" ref="ds"&gt;&lt;/property&gt;<br />&#13;
  <br />&#13;
  &lt;!-- hibernate映射文件的位置 --&gt;<br />&#13;
  &lt;property name="mappingDirectoryLocations"&gt;<br />&#13;
   &lt;value&gt;classpath:cn/itcast/springmvc/domain/&lt;/value&gt;<br />&#13;
  &lt;/property&gt;<br />&#13;
  &lt;property name="hibernateProperties"&gt;<br />&#13;
   &lt;props&gt;<br />&#13;
    &lt;prop key="hibernate.Dialect"&gt;org.hibernate.dialect.MySQLInnoDBDialect&lt;/prop&gt;<br />&#13;
    &lt;prop key="hibernate.show_sql"&gt;true&lt;/prop&gt;<br />&#13;
    &lt;prop key="hibernate.hbm2ddl.auto"&gt;update&lt;/prop&gt;<br />&#13;
   &lt;/props&gt;<br />&#13;
  &lt;/property&gt;<br />&#13;
 &lt;/bean&gt;<br />&#13;
 <br />&#13;
 &lt;!-- 配置事物管理器 --&gt;<br />&#13;
 &lt;bean id="txManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager"&gt;<br />&#13;
  &lt;property name="sessionFactory" ref="sessionFactory"/&gt;<br />&#13;
 &lt;/bean&gt;<br />&#13;
 <br />&#13;
 &lt;!-- 配置事物的传播特性 (事物通知)--&gt;<br />&#13;
 &lt;tx:advice id="txAdvice" transaction-manager="txManager"&gt;<br />&#13;
  &lt;tx:attributes&gt;<br />&#13;
   &lt;tx:method name="save*" propagation="REQUIRED"/&gt;<br />&#13;
   &lt;tx:method name="delete*" propagation="REQUIRED"/&gt;<br />&#13;
   &lt;tx:method name="update*" propagation="REQUIRED"/&gt;<br />&#13;
   &lt;tx:method name="find*" read-only="true"/&gt;<br />&#13;
   &lt;tx:method name="*" read-only="true"/&gt;<br />&#13;
  &lt;/tx:attributes&gt;<br />&#13;
 &lt;/tx:advice&gt;<br />&#13;
 <br />&#13;
 &lt;aop:config&gt;<br />&#13;
  &lt;aop:advisor pointcut="execution(* *..*ServiceImpl.*(..))" advice-ref="txAdvice"/&gt;<br />&#13;
  &lt;!-- <br />&#13;
   &lt;aop:advisor advice-ref="txAdvice" pointcut="execution(* *..*ServiceImpl.*(..))"/&gt;<br />&#13;
   --&gt;<br />&#13;
 &lt;/aop:config&gt;<br />&#13;
&lt;/beans&gt;</p>&#13;
<p><span style="background-color:rgb(255,255,51)">4、SpringMVC.xml配置</span></p>&#13;
<p>&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br />&#13;
&lt;beans xmlns="<a target="_blank" href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a>"<br />&#13;
 xmlns:xsi="<a target="_blank" href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a>"<br />&#13;
 xmlns:mvc="<a target="_blank" href="http://www.springframework.org/schema/mvc">http://www.springframework.org/schema/mvc</a>"<br />&#13;
 xmlns:context="<a target="_blank" href="http://www.springframework.org/schema/context">http://www.springframework.org/schema/context</a>"<br />&#13;
 xmlns:aop="<a target="_blank" href="http://www.springframework.org/schema/aop">http://www.springframework.org/schema/aop</a>"<br />&#13;
 xmlns:tx="<a target="_blank" href="http://www.springframework.org/schema/tx">http://www.springframework.org/schema/tx</a>"<br />&#13;
 xsi:schemaLocation="<a target="_blank" href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/beans/spring-beans.xsd">http://www.springframework.org/schema/beans/spring-beans.xsd</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/mvc">http://www.springframework.org/schema/mvc</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/context">http://www.springframework.org/schema/context</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/context/spring-context-3.0.xsd">http://www.springframework.org/schema/context/spring-context-3.0.xsd</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/aop">http://www.springframework.org/schema/aop</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/aop/spring-aop-3.0.xsd">http://www.springframework.org/schema/aop/spring-aop-3.0.xsd</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/tx">http://www.springframework.org/schema/tx</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">http://www.springframework.org/schema/tx/spring-tx-3.0.xsd</a> "&gt;<br />&#13;
 <br />&#13;
 &lt;!-- 配置内部资源视图解析器 --&gt;<br />&#13;
 &lt;bean class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt;<br />&#13;
  &lt;property name="prefix" value="/WEB-INF/jsp/"&gt;&lt;/property&gt;<br />&#13;
  &lt;property name="suffix" value=".jsp"&gt;&lt;/property&gt;<br />&#13;
 &lt;/bean&gt;   <br />&#13;
&lt;/beans&gt;</p>&#13;
<p><span style="background-color:rgb(255,255,102)">5、domain和hbm.xml配置</span></p>&#13;
<p>package cn.itcast.springmvc.domain;</p>&#13;
<p>public class Person {</p>&#13;
<p> private String id;<br />&#13;
 private String name;<br />&#13;
 private Integer age;<br />&#13;
 private String address;<br />&#13;
 public String getId() {<br />&#13;
  return id;<br />&#13;
 }<br />&#13;
 public void setId(String id) {<br />&#13;
  this.id = id;<br />&#13;
 }<br />&#13;
 public String getName() {<br />&#13;
  return name;<br />&#13;
 }<br />&#13;
 public void setName(String name) {<br />&#13;
  this.name = name;<br />&#13;
 }<br />&#13;
 public Integer getAge() {<br />&#13;
  return age;<br />&#13;
 }<br />&#13;
 public void setAge(Integer age) {<br />&#13;
  this.age = age;<br />&#13;
 }<br />&#13;
 public String getAddress() {<br />&#13;
  return address;<br />&#13;
 }<br />&#13;
 public void setAddress(String address) {<br />&#13;
  this.address = address;<br />&#13;
 }<br />&#13;
}<br />&#13;
</p>&#13;
<p>----------------------------</p>&#13;
<p><span style="background-color:rgb(255,255,102)">Person.hbm.xml</span></p>&#13;
<p>&lt;?xml version="1.0"?&gt;<br />&#13;
&lt;!DOCTYPE hibernate-mapping PUBLIC <br />&#13;
    "-//Hibernate/Hibernate Mapping DTD 3.0//EN"<br />&#13;
    "<a target="_blank" href="http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd</a>"&gt;<br />&#13;
&lt;hibernate-mapping&gt;<br />&#13;
 &lt;class name="cn.itcast.springmvc.domain.Person" table="persons"&gt;<br />&#13;
  &lt;id name="id" column="id" type="string"&gt;<br />&#13;
   &lt;generator class="uuid" /&gt;<br />&#13;
  &lt;/id&gt;<br />&#13;
  &lt;property name="name" column="name" type="string" /&gt;<br />&#13;
  &lt;property name="age" column="age" type="integer" /&gt;<br />&#13;
  &lt;property name="address" column="address" type="string" /&gt;<br />&#13;
 &lt;/class&gt;<br />&#13;
&lt;/hibernate-mapping&gt;<br />&#13;
<span style="background-color:rgb(255,255,102)">6、PersonDao</span></p>&#13;
<p>package cn.itcast.springmvc.dao;</p>&#13;
<p>import java.util.List;</p>&#13;
<p>import cn.itcast.springmvc.domain.Person;</p>&#13;
<p>public interface IPersonDao {<br />&#13;
 public Person findPersonById(String id);<br />&#13;
 public List&lt;Person&gt; findAllPerson();<br />&#13;
 public void savePerson(Person p);<br />&#13;
 public void deletePersonById(String id);<br />&#13;
 public void updatePerson(Person p);<br />&#13;
}<br />&#13;
</p>&#13;
<p><span style="background-color:rgb(255,255,51)">7、PersonDaoImpl</span></p>&#13;
<p>package cn.itcast.springmvc.dao;</p>&#13;
<p>import java.util.List;</p>&#13;
<p>import javax.annotation.Resource;</p>&#13;
<p>import org.hibernate.SessionFactory;<br />&#13;
import org.springframework.stereotype.Repository;</p>&#13;
<p>import cn.itcast.springmvc.domain.Person;</p>&#13;
<p>@Repository(value="personDao")<br />&#13;
public class PersonDaoImpl implements IPersonDao {<br />&#13;
 <br />&#13;
 @Resource(name="sessionFactory")<br />&#13;
 private SessionFactory sf;</p>&#13;
<p> public Person findPersonById(String id) {<br />&#13;
  return (Person) sf.getCurrentSession().createQuery("from Person where id = '" + id + "'").list().get(0);<br />&#13;
 }</p>&#13;
<p> public void savePerson(Person p) {<br />&#13;
  sf.getCurrentSession().save(p);<br />&#13;
 }</p>&#13;
<p> public void deletePersonById(String id) {<br />&#13;
  Person p = new Person();<br />&#13;
  p.setId(id);<br />&#13;
  //sf.getCurrentSession().delete(id, Person.class);<br />&#13;
  sf.getCurrentSession().delete(p);<br />&#13;
 }</p>&#13;
<p> public List&lt;Person&gt; findAllPerson() {<br />&#13;
  return sf.getCurrentSession().createQuery("from Person").list();<br />&#13;
 }</p>&#13;
<p> public void updatePerson(Person p) {<br />&#13;
  sf.getCurrentSession().update(p);<br />&#13;
 }</p>&#13;
<p>}<br />&#13;
</p>&#13;
<p><span style="background-color:rgb(255,255,102)">8、IPersonService</span></p>&#13;
<p>package cn.itcast.springmvc.service;</p>&#13;
<p>import java.util.List;</p>&#13;
<p>import cn.itcast.springmvc.domain.Person;</p>&#13;
<p>public interface IPersonService {<br />&#13;
 public Person findPersonById(String id);<br />&#13;
 public List&lt;Person&gt; findAllPerson();<br />&#13;
 public void savePerson(Person p);<br />&#13;
 public void deletePersonById(String id);<br />&#13;
 public void updatePerson(Person p);<br />&#13;
}<br />&#13;
</p>&#13;
<p><span style="background-color:rgb(255,255,51)">9、PersonServiceImpl</span></p>&#13;
<p>package cn.itcast.springmvc.service;</p>&#13;
<p>import java.util.List;</p>&#13;
<p>import javax.annotation.Resource;</p>&#13;
<p>import cn.itcast.springmvc.dao.IPersonDao;<br />&#13;
import cn.itcast.springmvc.domain.Person;</p>&#13;
<p>@org.springframework.stereotype.Service(value="personService")<br />&#13;
public class PersonServiceImpl implements IPersonService {<br />&#13;
 <br />&#13;
 @Resource(name="personDao")<br />&#13;
 private IPersonDao personDao;</p>&#13;
<p> public Person findPersonById(String id) {<br />&#13;
  return personDao.findPersonById(id);<br />&#13;
 }</p>&#13;
<p> public void savePerson(Person p) {<br />&#13;
  personDao.savePerson(p);<br />&#13;
 }</p>&#13;
<p> public void deletePersonById(String id) {<br />&#13;
  personDao.deletePersonById(id);<br />&#13;
 }</p>&#13;
<p> public List&lt;Person&gt; findAllPerson() {<br />&#13;
  return personDao.findAllPerson();<br />&#13;
 }</p>&#13;
<p> public void updatePerson(Person p) {<br />&#13;
  personDao.updatePerson(p);<br />&#13;
 }</p>&#13;
<p>}<br />&#13;
</p>&#13;
<p><span style="background-color:rgb(255,153,0)">10、PersonController</span></p>&#13;
<p> </p>&#13;
<p>package cn.itcast.springmvc.controller;</p>&#13;
<p>import java.util.List;</p>&#13;
<p>import javax.annotation.Resource;<br />&#13;
import javax.servlet.http.HttpServletRequest;</p>&#13;
<p>import org.springframework.stereotype.Controller;<br />&#13;
import org.springframework.web.bind.annotation.RequestMapping;</p>&#13;
<p>import cn.itcast.springmvc.domain.Person;<br />&#13;
import cn.itcast.springmvc.service.IPersonService;</p>&#13;
<p>@Controller<br />&#13;
@RequestMapping(value = "/person")<br />&#13;
public class PersonController {</p>&#13;
<p> @Resource(name = "personService")<br />&#13;
 private IPersonService personService;</p>&#13;
<p> @RequestMapping(value = "/findPersonById")<br />&#13;
 public String findPersonById(String id) {<br />&#13;
  Person p = personService.findPersonById(id);<br />&#13;
  System.out.println(p);<br />&#13;
  return "showPerson";<br />&#13;
 }</p>&#13;
<p> @RequestMapping(value = "/savePersonUI")<br />&#13;
 public String savePersonUI() {<br />&#13;
  return "savePerson";<br />&#13;
 }</p>&#13;
<p> @RequestMapping(value = "/savePerson")<br />&#13;
 public String savePerson(Person p) {<br />&#13;
  personService.savePerson(p);<br />&#13;
  System.out.println(p);<br />&#13;
  // 重定向<br />&#13;
  return "redirect:/person/findAllPerson";<br />&#13;
 }</p>&#13;
<p> @RequestMapping(value = "/deletePersonById")<br />&#13;
 public String deletePersonById(String id) {<br />&#13;
  personService.deletePersonById(id);</p>&#13;
<p>  // 重定向<br />&#13;
  return "redirect:/person/findAllPerson";<br />&#13;
 }</p>&#13;
<p> // 批量删除<br />&#13;
 @RequestMapping(value = "/deletePersonByIds")<br />&#13;
 public String deletePersonByIds(String ids) {<br />&#13;
  ids = ids.substring(0, ids.length() - 1);<br />&#13;
  String[] idss = ids.split(",");<br />&#13;
  for (String id : idss) {<br />&#13;
   personService.deletePersonById(id);<br />&#13;
  }<br />&#13;
  // 重定向<br />&#13;
  return "redirect:/person/findAllPerson";<br />&#13;
 }</p>&#13;
<p> @RequestMapping(value = "/findAllPerson")<br />&#13;
 public String findAllPerson(HttpServletRequest req) {<br />&#13;
  List&lt;Person&gt; persons = personService.findAllPerson();<br />&#13;
  req.setAttribute("persons", persons);<br />&#13;
  return "personList";<br />&#13;
 }</p>&#13;
<p> @RequestMapping(value = "/updatePersonUI")<br />&#13;
 public String updatePersonUI(HttpServletRequest req, String id) {<br />&#13;
  Person p = personService.findPersonById(id);<br />&#13;
  req.setAttribute("p", p);<br />&#13;
  return "updatePerson";<br />&#13;
 }</p>&#13;
<p> @RequestMapping(value = "/updatePerson")<br />&#13;
 public String updatePerson(Person p) {<br />&#13;
  personService.updatePerson(p);<br />&#13;
  // 重定向<br />&#13;
  return "redirect:/person/findAllPerson";<br />&#13;
 }<br />&#13;
}<br />&#13;
</p>&#13;
<p><span style="background-color:rgb(255,255,102)">11、personList.jsp</span></p>&#13;
<p>&lt;%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%&gt;<br />&#13;
&lt;%@ taglib prefix="c" uri="<a target="_blank" href="http://java.sun.com/jsp/jstl/core'%">http://java.sun.com/jsp/jstl/core"%</a>&gt;<br />&#13;
&lt;%<br />&#13;
 String path = request.getContextPath();<br />&#13;
 String basePath = request.getScheme() + "://"<br />&#13;
   + request.getServerName() + ":" + request.getServerPort()<br />&#13;
   + path + "/";<br />&#13;
%&gt;<br />&#13;
&lt;html&gt;<br />&#13;
 &lt;head&gt;<br />&#13;
  &lt;title&gt;personList.jsp&lt;/title&gt;<br />&#13;
  &lt;script type="text/javascript"&gt;<br />&#13;
   function selectOrUnslect(){<br />&#13;
    var ids = document.getElementsByName('ids');<br />&#13;
    if(document.getElementById('topId').checked == true){<br />&#13;
     for(var i=0;i&lt;ids.length;i++){<br />&#13;
      ids[i].checked = true;<br />&#13;
     }<br />&#13;
    }else{<br />&#13;
     for(var i=0;i&lt;ids.length;i++){<br />&#13;
      ids[i].checked = false;<br />&#13;
     }<br />&#13;
    }<br />&#13;
   }<br />&#13;
   <br />&#13;
   function deleteSomePerson(){<br />&#13;
    var ids = document.getElementsByName('ids');<br />&#13;
    var strIds = '';<br />&#13;
    for(var i=0;i&lt;ids.length;i++){<br />&#13;
     if(ids[i].checked == true){<br />&#13;
      strIds += ids[i].value + ',';<br />&#13;
     }<br />&#13;
    }<br />&#13;
    window.location = '&lt;%=path%&gt;/person/deletePersonByIds?ids=' + strIds;<br />&#13;
   }<br />&#13;
  &lt;/script&gt;<br />&#13;
 &lt;/head&gt;<br />&#13;
 &lt;body&gt;<br />&#13;
  &lt;h3&gt;<br />&#13;
   用户列表页面<br />&#13;
  &lt;/h3&gt;<br />&#13;
  &lt;a href="&lt;%=path %&gt;/person/savePersonUI"&gt;添加用户&lt;/a&gt;&lt;br&gt;<br />&#13;
  <br />&#13;
  &lt;input type="button" value="批量删除" onclick="deleteSomePerson();"&gt;<br />&#13;
  &lt;table width="70%" border="1"&gt;<br />&#13;
   &lt;tr&gt;<br />&#13;
    &lt;td&gt;<br />&#13;
     &lt;input type="checkbox" id="topId" onclick="selectOrUnslect();"&gt;<br />&#13;
    &lt;/td&gt;<br />&#13;
    &lt;td&gt;<br />&#13;
     name<br />&#13;
    &lt;/td&gt;<br />&#13;
    &lt;td&gt;<br />&#13;
     age<br />&#13;
    &lt;/td&gt;<br />&#13;
    &lt;td&gt;<br />&#13;
     address<br />&#13;
    &lt;/td&gt;<br />&#13;
    &lt;td&gt;<br />&#13;
     删除<br />&#13;
    &lt;/td&gt;<br />&#13;
    &lt;td&gt;<br />&#13;
     更新<br />&#13;
    &lt;/td&gt;<br />&#13;
   &lt;/tr&gt;<br />&#13;
   &lt;c:forEach items="${persons}" var="p"&gt;<br />&#13;
    &lt;tr&gt;<br />&#13;
     &lt;td&gt;<br />&#13;
      &lt;input type="checkbox" name="ids" value="${p.id }"&gt;<br />&#13;
     &lt;/td&gt;<br />&#13;
     &lt;td&gt;<br />&#13;
      ${p.name }<br />&#13;
     &lt;/td&gt;<br />&#13;
     &lt;td&gt;<br />&#13;
      ${p.age }<br />&#13;
     &lt;/td&gt;<br />&#13;
     &lt;td&gt;<br />&#13;
      ${p.address }<br />&#13;
     &lt;/td&gt;<br />&#13;
     &lt;td&gt;<br />&#13;
      &lt;a href="&lt;%=path %&gt;/person/deletePersonById?id=${p.id }"&gt;删除&lt;/a&gt;<br />&#13;
     &lt;/td&gt;<br />&#13;
     &lt;td&gt;<br />&#13;
      &lt;a href="&lt;%=path %&gt;/person/updatePersonUI?id=${p.id }"&gt;更新&lt;/a&gt;<br />&#13;
     &lt;/td&gt;<br />&#13;
    &lt;/tr&gt;<br />&#13;
   &lt;/c:forEach&gt;<br />&#13;
  &lt;/table&gt;<br />&#13;
 &lt;/body&gt;<br />&#13;
&lt;/html&gt;<br />&#13;
<span style="background-color:rgb(255,255,102)">12、savePerson.jsp</span></p>&#13;
<p>&lt;%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%&gt;<br />&#13;
&lt;%<br />&#13;
String path = request.getContextPath();<br />&#13;
String basePath = request.getScheme()+"://"+request.getServerName()+":"+request.getServerPort()+path+"/";<br />&#13;
%&gt;<br />&#13;
&lt;html&gt;<br />&#13;
  &lt;head&gt;<br />&#13;
    &lt;title&gt;savePerson.jsp&lt;/title&gt;<br />&#13;
  &lt;/head&gt;<br />&#13;
  &lt;body&gt;<br />&#13;
  &lt;h3&gt;添加用户页面&lt;/h3&gt;<br />&#13;
    &lt;form action="&lt;%=path %&gt;/person/savePerson" method="post"&gt;<br />&#13;
     &lt;table&gt;<br />&#13;
      &lt;tr&gt;<br />&#13;
       &lt;td&gt;name:&lt;/td&gt;<br />&#13;
       &lt;td&gt;&lt;input type="text" name="name"&gt;&lt;/td&gt;<br />&#13;
      &lt;/tr&gt;<br />&#13;
      &lt;tr&gt;<br />&#13;
       &lt;td&gt;age&lt;/td&gt;<br />&#13;
       &lt;td&gt;&lt;input type="text" name="age"&gt;&lt;/td&gt;<br />&#13;
      &lt;/tr&gt;<br />&#13;
      &lt;tr&gt;<br />&#13;
       &lt;td&gt;address&lt;/td&gt;<br />&#13;
       &lt;td&gt;&lt;input type="text" name="address"&gt;&lt;/td&gt;<br />&#13;
      &lt;/tr&gt;<br />&#13;
      &lt;tr&gt;<br />&#13;
       &lt;td&gt;&lt;input type="submit" value="提交"&gt;&lt;/td&gt;<br />&#13;
       &lt;td&gt;&lt;input type="reset" value="重置"&gt;&lt;/td&gt;<br />&#13;
      &lt;/tr&gt;<br />&#13;
     &lt;/table&gt;<br />&#13;
    &lt;/form&gt;<br />&#13;
  &lt;/body&gt;<br />&#13;
&lt;/html&gt;<br />&#13;
<span style="background-color:rgb(255,255,102)">13、showPerson.jsp</span></p>&#13;
<p>&lt;%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%&gt;<br />&#13;
&lt;%<br />&#13;
String path = request.getContextPath();<br />&#13;
String basePath = request.getScheme()+"://"+request.getServerName()+":"+request.getServerPort()+path+"/";<br />&#13;
%&gt;</p>&#13;
<p>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"&gt;<br />&#13;
&lt;html&gt;<br />&#13;
  &lt;head&gt;<br />&#13;
    &lt;base href="&lt;%=basePath%&gt;"&gt;<br />&#13;
    <br />&#13;
    &lt;title&gt;My JSP 'showPerson.jsp' starting page&lt;/title&gt;<br />&#13;
    <br />&#13;
 &lt;meta http-equiv="pragma" content="no-cache"&gt;<br />&#13;
 &lt;meta http-equiv="cache-control" content="no-cache"&gt;<br />&#13;
 &lt;meta http-equiv="expires" content="0"&gt;    <br />&#13;
 &lt;meta http-equiv="keywords" content="keyword1,keyword2,keyword3"&gt;<br />&#13;
 &lt;meta http-equiv="description" content="This is my page"&gt;<br />&#13;
 &lt;!--<br />&#13;
 &lt;link rel="stylesheet" type="text/css" href="styles.css"&gt;<br />&#13;
 --&gt;</p>&#13;
<p>  &lt;/head&gt;<br />&#13;
  <br />&#13;
  &lt;body&gt;<br />&#13;
    This is showPerson.jsp<br />&#13;
  &lt;/body&gt;<br />&#13;
&lt;/html&gt;<br />&#13;
</p>&#13;
<p><span style="background-color:rgb(255,255,102)">14、updatePerson.jsp</span></p>&#13;
<p>&lt;%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%&gt;<br />&#13;
&lt;%<br />&#13;
String path = request.getContextPath();<br />&#13;
String basePath = request.getScheme()+"://"+request.getServerName()+":"+request.getServerPort()+path+"/";<br />&#13;
%&gt;<br />&#13;
&lt;html&gt;<br />&#13;
  &lt;head&gt;<br />&#13;
    &lt;title&gt;savePerson.jsp&lt;/title&gt;<br />&#13;
  &lt;/head&gt;<br />&#13;
  &lt;body&gt;<br />&#13;
    &lt;h3&gt;更新用户页面&lt;/h3&gt;<br />&#13;
    &lt;form action="&lt;%=path %&gt;/person/updatePerson" method="post"&gt;<br />&#13;
     &lt;input type="hidden" name="id" value="${p.id}"&gt;<br />&#13;
     &lt;table&gt;<br />&#13;
      &lt;tr&gt;<br />&#13;
       &lt;td&gt;name:&lt;/td&gt;<br />&#13;
       &lt;td&gt;&lt;input type="text" name="name" value="${p.name }"&gt;&lt;/td&gt;<br />&#13;
      &lt;/tr&gt;<br />&#13;
      &lt;tr&gt;<br />&#13;
       &lt;td&gt;age&lt;/td&gt;<br />&#13;
       &lt;td&gt;&lt;input type="text" name="age" value="${p.age }"&gt;&lt;/td&gt;<br />&#13;
      &lt;/tr&gt;<br />&#13;
      &lt;tr&gt;<br />&#13;
       &lt;td&gt;address&lt;/td&gt;<br />&#13;
       &lt;td&gt;&lt;input type="text" name="address" value="${p.address }"&gt;&lt;/td&gt;<br />&#13;
      &lt;/tr&gt;<br />&#13;
      &lt;tr&gt;<br />&#13;
       &lt;td&gt;&lt;input type="submit" value="提交"&gt;&lt;/td&gt;<br />&#13;
       &lt;td&gt;&lt;input type="reset" value="重置"&gt;&lt;/td&gt;<br />&#13;
      &lt;/tr&gt;<br />&#13;
     &lt;/table&gt;<br />&#13;
    &lt;/form&gt;<br />&#13;
  &lt;/body&gt;<br />&#13;
&lt;/html&gt;</p>&#13;
   &#13;
