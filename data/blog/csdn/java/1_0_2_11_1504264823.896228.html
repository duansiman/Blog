

<h1><span style="font-family:Calibri; font-size:14px">1.项目包结构如下：</span></h1>&#13;
<p><img alt="" src="http://img.blog.csdn.net/20140526003349453?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdG90b3R1enVvcXVhbg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" /></p>&#13;
<p><img alt="" src="http://img.blog.csdn.net/20140526003410031?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdG90b3R1enVvcXVhbg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" /></p>&#13;
<p><img alt="" src="http://img.blog.csdn.net/20140526003453968?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdG90b3R1enVvcXVhbg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" /></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">2.</span>       <span style="font-family:Calibri; font-size:14px">&#13;
spring</span>配置文件<span style="font-family:Calibri"><span style="font-family:Calibri">springMVC.xml</span></span>修改如下：</p>&#13;
<table border="1" cellspacing="0" cellpadding="0">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top">&#13;
<p align="left">&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br />&#13;
&lt;beans xmlns="<a target="_blank" href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a>"<br />&#13;
 xmlns:xsi="<a target="_blank" href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a>"<br />&#13;
 xmlns:mvc="<a target="_blank" href="http://www.springframework.org/schema/mvc">http://www.springframework.org/schema/mvc</a>"<br />&#13;
 xmlns:context="<a target="_blank" href="http://www.springframework.org/schema/context">http://www.springframework.org/schema/context</a>"<br />&#13;
 xmlns:aop="<a target="_blank" href="http://www.springframework.org/schema/aop">http://www.springframework.org/schema/aop</a>"<br />&#13;
 xmlns:tx="<a target="_blank" href="http://www.springframework.org/schema/tx">http://www.springframework.org/schema/tx</a>"<br />&#13;
 xsi:schemaLocation="<a target="_blank" href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/beans/spring-beans.xsd">http://www.springframework.org/schema/beans/spring-beans.xsd</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/mvc">http://www.springframework.org/schema/mvc</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/context">http://www.springframework.org/schema/context</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/context/spring-context-3.0.xsd">http://www.springframework.org/schema/context/spring-context-3.0.xsd</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/aop">http://www.springframework.org/schema/aop</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/aop/spring-aop-3.0.xsd">http://www.springframework.org/schema/aop/spring-aop-3.0.xsd</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/tx">http://www.springframework.org/schema/tx</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">http://www.springframework.org/schema/tx/spring-tx-3.0.xsd</a> "&gt;<br />&#13;
 <br />&#13;
 &lt;!-- 处理文件上传 --&gt;<br />&#13;
 &lt;bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver"&gt;<br />&#13;
  &lt;property name="defaultEncoding" value="utf-8"&gt;&lt;/property&gt;<br />&#13;
  &lt;property name="maxInMemorySize" value="10240"&gt;&lt;/property&gt;<br />&#13;
  &lt;property name="uploadTempDir" value="/upload/"&gt;&lt;/property&gt;<br />&#13;
  &lt;property name="maxUploadSize" value="-1"&gt;&lt;/property&gt;<br />&#13;
 &lt;/bean&gt;<br />&#13;
 <br />&#13;
 &lt;!-- 配置内部资源视图解析器 --&gt;<br />&#13;
 &lt;bean class="org.springframework.web.servlet.view.InternalResourceViewResolver"&gt;<br />&#13;
  &lt;property name="prefix" value="/WEB-INF/jsp/"&gt;&lt;/property&gt;<br />&#13;
  &lt;property name="suffix" value=".jsp"&gt;&lt;/property&gt;<br />&#13;
 &lt;/bean&gt;<br />&#13;
&lt;/beans&gt;</p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">3.</span>       <span style="font-family:Calibri; font-size:14px">&#13;
spring</span>配置文件<span style="font-family:Calibri">beans.xml</span>内容修改如下：</p>&#13;
<table border="1" cellspacing="0" cellpadding="0">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top">&#13;
<p align="left"><span style="color:teal">&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br />&#13;
&lt;beans xmlns="<a target="_blank" href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a>"<br />&#13;
 xmlns:xsi="<a target="_blank" href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a>"<br />&#13;
 xmlns:mvc="<a target="_blank" href="http://www.springframework.org/schema/mvc">http://www.springframework.org/schema/mvc</a>"<br />&#13;
 xmlns:context="<a target="_blank" href="http://www.springframework.org/schema/context">http://www.springframework.org/schema/context</a>"<br />&#13;
 xmlns:aop="<a target="_blank" href="http://www.springframework.org/schema/aop">http://www.springframework.org/schema/aop</a>"<br />&#13;
 xmlns:tx="<a target="_blank" href="http://www.springframework.org/schema/tx">http://www.springframework.org/schema/tx</a>"<br />&#13;
 xsi:schemaLocation="<a target="_blank" href="http://www.springframework.org/schema/beans">http://www.springframework.org/schema/beans</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/beans/spring-beans.xsd">http://www.springframework.org/schema/beans/spring-beans.xsd</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/mvc">http://www.springframework.org/schema/mvc</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/context">http://www.springframework.org/schema/context</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/context/spring-context-3.0.xsd">http://www.springframework.org/schema/context/spring-context-3.0.xsd</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/aop">http://www.springframework.org/schema/aop</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/aop/spring-aop-3.0.xsd">http://www.springframework.org/schema/aop/spring-aop-3.0.xsd</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/tx">http://www.springframework.org/schema/tx</a><br />&#13;
      <a target="_blank" href="http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">http://www.springframework.org/schema/tx/spring-tx-3.0.xsd</a> "&gt;<br />&#13;
 &lt;!-- 注解驱动 --&gt;<br />&#13;
 &lt;mvc:annotation-driven/&gt;<br />&#13;
 &lt;!-- 组件扫描 --&gt;<br />&#13;
 &lt;context:component-scan base-package="com.sxt.web"&gt;&lt;/context:component-scan&gt;<br />&#13;
 <br />&#13;
 &lt;!-- 定义数据源 --&gt;<br />&#13;
 &lt;bean id="ds" class="com.mchange.v2.c3p0.ComboPooledDataSource"&gt;<br />&#13;
  &lt;property name="driverClass" value="com.mysql.jdbc.Driver"&gt;&lt;/property&gt;<br />&#13;
  &lt;property name="jdbcUrl" value="jdbc:mysql://localhost:3306/springmvc"&gt;&lt;/property&gt;<br />&#13;
  &lt;property name="user" value="root"&gt;&lt;/property&gt;<br />&#13;
  &lt;property name="password" value="123456"&gt;&lt;/property&gt;<br />&#13;
  &lt;property name="initialPoolSize" value="10"&gt;&lt;/property&gt;<br />&#13;
  &lt;property name="maxPoolSize" value="50"&gt;&lt;/property&gt;<br />&#13;
  &lt;property name="minPoolSize" value="10"&gt;&lt;/property&gt;<br />&#13;
 &lt;/bean&gt;<br />&#13;
 <br />&#13;
 &lt;bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean"&gt;<br />&#13;
  &lt;property name="dataSource" ref="ds"&gt;&lt;/property&gt;<br />&#13;
  <br />&#13;
  &lt;!-- hibernate映射文件的位置 --&gt;<br />&#13;
  &lt;property name="mappingDirectoryLocations"&gt;<br />&#13;
   &lt;value&gt;classpath:com/sxt/domain/&lt;/value&gt;<br />&#13;
  &lt;/property&gt;<br />&#13;
  &lt;property name="hibernateProperties"&gt;<br />&#13;
   &lt;props&gt;<br />&#13;
    &lt;prop key="hibernate.Dialect"&gt;org.hibernate.dialect.MySQLInnoDBDialect&lt;/prop&gt;<br />&#13;
    &lt;prop key="hibernate.show_sql"&gt;true&lt;/prop&gt;<br />&#13;
    &lt;prop key="hibernate.hbm2ddl.auto"&gt;update&lt;/prop&gt;<br />&#13;
   &lt;/props&gt;<br />&#13;
  &lt;/property&gt;<br />&#13;
 &lt;/bean&gt;<br />&#13;
 <br />&#13;
 &lt;!-- 配置事物管理器 --&gt;<br />&#13;
 &lt;bean id="txManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager"&gt;<br />&#13;
  &lt;property name="sessionFactory" ref="sessionFactory"/&gt;<br />&#13;
 &lt;/bean&gt;<br />&#13;
 <br />&#13;
 &lt;!-- 配置事物的传播特性 (事物通知)--&gt;<br />&#13;
 &lt;tx:advice id="txAdvice" transaction-manager="txManager"&gt;<br />&#13;
  &lt;tx:attributes&gt;<br />&#13;
   &lt;tx:method name="save*" propagation="REQUIRED"/&gt;<br />&#13;
   &lt;tx:method name="delete*" propagation="REQUIRED"/&gt;<br />&#13;
   &lt;tx:method name="update*" propagation="REQUIRED"/&gt;<br />&#13;
   &lt;tx:method name="find*" read-only="true"/&gt;<br />&#13;
   &lt;tx:method name="*" read-only="true"/&gt;<br />&#13;
  &lt;/tx:attributes&gt;<br />&#13;
 &lt;/tx:advice&gt;<br />&#13;
 <br />&#13;
 &lt;aop:config&gt;<br />&#13;
  &lt;aop:advisor pointcut="execution(* *..*ServiceImpl.*(..))" advice-ref="txAdvice"/&gt;<br />&#13;
  &lt;!-- <br />&#13;
   &lt;aop:advisor advice-ref="txAdvice" pointcut="execution(* *..*ServiceImpl.*(..))"/&gt;<br />&#13;
   --&gt;<br />&#13;
 &lt;/aop:config&gt;<br />&#13;
&lt;/beans&gt;</span></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">4.</span>       <span style="font-family:Calibri; font-size:14px">&#13;
web.xml</span>文件不变</p>&#13;
<p>&lt;?xml version="1.0" encoding="UTF-8"?&gt;<br />&#13;
&lt;web-app version="2.4" <br />&#13;
 xmlns="<a target="_blank" href="http://java.sun.com/xml/ns/j2ee">http://java.sun.com/xml/ns/j2ee</a>"<br />&#13;
 xmlns:xsi="<a target="_blank" href="http://www.w3.org/2001/XMLSchema-instance">http://www.w3.org/2001/XMLSchema-instance</a>"<br />&#13;
 xsi:schemaLocation="<a target="_blank" href="http://java.sun.com/xml/ns/j2ee">http://java.sun.com/xml/ns/j2ee</a><br />&#13;
 <a target="_blank" href="http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd</a>"&gt;<br />&#13;
 <br />&#13;
 &lt;!-- 通过上下文参数指定spring配置文件的位置 --&gt;<br />&#13;
 &lt;context-param&gt;<br />&#13;
  &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;<br />&#13;
  &lt;param-value&gt;classpath:beans.xml&lt;/param-value&gt;<br />&#13;
 &lt;/context-param&gt;<br />&#13;
 &lt;listener&gt;<br />&#13;
  &lt;listener-class&gt;org.springframework.web.context.ContextLoaderListener&lt;/listener-class&gt;<br />&#13;
 &lt;/listener&gt;<br />&#13;
 <br />&#13;
 &lt;servlet&gt;<br />&#13;
  &lt;servlet-name&gt;action&lt;/servlet-name&gt;<br />&#13;
  &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;<br />&#13;
  &lt;init-param&gt;<br />&#13;
   &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;<br />&#13;
   &lt;param-value&gt;classpath:springMVC.xml&lt;/param-value&gt;<br />&#13;
  &lt;/init-param&gt;<br />&#13;
 &lt;/servlet&gt;<br />&#13;
 &lt;servlet-mapping&gt;<br />&#13;
  &lt;servlet-name&gt;action&lt;/servlet-name&gt;<br />&#13;
  &lt;url-pattern&gt;/&lt;/url-pattern&gt;<br />&#13;
 &lt;/servlet-mapping&gt;<br />&#13;
  &lt;welcome-file-list&gt;<br />&#13;
    &lt;welcome-file&gt;index.jsp&lt;/welcome-file&gt;<br />&#13;
  &lt;/welcome-file-list&gt;<br />&#13;
&lt;/web-app&gt;<br />&#13;
</p>&#13;
<p><span style="font-family:Calibri; font-size:14px">5.</span>       <span style="font-size:14px">&#13;
类的代码不变。</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">6.</span>       <span style="font-size:14px">&#13;
运行，测试。跟上一个项目保持一致。</span></p>&#13;
<h1><span style="font-family:Calibri">Spring MVC 3.0 </span>深入</h1>&#13;
<h2>核心原理</h2>&#13;
<p><span style="font-family:Calibri; font-size:14px">1.</span>       <span style="font-size:14px">&#13;
用户发送请求给服务器。<span style="font-family:Calibri">url</span>：<span style="font-family:Calibri">user.do</span></span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">2.</span>       <span style="font-size:14px">&#13;
服务器收到请求。发现</span><a target="_blank" name="OLE_LINK3" id="OLE_LINK3"></a><a target="_blank" name="OLE_LINK2" id="OLE_LINK2"><span style="font-family:Calibri; font-size:14px">DispatchServlet</span></a><span style="font-size:14px">可以处理。于是调用<span style="font-family:Calibri">DispatchServlet</span>。</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">3.</span>       <span style="font-family:Calibri; font-size:14px">&#13;
DispatchServlet</span>内部，通过<a target="_blank" name="OLE_LINK31" id="OLE_LINK31"></a><a target="_blank" name="OLE_LINK30" id="OLE_LINK30"><span style="font-family:Calibri; font-size:14px">HandleMapping</span></a><span style="font-size:14px">检查这个<span style="font-family:Calibri">url</span>有没有对应的<span style="font-family:Calibri">Controller</span>。如果有，则调用<span style="font-family:Calibri">Controller</span>。</span></p>&#13;
<p><a target="_blank" name="OLE_LINK5" id="OLE_LINK5"></a><a target="_blank" name="OLE_LINK4" id="OLE_LINK4"><span style="font-family:Calibri; font-size:14px">4.</span>      <span style="font-family:Calibri; font-size:14px">Controller</span></a><span style="font-size:14px">开始执行。</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">5.</span>       <span style="font-family:Calibri; font-size:14px">&#13;
Controller</span>执行完毕后，如果返回字符串，则<span style="color:black; background:white">ViewResolver</span><span style="color:black; background:white">将字符串转化成相应的视图对象；如果返回</span><span style="color:black; background:white">ModelAndView</span><span style="color:black; background:white">对象，该对象本身就包含了视图对象信息。</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">6.</span>       <span style="font-size:14px">&#13;
<span style="color:black; background:white">DispatchServlet</span><span style="color:black; background:white">将执视图对象中的数据，输出给服务器。</span></span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">7.</span>       <span style="font-size:14px">&#13;
<span style="color:black; background:white">服务器将数据输出给客户端。</span></span></p>&#13;
<h2><span style="font-family:Cambria">spring3.0</span>中相关<span style="font-family:Cambria">jar</span>包的含义</h2>&#13;
<table border="1" cellspacing="0" cellpadding="0">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top">&#13;
<p><span style="font-size:14px"><span style="color:#333333; background:white">org.springframework.aop-3.0.3.RELEASE.jar</span><strong></strong></span></p>&#13;
</td>&#13;
<td valign="top">&#13;
<p><span style="font-size:14px"><strong><span style="font-family:Calibri">spring</span>的<span style="font-family:Calibri">aop</span>面向切面编程</strong></span></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top">&#13;
<p><span style="font-size:14px"><span style="color:#333333; background:white">org.springframework.asm-3.0.3.RELEASE.jar</span><strong></strong></span></p>&#13;
</td>&#13;
<td valign="top">&#13;
<p><span style="font-size:14px"><strong><span style="font-family:Calibri">spring</span>独立的<span style="font-family:Calibri">asm</span>字节码生成程序</strong></span></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top">&#13;
<p><span style="color:#333333; background:white"><span style="font-size:14px">org.springframework.beans-3.0.3.RELEASE.jar</span></span></p>&#13;
</td>&#13;
<td valign="top">&#13;
<p><span style="font-size:14px"><strong><span style="font-family:Calibri">IOC</span>的基础实现</strong></span></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top">&#13;
<p><span style="color:#333333; background:white"><span style="font-size:14px">org.springframework.context-3.0.3.RELEASE.jar</span></span></p>&#13;
</td>&#13;
<td valign="top">&#13;
<p><span style="font-size:14px"><strong><span style="font-family:Calibri">IOC</span>基础上的扩展服务</strong></span></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top">&#13;
<p><span style="color:#333333; background:white"><span style="font-size:14px">org.springframework.core-3.0.3.RELEASE.jar</span></span></p>&#13;
</td>&#13;
<td valign="top">&#13;
<p><span style="font-size:14px"><strong><span style="font-family:Calibri">spring</span>的核心包</strong></span></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top">&#13;
<p><span style="color:#333333; background:white"><span style="font-size:14px">org.springframework.expression-3.0.3.RELEASE.jar</span></span></p>&#13;
</td>&#13;
<td valign="top">&#13;
<p><span style="font-size:14px"><strong><span style="font-family:Calibri">spring</span>的表达式语言</strong></span></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top">&#13;
<p><span style="color:#333333; background:white"><span style="font-size:14px">org.springframework.web-3.0.3.RELEASE.jar</span></span></p>&#13;
</td>&#13;
<td valign="top">&#13;
<p><span style="font-size:14px"><strong><span style="font-family:Calibri">web</span>工具包</strong></span></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top">&#13;
<p><span style="color:#333333; background:white"><span style="font-size:14px">org.springframework.web.servlet-3.0.3.RELEASE.jar</span></span></p>&#13;
</td>&#13;
<td valign="top">&#13;
<p><span style="font-size:14px"><strong><span style="font-family:Calibri">mvc</span>工具包</strong></span></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p><strong><span style="font-family:Calibri; font-size:14px"> </span></strong></p>&#13;
<p><strong><span style="font-family:Calibri; font-size:14px"> </span></strong></p>&#13;
<h2><span style="font-family:Cambria">@Controller</span>控制器定义</h2>&#13;
<p><span style="font-size:14px">和<span style="font-family:Calibri">Struts1</span>一样，<span style="font-family:Calibri">Spring</span>的<span style="font-family:Calibri">Controller</span>是<span style="font-family:Calibri">Singleton</span>的。这就意味着会被多个请求线程共享。因此，我们将控制器设计成无状态类。</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-size:14px"><span style="color:black; background:white">在</span><span style="color:black; background:white">spring 3.0</span><span style="color:black; background:white">中，通过</span><span style="color:black; background:white">@controller</span><span style="color:black; background:white">标注即可将</span><span style="color:black; background:white">class</span><span style="color:black; background:white">定义为一个</span><span style="color:black; background:white">controller</span><span style="color:black; background:white">类。为使</span><span style="color:black; background:white">spring</span><span style="color:black; background:white">能找到定义为</span><span style="color:black; background:white">controller</span><span style="color:black; background:white">的</span><span style="color:black; background:white">bean,</span><span style="color:black; background:white">需要在</span><span style="color:black; background:white">spring-context</span><span style="color:black; background:white">配置文件中增加如下定义：</span></span></p>&#13;
<p><span style="color:black; background:white"><span style="font-size:14px"> </span></span></p>&#13;
<table border="1" cellspacing="0" cellpadding="0">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top">&#13;
<p><span style="color:#3f7f7f">&lt;context:component-scan</span> <span style="color:#7f007f">&#13;
base-package</span><span style="color:black">=</span><em><span style="color:#2a00ff">"com.sxt.web"</span></em><span style="color:teal">/&gt;</span><strong></strong></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p><strong><span style="font-family:Calibri; font-size:14px"> </span></strong></p>&#13;
<p><span style="font-size:14px"><strong><span style="font-family:Calibri">        </span></strong>注：实际上，使用<span style="font-family:Calibri">@component</span>，也可以起到<span style="font-family:Calibri">@Controller</span>同样的作用。</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<h2><span style="font-family:Cambria">@RequestMapping</span></h2>&#13;
<p><span style="color:#646464"> </span></p>&#13;
<p><span style="color:#646464">    </span><span style="font-size:14px"><span style="color:black; background:white">在类前面定义，则将</span><span style="color:black; background:white">url</span><span style="color:black; background:white">和类绑定。</span></span></p>&#13;
<p><span style="font-size:14px"><span style="color:black; background:white">      </span><span style="color:black; background:white">在方法前面定义，则将</span><span style="color:black; background:white">url</span><span style="color:black; background:white">和类的方法绑定，如下所示：</span></span></p>&#13;
<table border="1" cellspacing="0" cellpadding="0">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top">&#13;
<p align="left"><strong><span style="color:#7f0055">package</span></strong><span style="color:black"> com.sxt.web;</span></p>&#13;
<p align="left"> </p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> javax.annotation.Resource;</span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> org.springframework.stereotype.Controller;</span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> org.springframework.web.bind.annotation.RequestMapping;</span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> com.sxt.service.UserService;</span></p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:#646464">@Controller</span></p>&#13;
<p align="left"><span style="color:#646464">@RequestMapping</span><span style="color:black">(</span><span style="color:#2a00ff">"/user.do"</span><span style="color:black">)</span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">public</span><span style="color:#7f0055">class</span></strong><span style="color:black"> UserController </span>{</p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#646464">@Resource</span></p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">private</span></strong><span style="color:black"> UserService</span><span style="color:#0000c0">userService</span><span style="color:black">;</span></p>&#13;
<p align="left"><span style="color:black">    </span></p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#3f7f5f">//http://localhost:8080/springmvc02/user.do?method=reg&amp;uname=zzzz</span></p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#646464">@RequestMapping</span><span style="color:black">(params=</span><span style="color:#2a00ff">"method=reg"</span><span style="color:black">)</span></p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span></strong><span style="color:black"> String reg(String uname) {</span></p>&#13;
<p align="left"><span style="color:black">       </span>System.<em><span style="color:#0000c0">out</span></em><span style="color:black">.println(</span><span style="color:#2a00ff">"HelloController.handleRequest()"</span><span style="color:black">);</span></p>&#13;
<p align="left"><span style="color:black">       </span><span style="color:#0000c0">userService</span><span style="color:black">.add(uname);</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">return</span></strong><span style="color:#2a00ff">"index"</span><span style="color:black">;</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"><span style="color:black">    </span></p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span></strong><span style="color:black"> UserService getUserService() {</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">return</span></strong><span style="color:#0000c0">userService</span><span style="color:black">;</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span><span style="color:#7f0055">void</span></strong><span style="color:black"> setUserService(UserService userService) {</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">this</span></strong><span style="color:black">.</span><span style="color:#0000c0">userService</span><span style="color:black"> = userService;</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span></p>&#13;
<p><span style="color:black">}</span></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p><span style="color:#646464"> </span></p>&#13;
<h2><a target="_blank" name="OLE_LINK1" id="OLE_LINK1"><span style="font-family:Cambria">@RequestParam</span></a></h2>&#13;
<p><span style="font-family:Calibri; font-size:14px">         </span>一般用于将指定的请求参数赋给方法中形参。示例代码如下：</p>&#13;
<p><span style="font-family:Calibri; font-size:14px">         </span></p>&#13;
<table border="1" cellspacing="0" cellpadding="0">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top">&#13;
<p align="left"><span style="color:#646464">@RequestMapping</span><span style="color:black">(params=</span><span style="color:#2a00ff">"method=reg5"</span><span style="color:black">)</span></p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span></strong><span style="color:black"> String reg5(</span><strong><span style="color:red">@RequestParam("name")String uname</span></strong><span style="color:black">,ModelMap&#13;
 map) { </span></p>&#13;
<p align="left"><span style="color:black">       </span>System.<em><span style="color:#0000c0">out</span></em><span style="color:black">.println(</span><span style="color:#2a00ff">"HelloController.handleRequest()"</span><span style="color:black">);</span></p>&#13;
<p align="left"><span style="color:black">       </span>System.<em><span style="color:#0000c0">out</span></em><span style="color:black">.println(uname);</span></p>&#13;
<p align="left"><span style="color:black">        </span>//<span style="color:black">通过</span><span style="color:black">ModelMap</span><span style="color:black">传参</span></p>&#13;
<p align="left">        map.put("name", uname);<span style="color:black">      </span>&#13;
</p>&#13;
<p align="left"><strong><span style="color:#7f0055">        return</span></strong><span style="color:#2a00ff">"index"</span><span style="color:black">;</span></p>&#13;
<p><span style="color:black">    </span>}</p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p><span style="font-family:Calibri; font-size:14px">         </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">         </span>这样，就会将<span style="font-family:Calibri">name</span>参数的值付给<span style="font-family:Calibri">uname</span>。当然，如果请求参数名称和形参名称保持一致，则不需要这种写法。</p>&#13;
<h2><span style="font-family:Cambria">@SessionAttributes</span></h2>&#13;
<p><span style="color:#646464">    </span><span style="font-size:14px"><span style="color:black; background:white">将</span><span style="color:black; background:white">ModelMap</span><span style="color:black; background:white">中指定的属性放到</span><span style="color:black; background:white">session</span><span style="color:black; background:white">中。示例代码如下：</span></span></p>&#13;
<p><span style="color:#646464">    </span></p>&#13;
<table border="1" cellspacing="0" cellpadding="0">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top">&#13;
<p align="left"><span style="color:#646464">@Controller</span></p>&#13;
<p align="left"><span style="color:#646464">@RequestMapping</span><span style="color:black">(</span><span style="color:#2a00ff">"/user.do"</span><span style="color:black">)</span></p>&#13;
<p align="left"><span style="color:#646464">@SessionAttributes</span><span style="color:black">({</span><span style="color:#2a00ff">"u"</span><span style="color:black">,</span><span style="color:#2a00ff">"a"</span><span style="color:black">})  </span><strong><span style="color:red">//</span><span style="color:red">将</span><span style="color:red">ModelMap</span><span style="color:red">中属性名字为</span><span style="color:red">u</span><span style="color:red">、</span><span style="color:red">a</span><span style="color:red">的再放入</span><span style="color:red">session</span><span style="color:red">中。这样，</span><span style="color:red">request</span><span style="color:red">和</span><span style="color:red">session</span><span style="color:red">中都有了。</span></strong></p>&#13;
<p align="left"><strong><span style="color:#7f0055">public</span><span style="color:#7f0055">class</span></strong><span style="color:black"> UserController </span>{</p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#646464">@</span><u><span style="color:black">RequestMapping</span></u><span style="color:black">(params=</span><span style="color:#2a00ff">"method=reg4"</span><span style="color:black">)</span></p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span></strong><span style="color:black"> String reg4(ModelMap map) { </span>       System.<em><span style="color:#0000c0">out</span></em><span style="color:black">.println(</span><span style="color:#2a00ff">"HelloController.handleRequest()"</span><span style="color:black">);</span></p>&#13;
<p align="left"><span style="color:black">       </span>map.addAttribute(<span style="color:#2a00ff">"u"</span><span style="color:black">,</span><span style="color:#2a00ff">"uuuu"</span><span style="color:black">); </span><strong><span style="color:red">//</span><span style="color:red">将</span><span style="color:red">u</span><span style="color:red">放入</span><span style="color:red">request</span><span style="color:red">作用域中，这样转发页面也可以取到这个数据。</span></strong></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">return</span></strong><span style="color:#2a00ff">"index"</span><span style="color:black">;</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p><span style="color:black">}</span></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top">&#13;
<p align="left"><span style="color:black">  </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">body</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">   </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">h1</span><span style="color:teal">&gt;</span><span style="color:black">**********${requestScope.u.uname}</span><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">h1</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">   </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">h1</span><span style="color:teal">&gt;</span><span style="color:black">**********${sessionScope.u.uname}</span><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">h1</span><span style="color:teal">&gt;</span></p>&#13;
<p><span style="color:black">  </span><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">body</span><span style="color:teal">&gt;</span></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p><span style="color:#646464">    </span></p>&#13;
<p><span style="color:#646464">    </span><u>注：名字为”user”的属性再结合使用注解<span style="color:#646464">@SessionAttributes</span>可能会报错。</u></p>&#13;
<p><span style="color:#646464"> </span></p>&#13;
<h2><span style="background:white"><span style="font-family:Cambria">@ModelAttribute</span></span></h2>&#13;
<p><span style="color:#333333; background:white"><span style="font-size:14px">     </span></span><a target="_blank" href="mailto:这个注解可以跟@SessionAttributes配合在一起用。可以将ModelMap"><span style="color:windowtext">这个注解可以跟</span><span style="color:windowtext">@SessionAttributes</span><span style="color:windowtext">配合在一起用</span><span style="color:windowtext">。可以将</span><span style="color:windowtext">ModelMap</span></a>中属性的值通过该注解自动赋给指定变量。</p>&#13;
<p>    示例代码如下：</p>&#13;
<table border="1" cellspacing="0" cellpadding="0">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top">&#13;
<p align="left"><strong><span style="color:#7f0055">package</span></strong><span style="color:black"> com.sxt.web;</span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> javax.annotation.Resource;</span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> org.springframework.stereotype.Controller;</span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> org.springframework.ui.ModelMap;</span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> org.springframework.web.bind.annotation.ModelAttribute;</span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> org.springframework.web.bind.annotation.RequestMapping;</span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> org.springframework.web.bind.annotation.SessionAttributes;</span></p>&#13;
<p align="left"><span style="color:#646464">@Controller</span></p>&#13;
<p align="left"><span style="color:#646464">@RequestMapping</span><span style="color:black">(</span><span style="color:#2a00ff">"/user.do"</span><span style="color:black">)</span></p>&#13;
<p align="left"><span style="color:#646464">@SessionAttributes</span><span style="color:black">({</span><span style="color:#2a00ff">"u"</span><span style="color:black">,</span><span style="color:#2a00ff">"a"</span><span style="color:black">}) </span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">public</span><span style="color:#7f0055">class</span></strong><span style="color:black"> UserController </span>{</p>&#13;
<p align="left"><span style="color:black">    </span></p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#646464">@RequestMapping</span><span style="color:black">(params=</span><span style="color:#2a00ff">"method=reg4"</span><span style="color:black">)</span></p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span></strong><span style="color:black"> String reg4(ModelMap map) {</span></p>&#13;
<p align="left"><span style="color:black">       </span>System.<em><span style="color:#0000c0">out</span></em><span style="color:black">.println(</span><span style="color:#2a00ff">"HelloController.handleRequest()"</span><span style="color:black">);</span></p>&#13;
<p align="left"><span style="color:black">       </span>map.addAttribute(<span style="color:#2a00ff">"u"</span><span style="color:black">,</span><span style="color:#2a00ff">"</span><span style="color:#2a00ff">尚学堂高淇</span><span style="color:#2a00ff">"</span><span style="color:black">);</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">return</span></strong><span style="color:#2a00ff">"index"</span><span style="color:black">;</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"><span style="color:black">    </span></p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#646464">@RequestMapping</span><span style="color:black">(params=</span><span style="color:#2a00ff">"method=reg5"</span><span style="color:black">)</span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">public</span></strong><span style="color:black"> String reg5(</span><a><span style="color:#646464">@ModelAttribute</span></a><span style="color:black">(</span><span style="color:#2a00ff">"u"</span><span style="color:black">)String&#13;
 uname</span><span style="font-family:Calibri; font-size:14px"> </span><span style="color:black">,ModelMap map) {</span></p>&#13;
<p align="left"><span style="color:black">       </span>System.<em><span style="color:#0000c0">out</span></em><span style="color:black">.println(</span><span style="color:#2a00ff">"HelloController.handleRequest()"</span><span style="color:black">);</span></p>&#13;
<p align="left"><span style="color:black">       </span>System.<em><span style="color:#0000c0">out</span></em><span style="color:black">.println(uname);</span></p>&#13;
<p align="left"><span style="color:black">    </span>    <strong><span style="color:#7f0055">return</span></strong><span style="color:#2a00ff">"index"</span><span style="color:black">;</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"><span style="color:black">    </span></p>&#13;
<p><span style="color:black">}</span></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p> </p>&#13;
<p>先调用reg4方法，再调用reg5方法。我们发现控制台打印出来：<u>尚学堂高淇</u></p>&#13;
<p> </p>&#13;
<h2><span style="font-family:Cambria">Controller</span>类中方法参数的处理</h2>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<h2><span style="font-family:Cambria">Controller</span>类中方法返回值的处理</h2>&#13;
<p><span style="font-family:Calibri; font-size:14px">1.</span>       <span style="font-size:14px">&#13;
返回<span style="font-family:Calibri">string(</span>建议<span style="font-family:Calibri">)</span></span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">a)</span>         <span style="font-size:14px">&#13;
根据返回值找对应的显示页面。路径规则为：<span style="font-family:Calibri">prefix</span>前缀<span style="font-family:Calibri">+</span>返回值<span style="font-family:Calibri">+suffix</span>后缀组成</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">b)</span>         <span style="font-size:14px">&#13;
代码如下：</span></p>&#13;
<table border="1" cellspacing="0" cellpadding="0">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top">&#13;
<p align="left"><span style="color:#646464">@RequestMapping</span><span style="color:black">(params=</span><span style="color:#2a00ff">"method=reg4"</span><span style="color:black">)</span></p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span></strong><span style="color:black"> String reg4(ModelMap map) {</span></p>&#13;
<p align="left"><span style="color:black">       </span>System.<em><span style="color:#0000c0">out</span></em><span style="color:black">.println(</span><span style="color:#2a00ff">"HelloController.handleRequest()"</span><span style="color:black">);</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">return</span></strong><span style="color:#2a00ff">"index"</span><span style="color:black">;</span></p>&#13;
<p><span style="color:black">    </span>}</p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top">&#13;
<p><span style="font-size:14px">前缀为：<span style="font-family:Calibri">/WEB-INF/jsp/   </span>后缀是：<span style="font-family:Calibri">.jsp</span></span></p>&#13;
<p><span style="font-size:14px">在转发到：<span style="font-family:Calibri">/WEB-INF/jsp/index.jsp</span></span></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">2.</span>       <span style="font-size:14px">&#13;
也可以返回<span style="font-family:Calibri">ModelMap</span>、<span style="font-family:Calibri">ModelAndView</span>、<span style="font-family:Calibri">map</span>、<span style="font-family:Calibri">List</span>、<span style="font-family:Calibri">Set</span>、<span style="font-family:Calibri">Object</span>、无返回值。<strong><u>一般建议返回字符串！</u></strong></span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<h2>请求转发和重定向</h2>&#13;
<p><span style="font-family:Calibri; font-size:14px">         </span>代码示例：</p>&#13;
<p><span style="font-family:Calibri; font-size:14px">         </span></p>&#13;
<table border="1" cellspacing="0" cellpadding="0">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top">&#13;
<p align="left"><strong><span style="color:#7f0055">package</span></strong><span style="color:black"> com.sxt.web;</span></p>&#13;
<p align="left"> </p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> javax.annotation.Resource;</span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> org.springframework.stereotype.Controller;</span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> org.springframework.ui.ModelMap;</span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> org.springframework.web.bind.annotation.ModelAttribute;</span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> org.springframework.web.bind.annotation.RequestMapping;</span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> org.springframework.web.bind.annotation.SessionAttributes;</span></p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:#646464">@Controller</span></p>&#13;
<p align="left"><span style="color:#646464">@RequestMapping</span><span style="color:black">(</span><span style="color:#2a00ff">"/user.do"</span><span style="color:black">)</span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">public</span><span style="color:#7f0055">class</span></strong><span style="color:black"> UserController </span>{</p>&#13;
<p align="left"><span style="color:black">    </span></p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#646464">@RequestMapping</span><span style="color:black">(params=</span><span style="color:#2a00ff">"method=reg4"</span><span style="color:black">)</span></p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span></strong><span style="color:black"> String reg4(ModelMap map) {</span></p>&#13;
<p align="left"><span style="color:black">       </span>System.<em><span style="color:#0000c0">out</span></em><span style="color:black">.println(</span><span style="color:#2a00ff">"HelloController.handleRequest()"</span><span style="color:black">);</span></p>&#13;
<p align="left"><span style="color:#3f7f5f">//     </span>return "forward:index.jsp";</p>&#13;
<p align="left"><span style="color:#3f7f5f">//     </span>return "forward:user.do?method=reg5"; //<span style="color:#3f7f5f">转发</span></p>&#13;
<p align="left"><span style="color:#3f7f5f">//     </span>return "redirect:user.do?method=reg5";  //<span style="color:#3f7f5f">重定向</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">return</span></strong><span style="color:#2a00ff">"redirect:http://www.baidu.com"</span><span style="color:black">; </span><span style="color:#3f7f5f">//</span><span style="color:#3f7f5f">重定向</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"><span style="color:black">    </span></p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#646464">@RequestMapping</span><span style="color:black">(params=</span><span style="color:#2a00ff">"method=reg5"</span><span style="color:black">)</span></p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span></strong><span style="color:black"> String reg5(String uname,ModelMap map) {</span></p>&#13;
<p align="left"><span style="color:black">       </span>System.<em><span style="color:#0000c0">out</span></em><span style="color:black">.println(</span><span style="color:#2a00ff">"HelloController.handleRequest()"</span><span style="color:black">);</span></p>&#13;
<p align="left"><span style="color:black">       </span>System.<em><span style="color:#0000c0">out</span></em><span style="color:black">.println(uname);</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">return</span></strong><span style="color:#2a00ff">"index"</span><span style="color:black">;</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"><span style="color:black">    </span></p>&#13;
<p><span style="color:black">}</span></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p><span style="font-family:Calibri; font-size:14px">         </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">         </span>访问<span style="font-family:Calibri">reg4</span>方法，既可以看到效果。</p>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<h2>获得<span style="font-family:Cambria">request</span>对象、<span style="font-family:Cambria">session</span>对象</h2>&#13;
<p><span style="font-size:14px">普通的<span style="font-family:Calibri">Controller</span>类，示例代码如下：</span></p>&#13;
<table border="1" cellspacing="0" cellpadding="0">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top">&#13;
<p align="left"><span style="color:#646464">@Controller</span></p>&#13;
<p align="left"><span style="color:#646464">@RequestMapping</span><span style="color:black">(</span><span style="color:#2a00ff">"/user.do"</span><span style="color:black">)</span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">public</span><span style="color:#7f0055">class</span></strong><span style="color:black"> UserController </span>{</p>&#13;
<p align="left"><span style="color:black">    </span></p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#646464">@RequestMapping</span><span style="color:black">(params=</span><span style="color:#2a00ff">"method=reg2"</span><span style="color:black">)</span></p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span></strong><span style="color:black"> String reg2(String uname,</span><strong><span style="color:red">HttpServletRequest req</span></strong><span style="color:black">,ModelMap&#13;
 map){</span></p>&#13;
<p align="left"><span style="color:black">       </span>req.setAttribute(<span style="color:#2a00ff">"a"</span><span style="color:black">,</span><span style="color:#2a00ff">"aa"</span><span style="color:black">);</span></p>&#13;
<p align="left"><span style="color:black">       </span><u>req</u>.getSession().setAttribute(<span style="color:#2a00ff">"b"</span><span style="color:black">,</span><span style="color:#2a00ff">"bb"</span><span style="color:black">);</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">return</span></strong><span style="color:#2a00ff">"index"</span><span style="color:black">;</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p><span style="color:black">}</span></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<h2><span style="font-family:Cambria">ModelMap</span></h2>&#13;
<p><span style="font-family:Calibri; font-size:14px">         </span>是<span style="font-family:Calibri">map</span>的实现，可以在其中存放属性，作用域同<span style="font-family:Calibri">request</span>。下面这个示例，我们可以在<span style="font-family:Calibri">modelMap</span>中放入数据，然后在<span style="font-family:Calibri">forward</span>的页面上显示这些数据。通过<span style="font-family:Calibri">el</span>表达式、<span style="font-family:Calibri">JSTL</span>、<span style="font-family:Calibri">java</span>代码均可。代码如下：</p>&#13;
<p><span style="font-family:Calibri; font-size:14px">         </span></p>&#13;
<table border="1" cellspacing="0" cellpadding="0">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top">&#13;
<p align="left"><strong><span style="color:#7f0055">package</span></strong><span style="color:black"> com.sxt.web;</span></p>&#13;
<p align="left"> </p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> org.springframework.stereotype.Controller;</span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> org.springframework.ui.ModelMap;</span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> org.springframework.web.bind.annotation.RequestMapping;</span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> org.springframework.web.servlet.mvc.multiaction.MultiActionController;</span></p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:#646464">@Controller</span></p>&#13;
<p align="left"><span style="color:#646464">@RequestMapping</span><span style="color:black">(</span><span style="color:#2a00ff">"/user.do"</span><span style="color:black">)</span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">public</span><span style="color:#7f0055">class</span></strong><span style="color:black"> UserController</span><strong><span style="color:#7f0055">extends</span></strong><span style="color:black"> MultiActionController </span>{</p>&#13;
<p align="left"><span style="color:black">    </span></p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#646464">@RequestMapping</span><span style="color:black">(params=</span><span style="color:#2a00ff">"method=reg"</span><span style="color:black">)</span></p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span></strong><span style="color:black"> String reg(String uname,ModelMap map){</span></p>&#13;
<p align="left"><span style="color:black">       </span>map.put(<span style="color:#2a00ff">"a"</span><span style="color:black">,</span><span style="color:#2a00ff">"aaa"</span><span style="color:black">);</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">return</span></strong><span style="color:#2a00ff">"index"</span><span style="color:black">;</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p><span style="color:black">}</span></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top">&#13;
<p align="left"><span style="color:#bf5f3f">&lt;%@</span> <span style="color:#3f7f7f">&#13;
page</span> <span style="color:#7f007f">language</span><span style="color:black">=</span><em><span style="color:#2a00ff">"java"</span></em><span style="color:#7f007f">import</span><span style="color:black">=</span><em><span style="color:#2a00ff">"java.util.*"</span></em><span style="color:#7f007f">pageEncoding</span><span style="color:black">=</span><em><span style="color:#2a00ff">"utf-8"</span></em><span style="color:#bf5f3f">%&gt;</span></p>&#13;
<p align="left"><span style="color:#bf5f3f">&lt;%@</span> <span style="color:#3f7f7f">&#13;
taglib</span> <span style="color:#7f007f">prefix</span><span style="color:black">=</span><em><span style="color:#2a00ff">"c"</span></em><span style="color:#7f007f">uri</span><span style="color:black">=</span><em><span style="color:#2a00ff">"http://java.sun.com/jsp/jstl/core"</span></em><span style="color:#bf5f3f">%&gt;</span></p>&#13;
<p align="left"><span style="color:teal">&lt;!</span><span style="color:#3f7f7f">DOCTYPE</span><span style="color:teal">HTML</span><span style="color:gray">PUBLIC</span>&#13;
<span style="color:teal">"-//W3C//DTD HTML 4.01 Transitional//EN"&gt;</span></p>&#13;
<p align="left"><span style="color:teal">&lt;</span><span style="color:#3f7f7f">html</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">  </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">head</span><span style="color:teal">&gt;&lt;/</span><span style="color:#3f7f7f">head</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">  </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">body</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">    </span>   <span style="color:teal">&#13;
&lt;</span><span style="color:#3f7f7f">h1</span><span style="color:teal">&gt;</span><span style="color:black">${requestScope.a}</span><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">h1</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">    </span>   <span style="color:teal">&#13;
&lt;</span><span style="color:#3f7f7f">c:out</span> <span style="color:#7f007f">value</span><span style="color:black">=</span>"<span style="color:black">${requestScope.a}</span>"<span style="color:teal">&gt;&lt;/</span><span style="color:#3f7f7f">c:out</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">  </span><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">body</span><span style="color:teal">&gt;</span></p>&#13;
<p><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">html</span><span style="color:teal">&gt;</span></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<h2><span style="font-family:Cambria">ModelAndView</span>模型视图类</h2>&#13;
<p><span style="font-size:14px">见名知意，从名字上我们可以知道<span style="font-family:Calibri">ModelAndView</span>中的<span style="font-family:Calibri">Model</span>代表模型，<span style="font-family:Calibri">View</span>代表视图。即，这个类把要显示的数据存储到了<span style="font-family:Calibri">Model</span>属性中，要跳转的视图信息存储到了<span style="font-family:Calibri">view</span>属性。我们看一下<span style="font-family:Calibri">ModelAndView</span>的部分源码，即可知其中关系：</span></p>&#13;
<table border="1" cellspacing="0" cellpadding="0">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top">&#13;
<p align="left"><strong><span style="color:#7f0055">public</span><span style="color:#7f0055">class</span></strong><span style="color:black"><span style="background:lightgrey">ModelAndView</span> {</span></p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#3f5fbf">/** View instance or view name String */</span></p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">private</span></strong><span style="color:black"> Object</span><span style="color:#0000c0">view</span><span style="color:black">;</span></p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#3f5fbf">/** Model Map */</span></p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">private</span></strong><span style="color:black"> ModelMap</span><span style="color:#0000c0">model</span><span style="color:black">;</span></p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#3f5fbf">/**</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * Indicates whether or not this instance has been cleared with a call to<span style="color:#3f3fbf">{@link #clear()}</span><span style="color:#3f5fbf">.</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> */</p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">private</span><span style="color:#7f0055">boolean</span></strong><span style="color:#0000c0">cleared</span><span style="color:black"> =</span><strong><span style="color:#7f0055">false</span></strong><span style="color:black">;</span></p>&#13;
<p align="left"> </p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#3f5fbf">/**</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * Default constructor for bean<span style="color:#7f7f9f">-</span><span style="color:#3f5fbf">style usage: populating bean</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * properties instead of passing in constructor arguments.</p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <strong><span style="color:#7f9fbf">@see</span></strong><span style="color:#3f5fbf"> #setView(View)</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <strong><span style="color:#7f9fbf">@see</span></strong><span style="color:#3f5fbf"> #setViewName(String)</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> */</p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span></strong><span style="color:black"> ModelAndView() {</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#3f5fbf">/**</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * Convenient constructor when there is no model data to expose.</p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * Can also be used in conjunction with<span style="color:#7f7f9f">&lt;code&gt;</span><span style="color:#3f5fbf">addObject</span><span style="color:#7f7f9f">&lt;/code&gt;</span><span style="color:#3f5fbf">.</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <strong><span style="color:#7f9fbf">@param</span></strong><span style="color:#3f5fbf"> viewName name of the View to render, to be resolved</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * by the DispatcherServlet's ViewResolver</p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <strong><span style="color:#7f9fbf">@see</span></strong><span style="color:#3f5fbf"> #addObject</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> */</p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span></strong><span style="color:black"> ModelAndView(String viewName) {</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">this</span></strong><span style="color:black">.</span><span style="color:#0000c0">view</span><span style="color:black"> = viewName;</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#3f5fbf">/**</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * Convenient constructor when there is no model data to expose.</p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * Can also be used in conjunction with<span style="color:#7f7f9f">&lt;code&gt;</span><span style="color:#3f5fbf">addObject</span><span style="color:#7f7f9f">&lt;/code&gt;</span><span style="color:#3f5fbf">.</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <strong><span style="color:#7f9fbf">@param</span></strong><span style="color:#3f5fbf"> view View object to render</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <strong><span style="color:#7f9fbf">@see</span></strong><span style="color:#3f5fbf"> #addObject</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> */</p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span></strong><span style="color:black"> ModelAndView(View view) {</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">this</span></strong><span style="color:black">.</span><span style="color:#0000c0">view</span><span style="color:black"> = view;</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#3f5fbf">/**</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * Creates new ModelAndView given a view name and a model.</p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <strong><span style="color:#7f9fbf">@param</span></strong><span style="color:#3f5fbf"> viewName name of the View to render, to be resolved</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * by the DispatcherServlet's ViewResolver</p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <strong><span style="color:#7f9fbf">@param</span></strong><span style="color:#3f5fbf"> model Map of model names (Strings) to model objects</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * (Objects). Model entries may not be<span style="color:#7f7f9f">&lt;code&gt;</span><span style="color:#3f5fbf">null</span><span style="color:#7f7f9f">&lt;/code&gt;</span><span style="color:#3f5fbf">, but the</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * model Map may be <span style="color:#7f7f9f">&#13;
&lt;code&gt;</span><span style="color:#3f5fbf">null</span><span style="color:#7f7f9f">&lt;/code&gt;</span><span style="color:#3f5fbf"> if there is no model data.</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> */</p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span></strong><span style="color:black"> ModelAndView(String viewName, Map&lt;String, ?&gt; model) {</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">this</span></strong><span style="color:black">.</span><span style="color:#0000c0">view</span><span style="color:black"> = viewName;</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">if</span></strong><span style="color:black"> (model !=</span><strong><span style="color:#7f0055">null</span></strong><span style="color:black">) {</span></p>&#13;
<p align="left"><span style="color:black">           </span>getModelMap().addAllAttributes(model);</p>&#13;
<p align="left"><span style="color:black">       </span>}</p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#3f5fbf">/**</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * Creates new ModelAndView given a View object and a model.</p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <span style="color:#7f7f9f">&#13;
&lt;emphasis&gt;</span><span style="color:#3f5fbf">Note: the supplied model data is copied into the internal</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * storage of this class. You should not consider to modify the supplied</p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * Map after supplying it to this class<span style="color:#7f7f9f">&lt;/emphasis&gt;</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <strong><span style="color:#7f9fbf">@param</span></strong><span style="color:#3f5fbf"> view View object to render</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <strong><span style="color:#7f9fbf">@param</span></strong><span style="color:#3f5fbf"> model Map of model names (Strings) to model objects</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * (Objects). Model entries may not be<span style="color:#7f7f9f">&lt;code&gt;</span><span style="color:#3f5fbf">null</span><span style="color:#7f7f9f">&lt;/code&gt;</span><span style="color:#3f5fbf">, but the</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * model Map may be <span style="color:#7f7f9f">&#13;
&lt;code&gt;</span><span style="color:#3f5fbf">null</span><span style="color:#7f7f9f">&lt;/code&gt;</span><span style="color:#3f5fbf"> if there is no model data.</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> */</p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span></strong><span style="color:black"> ModelAndView(View view, Map&lt;String, ?&gt; model) {</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">this</span></strong><span style="color:black">.</span><span style="color:#0000c0">view</span><span style="color:black"> = view;</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">if</span></strong><span style="color:black"> (model !=</span><strong><span style="color:#7f0055">null</span></strong><span style="color:black">) {</span></p>&#13;
<p align="left"><span style="color:black">           </span>getModelMap().addAllAttributes(model);</p>&#13;
<p align="left"><span style="color:black">       </span>}</p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#3f5fbf">/**</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * Convenient constructor to take a single model object.</p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <strong><span style="color:#7f9fbf">@param</span></strong><span style="color:#3f5fbf"> viewName name of the View to render, to be resolved</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * by the DispatcherServlet's ViewResolver</p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <strong><span style="color:#7f9fbf">@param</span></strong><span style="color:#3f5fbf"> modelName name of the single entry in the model</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <strong><span style="color:#7f9fbf">@param</span></strong><span style="color:#3f5fbf"> modelObject the single model object</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> */</p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span></strong><span style="color:black"> ModelAndView(String viewName, String modelName, Object modelObject) {</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">this</span></strong><span style="color:black">.</span><span style="color:#0000c0">view</span><span style="color:black"> = viewName;</span></p>&#13;
<p align="left"><span style="color:black">       </span>addObject(modelName, modelObject);</p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#3f5fbf">/**</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * Convenient constructor to take a single model object.</p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <strong><span style="color:#7f9fbf">@param</span></strong><span style="color:#3f5fbf"> view View object to render</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <strong><span style="color:#7f9fbf">@param</span></strong><span style="color:#3f5fbf"> modelName name of the single entry in the model</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <strong><span style="color:#7f9fbf">@param</span></strong><span style="color:#3f5fbf"> modelObject the single model object</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> */</p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span></strong><span style="color:black"> ModelAndView(View view, String modelName, Object modelObject) {</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">this</span></strong><span style="color:black">.</span><span style="color:#0000c0">view</span><span style="color:black"> = view;</span></p>&#13;
<p align="left"><span style="color:black">       </span>addObject(modelName, modelObject);</p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"> </p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#3f5fbf">/**</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * Set a view name for this ModelAndView, to be resolved by the</p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * DispatcherServlet via a ViewResolver. Will override any</p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * pre<span style="color:#7f7f9f">-</span><span style="color:#3f5fbf">existing view name or View.</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> */</p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span><span style="color:#7f0055">void</span></strong><span style="color:black"> setViewName(String viewName) {</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">this</span></strong><span style="color:black">.</span><span style="color:#0000c0">view</span><span style="color:black"> = viewName;</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#3f5fbf">/**</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * Return the view name to be resolved by the DispatcherServlet</p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * via a ViewResolver, or <span style="color:#7f7f9f">&#13;
&lt;code&gt;</span><span style="color:#3f5fbf">null</span><span style="color:#7f7f9f">&lt;/code&gt;</span><span style="color:#3f5fbf"> if we are using a View object.</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> */</p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span></strong><span style="color:black"> String getViewName() {</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">return</span></strong><span style="color:black"> (</span><strong><span style="color:#7f0055">this</span></strong><span style="color:black">.</span><span style="color:#0000c0">view</span><strong><span style="color:#7f0055">instanceof</span></strong><span style="color:black">&#13;
 String ? (String) </span><strong><span style="color:#7f0055">this</span></strong><span style="color:black">.</span><span style="color:#0000c0">view</span><span style="color:black"> :</span><strong><span style="color:#7f0055">null</span></strong><span style="color:black">);</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#3f5fbf">/**</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * Set a View object for this ModelAndView. Will override any</p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * pre<span style="color:#7f7f9f">-</span><span style="color:#3f5fbf">existing view name or View.</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> */</p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span><span style="color:#7f0055">void</span></strong><span style="color:black"> setView(View view) {</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">this</span></strong><span style="color:black">.</span><span style="color:#0000c0">view</span><span style="color:black"> = view;</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#3f5fbf">/**</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * Return the View object, or<span style="color:#7f7f9f">&lt;code&gt;</span><span style="color:#3f5fbf">null</span><span style="color:#7f7f9f">&lt;/code&gt;</span><span style="color:#3f5fbf"> if we are using a view&#13;
 name</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * to be resolved by the DispatcherServlet via a ViewResolver.</p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> */</p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span></strong><span style="color:black"> View getView() {</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">return</span></strong><span style="color:black"> (</span><strong><span style="color:#7f0055">this</span></strong><span style="color:black">.</span><span style="color:#0000c0">view</span><strong><span style="color:#7f0055">instanceof</span></strong><span style="color:black">&#13;
 View ? (View) </span><strong><span style="color:#7f0055">this</span></strong><span style="color:black">.</span><span style="color:#0000c0">view</span><span style="color:black"> :</span><strong><span style="color:#7f0055">null</span></strong><span style="color:black">);</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#3f5fbf">/**</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * Indicate whether or not this<span style="color:#7f7f9f">&lt;code&gt;</span><span style="color:#3f5fbf">ModelAndView</span><span style="color:#7f7f9f">&lt;/code&gt;</span><span style="color:#3f5fbf"> has a view,&#13;
 either</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * as a view name or as a direct<span style="color:#3f3fbf">{@link View}</span><span style="color:#3f5fbf"> instance.</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> */</p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span><span style="color:#7f0055">boolean</span></strong><span style="color:black"> hasView() {</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">return</span></strong><span style="color:black"> (</span><strong><span style="color:#7f0055">this</span></strong><span style="color:black">.</span><span style="color:#0000c0">view</span><span style="color:black">&#13;
 != </span><strong><span style="color:#7f0055">null</span></strong><span style="color:black">);</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#3f5fbf">/**</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * Return whether we use a view reference, i.e.<span style="color:#7f7f9f">&lt;code&gt;</span><span style="color:#3f5fbf">true</span><span style="color:#7f7f9f">&lt;/code&gt;</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * if the view has been specified via a name to be resolved by the</p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * DispatcherServlet via a ViewResolver.</p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> */</p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span><span style="color:#7f0055">boolean</span></strong><span style="color:black"> isReference() {</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">return</span></strong><span style="color:black"> (</span><strong><span style="color:#7f0055">this</span></strong><span style="color:black">.</span><span style="color:#0000c0">view</span><strong><span style="color:#7f0055">instanceof</span></strong><span style="color:black">&#13;
 String);</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#3f5fbf">/**</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * Return the model map. May return<span style="color:#7f7f9f">&lt;code&gt;</span><span style="color:#3f5fbf">null</span><span style="color:#7f7f9f">&lt;/code&gt;</span><span style="color:#3f5fbf">.</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * Called by DispatcherServlet for evaluation of the model.</p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> */</p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">protected</span></strong><span style="color:black"> Map&lt;String, Object&gt; getModelInternal() {</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">return</span><span style="color:#7f0055">this</span></strong><span style="color:black">.</span><span style="color:#0000c0">model</span><span style="color:black">;</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#3f5fbf">/**</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * Return the underlying <span style="color:#7f7f9f">&#13;
&lt;code&gt;</span><span style="color:#3f5fbf">ModelMap</span><span style="color:#7f7f9f">&lt;/code&gt;</span><span style="color:#3f5fbf"> instance (never</span><span style="color:#7f7f9f">&lt;code&gt;</span><span style="color:#3f5fbf">null</span><span style="color:#7f7f9f">&lt;/code&gt;</span><span style="color:#3f5fbf">).</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> */</p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span></strong><span style="color:black"> ModelMap getModelMap() {</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">if</span></strong><span style="color:black"> (</span><strong><span style="color:#7f0055">this</span></strong><span style="color:black">.</span><span style="color:#0000c0">model</span><span style="color:black">&#13;
 == </span><strong><span style="color:#7f0055">null</span></strong><span style="color:black">) {</span></p>&#13;
<p align="left"><span style="color:black">           </span><strong><span style="color:#7f0055">this</span></strong><span style="color:black">.</span><span style="color:#0000c0">model</span><span style="color:black"> =</span><strong><span style="color:#7f0055">new</span></strong><span style="color:black">&#13;
 ModelMap();</span></p>&#13;
<p align="left"><span style="color:black">       </span>}</p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">return</span><span style="color:#7f0055">this</span></strong><span style="color:black">.</span><span style="color:#0000c0">model</span><span style="color:black">;</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#3f5fbf">/**</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * Return the model map. Never returns<span style="color:#7f7f9f">&lt;code&gt;</span><span style="color:#3f5fbf">null</span><span style="color:#7f7f9f">&lt;/code&gt;</span><span style="color:#3f5fbf">.</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * To be called by application code for modifying the model.</p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> */</p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span></strong><span style="color:black"> Map&lt;String, Object&gt; getModel() {</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">return</span></strong><span style="color:black"> getModelMap();</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"> </p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#3f5fbf">/**</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * Add an attribute to the model.</p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <strong><span style="color:#7f9fbf">@param</span></strong><span style="color:#3f5fbf"> attributeName name of the object to add to the model</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <strong><span style="color:#7f9fbf">@param</span></strong><span style="color:#3f5fbf"> attributeValue object to add to the model (never</span><span style="color:#7f7f9f">&lt;code&gt;</span><span style="color:#3f5fbf">null</span><span style="color:#7f7f9f">&lt;/code&gt;</span><span style="color:#3f5fbf">)</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <strong><span style="color:#7f9fbf">@see</span></strong><span style="color:#3f5fbf"> ModelMap#addAttribute(String, Object)</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <strong><span style="color:#7f9fbf">@see</span></strong><span style="color:#3f5fbf"> #getModelMap()</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> */</p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span></strong><span style="color:black"><span style="background:lightgrey">ModelAndView</span> addObject(String attributeName, Object attributeValue) {</span></p>&#13;
<p align="left"><span style="color:black">       </span>getModelMap().addAttribute(attributeName, attributeValue);</p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">return</span><span style="color:#7f0055">this</span></strong><span style="color:black">;</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#3f5fbf">/**</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * Add an attribute to the model using parameter name generation.</p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <strong><span style="color:#7f9fbf">@param</span></strong><span style="color:#3f5fbf"> attributeValue the object to add to the model (never</span><span style="color:#7f7f9f">&lt;code&gt;</span><span style="color:#3f5fbf">null</span><span style="color:#7f7f9f">&lt;/code&gt;</span><span style="color:#3f5fbf">)</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <strong><span style="color:#7f9fbf">@see</span></strong><span style="color:#3f5fbf"> ModelMap#addAttribute(Object)</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <strong><span style="color:#7f9fbf">@see</span></strong><span style="color:#3f5fbf"> #getModelMap()</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> */</p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span></strong><span style="color:black"><span style="background:lightgrey">ModelAndView</span> addObject(Object attributeValue) {</span></p>&#13;
<p align="left"><span style="color:black">       </span>getModelMap().addAttribute(attributeValue);</p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">return</span><span style="color:#7f0055">this</span></strong><span style="color:black">;</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#3f5fbf">/**</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * Add all attributes contained in the provided Map to the model.</p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <strong><span style="color:#7f9fbf">@param</span></strong><span style="color:#3f5fbf"> modelMap a Map of attributeName</span><span style="color:#7f7f9f">-&gt;</span><span style="color:#3f5fbf"> attributeValue&#13;
 pairs</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <strong><span style="color:#7f9fbf">@see</span></strong><span style="color:#3f5fbf"> ModelMap#addAllAttributes(Map)</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <strong><span style="color:#7f9fbf">@see</span></strong><span style="color:#3f5fbf"> #getModelMap()</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> */</p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span></strong><span style="color:black"><span style="background:lightgrey">ModelAndView</span> addAllObjects(Map&lt;String, ?&gt; modelMap) {</span></p>&#13;
<p align="left"><span style="color:black">       </span>getModelMap().addAllAttributes(modelMap);</p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">return</span><span style="color:#7f0055">this</span></strong><span style="color:black">;</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"> </p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#3f5fbf">/**</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * Clear the state of this ModelAndView object.</p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * The object will be empty afterwards.</p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <span style="color:#7f7f9f">&#13;
&lt;p&gt;</span><span style="color:#3f5fbf">Can be used to suppress rendering of a given ModelAndView object</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * in the <span style="color:#7f7f9f">&#13;
&lt;code&gt;</span><span style="color:#3f5fbf">postHandle</span><span style="color:#7f7f9f">&lt;/code&gt;</span><span style="color:#3f5fbf"> method of a HandlerInterceptor.</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <strong><span style="color:#7f9fbf">@see</span></strong><span style="color:#3f5fbf"> #isEmpty()</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <strong><span style="color:#7f9fbf">@see</span></strong><span style="color:#3f5fbf"> HandlerInterceptor#postHandle</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> */</p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span><span style="color:#7f0055">void</span></strong><span style="color:black"> clear() {</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">this</span></strong><span style="color:black">.</span><span style="color:#0000c0">view</span><span style="color:black"> =</span><strong><span style="color:#7f0055">null</span></strong><span style="color:black">;</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">this</span></strong><span style="color:black">.</span><span style="color:#0000c0">model</span><span style="color:black"> =</span><strong><span style="color:#7f0055">null</span></strong><span style="color:black">;</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">this</span></strong><span style="color:black">.</span><span style="color:#0000c0">cleared</span><span style="color:black"> =</span><strong><span style="color:#7f0055">true</span></strong><span style="color:black">;</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#3f5fbf">/**</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * Return whether this ModelAndView object is empty,</p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * i.e. whether it does not hold any view and does not contain a model.</p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> */</p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span><span style="color:#7f0055">boolean</span></strong><span style="color:black"> isEmpty() {</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">return</span></strong><span style="color:black"> (</span><strong><span style="color:#7f0055">this</span></strong><span style="color:black">.</span><span style="color:#0000c0">view</span><span style="color:black">&#13;
 == </span><strong><span style="color:#7f0055">null</span></strong><span style="color:black"> &amp;&amp; CollectionUtils.<em>isEmpty</em>(</span><strong><span style="color:#7f0055">this</span></strong><span style="color:black">.</span><span style="color:#0000c0">model</span><span style="color:black">));</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#3f5fbf">/**</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * Return whether this ModelAndView object is empty as a result of a call to<span style="color:#3f3fbf">{@link #clear}</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * i.e. whether it does not hold any view and does not contain a model.</p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <span style="color:#7f7f9f">&#13;
&lt;p&gt;</span><span style="color:#3f5fbf">Returns </span><span style="color:#7f7f9f">&lt;code&gt;</span><span style="color:#3f5fbf">false</span><span style="color:#7f7f9f">&lt;/code&gt;</span><span style="color:#3f5fbf"> if any additional state was added to the instance</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <span style="color:#7f7f9f">&#13;
&lt;strong&gt;</span><span style="color:#3f5fbf">after</span><span style="color:#7f7f9f">&lt;/strong&gt;</span><span style="color:#3f5fbf"> the call to</span><span style="color:#3f3fbf">{@link #clear}</span><span style="color:#3f5fbf">.</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * <strong><span style="color:#7f9fbf">@see</span></strong><span style="color:#3f5fbf"> #clear()</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> */</p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span><span style="color:#7f0055">boolean</span></strong><span style="color:black"> wasCleared() {</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">return</span></strong><span style="color:black"> (</span><strong><span style="color:#7f0055">this</span></strong><span style="color:black">.</span><span style="color:#0000c0">cleared</span><span style="color:black">&#13;
 &amp;&amp; isEmpty());</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"> </p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#3f5fbf">/**</span></p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> * Return diagnostic information about this model and view.</p>&#13;
<p align="left"><span style="color:#3f5fbf">    </span> */</p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#646464">@Override</span></p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span></strong><span style="color:black"> String toString() {</span></p>&#13;
<p align="left"><span style="color:black">    </span>    StringBuilder sb = <strong>&#13;
<span style="color:#7f0055">new</span></strong><span style="color:black"> StringBuilder(</span><span style="color:#2a00ff">"ModelAndView: "</span><span style="color:black">);</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">if</span></strong><span style="color:black"> (isReference()) {</span></p>&#13;
<p align="left"><span style="color:black">           </span>sb.append(<span style="color:#2a00ff">"reference to view with name '"</span><span style="color:black">).append(</span><strong><span style="color:#7f0055">this</span></strong><span style="color:black">.</span><span style="color:#0000c0">view</span><span style="color:black">).append(</span><span style="color:#2a00ff">"'"</span><span style="color:black">);</span></p>&#13;
<p align="left"><span style="color:black">       </span>}</p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">else</span></strong><span style="color:black"> {</span></p>&#13;
<p align="left"><span style="color:black">           </span>sb.append(<span style="color:#2a00ff">"materialized View is ["</span><span style="color:black">).append(</span><strong><span style="color:#7f0055">this</span></strong><span style="color:black">.</span><span style="color:#0000c0">view</span><span style="color:black">).append(</span><span style="color:#2a00ff">']'</span><span style="color:black">);</span></p>&#13;
<p align="left"><span style="color:black">       </span>}</p>&#13;
<p align="left"><span style="color:black">       </span>sb.append(<span style="color:#2a00ff">"; model is "</span><span style="color:black">).append(</span><strong><span style="color:#7f0055">this</span></strong><span style="color:black">.</span><span style="color:#0000c0">model</span><span style="color:black">);</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">return</span></strong><span style="color:black"> sb.toString();</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p><span style="color:black">}</span></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-size:14px">测试代码如下：</span></p>&#13;
<table border="1" cellspacing="0" cellpadding="0">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top">&#13;
<p align="left"><strong><span style="color:#7f0055">package</span></strong><span style="color:black"> com.sxt.web;</span></p>&#13;
<p align="left"> </p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> org.springframework.stereotype.Controller;</span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> org.springframework.web.bind.annotation.RequestMapping;</span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> org.springframework.web.servlet.ModelAndView;</span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> org.springframework.web.servlet.mvc.multiaction.MultiActionController;</span></p>&#13;
<p align="left"> </p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> com.sxt.po.User;</span></p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:#646464">@Controller</span></p>&#13;
<p align="left"><span style="color:#646464">@RequestMapping</span><span style="color:black">(</span><span style="color:#2a00ff">"/user.do"</span><span style="color:black">)</span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">public</span><span style="color:#7f0055">class</span></strong><span style="color:black"> UserController</span><strong><span style="color:#7f0055">extends</span></strong><span style="color:black"> MultiActionController </span>{</p>&#13;
<p align="left"><span style="color:black">    </span></p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#646464">@RequestMapping</span><span style="color:black">(params=</span><span style="color:#2a00ff">"method=reg"</span><span style="color:black">)</span></p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span></strong><span style="color:black"> ModelAndView reg(<a target="_blank" name="OLE_LINK33" id="OLE_LINK33"></a><a target="_blank" name="OLE_LINK32" id="OLE_LINK32">String&#13;
 uname</a></span>){</p>&#13;
<p align="left"><span style="color:black">       </span>ModelAndView <span style="background:yellow">&#13;
mv</span> = <strong><span style="color:#7f0055">new</span></strong><span style="color:black"> ModelAndView();</span></p>&#13;
<p align="left"><span style="color:black">       </span><span style="background:lightgrey">mv</span>.setViewName(<span style="color:#2a00ff">"index"</span><span style="color:black">);</span></p>&#13;
<p align="left"><span style="color:#3f7f5f">//     </span>mv.setView(new RedirectView("index"));</p>&#13;
<p align="left"><span style="color:black">       </span></p>&#13;
<p align="left"><span style="color:black">       </span>User u = <strong><span style="color:#7f0055">new</span></strong><span style="color:black"> User();</span></p>&#13;
<p align="left"><span style="color:black">       </span>u.setUname(<span style="color:#2a00ff">"</span><span style="color:#2a00ff">高淇</span><span style="color:#2a00ff">"</span><span style="color:black">);</span></p>&#13;
<p align="left"><span style="color:black">       </span><span style="background:lightgrey">mv</span>.addObject(u);   //<span style="color:black">查看源代码，得知，直接放入对象。属性名为</span><span style="color:black">”</span><span style="color:black">首字母小写的类名</span><span style="color:black">”</span><span style="color:black">。</span><u><span style="color:black">一般建议手动增加属性名称。</span></u></p>&#13;
<p align="left"><span style="color:black">       </span><span style="background:lightgrey">mv</span>.addObject(<span style="color:#2a00ff">"a"</span><span style="color:black">,</span><span style="color:#2a00ff">"aaaa"</span><span style="color:black">);</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">return</span></strong><span style="color:black"><span style="background:lightgrey">mv</span>;</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"> </p>&#13;
<p><span style="color:black">}</span></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top">&#13;
<p align="left"><span style="color:#bf5f3f">&lt;%@</span> <span style="color:#3f7f7f">&#13;
page</span> <span style="color:#7f007f">language</span><span style="color:black">=</span><em><span style="color:#2a00ff">"java"</span></em><span style="color:#7f007f">import</span><span style="color:black">=</span><em><span style="color:#2a00ff">"java.util.*"</span></em><span style="color:#7f007f">pageEncoding</span><span style="color:black">=</span><em><span style="color:#2a00ff">"gbk"</span></em><span style="color:#bf5f3f">%&gt;</span></p>&#13;
<p align="left"><span style="color:#bf5f3f">&lt;%@</span> <span style="color:#3f7f7f">&#13;
taglib</span> <span style="color:#7f007f">prefix</span><span style="color:black">=</span><em><span style="color:#2a00ff">"c"</span></em><span style="color:#7f007f">uri</span><span style="color:black">=</span><em><span style="color:#2a00ff">"http://java.sun.com/jsp/jstl/core"</span></em><span style="color:#bf5f3f">%&gt;</span></p>&#13;
<p align="left"><span style="color:teal">&lt;!</span><span style="color:#3f7f7f">DOCTYPE</span><span style="color:teal">HTML</span><span style="color:gray">PUBLIC</span>&#13;
<span style="color:teal">"-//W3C//DTD HTML 4.01 Transitional//EN"&gt;</span></p>&#13;
<p align="left"><span style="color:teal">&lt;</span><span style="color:#3f7f7f">html</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">  </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">head</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">  </span><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">head</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">  </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">body</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">    </span>   <span style="color:teal">&#13;
&lt;</span><span style="color:#3f7f7f">h1</span><span style="color:teal">&gt;</span><span style="color:black">${requestScope.a}</span><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">h1</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">    </span>   <span style="color:teal">&#13;
&lt;</span><span style="color:#3f7f7f">h1</span><span style="color:teal">&gt;</span><span style="color:black">${requestScope.user.uname}</span><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">h1</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">  </span><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">body</span><span style="color:teal">&gt;</span></p>&#13;
<p><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">html</span><span style="color:teal">&gt;</span></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top">&#13;
<p><span style="font-size:14px">地址栏输入：<a target="_blank" href="http://localhost:8080/springmvc03/user.do?method=reg"><span style="font-family:Calibri; color:#0000ff">http://localhost:8080/springmvc03/user.do?method=reg</span></a></span></p>&#13;
<p><span style="font-size:14px">结果为：</span></p>&#13;
<p></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<h2>基于<span style="font-family:Cambria">spring 3.0mvc </span>框架的文件上传实现</h2>&#13;
<p><span style="font-family:Calibri; font-size:14px">1. spring</span>使用了<span style="font-family:Calibri">apache-commons</span>下得上传组件，因此，我们需要引入两个<span style="font-family:Calibri">jar</span>包：</p>&#13;
<p><span style="font-family:Calibri; font-size:14px">1.</span>       <span style="font-family:Calibri; font-size:14px">&#13;
apache-commons-fileupload.jar</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">2.</span>       <span style="font-family:Calibri; font-size:14px">&#13;
apache-commons-io.jar</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">2.  </span>在<span style="font-family:Calibri">springmvc-servlet.xml</span>配置文件中，增加<span style="font-family:Calibri">CommonsMultipartResoler</span>配置：</p>&#13;
<table border="1" cellspacing="0" cellpadding="0">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top">&#13;
<p align="left"><a target="_blank" name="OLE_LINK35" id="OLE_LINK35"></a><a target="_blank" name="OLE_LINK34" id="OLE_LINK34"><span style="color:#3f5fbf">&lt;!--</span></a><span style="color:#3f5fbf">处理文件上传</span><span style="color:#3f5fbf"> --&gt;</span></p>&#13;
<p align="left"><span style="color:teal">&lt;</span><span style="color:#3f7f7f">bean</span><span style="color:#7f007f">id</span><span style="color:black">=</span><em><span style="color:#2a00ff">"multipartResolver"</span></em> </p>&#13;
<p align="left">    <span style="color:#7f007f">class</span><span style="color:black">=</span><em><span style="color:#2a00ff">"org.springframework.web.multipart.commons.CommonsMultipartResolver"</span></em><span style="color:teal">&gt;</span><span style="color:black"> </span></p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">property</span><span style="color:#7f007f">name</span><span style="color:black">=</span><em><span style="color:#2a00ff">"defaultEncoding"</span></em><span style="color:#7f007f">value</span><span style="color:black">=</span><em><span style="color:#2a00ff">"gbk"</span></em><span style="color:teal">/&gt;</span><span style="color:#3f5fbf">&lt;!--</span><span style="color:#3f5fbf">默认编码</span><span style="color:#3f5fbf">&#13;
 (ISO-8859-1) --&gt;</span><span style="color:black"> </span></p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">property</span><span style="color:#7f007f">name</span><span style="color:black">=</span><em><span style="color:#2a00ff">"maxInMemorySize"</span></em><span style="color:#7f007f">value</span><span style="color:black">=</span><em><span style="color:#2a00ff">"10240"</span></em><span style="color:teal">/&gt;</span><span style="color:#3f5fbf">&lt;!--</span><span style="color:#3f5fbf">最大内存大小</span><span style="color:#3f5fbf">&#13;
 (10240)--&gt;</span><span style="color:black"> </span></p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">property</span><span style="color:#7f007f">name</span><span style="color:black">=</span><em><span style="color:#2a00ff">"uploadTempDir"</span></em><span style="color:#7f007f">value</span><span style="color:black">=</span><em><span style="color:#2a00ff">"/upload/"</span></em><span style="color:teal">/&gt;</span><span style="color:#3f5fbf">&lt;!--</span><span style="color:#3f5fbf">上传后的目录名</span><span style="color:#3f5fbf">&#13;
 (WebUtils#TEMP_DIR_CONTEXT_ATTRIBUTE),</span><span style="color:#3f5fbf">这个程序中的</span><span style="color:#3f5fbf">WebRoot</span><span style="color:#3f5fbf">下要有</span><span style="color:#3f5fbf">upload</span><span style="color:#3f5fbf">和</span><span style="color:#3f5fbf">tmp</span><span style="color:#3f5fbf">包，否则会报错</span><span style="color:#3f5fbf">&#13;
 --&gt;</span><span style="color:black">  </span></p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">property</span><span style="color:#7f007f">name</span><span style="color:black">=</span><em><span style="color:#2a00ff">"maxUploadSize"</span></em><span style="color:#7f007f">value</span><span style="color:black">=</span><em><span style="color:#2a00ff">"-1"</span></em><span style="color:teal">/&gt;</span><span style="color:#3f5fbf">&lt;!--</span><span style="color:#3f5fbf">最大文件大小，</span><span style="color:#3f5fbf">-1</span><span style="color:#3f5fbf">为无限止</span><span style="color:#3f5fbf">(-1)&#13;
 --&gt;</span><span style="color:black"> </span></p>&#13;
<p><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">bean</span><span style="color:teal">&gt;</span></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">3.  </span>建立<span style="font-family:Calibri">upload.jsp</span>页面，内容如下：</p>&#13;
<p><span style="font-family:Calibri; font-size:14px">         </span></p>&#13;
<table border="1" cellspacing="0" cellpadding="0">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top">&#13;
<p align="left"><span style="color:#bf5f3f">&lt;%@</span> <span style="color:#3f7f7f">&#13;
page</span> <span style="color:#7f007f">language</span><span style="color:black">=</span><em><span style="color:#2a00ff">"java"</span></em><span style="color:#7f007f">import</span><span style="color:black">=</span><em><span style="color:#2a00ff">"java.util.*"</span></em><span style="color:#7f007f">pageEncoding</span><span style="color:black">=</span><em><span style="color:#2a00ff">"gbk"</span></em><span style="color:#bf5f3f">%&gt;</span></p>&#13;
<p align="left"><span style="color:teal">&lt;!</span><span style="color:#3f7f7f">DOCTYPE</span><span style="color:teal">HTML</span><span style="color:gray">PUBLIC</span>&#13;
<span style="color:teal">"-//W3C//DTD HTML 4.01 Transitional//EN"&gt;</span></p>&#13;
<p align="left"><span style="color:teal">&lt;</span><span style="color:#3f7f7f">html</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">head</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">       </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">title</span><span style="color:teal">&gt;</span><span style="color:black">测试</span><u><span style="color:black">springmvc</span></u><span style="color:black">中上传的实现</span><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">title</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">head</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">body</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:teal">&lt;</span><span style="color:#3f7f7f">form</span><span style="color:#7f007f">action</span><span style="color:black">=</span><em><span style="color:#2a00ff">"upload.do"</span></em> <span style="color:#7f007f">method</span><span style="color:black">=</span><em><span style="color:#2a00ff">"post"</span></em><span style="color:#7f007f">enctype</span><span style="color:black">=</span><em><span style="color:#2a00ff">"multipart/form-data"</span></em><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">           </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">input</span><span style="color:#7f007f">type</span><span style="color:black">=</span><em><span style="color:#2a00ff">"text"</span></em><span style="color:#7f007f">name</span><span style="color:black">=</span><em><span style="color:#2a00ff">"name"</span></em><span style="color:teal">/&gt;</span></p>&#13;
<p align="left"><span style="color:black">           </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">input</span><span style="color:#7f007f">type</span><span style="color:black">=</span><em><span style="color:#2a00ff">"file"</span></em><span style="color:#7f007f">name</span><span style="color:black">=</span><em><span style="color:#2a00ff">"file"</span></em><span style="color:teal">/&gt;</span></p>&#13;
<p align="left"><span style="color:black">           </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">input</span><span style="color:#7f007f">type</span><span style="color:black">=</span><em><span style="color:#2a00ff">"submit"</span></em><span style="color:teal">/&gt;</span></p>&#13;
<p align="left"><span style="color:black">       </span><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">form</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">body</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">html</span><span style="color:teal">&gt;</span></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">4. </span>建立控制器，代码如下：</p>&#13;
<p><span style="font-family:Calibri; font-size:14px">         </span></p>&#13;
<table border="1" cellspacing="0" cellpadding="0">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top">&#13;
<p><a target="_blank" name="_Hlk280090838" id="_Hlk280090838"><span style="font-family:Calibri; font-size:14px">package com.sxt.web;</span></a></p>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">import java.io.File;</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">import java.util.Date;</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">import javax.servlet.ServletContext;</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">import org.springframework.stereotype.Controller;</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">import org.springframework.web.bind.annotation.RequestMapping;</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">import org.springframework.web.bind.annotation.RequestMethod;</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">import org.springframework.web.bind.annotation.RequestParam;</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">import org.springframework.web.context.ServletContextAware;</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">import org.springframework.web.multipart.commons.CommonsMultipartFile;</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">@Controller</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">public class FileUploadController implements ServletContextAware {</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">         private ServletContext servletContext;</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">         </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">         @Override</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">         public void setServletContext(ServletContext context) {</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">                   this.servletContext  = context;</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">         }</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">         </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">         @RequestMapping(value="/upload.do", method = RequestMethod.POST)</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">         public String handleUploadData(String name,</span><a><strong><span style="color:red"><span style="font-family:Calibri; font-size:14px">@RequestParam("file")</span></span></strong></a><a target="_blank" name="_msoanchor_2" id="_anchor_2" href="http://write.blog.csdn.net/postedit#_msocom_2"><span style="font-family:宋体; font-size:14px; color:#0000ff">[微软用户2]</span></a><span style="font-family:Calibri; font-size:14px"> </span><span style="font-family:Calibri; font-size:14px">CommonsMultipartFile&#13;
 file){</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">                   if (!file.isEmpty()) {</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">                               String path = this.servletContext.getRealPath("/tmp/");  //</span>获取本地存储路径</p>&#13;
<p><span style="font-family:Calibri; font-size:14px">                               System.out.println(path);</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">                               String fileName = file.getOriginalFilename();</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">                               String fileType = fileName.substring(fileName.lastIndexOf("."));</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">                               System.out.println(fileType);</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">                               File file2 = new File(path,new Date().getTime() + fileType); //</span>新建一个文件</p>&#13;
<p><span style="font-family:Calibri; font-size:14px">                               try {</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">                                         file.getFileItem().write(file2); //</span>将上传的文件写入新建的文件中</p>&#13;
<p><span style="font-family:Calibri; font-size:14px">                               } catch (Exception e) {</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">                                         e.printStackTrace();</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">                               }</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">                               return "redirect:upload_ok.jsp";</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">                            }else{</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">                                     return "redirect:upload_error.jsp";</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">                            }</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">         }</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">}</span></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">5. </span>建立<span style="font-family:Calibri">upload_ok.jsp</span>页面</p>&#13;
<table border="1" cellspacing="0" cellpadding="0">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top">&#13;
<p align="left"><span style="color:#bf5f3f">&lt;%@</span> <span style="color:#3f7f7f">&#13;
page</span> <span style="color:#7f007f">language</span><span style="color:black">=</span><em><span style="color:#2a00ff">"java"</span></em><span style="color:#7f007f">import</span><span style="color:black">=</span><em><span style="color:#2a00ff">"java.util.*"</span></em><span style="color:#7f007f">pageEncoding</span><span style="color:black">=</span><em><span style="color:#2a00ff">"gbk"</span></em><span style="color:#bf5f3f">%&gt;</span></p>&#13;
<p align="left"><span style="color:teal">&lt;!</span><span style="color:#3f7f7f">DOCTYPE</span><span style="color:teal">HTML</span><span style="color:gray">PUBLIC</span>&#13;
<span style="color:teal">"-//W3C//DTD HTML 4.01 Transitional//EN"&gt;</span></p>&#13;
<p align="left"><span style="color:teal">&lt;</span><span style="color:#3f7f7f">html</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">  </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">head</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">  </span><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">head</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">  </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">body</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">    </span>   <span style="color:teal">&#13;
&lt;</span><span style="color:#3f7f7f">h1</span><span style="color:teal">&gt;</span><span style="color:black">上传成功！</span><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">h1</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">  </span><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">body</span><span style="color:teal">&gt;</span></p>&#13;
<p><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">html</span><span style="color:teal">&gt;</span></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">6. </span>建立<span style="font-family:Calibri">upload_error.jsp</span>页面</p>&#13;
<table border="1" cellspacing="0" cellpadding="0">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top">&#13;
<p align="left"><span style="font-family:Calibri; font-size:14px">  </span><span style="color:#bf5f3f">&lt;%@</span><span style="color:#3f7f7f">page</span><span style="color:#7f007f">language</span><span style="color:black">=</span><em><span style="color:#2a00ff">"java"</span></em><span style="color:#7f007f">import</span><span style="color:black">=</span><em><span style="color:#2a00ff">"java.util.*"</span></em><span style="color:#7f007f">pageEncoding</span><span style="color:black">=</span><em><span style="color:#2a00ff">"gbk"</span></em><span style="color:#bf5f3f">%&gt;</span></p>&#13;
<p align="left"><span style="color:teal">&lt;!</span><span style="color:#3f7f7f">DOCTYPE</span><span style="color:teal">HTML</span><span style="color:gray">PUBLIC</span>&#13;
<span style="color:teal">"-//W3C//DTD HTML 4.01 Transitional//EN"&gt;</span></p>&#13;
<p align="left"><span style="color:teal">&lt;</span><span style="color:#3f7f7f">html</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">  </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">head</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">  </span><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">head</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">  </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">body</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">    </span>   <span style="color:teal">&#13;
&lt;</span><span style="color:#3f7f7f">h1</span><span style="color:teal">&gt;</span><span style="color:black">上传失败！</span><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">h1</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">  </span><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">body</span><span style="color:teal">&gt;</span></p>&#13;
<p><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">html</span><span style="color:teal">&gt;</span></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">7.</span>       <span style="font-size:14px">&#13;
发布项目，运行测试：<a target="_blank" href="http://localhost:8080/springmvc03/upload.jsp"><span style="font-family:Calibri; color:#0000ff">http://localhost:8080/springmvc03/upload.jsp</span></a></span></p>&#13;
<p></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">   </span>进入项目发布后的目录，发现文件上传成功：</p>&#13;
<p></p>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<h2><strong>处理ajax请求</strong></h2>&#13;
<p><span style="font-family:Calibri; font-size:14px">spring</span>使用了<span style="font-family:Calibri">jackson</span>类库，帮助我们在<span style="font-family:Calibri">java</span>对象和<span style="font-family:Calibri">json</span>、<span style="font-family:Calibri">xml</span>数据之间的互相转换。他可以将控制器返回的对象直接转换成<span style="font-family:Calibri">json</span>数据，供客户端使用。客户端也可以传送<span style="font-family:Calibri">json</span>数据到服务器进行直接转换。使用步骤如下：</p>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">1.  </span>项目中需要引入如下两个<span style="font-family:Calibri">jar</span>包：</p>&#13;
<p><span style="font-family:Calibri; font-size:14px">                  jackson-core-asl-1.7.2jar</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">                   jackson-mapper-asl-1.7.2jar</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">2.  spring</span>配置文件中修改：</p>&#13;
<table border="1" cellspacing="0" cellpadding="0">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top">&#13;
<p align="left"><a target="_blank" name="OLE_LINK39" id="OLE_LINK39"></a><a target="_blank" name="OLE_LINK38" id="OLE_LINK38"><span style="font-family:Calibri; font-size:14px">        </span></a><span style="color:black">   </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">mvc:annotation-driven</span><span style="color:teal">/&gt;</span><span style="color:black"> </span><span style="color:#3f5fbf">&lt;!--</span><span style="color:#3f5fbf">支持</span><span style="color:#3f5fbf">spring3.0</span><span style="color:#3f5fbf">新的</span><u><span style="color:#3f5fbf">mvc</span></u><span style="color:#3f5fbf">注解</span><span style="color:#3f5fbf">&#13;
 --&gt;</span></p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#3f5fbf">&lt;!--</span><span style="color:#3f5fbf">启动</span><span style="color:#3f5fbf">Spring MVC</span><span style="color:#3f5fbf">的注解功能，完成请求和注解</span><span style="color:#3f5fbf">POJO</span><span style="color:#3f5fbf">的映射</span><span style="color:#3f5fbf">&#13;
 --&gt;</span></p>&#13;
<p align="left"><span style="color:black">    </span>  <span style="color:teal">&lt;</span><span style="color:#3f7f7f">bean</span><span style="color:#7f007f">class</span><span style="color:black">=</span><em><span style="color:#2a00ff">"org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter"</span></em><span style="color:teal">&gt;</span><span style="color:black"> </span></p>&#13;
<p align="left"><span style="color:black">        </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">property</span><span style="color:#7f007f">name</span><span style="color:black">=</span><em><span style="color:#2a00ff">"cacheSeconds"</span></em><span style="color:#7f007f">value</span><span style="color:black">=</span><em><span style="color:#2a00ff">"0"</span></em><span style="color:teal">/&gt;</span><span style="color:black"> </span></p>&#13;
<p align="left"><span style="color:black">        </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">property</span><span style="color:#7f007f">name</span><span style="color:black">=</span><em><span style="color:#2a00ff">"messageConverters"</span></em><span style="color:teal">&gt;</span><span style="color:black"> </span></p>&#13;
<p align="left"><span style="color:black">            </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">list</span><span style="color:teal">&gt;</span><span style="color:black"> </span></p>&#13;
<p align="left"><span style="color:black">                </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">bean</span><span style="color:#7f007f">class</span><span style="color:black">=</span><em><span style="color:#2a00ff">"org.springframework.http.converter.json.MappingJacksonHttpMessageConverter"</span></em><span style="color:teal">&gt;&lt;/</span><span style="color:#3f7f7f">bean</span><span style="color:teal">&gt;</span><span style="color:black"> </span></p>&#13;
<p align="left"><span style="color:black">            </span><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">list</span><span style="color:teal">&gt;</span><span style="color:black"> </span></p>&#13;
<p align="left"><span style="color:black">        </span><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">property</span><span style="color:teal">&gt;</span></p>&#13;
<p><span style="color:black">    </span><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">bean</span><span style="color:teal">&gt;</span><span style="color:black"> </span></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">3.</span>       <span style="font-size:14px">&#13;
客户端代码<span style="font-family:Calibri">a.jsp</span>如下：</span></p>&#13;
<table border="1" cellspacing="0" cellpadding="0">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top">&#13;
<p align="left"><a target="_blank" name="_Hlk280091682" id="_Hlk280091682"><span style="color:#bf5f3f">&lt;%@</span></a><span style="color:#3f7f7f">page</span><span style="color:#7f007f">language</span><span style="color:black">=</span><em><span style="color:#2a00ff">"java"</span></em><span style="color:#7f007f">import</span><span style="color:black">=</span><em><span style="color:#2a00ff">"java.util.*"</span></em><span style="color:#7f007f">pageEncoding</span><span style="color:black">=</span><em><span style="color:#2a00ff">"gbk"</span></em><span style="color:#bf5f3f">%&gt;</span></p>&#13;
<p align="left"><span style="color:#bf5f3f">&lt;%</span></p>&#13;
<p align="left"><span style="color:black">String path = request.getContextPath();</span></p>&#13;
<p align="left"><span style="color:black">String basePath = request.getScheme()+</span><span style="color:#2a00ff">"://"</span><span style="color:black">+request.getServerName()+</span><span style="color:#2a00ff">":"</span><span style="color:black">+request.getServerPort()+path+</span><span style="color:#2a00ff">"/"</span><span style="color:black">;</span></p>&#13;
<p align="left"><span style="color:#bf5f3f">%&gt;</span></p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:teal">&lt;!</span><span style="color:#3f7f7f">DOCTYPE</span><span style="color:teal">HTML</span><span style="color:gray">PUBLIC</span>&#13;
<span style="color:teal">"-//W3C//DTD HTML 4.01 Transitional//EN"&gt;</span></p>&#13;
<p align="left"><span style="color:teal">&lt;</span><span style="color:#3f7f7f">html</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">  </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">head</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">base</span><span style="color:#7f007f">href</span><span style="color:black">=</span><em><span style="color:#2a00ff">"</span></em><span style="color:#bf5f3f">&lt;%=</span><span style="color:black">basePath</span><span style="color:#bf5f3f">%&gt;</span><em><span style="color:#2a00ff">"</span></em><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">    </span></p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">title</span><span style="color:teal">&gt;</span><span style="color:black">My JSP 'index.jsp' starting page</span><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">title</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">meta</span><span style="color:#7f007f">http-equiv</span><span style="color:black">=</span><em><span style="color:#2a00ff">"pragma"</span></em><span style="color:#7f007f">content</span><span style="color:black">=</span><em><span style="color:#2a00ff">"no-cache"</span></em><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">meta</span><span style="color:#7f007f">http-equiv</span><span style="color:black">=</span><em><span style="color:#2a00ff">"cache-control"</span></em><span style="color:#7f007f">content</span><span style="color:black">=</span><em><span style="color:#2a00ff">"no-cache"</span></em><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">meta</span><span style="color:#7f007f">http-equiv</span><span style="color:black">=</span><em><span style="color:#2a00ff">"expires"</span></em><span style="color:#7f007f">content</span><span style="color:black">=</span><em><span style="color:#2a00ff">"0"</span></em><span style="color:teal">&gt;</span><span style="color:black">   </span></p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">meta</span><span style="color:#7f007f">http-equiv</span><span style="color:black">=</span><em><span style="color:#2a00ff">"keywords"</span></em><span style="color:#7f007f">content</span><span style="color:black">=</span><em><span style="color:#2a00ff">"keyword1,keyword2,keyword3"</span></em><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">meta</span><span style="color:#7f007f">http-equiv</span><span style="color:black">=</span><em><span style="color:#2a00ff">"description"</span></em><span style="color:#7f007f">content</span><span style="color:black">=</span><em><span style="color:#2a00ff">"This&#13;
 is my page"</span></em><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">script</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">function</span></strong><span style="color:black"> createAjaxObj(){</span></p>&#13;
<p align="left"><span style="color:black">           </span><strong><span style="color:#7f0055">var</span></strong><span style="color:black"> req;</span></p>&#13;
<p align="left"><span style="color:black">           </span><strong><span style="color:#7f0055">if</span></strong><span style="color:black">(window.XMLHttpRequest){</span></p>&#13;
<p align="left"><span style="color:black">              </span>req = <strong><span style="color:#7f0055">new</span></strong><span style="color:black"> XMLHttpRequest();</span></p>&#13;
<p align="left"><span style="color:black">    </span>       }<strong><span style="color:#7f0055">else</span></strong><span style="color:black">{</span></p>&#13;
<p align="left"><span style="color:black">              </span>req = <strong><span style="color:#7f0055">new</span></strong><span style="color:black"> ActiveXObject(</span><span style="color:#2a00ff">"Msxml2.XMLHTTP"</span><span style="color:black">); </span><span style="color:#3f7f5f">//ie</span></p>&#13;
<p align="left"><span style="color:black">           </span>}</p>&#13;
<p align="left"><span style="color:black">           </span><strong><span style="color:#7f0055">return</span></strong><span style="color:black"> req;</span></p>&#13;
<p align="left"><span style="color:black">       </span>}</p>&#13;
<p align="left"><span style="color:black">       </span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">function</span></strong><span style="color:black"> sendAjaxReq(){</span></p>&#13;
<p align="left"><span style="color:black">           </span><strong><span style="color:#7f0055">var</span></strong><span style="color:black"> req = createAjaxObj();</span></p>&#13;
<p align="left"><span style="color:black">           </span>req.open(<span style="color:#2a00ff">"get"</span><span style="color:black">,</span><span style="color:#2a00ff">"myajax.do?method=test2&amp;uname=</span><span style="color:#2a00ff">张三</span><span style="color:#2a00ff">")</span><span style="color:black">;</span></p>&#13;
<p align="left"><span style="color:black">           </span>req.setRequestHeader(<span style="color:#2a00ff">"accept"</span><span style="color:black">,</span><span style="color:#2a00ff">"application/json"</span><span style="color:black">);</span></p>&#13;
<p align="left"><span style="color:black">       </span>    req.onreadystatechange  =<strong><span style="color:#7f0055">function</span></strong><span style="color:black">(){</span></p>&#13;
<p align="left"><span style="color:black">              </span>eval(<span style="color:#2a00ff">"var result="</span><span style="color:black">+req.responseText);</span></p>&#13;
<p align="left"><span style="color:black">              </span>document.getElementById(<span style="color:#2a00ff">"div1"</span><span style="color:black">).innerHTML=result[0].uname;</span></p>&#13;
<p align="left"><span style="color:black">           </span>}</p>&#13;
<p align="left"><span style="color:black">           </span>req.send(<strong><span style="color:#7f0055">null</span></strong><span style="color:black">);</span></p>&#13;
<p align="left"><span style="color:black">       </span>}</p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">script</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">  </span><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">head</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">  </span></p>&#13;
<p align="left"><span style="color:black">  </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">body</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">a</span><span style="color:#7f007f">href</span><span style="color:black">=</span><em><span style="color:#2a00ff">"javascript:void(0);"</span></em><span style="color:#7f007f">onclick</span><span style="color:black">=</span><span style="color:#2a00ff">"sendAjaxReq();"</span><span style="color:teal">&gt;</span><span style="color:black">测试</span><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">a</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">div</span><span style="color:#7f007f">id</span><span style="color:black">=</span><em><span style="color:#2a00ff">"div1"</span></em><span style="color:teal">&gt;&lt;/</span><span style="color:#3f7f7f">div</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">  </span><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">body</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">html</span><span style="color:teal">&gt;</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">4.</span>       <span style="font-size:14px">&#13;
服务器端代码如下：</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">         </span></p>&#13;
<table border="1" cellspacing="0" cellpadding="0">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top">&#13;
<p><a target="_blank" name="_Hlk280091814" id="_Hlk280091814"><span style="font-family:Calibri; font-size:14px">package com.sxt.web;</span></a></p>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">import java.io.UnsupportedEncodingException;</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">import java.util.ArrayList;</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">import java.util.List;</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">import org.springframework.stereotype.Controller;</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">import org.springframework.web.bind.annotation.RequestBody;</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">import org.springframework.web.bind.annotation.RequestMapping;</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">import org.springframework.web.bind.annotation.RequestMethod;</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">import org.springframework.web.bind.annotation.ResponseBody;</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">import com.sxt.po.User;</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">@Controller</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">@RequestMapping("myajax.do")</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">public class MyAjaxController {</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">         </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">         @RequestMapping(params="method=test1",method=RequestMethod.GET)</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">         public @ResponseBody List&lt;User&gt; test1(String uname) throws Exception{</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">                   String uname2 = new String(uname.getBytes("iso8859-1"),"gbk");</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">                   System.out.println(uname2);</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">                   System.out.println("MyAjaxController.test1()");</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">                   List&lt;User&gt; list = new ArrayList&lt;User&gt;();</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">                   list.add(new User("</span><span style="font-size:14px">高淇<span style="font-family:Calibri">","123"));</span></span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">                   list.add(new User("</span><span style="font-size:14px">马士兵<span style="font-family:Calibri">","456"));</span></span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">                   </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">                   return list;</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">         }</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">         </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">}</span></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">5.</span>       <span style="font-size:14px">&#13;
测试。</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">a)</span>         <span style="font-size:14px">&#13;
启动服务器。输入：<a target="_blank" href="http://localhost:8080/springmvc03/a.jsp"><span style="font-family:Calibri; color:#0000ff">http://localhost:8080/springmvc03/a.jsp</span></a></span></p>&#13;
<p></p>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="background-color:rgb(255,153,102)"><span style="font-family:Cambria">Spring</span>中的拦截器</span></p>&#13;
<h3><span style="font-size:24px">定义<span style="font-family:Calibri">spring</span>拦截器两种基本方式</span></h3>&#13;
<p><span style="font-family:Calibri; font-size:14px">1.</span>       <span style="font-size:14px">&#13;
实现接口：<span style="font-family:Calibri">org.springframework.web.servlet.HandlerInterceptor</span>。</span></p>&#13;
<p><span style="font-size:14px">接口中有如下方法需要重写：</span></p>&#13;
<p><span style="font-size:14px">注意：参数中的<span style="font-family:Calibri">Object handler</span>是下一个拦截器。</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">a)</span>         <strong><span style="color:#7f0055">public</span><span style="color:#7f0055">boolean</span></strong><span style="color:black"> preHandle<br />&#13;
(HttpServletRequest request,HttpServletResponse response, <br />&#13;
Object handler) </span><strong><span style="color:#7f0055">throws</span></strong><span style="color:black"> Exception</span></p>&#13;
<p><span style="font-size:14px">该方法在<span style="font-family:Calibri">action</span>执行前执行，可以实现对数据的预处理，比如：编码、安全控制等。</span></p>&#13;
<p><span style="font-size:14px">如果方法返回<span style="font-family:Calibri">true</span>，则继续执行<span style="font-family:Calibri">action</span>。</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">b)</span>         <strong><span style="color:#7f0055">public</span><span style="color:#7f0055">void</span></strong><span style="color:black"> postHandle<br />&#13;
(HttpServletRequest request,HttpServletResponse response, <br />&#13;
Object handler,   </span>ModelAndView modelAndView) <strong><span style="color:#7f0055">throws</span></strong><span style="color:black"> Exception</span></p>&#13;
<p><span style="font-size:14px">该方法在<span style="font-family:Calibri">action</span>执行后，生成视图前执行。在这里，我们有机会修改视图层数据。</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">c)</span>         <strong><span style="color:#7f0055">public</span><span style="color:#7f0055">void</span></strong><span style="color:black"> afterCompletion(HttpServletRequest request,</span>HttpServletResponse&#13;
 response, Object handler, Exception ex)   <strong><span style="color:#7f0055">throws</span></strong><span style="color:black"> Exception</span></p>&#13;
<p><span style="font-size:14px">最后执行，通常用于释放资源，处理异常。我们可以根据<span style="font-family:Calibri">ex</span>是否为空，来进行相关的异常处理。因为我们在平时处理异常时，都是从底层向上抛出异常，最后到了<span style="font-family:Calibri">spring</span>框架从而到了这个方法中。</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px">2.</span>       <span style="font-size:14px">&#13;
继承适配器：</span><br />&#13;
<span style="font-family:Calibri; font-size:14px">org.springframework.web.servlet.handler.HandlerInterceptorAdapter</span></p>&#13;
<p><span style="font-size:14px">这个适配器实现了<span style="font-family:Calibri">HandlerInterceptor</span>接口。提供了这个接口中所有方法的空实现。</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
<p><span style="font-size:14px">如下我们写出两个拦截器的示例代码，仅供大家参考：</span></p>&#13;
<table border="1" cellspacing="0" cellpadding="0">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top">&#13;
<p align="left"><a target="_blank" name="_Hlk280092523" id="_Hlk280092523"><strong><span style="color:#7f0055">package</span></strong></a><span style="color:black"> com.sxt.interceptor;</span></p>&#13;
<p align="left"> </p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"><u>javax.interceptor.Interceptors</u>;</span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> javax.servlet.http.HttpServletRequest;</span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> javax.servlet.http.HttpServletResponse;</span></p>&#13;
<p align="left"> </p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> org.springframework.web.servlet.HandlerInterceptor;</span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> org.springframework.web.servlet.ModelAndView;</span></p>&#13;
<p align="left"> </p>&#13;
<p align="left"> </p>&#13;
<p align="left"><strong><span style="color:#7f0055">public</span><span style="color:#7f0055">class</span></strong><span style="color:black"> MyInterceptor</span><strong><span style="color:#7f0055">implements</span></strong><span style="color:black"> HandlerInterceptor&#13;
 {</span></p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#646464">@Override</span></p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span><span style="color:#7f0055">void</span></strong><span style="color:black"> afterCompletion(HttpServletRequest request,   </span>HttpServletResponse response,&#13;
 Object handler, Exception ex)    <strong><span style="color:#7f0055">throws</span></strong><span style="color:black"> Exception {</span></p>&#13;
<p align="left"><span style="color:black">       </span>System.<em><span style="color:#0000c0">out</span></em><span style="color:black">.println(</span><span style="color:#2a00ff">"</span><span style="color:#2a00ff">最后执行！！！一般用于释放资源！！</span><span style="color:#2a00ff">"</span><span style="color:black">);</span></p>&#13;
<p align="left"><span style="color:black">       </span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#646464">@Override</span></p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span><span style="color:#7f0055">void</span></strong><span style="color:black"> postHandle(HttpServletRequest request,HttpServletResponse response, Object handler,   </span>ModelAndView&#13;
 modelAndView) <strong><span style="color:#7f0055">throws</span></strong><span style="color:black"> Exception {</span></p>&#13;
<p align="left"><span style="color:black">       </span>System.<em><span style="color:#0000c0">out</span></em><span style="color:black">.println(</span><span style="color:#2a00ff">"Action</span><span style="color:#2a00ff">执行之后，生成视图之前执行！！</span><span style="color:#2a00ff">"</span><span style="color:black">);</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#646464">@Override</span></p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span><span style="color:#7f0055">boolean</span></strong><span style="color:black"> preHandle(HttpServletRequest request,HttpServletResponse response, Object handler)</span><strong><span style="color:#7f0055">throws</span></strong><span style="color:black">&#13;
 Exception {</span></p>&#13;
<p align="left"><span style="color:black">       </span>System.<em><span style="color:#0000c0">out</span></em><span style="color:black">.println(</span><span style="color:#2a00ff">"action</span><span style="color:#2a00ff">之前执行！！！</span><span style="color:#2a00ff">"</span><span style="color:black">);</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">return</span><span style="color:#7f0055">true</span></strong><span style="color:black">; </span><span style="color:#3f7f5f">//</span><span style="color:#3f7f5f">继续执行</span><span style="color:#3f7f5f">action</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">}</span></p>&#13;
<p><span style="font-family:Calibri; font-size:14px"> </span></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top">&#13;
<p align="left"><a target="_blank" name="_Hlk280092651" id="_Hlk280092651"><strong><span style="color:#7f0055">package</span></strong></a><span style="color:black"> com.sxt.interceptor;</span></p>&#13;
<p align="left"> </p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> javax.servlet.http.HttpServletRequest;</span></p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> javax.servlet.http.HttpServletResponse;</span></p>&#13;
<p align="left"> </p>&#13;
<p align="left"><strong><span style="color:#7f0055">import</span></strong><span style="color:black"> org.springframework.web.servlet.handler.HandlerInterceptorAdapter;</span></p>&#13;
<p align="left"> </p>&#13;
<p align="left"> </p>&#13;
<p align="left"><strong><span style="color:#7f0055">public</span><span style="color:#7f0055">class</span></strong><span style="color:black"> MyInterceptor2</span><strong><span style="color:#7f0055">extends</span></strong><span style="color:black"> HandlerInterceptorAdapter&#13;
 {</span></p>&#13;
<p align="left"> </p>&#13;
<p align="left"><span style="color:black">    </span><span style="color:#646464">@Override</span></p>&#13;
<p align="left"><span style="color:black">    </span><strong><span style="color:#7f0055">public</span><span style="color:#7f0055">boolean</span></strong><span style="color:black"> preHandle(HttpServletRequest request,HttpServletResponse response, Object handler)</span><strong><span style="color:#7f0055">throws</span></strong><span style="color:black">&#13;
 Exception {</span></p>&#13;
<p align="left"><span style="color:black">       </span>System.<em><span style="color:#0000c0">out</span></em><span style="color:black">.println(</span><span style="color:#2a00ff">"MyInterceptor2.preHandle()"</span><span style="color:black">);</span></p>&#13;
<p align="left"><span style="color:black">       </span><strong><span style="color:#7f0055">return</span><span style="color:#7f0055">true</span></strong><span style="color:black">; </span><span style="color:#3f7f5f">//</span><span style="color:#3f7f5f">继续执行</span><span style="color:#3f7f5f">action</span></p>&#13;
<p align="left"><span style="color:black">    </span>}</p>&#13;
<p align="left"><span style="color:black">}</span></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p><span style="font-family:Calibri; font-size:14px"></span> </p>&#13;
<p><span style="font-family:Calibri; font-size:14px">3.</span>       <span style="font-family:Calibri; font-size:14px">&#13;
XML</span>中如何配置。如下为示例代码：</p>&#13;
<table border="1" cellspacing="0" cellpadding="0">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top">&#13;
<p align="left"><a target="_blank" name="_Hlk280092741" id="_Hlk280092741"><span style="color:black">   </span></a><span style="color:teal">&lt;</span><span style="color:#3f7f7f">mvc:interceptors</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">       </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">bean</span><span style="color:#7f007f">class</span><span style="color:black">=</span><em><span style="color:#2a00ff">"com.sxt.interceptor.MyInterceptor"</span></em><span style="color:teal">&gt;&lt;/</span><span style="color:#3f7f7f">bean</span><span style="color:teal">&gt;</span><span style="color:#3f5fbf">&lt;!--</span><span style="color:#3f5fbf">拦截所有</span><u><span style="color:#3f5fbf">springmvc</span></u><span style="color:#3f5fbf">的</span><u><span style="color:#3f5fbf">url</span></u><span style="color:#3f5fbf">！</span><span style="color:#3f5fbf">&#13;
 --&gt;</span></p>&#13;
<p align="left"><span style="color:black">       </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">mvc:interceptor</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">           </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">mvc:mapping</span><span style="color:#7f007f">path</span><span style="color:black">=</span><em><span style="color:#2a00ff">"/user.do"</span></em><span style="color:teal">/&gt;</span></p>&#13;
<p align="left"><span style="color:black">           </span><span style="color:#3f5fbf">&lt;!--&lt;mvc:mapping path="/test/*" /&gt;--&gt;</span></p>&#13;
<p align="left"><span style="color:black">           </span><span style="color:teal">&lt;</span><span style="color:#3f7f7f">bean</span><span style="color:#7f007f">class</span><span style="color:black">=</span><em><span style="color:#2a00ff">"com.sxt.interceptor.MyInterceptor2"</span></em><span style="color:teal">&gt;&lt;/</span><span style="color:#3f7f7f">bean</span><span style="color:teal">&gt;</span></p>&#13;
<p align="left"><span style="color:black">       </span><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">mvc:interceptor</span><span style="color:teal">&gt;</span></p>&#13;
<p><span style="color:black">    </span><span style="color:teal">&lt;/</span><span style="color:#3f7f7f">mvc:interceptors</span><span style="color:teal">&gt;</span></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p><span style="font-family:Calibri; font-size:14px"></span> </p>&#13;
   &#13;
