

<h1>1.jsp页面展示代码</h1>&#13;
<p></p>&#13;
<div><script src="https://code.csdn.net/snippets/594235.js" type="text/javascript"></script></div>&#13;
<br />&#13;
<p></p>&#13;
<h1>2. 代码结构图</h1>&#13;
<p><img src="http://img.blog.csdn.net/20150131144432256?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvRlMxMzYwNDcyMTc0/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="" /><br />&#13;
</p>&#13;
<p>其中common中的Prop.java是读取properties文件</p>&#13;
<h1>3.代码实现</h1>&#13;
<div>一.初版</div>&#13;
<div>&#13;
<div><script src="https://code.csdn.net/snippets/594247.js" type="text/javascript"></script></div>&#13;
<br />&#13;
</div>&#13;
<div>通过上述方法能够实现读出properties文件中的内容。但是存在两个缺陷</div>&#13;
<div>1. class.gerResourceAsStream()方法默认路径是当前类路径。对于不同的properties文件必须放在此类目录下/或者写完整路径。</div>&#13;
<div>2. inputStream没有定义编码方式，如果properties中的文字是中文的。则会出现乱码</div>&#13;
<div>3. inputStream 异常不应当抛出，而应该在此类中捕获。</div>&#13;
<div><br />&#13;
</div>&#13;
<div>二. 修正</div>&#13;
<div>系统加载器，类加载器，当前线程的上下文加载器。通过线程的上下文加载器</div>&#13;
<div><br />&#13;
</div>&#13;
<div>Thread.currentThread.getContextClassLoader()来查找这个文件</div>&#13;
<div>代码如下:</div>&#13;
<div>&#13;
<div><script src="https://code.csdn.net/snippets/594324.js" type="text/javascript"></script></div>&#13;
<br />&#13;
</div>&#13;
<div>三. 增加缓存</div>&#13;
<div>文件读取涉及IO流的操作。增加缓存机制</div>&#13;
<div>新增PropUtil.java</div>&#13;
<div><span style="white-space:pre"></span>&#13;
<div><script src="https://code.csdn.net/snippets/594459.js" type="text/javascript"></script></div>&#13;
</div>&#13;
<div><span style="white-space:pre"></span></div>&#13;
   &#13;
