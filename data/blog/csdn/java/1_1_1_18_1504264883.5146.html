
        <div class="markdown_views"><p>仅此做个笔记，防止注入时而成功时而失败的问题。</p>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> com.zhy.spdb.sso;

<span class="hljs-keyword">import</span> java.io.IOException;

<span class="hljs-keyword">import</span> javax.servlet.ServletConfig;
<span class="hljs-keyword">import</span> javax.servlet.ServletException;
<span class="hljs-keyword">import</span> javax.servlet.http.HttpServlet;
<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;
<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletResponse;

<span class="hljs-keyword">import</span> org.springframework.beans.factory.annotation.Autowired;
<span class="hljs-keyword">import</span> org.springframework.web.context.support.SpringBeanAutowiringSupport;

<span class="hljs-keyword">import</span> com.zhy.spdb.sso.service.IUserService;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LoginServlet</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">HttpServlet</span>{</span>

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">long</span> serialVersionUID = -<span class="hljs-number">5205556322881482237</span>L;

    <span class="hljs-annotation">@Autowired</span>
    <span class="hljs-keyword">private</span> IUserService userService;

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">init</span>(ServletConfig config) <span class="hljs-keyword">throws</span> ServletException {  
        <span class="hljs-comment">//在servlet中注入service</span>
        <span class="hljs-keyword">super</span>.init(config);
        SpringBeanAutowiringSupport.processInjectionBasedOnServletContext(<span class="hljs-keyword">this</span>, config.getServletContext());  
    }  

     <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doGet</span>(HttpServletRequest request, HttpServletResponse response) <span class="hljs-keyword">throws</span> ServletException, IOException {
            <span class="hljs-keyword">this</span>.doPost(request, response);
        }

     <span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">doPost</span>(HttpServletRequest request, HttpServletResponse response) <span class="hljs-keyword">throws</span> ServletException, IOException{
         String username = request.getParameter(<span class="hljs-string">"username"</span>);
         String password = request.getParameter(<span class="hljs-string">"password"</span>);
         String service = request.getParameter(<span class="hljs-string">"service"</span>);


     }

}
</code></pre>

<p><strong>核心代码</strong></p>

<pre class="prettyprint"><code class=" hljs avrasm">        SpringBeanAutowiringSupport<span class="hljs-preprocessor">.processInjectionBasedOnServletContext</span>(this, config<span class="hljs-preprocessor">.getServletContext</span>())<span class="hljs-comment">; </span></code></pre></div>&#13;
        <script type="text/javascript">&#13;
            $(function () {&#13;
                $('pre.prettyprint code').each(function () {&#13;
                    var lines = $(this).text().split('\n').length;&#13;
                    var $numbering = $('&lt;ul/&gt;').addClass('pre-numbering').hide();&#13;
                    $(this).addClass('has-numbering').parent().append($numbering);&#13;
                    for (i = 1; i &lt;= lines; i++) {&#13;
                        $numbering.append($('&lt;li/&gt;').text(i));&#13;
                    };&#13;
                    $numbering.fadeIn(1700);&#13;
                });&#13;
            });&#13;
        </script>&#13;
   &#13;
