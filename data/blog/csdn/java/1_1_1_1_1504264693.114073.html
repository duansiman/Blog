
                
<p><span style="font-size:18px">RabbitMQ入门教程 For Java【7】 - Window下的安装与配置</span></p>&#13;
<h1><span style="font-size:24px">一、下载</span></h1>&#13;
<p><span style="font-size:14px">1. <span style="font-size:14px">RabbitMQ</span>下载地址</span></p>&#13;
<p><span style="font-size:14px">        进入RabbitMQ官网 ： <a target="_blank" href="http://www.rabbitmq.com/">http://www.rabbitmq.com/</a>   点击右侧【最新版本列表】中的3.6.0版本下载最新版本【rabbitmq-server-3.6.0.exe】。由于<span style="font-size:14px">RabbitMQ是Erlang语言写的，所以，</span>在安装<span style="font-size:14px">RabbitMQ之前，必选先安装<a target="_blank" href="http://www.erlang.org/download.html">Erlang&#13;
 OTP</a>到我们的电脑上.</span></span></p>&#13;
<p style="text-align:center">      <img src="http://img.blog.csdn.net/20160119173400693?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""/></p>&#13;
<p style="text-align:center"><img src="http://img.blog.csdn.net/20160119173620662?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""/><br/>&#13;
</p>&#13;
<p style="text-align:center"><img src="http://img.blog.csdn.net/20160119173847307?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""/><br/>&#13;
</p>&#13;
<p style="text-align:center"><span style="font-size:14px"><br/>&#13;
</span></p>&#13;
<p><span style="font-size:14px">2、Erlang OTP下载安装</span></p>&#13;
<p><span style="font-size:14px">        <span style="font-size:14px">Erlang </span>OTP包含了一组库和实现方式,可以构建大规模、容错和分布式的应用程序,包含了许多强大的工具,能够实现H248，SNMP等多种协议. RabbitMQ是基于<span style="font-size:14px">Erlang </span><span style="font-size:14px">OTP开发出来的，所以需要下安装OTP环境。我的电脑是Windows7&#13;
 64位系统，所以选择Windows 64-bit Binary File. 下载完成后，双击下载的应用【otp_win64_18.2.1.exe】一路下一步安装。安装完成后，需要在系统环境变量中配置一个【ERLANG_HOME】地址指向刚刚安装Erlang的目录：【C:\Program Files\erl7.2.1】，并将这个路径加入系统环境变量Path中【;%ERLANG_HOME%\bin】，“；”冒号是间隔，一定要加！</span><br/>&#13;
</span></p>&#13;
<p style="text-align:center"><span style="font-size:14px"><span style="font-size:14px"><img src="http://img.blog.csdn.net/20160119175657045?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""/><br/>&#13;
</span></span></p>&#13;
<p style="text-align:center"><span style="font-size:14px"><span style="font-size:14px"><img src="http://img.blog.csdn.net/20160119175900195?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""/><br/>&#13;
</span></span></p>&#13;
<p style="text-align:center"><span style="font-size:14px"><span style="font-size:14px"><img src="http://img.blog.csdn.net/20160119175911437?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""/><br/>&#13;
</span></span></p>&#13;
<p style="text-align:center"><span style="font-size:14px"><span style="font-size:14px"><img src="http://img.blog.csdn.net/20160119175921117?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""/><br/>&#13;
</span></span></p>&#13;
<p style="text-align:center"><span style="font-size:14px"><span style="font-size:14px"><img src="http://img.blog.csdn.net/20160119180921052?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""/><br/>&#13;
</span></span></p>&#13;
<h1><span style="font-size:24px">二、RabbitMQ安装</span></h1>&#13;
<p><span style="font-size:14px">        </span></p>&#13;
<p><span style="font-size:14px"><span style="font-size:14px">        </span>双击下载的应用程序，选择一个安装目录【C:\Program Files\RabbitMQ Server】（保持默认就可以了），安装完成后，需要配置一下环境变量【RABBITMQ_BASE】到【C:\Program Files\RabbitMQ Server\rabbitmq_server-3.6.0】，并将路径加入到Path这个系统环境变量中【;%RABBITMQ_BASE%\sbin】，然后 进入安装目录【C:\Program&#13;
 Files\RabbitMQ Server\rabbitmq_server-3.6.0\sbin】下，双击【rabbitmq-server.bat】启动. </span></p>&#13;
<p><span style="font-size:14px">        </span><span style="font-size:14px">如果安装成功后双击【rabbitmq-server.bat】启动不了，提示【node with name rabbit already running on ***】的错误，就试着删除【</span><span style="color:rgb(51,51,51); font-family:Arial; line-height:26px"><span style="font-size:14px">C:\Users\Administrator\AppData\Roaming\rabbitmq】这个目录，如果还是没有效果，就点击开始菜单，在所有程序》RabbitMQ&#13;
 Service 》</span><span style="color:rgb(51,51,51); font-family:Arial; line-height:26px"><span style="font-size:14px">RabbitMQ Service stop，先关闭已经启动的<span style="color:rgb(51,51,51); font-family:Arial; line-height:26px">RabbitMQ，然后再启动。</span></span></span></span></p>&#13;
<p style="text-align:center"><img src="http://img.blog.csdn.net/20160119174328650?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""/><br/>&#13;
</p>&#13;
<p style="text-align:center"><img src="http://img.blog.csdn.net/20160119174353884?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""/><br/>&#13;
</p>&#13;
<p style="text-align:center"><img src="http://img.blog.csdn.net/20160119174643526?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""/><br/>&#13;
</p>&#13;
<p style="text-align:center"><img src="http://img.blog.csdn.net/20160119174654990?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""/></p>&#13;
<p style="text-align:center"><img src="http://img.blog.csdn.net/20160119181005207?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""/><br/>&#13;
</p>&#13;
<p style="text-align:center"><img src="http://img.blog.csdn.net/20160119180121416?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""/></p>&#13;
<p style="text-align:center"><img src="http://img.blog.csdn.net/20160119182439619?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""/><br/>&#13;
</p>&#13;
<p style="text-align:center"><br/>&#13;
</p>&#13;
<p style="text-align:center"><br/>&#13;
</p>&#13;
<p style="text-align:center"><img src="http://img.blog.csdn.net/20160119182537635?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""/><br/>&#13;
</p>&#13;
<p style="text-align:center"><img src="http://img.blog.csdn.net/20160119182450197?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""/><br/>&#13;
</p>&#13;
<p><br/>&#13;
</p>&#13;
<h1><span style="font-size:24px"><br/>&#13;
</span><span style="font-size:24px">三、配置</span></h1>&#13;
<p><span style="font-size:14px">       安装完成后，需要对RabbitMQ进行配置，在RabbitMQ中，有几个概念需要了解：</span></p>&#13;
<p><span style="font-size:14px">      virtual hosts : 虚拟主机。类似于数据库中的库的概念。一个RabbitMQ服务器可以有多个虚拟主机，默认虚拟主角是“/” 根目录。</span></p>&#13;
<p><span style="font-size:14px">      user：访问虚拟主机的用户.</span></p>&#13;
<p><span style="font-size:14px">      roles: 角色。有none、mamagement、policymaker、monitoring、administrator等权限。</span></p>&#13;
<p><span style="font-size:14px">      permissions: 权限。分conf、write、read三种权限。类似Linux的执行、写、读权限。</span></p>&#13;
<p><span style="font-size:14px">      </span></p>&#13;
<p><span style="font-size:14px">      1. 添加用户【rabbitmqctl add_user username password】    </span></p>&#13;
<p><span style="font-size:14px"><br/>&#13;
</span></p>&#13;
<p><span style="font-size:14px">      2. 分配角色【rabbitmqctl set_user_tags username administrator】</span></p>&#13;
<p><span style="font-size:14px"> </span></p>&#13;
<p><span style="font-size:14px">      3. 新增虚拟主机【rabbitmqctl add_vhost  vhost_name】</span></p>&#13;
<p><span style="font-size:14px"><br/>&#13;
</span></p>&#13;
<p><span style="font-size:14px">      4. 将新虚拟主机授权给新用户【rabbitmqctl set_permissions -p vhost_name username '.*' '.*' '.*'】</span></p>&#13;
<p><br/>&#13;
</p>&#13;
<h1><span style="font-size:24px"/></h1>&#13;
<h1><span style="font-size:24px">四、角色说明：</span></h1>&#13;
<p><span style="font-size:14px"><strong>1. none  最小权限角色</strong><br/>&#13;
不能访问管理插件。权限最小。<br/>&#13;
<br/>&#13;
<br/>&#13;
<strong>2. management 管理员角</strong><br/>&#13;
用户可以通过AMQP协议做的任何事，还包括：<br/>&#13;
列出自己可以通过AMQP登入的virtual hosts  <br/>&#13;
查看自己的virtual hosts中的queues, exchanges 和 bindings<br/>&#13;
查看和关闭自己的channels 和 connections<br/>&#13;
查看有关自己的virtual hosts的“全局”的统计信息，包含其他用户在这些virtual hosts中的活动。<br/>&#13;
<br/>&#13;
<br/>&#13;
<strong>3. policymaker   决策者</strong><br/>&#13;
management可以做的任何事，还包括：<br/>&#13;
查看、创建和删除自己的virtual hosts所属的policies和parameters<br/>&#13;
<br/>&#13;
<br/>&#13;
<strong>4. monitoring  监控</strong><br/>&#13;
management可以做的任何事，还包括：<br/>&#13;
列出所有virtual hosts，包括他们不能登录的virtual hosts<br/>&#13;
查看其他用户的connections和channels<br/>&#13;
查看节点级别的数据如clustering和memory使用情况<br/>&#13;
查看真正的关于所有virtual hosts的全局的统计信息<br/>&#13;
<br/>&#13;
<br/>&#13;
<strong>5.administrator  超级管理员</strong> <br/>&#13;
policymaker和monitoring可以做的任何事，还包括:<br/>&#13;
创建和删除virtual hosts<br/>&#13;
查看、创建和删除users<br/>&#13;
查看创建和删除permissions<br/>&#13;
关闭其他用户的connections</span><br/>&#13;
</p>&#13;
<p><br/>&#13;
</p>&#13;
<h1><span style="font-size:24px">五、权限说明</span></h1>&#13;
<p><span style="font-size:14px">权限管理的指令格式是：【set_permissions [-p &lt;vhostpath&gt;] &lt;user&gt; &lt;conf&gt; &lt;write&gt; &lt;read&gt;】</span></p>&#13;
<p><span style="font-family:Arial; line-height:26px"><span style="font-size:14px">&lt;conf&gt; &lt;write&gt; &lt;read&gt;的位置分别用正则表达式来匹配特定的资源</span></span></p>&#13;
<p><span style="font-family:Arial; line-height:26px"><span style="font-size:14px">例如【'^(amq\.gen.*|amq\.default)$'】可以匹配RabbitMQ服务器<span style="font-family:Arial; line-height:26px">默认</span>生成的交换器</span></span></p>&#13;
<p><span style="font-family:Arial; line-height:26px"><span style="font-size:14px">【'^$'】不匹配任何资源</span></span><br/>&#13;
</p>&#13;
<p><br/>&#13;
</p>&#13;
<h1><span style="font-size:24px">六，用户、角色、权限、插件配置</span></h1>&#13;
<p><span style="font-size:14px"><strong>添加用户</strong><br/>&#13;
rabbitmqctl add_user [username] [password]</span></p>&#13;
<p><span style="font-size:14px"><br/>&#13;
<strong>添加虚拟主机</strong><br/>&#13;
rabbitmqctl add_vhost [vhost_name]</span></p>&#13;
<p><span style="font-size:14px"><br/>&#13;
<strong>修改虚拟机权限</strong><br/>&#13;
rabbitmqctl set_permissions -p [vhost_name] [username] '.*' '.*' '.*'</span></p>&#13;
<p><span style="font-size:14px"><br/>&#13;
<strong>设置角色</strong><br/>&#13;
rabbitmqctl set_user_tags [username] administrator</span></p>&#13;
<p><span style="font-size:14px"><br/>&#13;
<strong>启用web管理界面插件</strong><br/>&#13;
rabbitmq-plugins enable rabbitmq_management</span><br/>&#13;
</p>&#13;
<br/>&#13;
<link rel="stylesheet" href="http://static.blog.csdn.net/public/res-min/markdown_views.css?v=1.0"/>&#13;
            