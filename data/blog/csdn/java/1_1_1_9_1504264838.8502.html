

<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px">&#13;
<br />&#13;
</p>&#13;
<div class="TITLE">观察者模式</div>&#13;
<div class="currency_area">&#13;
<div class="theTitle">&#13;
<h5><img src="http://blog.csdn.net/qq_27073205/article/details/45342959" alt="" /> <strong>概述</strong></h5>&#13;
<div><strong><span style="color:rgb(0,102,0); font-family:宋体; font-size:14px; line-height:26px">    在一对多依赖的对象关系中, 如果这个'一'对象状态发生了变化,那么它所有依赖的'多'对象都应该被通知,然后做相应的变化,这就是观察者模式. 就如同'多'对象一直在观察'一'对象的状态变化一样.</span><br />&#13;
</strong></div>&#13;
</div>&#13;
<div class="theContent">&#13;
<pre>    定义对象间的一种一对多的依赖关系,当一个对象的状态发生改变时,所有依赖于它的对象都得到通知并被自动更新。
</pre>&#13;
</div>&#13;
</div>&#13;
<div class="currency_area">&#13;
<div class="theTitle">&#13;
<h5><img src="http://blog.csdn.net/qq_27073205/article/details/45342959" alt="" /> <strong>适用性</strong></h5>&#13;
</div>&#13;
<div class="theContent">&#13;
<pre>    1.当一个抽象模型有两个方面,其中一个方面依赖于另一方面。
      将这二者封装在独立的对象中以使它们可以各自独立地改变和复用。

    2.当对一个对象的改变需要同时改变其它对象,而不知道具体有多少对象有待改变。

    3.当一个对象必须通知其它对象，而它又不能假定其它对象是谁。
			</pre>&#13;
</div>&#13;
</div>&#13;
<div class="currency_area">&#13;
<div class="theTitle">&#13;
<h5><img src="http://blog.csdn.net/qq_27073205/article/details/45342959" alt="" /> <strong>参与者</strong></h5>&#13;
</div>&#13;
<div class="theContent">&#13;
<pre>    1.Subject（目标）
      目标知道它的观察者。可以有任意多个观察者观察同一个目标。
      提供注册和删除观察者对象的接口。

    2.Observer（观察者）
      为那些在目标发生改变时需获得通知的对象定义一个更新接口。

    3.ConcreteSubject（具体目标）
      将有关状态存入各ConcreteObserver对象。
      当它的状态发生改变时,向它的各个观察者发出通知。

    4.ConcreteObserver（具体观察者）
      维护一个指向ConcreteSubject对象的引用。
      存储有关状态，这些状态应与目标的状态保持一致。
      实现Observer的更新接口以使自身状态与目标的状态保持一致
</pre>&#13;
</div>&#13;
</div>&#13;
<p></p>&#13;
<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px">&#13;
<strong><br />&#13;
</strong></p>&#13;
<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px">&#13;
<strong>观察者模式是对象的行为模式，又叫发布-订阅(Publish/Subscribe)模式、模型-视图(Model/View)模式、源-监听器(Source/Listener)模式或从属者(Dependents)模式。</strong></p>&#13;
<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px">&#13;
<strong>　　观察者模式定义了一种一对多的依赖关系，让多个观察者对象同时监听某一个主题对象。这个主题对象在状态上发生变化时，会通知所有观察者对象，使它们能够自动更新自己。</strong></p>&#13;
<hr style="font-family:'ms shell dlg'; font-size:14px; line-height:28px" />&#13;
<h1 style="margin:0px; height:auto; padding-right:0px; font-family:verdana,Arial,Helvetica,sans-serif; font-size:16px; border-bottom-style:none; line-height:28px">&#13;
<strong><span style="font-size:18pt">观察者模式的结构</span><br style="clear:both" />&#13;
</strong></h1>&#13;
<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px">&#13;
<strong>　　</strong>一个软件系统里面包含了各种对象，就像一片欣欣向荣的森林充满了各种生物一样。在一片森林中，各种生物彼此依赖和约束，形成一个个生物链。一种生物的状态变化会造成其他一些生物的相应行动，每一个生物都处于别的生物的互动之中。</p>&#13;
<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px">&#13;
　　同样，一个软件系统常常要求在某一个对象的状态发生变化的时候，某些其他的对象做出相应的改变。做到这一点的设计方案有很多，但是为了使系统能够易于复用，应该选择低耦合度的设计方案。减少对象之间的耦合有利于系统的复用，但是同时设计师需要使这些低耦合度的对象之间能够维持行动的协调一致，保证高度的协作。观察者模式是满足这一要求的各种设计方案中最重要的一种。</p>&#13;
<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px">&#13;
　　下面以一个简单的示意性实现为例，讨论观察者模式的结构。</p>&#13;
<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px; text-align:center">&#13;
<img src="http://blog.csdn.net/qq_27073205/article/details/45342959" alt="" style="border:0px" /></p>&#13;
<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px">&#13;
　　观察者模式所涉及的角色有：</p>&#13;
<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px">&#13;
　　●　　<strong>抽象主题(Subject)角色：</strong>抽象主题角色把所有对观察者对象的引用保存在一个聚集（比如ArrayList对象）里，每个主题都可以有任何数量的观察者。抽象主题提供一个接口，可以增加和删除观察者对象，抽象主题角色又叫做抽象被观察者(Observable)角色。</p>&#13;
<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px">&#13;
　　●　　<strong>具体主题(ConcreteSubject)角色：</strong>将有关状态存入具体观察者对象；在具体主题的内部状态改变时，给所有登记过的观察者发出通知。具体主题角色又叫做具体被观察者(Concrete Observable)角色。</p>&#13;
<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px">&#13;
　　●　　<strong>抽象观察者(Observer)角色：</strong>为所有的具体观察者定义一个接口，在得到主题的通知时更新自己，这个接口叫做更新接口。</p>&#13;
<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px">&#13;
　　●　　<strong>具体观察者(ConcreteObserver)角色：</strong>存储与主题的状态自恰的状态。具体观察者角色实现抽象观察者角色所要求的更新接口，以便使本身的状态与主题的状态 像协调。如果需要，具体观察者角色可以保持一个指向具体主题对象的引用。</p>&#13;
<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px">&#13;
<br />&#13;
</p>&#13;
<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px">&#13;
</p>&#13;
<div class="theContent"><strong>Subject</strong> </div>&#13;
<div class="theContent2">&#13;
<pre>public abstract class Citizen {
    
    List pols;
    
    String help = "normal";
    
    public void setHelp(String help) {
        this.help = help;
    }
    
    public String getHelp() {
        return this.help;
    }
    
    abstract void sendMessage(String help);

    public void setPolicemen() {
        this.pols = new ArrayList();
    }
    
    public void register(Policeman pol) {
        this.pols.add(pol);
    }

    public void unRegister(Policeman pol) {
        this.pols.remove(pol);
    }
}
</pre>&#13;
</div>&#13;
<div class="theContent"><strong>Observer</strong> </div>&#13;
<div class="theContent2">&#13;
<pre>public interface Policeman {

    void action(Citizen ci);
}
</pre>&#13;
</div>&#13;
<div class="theContent"><strong>ConcreteSubject</strong> </div>&#13;
<div class="theContent2">&#13;
<pre>public class HuangPuCitizen extends Citizen {

    public HuangPuCitizen(Policeman pol) {
        setPolicemen();
        register(pol);
    }
    
    public void sendMessage(String help) {
        setHelp(help);
        for(int i = 0; i &lt; pols.size(); i++) {
            Policeman pol = pols.get(i);
            //通知警察行动
            pol.action(this);
        }
    }
}
</pre>&#13;
</div>&#13;
<div class="theContent"></div>&#13;
<div class="theContent2">&#13;
<pre>public class TianHeCitizen extends Citizen {

    public TianHeCitizen(Policeman pol) {
        setPolicemen();
        register(pol);
    }
    
    public void sendMessage(String help) {
        setHelp(help);
        for (int i = 0; i &lt; pols.size(); i++) {
            Policeman pol = pols.get(i);
            //通知警察行动
            pol.action(this);
        }
    }
}
</pre>&#13;
</div>&#13;
<div class="theContent"><strong>ConcreteObserver</strong> </div>&#13;
<div class="theContent2">&#13;
<pre>public class HuangPuPoliceman implements Policeman {

    public void action(Citizen ci) {
        String help = ci.getHelp();
        if (help.equals("normal")) {
            System.out.println("一切正常, 不用出动");
        }
        if (help.equals("unnormal")) {
            System.out.println("有犯罪行为, 城管出动!");
        }
    }
}
</pre>&#13;
</div>&#13;
<div class="theContent"></div>&#13;
<div class="theContent2">&#13;
<pre>public class TianHePoliceman implements Policeman {

    public void action(Citizen ci) {
        String help = ci.getHelp();
        if (help.equals("normal")) {
            System.out.println("一切正常, 不用出动");
        }
        if (help.equals("unnormal")) {
            System.out.println("有犯罪行为, 警察出动!");
        }
    }
}
</pre>&#13;
</div>&#13;
<div class="theContent"><strong>Test</strong> </div>&#13;
<div class="theContent2">&#13;
<pre>public class Test{

    public static void main(String[] args) {
        Policeman thPol = new TianHePoliceman();
        Policeman hpPol = new HuangPuPoliceman();
        
        Citizen citizen = new HuangPuCitizen(hpPol);
        citizen.sendMessage("unnormal");
        citizen.sendMessage("normal");
        
        System.out.println("===========");
        
        citizen = new TianHeCitizen(thPol);
        citizen.sendMessage("normal");
        citizen.sendMessage("unnormal");
    }
}
</pre>&#13;
</div>&#13;
<div class="theContent"><strong>result</strong> </div>&#13;
<div class="theContent2">&#13;
<pre>有犯罪行为, 城管出动!
一切正常, 不用出动
===========
一切正常, 不用出动
有犯罪行为, 警察出动!
</pre>&#13;
</div>&#13;
<br />&#13;
<p></p>&#13;
<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px">&#13;
<span style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)">j</span><span style="background-color:rgb(238,238,238); color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; line-height:22.390625px">ava深入到一定程度，就不可避免的碰到设计模式(design&#13;
 pattern)这一概念，了解设计模式，将使自己对java中的接口或抽象类应用有更深的理解。设计模式在java的中型系统中应用广泛，遵循一定的编程模式，才能使自己的代码便于理解，易于交流，Observer(观察者)模式是比较常用的一个模式，尤其在界面设计中应用广泛，而本教程所关注的是Java在电子商务系统中应用，因此想从电子商务实例中分析Observer的应用。</span></p>&#13;
<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px">&#13;
<br style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)" />&#13;
<span style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; line-height:22.390625px; background-color:rgb(238,238,238)">虽然网上商店形式多样，每个站点有自己的特色，但也有其一般的共性，单就"商品的变化，以便及时通知订户"这一点，是很多网上商店共有的模式，这一模式类似Observer patern。</span><br style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)" />&#13;
<br style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)" />&#13;
<span style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)">具体的说，如果网上商店中商品在名称 价格等方面有变化，如果系统能自动通知会员，将是网上商店区别传统商店的一大特色。这就需要在商品product中加入Observer这样角色，以便product细节发生变化时，Observer能自动观察到这种变化，并能进行及时的update或notify动作。</span></p>&#13;
<div style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238); text-align:center">&#13;
<img alt="Java观察者模式" src="http://www.weixueyuan.net/uploads/allimg/130302/8-13030220253J16.png" style="border:none; max-width:728px!important; width:377px; height:194px" /></div>&#13;
<p></p>&#13;
<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px">&#13;
<br />&#13;
</p>&#13;
<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px">&#13;
<br />&#13;
</p>&#13;
<br style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)" />&#13;
<span style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)">Java的API还为为我们提供现成的Observer接口Java.util.Observer。我们只要直接使用它就可以。</span><br style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)" />&#13;
<br style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)" />&#13;
<span style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)">我们必须extends Java.util.Observer才能真正使用它：</span>&#13;
<ul style="margin-top:0px; margin-bottom:0px; list-style-position:initial; margin-left:0px; padding-left:20px; color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)">&#13;
<li>提供Add/Delete observer的方法；</li><li>提供通知(notisfy) 所有observer的方法。</li></ul>&#13;
<div class="code" style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)">&#13;
//产品类 可供Jsp直接使用UseBean调用 该类主要执行产品数据库插入 更新<br />&#13;
public class product extends Observable{<br />&#13;
　　private String name;<br />&#13;
　　private float price;<br />&#13;
　　public String getName(){ return name;}<br />&#13;
　　public void setName(){<br />&#13;
　　        this.name=name;<br />&#13;
　　        //设置变化点<br />&#13;
　　        setChanged();<br />&#13;
　　        notifyObservers(name);<br />&#13;
　　}　　　<br />&#13;
　　public float getPrice(){ return price;}<br />&#13;
　　public void setPrice(){<br />&#13;
　　        this.price=price;<br />&#13;
　　        //设置变化点<br />&#13;
　　        setChanged();<br />&#13;
　　        notifyObservers(new Float(price));<br />&#13;
　　}<br />&#13;
　　//以下可以是数据库更新 插入命令.<br />&#13;
　　public void saveToDb(){<br />&#13;
　　        .....................<br />&#13;
        }<br />&#13;
}</div>&#13;
<span style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)">我们注意到，在product类中 的setXXX方法中，我们设置了 notify(通知)方法，当Jsp表单调用setXXX，实际上就触发了notisfyObservers方法，这将通知相应观察者应该采取行动了。</span><br style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)" />&#13;
<br style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)" />&#13;
<span style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)">下面看看这些观察者的代码，他们究竟采取了什么行动：</span>&#13;
<div class="code" style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)">&#13;
//观察者NameObserver主要用来对产品名称(name)进行观察的<br />&#13;
public class NameObserver implements Observer{<br />&#13;
　　private String name=null;<br />&#13;
　　public void update(Observable obj,Object arg){<br />&#13;
　　　　if (arg instanceof String){<br />&#13;
　　　　 name=(String)arg;<br />&#13;
　　　　 //产品名称改变值在name中<br />&#13;
　　　　 System.out.println("NameObserver :name changet to "+name);<br />&#13;
　　　　}<br />&#13;
　　}<br />&#13;
}<br />&#13;
<br />&#13;
//观察者PriceObserver主要用来对产品价格(price)进行观察的<br />&#13;
public class PriceObserver implements Observer{<br />&#13;
　　private float price=0;<br />&#13;
　　public void update(Observable obj,Object arg){<br />&#13;
　　　　if (arg instanceof Float){<br />&#13;
　　　　 price=((Float)arg).floatValue();<br />&#13;
　　　　 System.out.println("PriceObserver :price changet to "+price);<br />&#13;
　　　　}<br />&#13;
　　}<br />&#13;
}</div>&#13;
<span style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)">Jsp中我们可以来正式执行这段观察者程序：</span>&#13;
<div class="code" style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)">&#13;
&lt;jsp:useBean id="product" scope="session" class="Product" /&gt;<br />&#13;
&lt;jsp:setProperty name="product" property="*" /&gt;<br />&#13;
<br />&#13;
&lt;jsp:useBean id="nameobs" scope="session" class="NameObserver" /&gt;<br />&#13;
&lt;jsp:setProperty name="product" property="*" /&gt;<br />&#13;
<br />&#13;
&lt;jsp:useBean id="priceobs" scope="session" class="PriceObserver" /&gt;<br />&#13;
&lt;jsp:setProperty name="product" property="*" /&gt;<br />&#13;
<br />&#13;
&lt;%<br />&#13;
if (request.getParameter("save")!=null)<br />&#13;
{<br />&#13;
　　product.saveToDb();<br />&#13;
　　out.println("产品数据变动 保存! 并已经自动通知客户");<br />&#13;
}else{<br />&#13;
　　//加入观察者<br />&#13;
　　product.addObserver(nameobs);<br />&#13;
　　product.addObserver(priceobs);<br />&#13;
%&gt;<br />&#13;
　　//request.getRequestURI()是产生本jsp的程序名,就是自己调用自己<br />&#13;
　　&lt;form action="&lt;%=request.getRequestURI()%&gt;" method=post&gt;<br />&#13;
　　&lt;input type=hidden name="save" value="1"&gt;<br />&#13;
　　产品名称:&lt;input type=text name="name" &gt;<br />&#13;
　　产品价格:&lt;input type=text name="price"&gt;<br />&#13;
　　&lt;input type=submit&gt;<br />&#13;
　　&lt;/form&gt;<br />&#13;
&lt;%<br />&#13;
}<br />&#13;
%&gt;</div>&#13;
<span style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)">执行改Jsp程序，会出现一个表单录入界面，需要输入产品名称 产品价格，点按Submit后，还是执行该jsp的if (request.getParameter("save")!=null)之间的代码。</span><br style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)" />&#13;
<br style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)" />&#13;
<span style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)">由于这里使用了数据javabeans的自动赋值概念，实际程序自动执行了setName setPrice语句。你会在服务器控制台中发现下面信息：</span><br style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)" />&#13;
<span style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)">    NameObserver :name changet to ?????(Jsp表单中输入的产品名称)</span><br style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)" />&#13;
<span style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)">    PriceObserver :price changet to ???(Jsp表单中输入的产品价格);</span><br style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)" />&#13;
<br style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)" />&#13;
<span style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)">这说明观察者已经在行动了。</span><br style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)" />&#13;
<br style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)" />&#13;
<span style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)">同时你会在执行jsp的浏览器端得到信息：</span><br style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)" />&#13;
<span style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)">    产品数据变动 保存! 并已经自动通知客户</span><br style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)" />&#13;
<br style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)" />&#13;
<span style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)">上文由于使用jsp概念，隐含很多自动动作，现将调用观察者的Java代码写如下：</span>&#13;
<div class="code" style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)">&#13;
public class Test {<br />&#13;
　　public static void main(String args[]){<br />&#13;
　　　　Product product=new Product();<br />&#13;
　　　　NameObserver nameobs=new NameObserver();<br />&#13;
　　　　PriceObserver priceobs=new PriceObserver();<br />&#13;
<br />&#13;
　　　　//加入观察者<br />&#13;
　　　　product.addObserver(nameobs);<br />&#13;
　　　　product.addObserver(priceobs);<br />&#13;
<br />&#13;
　　　　product.setName("橘子红了");<br />&#13;
　　　　product.setPrice(9.22f);<br />&#13;
　　}<br />&#13;
}</div>&#13;
<span style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)">你会在发现下面信息：</span><br style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)" />&#13;
<span style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)">    NameObserver :name changet to 橘子红了</span><br style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)" />&#13;
<span style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)">    PriceObserver :price changet to 9.22</span><br style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)" />&#13;
<br style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)" />&#13;
<span style="color:rgb(51,51,51); font-family:'Microsoft Yahei',Arial,Helvetica,sans-serif; font-size:14px; line-height:22.390625px; background-color:rgb(238,238,238)">这说明观察者在行动了。</span><br />&#13;
<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px">&#13;
<br />&#13;
</p>&#13;
   &#13;
