

<p><strong>备忘录模式（Token）</strong></p>&#13;
<p><strong>一、定义</strong></p>&#13;
<p><span style="color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2px">在不破坏封闭的前提下，捕获一个对象的内部状态，并在该对象之外保存这个状态。这样以后就可将该对象恢复到原先保存的状态。</span><br />&#13;
</p>&#13;
<p><strong>二、适用场景</strong></p>&#13;
<p><span style="color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2px">适合于功能比较复杂，但需要维护或记录属性历史的功能。</span><br />&#13;
</p>&#13;
<p><strong>参与者：</strong></p>&#13;
<p></p>&#13;
<div class="para" style="margin:0px; padding:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2px">&#13;
<strong>      Originator(发起人)：</strong>负责创建一个备忘录Memento，用以记录当前时刻自身的内部状态，并可使用备忘录恢复内部状态。Originator可以根据需要决定Memento存储自己的哪些内部状态。</div>&#13;
<div class="para" style="margin:0px; padding:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2px">&#13;
<strong>　　Memento(备忘录)：</strong>负责存储Originator对象的内部状态，并可以防止Originator以外的其他对象访问备忘录。备忘录有两个接口：Caretaker只能看到备忘录的窄接口，他只能将备忘录传递给其他对象。Originator却可看到备忘录的宽接口，允许它访问返回到先前状态所需要的所有数据。</div>&#13;
<div class="para" style="margin:0px; padding:0px; color:rgb(51,51,51); font-family:Verdana,Arial,Helvetica,sans-serif; font-size:14px; line-height:25.2px">&#13;
<strong>　　Caretaker(管理者):</strong>负责备忘录Memento，不能对Memento的内容进行访问或者操作。</div>&#13;
<br />&#13;
<p></p>&#13;
<p><strong>适用性：</strong></p>&#13;
<p>1）必须保存一个对象在某一时刻的（部分）状态，这样以后需要时它才能恢复到先前的状态。</p>&#13;
<p>2）如果一个用接口来让其它对象直接得到这些状态，将会暴露对象的实现细节并破坏对象的封装性。</p>&#13;
<p><br />&#13;
</p>&#13;
<p><strong>效果：</strong></p>&#13;
<p>1）保持封装边界</p>&#13;
<p>2）简化原发器</p>&#13;
<p>3）使用备忘录可能代价很高</p>&#13;
<p>4）定义窄接口和宽接口</p>&#13;
<p>5）维护备忘录的潜在代价</p>&#13;
<p><strong>三、UML</strong></p>&#13;
<p><img src="http://images2015.cnblogs.com/blog/717907/201608/717907-20160821130139933-608747334.png" alt="" /><br />&#13;
</p>&#13;
<p>四、代码</p>&#13;
<p></p>&#13;
<div style="word-wrap:break-word; color:rgb(102,102,102); font-family:&#x5B8B;&#x4F53;,Arial; font-size:16px; line-height:26px">&#13;
<div id="code184" class="codeText" style="word-wrap:break-word; border:1px solid rgb(221,221,221); width:1041.45px; overflow:auto; margin:0px 0px 1.1em; padding:0px; word-break:break-all; letter-spacing:0.1px; font-size:12px; line-height:normal; font-family:Consolas,monospace">&#13;
<ol class="dp-css none_number" start="1" style="word-wrap:break-word; margin:0px 1px 0px 0px; padding:5px 0pt; list-style:none outside none; color:rgb(92,92,92); line-height:1.3">&#13;
<li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<span style="word-wrap:break-word; color:rgb(0,0,0)"><span style="word-wrap:break-word; color:rgb(255,153,0)">/**<br style="word-wrap:break-word" />&#13;
</span></span></li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
 * 游戏自身（备忘录模式中的发起人，备份的是游戏的状态）<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
 */<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">class</span> Game <span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(255,153,0)">/**<br style="word-wrap:break-word" />&#13;
</span></li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     * 英雄状态属性<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     */<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">private</span> HeroState hState<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(255,153,0)">/**<br style="word-wrap:break-word" />&#13;
</span></li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     * 场景状态属性<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     */<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">private</span> SceneState sState<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> HeroState gethState<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,255)">return</span> hState<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">void</span> sethState<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span>HeroState hState<span style="word-wrap:break-word; color:rgb(0,0,204)">)</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,255)">this</span><span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>hState <span style="word-wrap:break-word; color:rgb(0,0,204)">=</span> hState<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> SceneState getsState<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,255)">return</span> sState<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">void</span> setsState<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span>SceneState sState<span style="word-wrap:break-word; color:rgb(0,0,204)">)</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,255)">this</span><span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>sState <span style="word-wrap:break-word; color:rgb(0,0,204)">=</span> sState<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(255,153,0)">/**<br style="word-wrap:break-word" />&#13;
</span></li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     * 备份游戏<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     */<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> GameMemento createMemento<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,255)">return</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">new</span> GameMemento<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span>hState<span style="word-wrap:break-word; color:rgb(0,0,204)">,</span>sState<span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(255,153,0)">/**<br style="word-wrap:break-word" />&#13;
</span></li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     * 玩游戏<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     * @throws InterruptedException <br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     */<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">void</span> <span style="word-wrap:break-word; color:rgb(255,0,0)">play</span><span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        hState<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>setHP<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span>0<span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        hState<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>setMP<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span>0<span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        sState<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>setCoin<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span>0<span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        sState<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>setWood<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span>0<span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(255,153,0)">/**<br style="word-wrap:break-word" />&#13;
</span></li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     * 游戏还原<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     */<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">void</span> restore<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span>GameMemento memento<span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,255)">this</span><span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>hState <span style="word-wrap:break-word; color:rgb(0,0,204)">=</span> memento<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>gethState<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,255)">this</span><span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>sState <span style="word-wrap:break-word; color:rgb(0,0,204)">=</span> memento<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>getsState<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<span style="word-wrap:break-word; color:rgb(0,0,204)">}</span></li></ol>&#13;
</div>&#13;
</div>&#13;
<span style="color:rgb(102,102,102); font-family:&#x5B8B;&#x4F53;,Arial; font-size:16px; line-height:26px">2、第二个文件要备份的状态实体：HeroState.java </span>&#13;
<div style="word-wrap:break-word; color:rgb(102,102,102); font-family:&#x5B8B;&#x4F53;,Arial; font-size:16px; line-height:26px">&#13;
<div class="codeheads" style="word-wrap:break-word; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); font-size:12px; line-height:25px; font-weight:bold; height:25px; padding:0px; width:1041.45px; background:none 0px 0px repeat scroll rgb(242,242,242)">&#13;
<p style="word-wrap:break-word; margin-top:5px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; padding-left:30px">&#13;
点击(<span style="word-wrap:break-word; color:red">此处</span>)折叠或打开</p>&#13;
</div>&#13;
<div id="code680" class="codeText" style="word-wrap:break-word; border:1px solid rgb(221,221,221); width:1041.45px; overflow:auto; margin:0px 0px 1.1em; padding:0px; word-break:break-all; letter-spacing:0.1px; font-size:12px; line-height:normal; font-family:Consolas,monospace">&#13;
<ol class="dp-css none_number" start="1" style="word-wrap:break-word; margin:0px 1px 0px 0px; padding:5px 0pt; list-style:none outside none; color:rgb(92,92,92); line-height:1.3">&#13;
<li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<span style="word-wrap:break-word; color:rgb(0,0,0)"><span style="word-wrap:break-word; color:rgb(255,153,0)">/**<br style="word-wrap:break-word" />&#13;
</span></span></li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
 * 游戏英雄人物状态实体 <br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
 */<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">class</span> HeroState <span style="word-wrap:break-word; color:rgb(0,0,255)">implements</span> <span style="word-wrap:break-word; color:rgb(255,0,0)">Cloneable</span><span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(255,153,0)">/**<br style="word-wrap:break-word" />&#13;
</span></li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     * 英雄生命值<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     */<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">private</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">int</span> HP<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(255,153,0)">/**<br style="word-wrap:break-word" />&#13;
</span></li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     * 英雄魔法值<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     */<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">private</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">int</span> MP<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(255,153,0)">/**<br style="word-wrap:break-word" />&#13;
</span></li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     * 状态保存时间<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     */<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">private</span> <span style="word-wrap:break-word; color:rgb(255,0,0)">Date</span> stateDate<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">int</span> getHP<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,255)">return</span> HP<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">void</span> setHP<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,255)">int</span> hP<span style="word-wrap:break-word; color:rgb(0,0,204)">)</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        HP <span style="word-wrap:break-word; color:rgb(0,0,204)">=</span> hP<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">int</span> getMP<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,255)">return</span> MP<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">void</span> setMP<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,255)">int</span> mP<span style="word-wrap:break-word; color:rgb(0,0,204)">)</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        MP <span style="word-wrap:break-word; color:rgb(0,0,204)">=</span> mP<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> <span style="word-wrap:break-word; color:rgb(255,0,0)">Date</span> getStateDate<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,255)">return</span> stateDate<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">void</span> setStateDate<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(255,0,0)">Date</span> stateDate<span style="word-wrap:break-word; color:rgb(0,0,204)">)</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,255)">this</span><span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>stateDate <span style="word-wrap:break-word; color:rgb(0,0,204)">=</span> stateDate<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> HeroState <span style="word-wrap:break-word; color:rgb(255,0,0)">clone</span><span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,255)">try</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
            <span style="word-wrap:break-word; color:rgb(0,0,255)">return</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">(</span>HeroState<span style="word-wrap:break-word; color:rgb(0,0,204)">)</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">super</span><span style="word-wrap:break-word; color:rgb(0,0,204)">.</span><span style="word-wrap:break-word; color:rgb(255,0,0)">clone</span><span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">catch</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(255,0,0)">CloneNotSupportedException</span> e<span style="word-wrap:break-word; color:rgb(0,0,204)">)</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
            <span style="word-wrap:break-word; color:rgb(255,153,0)">// TODO Auto-generated catch block</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
            e<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span><span style="word-wrap:break-word; color:rgb(255,0,0)">printStackTrace</span><span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,255)">return</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">null</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<span style="word-wrap:break-word; color:rgb(0,0,204)">}</span></li></ol>&#13;
</div>&#13;
</div>&#13;
<span style="color:rgb(102,102,102); font-family:&#x5B8B;&#x4F53;,Arial; font-size:16px; line-height:26px">3、要备份的状态实体：SceneState.java </span>&#13;
<div style="word-wrap:break-word; color:rgb(102,102,102); font-family:&#x5B8B;&#x4F53;,Arial; font-size:16px; line-height:26px">&#13;
<div class="codeheads" style="word-wrap:break-word; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); font-size:12px; line-height:25px; font-weight:bold; height:25px; padding:0px; width:1041.45px; background:none 0px 0px repeat scroll rgb(242,242,242)">&#13;
<p style="word-wrap:break-word; margin-top:5px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; padding-left:30px">&#13;
点击(<span style="word-wrap:break-word; color:red">此处</span>)折叠或打开</p>&#13;
</div>&#13;
<div id="code301" class="codeText" style="word-wrap:break-word; border:1px solid rgb(221,221,221); width:1041.45px; overflow:auto; margin:0px 0px 1.1em; padding:0px; word-break:break-all; letter-spacing:0.1px; font-size:12px; line-height:normal; font-family:Consolas,monospace">&#13;
<ol class="dp-css none_number" start="1" style="word-wrap:break-word; margin:0px 1px 0px 0px; padding:5px 0pt; list-style:none outside none; color:rgb(92,92,92); line-height:1.3">&#13;
<li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<span style="word-wrap:break-word; color:rgb(0,0,0)"><span style="word-wrap:break-word; color:rgb(255,153,0)">/**<br style="word-wrap:break-word" />&#13;
</span></span></li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
 * 游戏场景状态实体 <br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
 */<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">class</span> SceneState <span style="word-wrap:break-word; color:rgb(0,0,255)">implements</span> <span style="word-wrap:break-word; color:rgb(255,0,0)">Cloneable</span><span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(255,153,0)">/**<br style="word-wrap:break-word" />&#13;
</span></li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     * 金币数量<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     */<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">private</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">int</span> coin<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(255,153,0)">/**<br style="word-wrap:break-word" />&#13;
</span></li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     * 木材数量<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     */<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">private</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">int</span> wood<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(255,153,0)">/**<br style="word-wrap:break-word" />&#13;
</span></li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     * 地图名称<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     */<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">private</span> <span style="word-wrap:break-word; color:rgb(255,0,0)">String</span> mapName<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">int</span> getCoin<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,255)">return</span> coin<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">void</span> setCoin<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,255)">int</span> coin<span style="word-wrap:break-word; color:rgb(0,0,204)">)</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,255)">this</span><span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>coin <span style="word-wrap:break-word; color:rgb(0,0,204)">=</span> coin<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">int</span> getWood<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,255)">return</span> wood<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">void</span> setWood<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,255)">int</span> wood<span style="word-wrap:break-word; color:rgb(0,0,204)">)</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,255)">this</span><span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>wood <span style="word-wrap:break-word; color:rgb(0,0,204)">=</span> wood<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> <span style="word-wrap:break-word; color:rgb(255,0,0)">String</span> getMapName<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,255)">return</span> mapName<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">void</span> setMapName<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(255,0,0)">String</span> mapName<span style="word-wrap:break-word; color:rgb(0,0,204)">)</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,255)">this</span><span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>mapName <span style="word-wrap:break-word; color:rgb(0,0,204)">=</span> mapName<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> SceneState <span style="word-wrap:break-word; color:rgb(255,0,0)">clone</span><span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,255)">try</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
            <span style="word-wrap:break-word; color:rgb(0,0,255)">return</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">(</span>SceneState<span style="word-wrap:break-word; color:rgb(0,0,204)">)</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">super</span><span style="word-wrap:break-word; color:rgb(0,0,204)">.</span><span style="word-wrap:break-word; color:rgb(255,0,0)">clone</span><span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">catch</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(255,0,0)">CloneNotSupportedException</span> e<span style="word-wrap:break-word; color:rgb(0,0,204)">)</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
            <span style="word-wrap:break-word; color:rgb(255,153,0)">// TODO Auto-generated catch block</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
            e<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span><span style="word-wrap:break-word; color:rgb(255,0,0)">printStackTrace</span><span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,255)">return</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">null</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<span style="word-wrap:break-word; color:rgb(0,0,204)">}</span></li></ol>&#13;
</div>&#13;
</div>&#13;
<span style="color:rgb(102,102,102); font-family:&#x5B8B;&#x4F53;,Arial; font-size:16px; line-height:26px">4、第四个文件备忘录角色：GameMemcento.java </span>&#13;
<div style="word-wrap:break-word; color:rgb(102,102,102); font-family:&#x5B8B;&#x4F53;,Arial; font-size:16px; line-height:26px">&#13;
<div class="codeheads" style="word-wrap:break-word; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); font-size:12px; line-height:25px; font-weight:bold; height:25px; padding:0px; width:1041.45px; background:none 0px 0px repeat scroll rgb(242,242,242)">&#13;
<p style="word-wrap:break-word; margin-top:5px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; padding-left:30px">&#13;
点击(<span style="word-wrap:break-word; color:red">此处</span>)折叠或打开</p>&#13;
</div>&#13;
<div id="code383" class="codeText" style="word-wrap:break-word; border:1px solid rgb(221,221,221); width:1041.45px; overflow:auto; margin:0px 0px 1.1em; padding:0px; word-break:break-all; letter-spacing:0.1px; font-size:12px; line-height:normal; font-family:Consolas,monospace">&#13;
<ol class="dp-css none_number" start="1" style="word-wrap:break-word; margin:0px 1px 0px 0px; padding:5px 0pt; list-style:none outside none; color:rgb(92,92,92); line-height:1.3">&#13;
<li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<span style="word-wrap:break-word; color:rgb(0,0,0)"><span style="word-wrap:break-word; color:rgb(255,153,0)">/**<br style="word-wrap:break-word" />&#13;
</span></span></li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
 * 游戏备忘录角色<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
 */<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">class</span> GameMemento<span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(255,153,0)">/**<br style="word-wrap:break-word" />&#13;
</span></li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     * 英雄状态<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     */<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">private</span> HeroState hState<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(255,153,0)">/**<br style="word-wrap:break-word" />&#13;
</span></li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     * 场景状态<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     */<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">private</span> SceneState sState<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(255,153,0)">/**<br style="word-wrap:break-word" />&#13;
</span></li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     * 构造方法<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     * @param hState<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     * @param sState<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     */<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> GameMemento<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span>HeroState hState<span style="word-wrap:break-word; color:rgb(0,0,204)">,</span>SceneState sState<span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,255)">this</span><span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>hState <span style="word-wrap:break-word; color:rgb(0,0,204)">=</span> hState<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span><span style="word-wrap:break-word; color:rgb(255,0,0)">clone</span><span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,255)">this</span><span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>sState <span style="word-wrap:break-word; color:rgb(0,0,204)">=</span> sState<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span><span style="word-wrap:break-word; color:rgb(255,0,0)">clone</span><span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(255,153,0)">/**<br style="word-wrap:break-word" />&#13;
</span></li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     * 获取备份状态<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     * @return<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     */<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> HeroState gethState<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,255)">return</span> hState<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(255,153,0)">/**<br style="word-wrap:break-word" />&#13;
</span></li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     * 获取备份状态<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     * @return<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     */<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> SceneState getsState<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,255)">return</span> sState<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<span style="word-wrap:break-word; color:rgb(0,0,204)">}</span></li></ol>&#13;
</div>&#13;
</div>&#13;
<span style="color:rgb(102,102,102); font-family:&#x5B8B;&#x4F53;,Arial; font-size:16px; line-height:26px">5、第五个文件备忘录管理角色：Caretaker.java </span>&#13;
<div style="word-wrap:break-word; color:rgb(102,102,102); font-family:&#x5B8B;&#x4F53;,Arial; font-size:16px; line-height:26px">&#13;
<div class="codeheads" style="word-wrap:break-word; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); font-size:12px; line-height:25px; font-weight:bold; height:25px; padding:0px; width:1041.45px; background:none 0px 0px repeat scroll rgb(242,242,242)">&#13;
<p style="word-wrap:break-word; margin-top:5px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; padding-left:30px">&#13;
点击(<span style="word-wrap:break-word; color:red">此处</span>)折叠或打开</p>&#13;
</div>&#13;
<div id="code551" class="codeText" style="word-wrap:break-word; border:1px solid rgb(221,221,221); width:1041.45px; overflow:auto; margin:0px 0px 1.1em; padding:0px; word-break:break-all; letter-spacing:0.1px; font-size:12px; line-height:normal; font-family:Consolas,monospace">&#13;
<ol class="dp-css none_number" start="1" style="word-wrap:break-word; margin:0px 1px 0px 0px; padding:5px 0pt; list-style:none outside none; color:rgb(92,92,92); line-height:1.3">&#13;
<li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<span style="word-wrap:break-word; color:rgb(0,0,0)"><span style="word-wrap:break-word; color:rgb(255,153,0)">/**<br style="word-wrap:break-word" />&#13;
</span></span></li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
 * 备忘录管理器<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
 */<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">class</span> Caretaker <span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(255,153,0)">/**<br style="word-wrap:break-word" />&#13;
</span></li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     * 备忘录实体<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
     */<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">private</span> GameMemento memento<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> GameMemento getMemento<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,255)">return</span> memento<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">void</span> setMemento<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span>GameMemento memento<span style="word-wrap:break-word; color:rgb(0,0,204)">)</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(0,0,255)">this</span><span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>memento <span style="word-wrap:break-word; color:rgb(0,0,204)">=</span> memento<span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<span style="word-wrap:break-word; color:rgb(0,0,204)">}</span></li></ol>&#13;
</div>&#13;
</div>&#13;
<span style="color:rgb(102,102,102); font-family:&#x5B8B;&#x4F53;,Arial; font-size:16px; line-height:26px">6、第六个文件：TestMain.java </span>&#13;
<div style="word-wrap:break-word; color:rgb(102,102,102); font-family:&#x5B8B;&#x4F53;,Arial; font-size:16px; line-height:26px">&#13;
<div class="codeheads" style="word-wrap:break-word; border-bottom-width:1px; border-bottom-style:solid; border-bottom-color:rgb(221,221,221); font-size:12px; line-height:25px; font-weight:bold; height:25px; padding:0px; width:1041.45px; background:none 0px 0px repeat scroll rgb(242,242,242)">&#13;
<p style="word-wrap:break-word; margin-top:5px; margin-bottom:5px; padding-top:0px; padding-bottom:0px; padding-left:30px">&#13;
点击(<span style="word-wrap:break-word; color:red">此处</span>)折叠或打开</p>&#13;
</div>&#13;
<div id="code116" class="codeText" style="word-wrap:break-word; border:1px solid rgb(221,221,221); width:1041.45px; overflow:auto; margin:0px 0px 1.1em; padding:0px; word-break:break-all; letter-spacing:0.1px; font-size:12px; line-height:normal; font-family:Consolas,monospace">&#13;
<ol class="dp-css none_number" start="1" style="word-wrap:break-word; margin:0px 1px 0px 0px; padding:5px 0pt; list-style:none outside none; color:rgb(92,92,92); line-height:1.3">&#13;
<li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<span style="word-wrap:break-word; color:rgb(0,0,0)"><span style="word-wrap:break-word; color:rgb(255,153,0)">/**<br style="word-wrap:break-word" />&#13;
</span></span></li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
 * 测试Main方法<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
 */<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">class</span> TestMain <span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,255)">public</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">static</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">void</span> main<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(255,0,0)">String</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">[</span><span style="word-wrap:break-word; color:rgb(0,0,204)">]</span> args<span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">{</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        Game game <span style="word-wrap:break-word; color:rgb(0,0,204)">=</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">new</span> Game<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        HeroState hState <span style="word-wrap:break-word; color:rgb(0,0,204)">=</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">new</span> HeroState<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        hState<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>setHP<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span>100<span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        hState<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>setMP<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span>100<span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        SceneState sState <span style="word-wrap:break-word; color:rgb(0,0,204)">=</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">new</span> SceneState<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        sState<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>setCoin<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span>1000<span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        sState<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>setWood<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span>1000<span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        game<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>sethState<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span>hState<span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        game<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>setsState<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span>sState<span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(255,0,0)">System</span><span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>out<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span><span style="word-wrap:break-word; color:rgb(255,0,0)">println</span><span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(255,0,255)">"游戏状态备份开始"</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        GameMemento memento <span style="word-wrap:break-word; color:rgb(0,0,204)">=</span> game<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>createMemento<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        Caretaker ct <span style="word-wrap:break-word; color:rgb(0,0,204)">=</span> <span style="word-wrap:break-word; color:rgb(0,0,255)">new</span> Caretaker<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        ct<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>setMemento<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span>memento<span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(255,0,0)">System</span><span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>out<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span><span style="word-wrap:break-word; color:rgb(255,0,0)">println</span><span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(255,0,255)">"游戏状态备份完成"</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(255,0,0)">System</span><span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>out<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span><span style="word-wrap:break-word; color:rgb(255,0,0)">println</span><span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(255,0,255)">"开始游戏，当前英雄生命值："</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">+</span> game<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>gethState<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>getHP<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        game<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span><span style="word-wrap:break-word; color:rgb(255,0,0)">play</span><span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(255,0,0)">System</span><span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>out<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span><span style="word-wrap:break-word; color:rgb(255,0,0)">println</span><span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(255,0,255)">"游戏结束，当前英雄生命值："</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">+</span> game<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>gethState<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>getHP<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(255,0,0)">System</span><span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>out<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span><span style="word-wrap:break-word; color:rgb(255,0,0)">println</span><span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(255,0,255)">"游戏状态还原开始"</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        game<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>restore<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span>ct<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>getMemento<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(255,0,0)">System</span><span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>out<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span><span style="word-wrap:break-word; color:rgb(255,0,0)">println</span><span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(255,0,255)">"游戏状态还原结束"</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
        <span style="word-wrap:break-word; color:rgb(255,0,0)">System</span><span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>out<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span><span style="word-wrap:break-word; color:rgb(255,0,0)">println</span><span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(255,0,255)">"当前英雄生命值："</span> <span style="word-wrap:break-word; color:rgb(0,0,204)">+</span> game<span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>gethState<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">.</span>getHP<span style="word-wrap:break-word; color:rgb(0,0,204)">(</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">)</span><span style="word-wrap:break-word; color:rgb(0,0,204)">;</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
    <span style="word-wrap:break-word; color:rgb(0,0,204)">}</span><br style="word-wrap:break-word" />&#13;
</li><li style="word-wrap:break-word; margin:0px; padding:0px 0px 0px 10px; list-style:none outside none">&#13;
<span style="word-wrap:break-word; color:rgb(0,0,204)">}</span></li></ol>&#13;
</div>&#13;
</div>&#13;
<br />&#13;
<p></p>&#13;
<p>五、总结</p>&#13;
<p>备忘录模式</p>&#13;
<p>优点：</p>&#13;
<p>1）在同一个集合上可有多个状态一起工作</p>&#13;
<p>2）不需要为支持迭代而破坏一个集合的封装性。</p>&#13;
<p>缺点：</p>&#13;
<p>将对象状态备份会占用比较多的系统资源。</p>&#13;
   &#13;
