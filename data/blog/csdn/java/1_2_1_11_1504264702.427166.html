
<p><span style="font-size:18px;">定时任务在我们的开发中都会遇到，今天来总结一下Spring定时器的几种用法。</span></p><h1><span style="font-size:18px;">类别：</span></h1><p><span style="font-size:18px;">目前在JavaWeb开发中，主要有三种实现定时器的方式；</span></p><p><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="font-size:18px;">1.Java自带的java.util.Timer类，这个类允许你调度一个java.util.TimerTask任务。使用这种方式可以让你的程序按照某一个频度执行，效率应该是最高的，但是使用场景并不是很多，因为他对一些并发，不能很好的保证。</span></span></p><p><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="font-size:18px;">2.使用Quartz，这是一个功能比较强大的的调度器，可以让你的程序在指定时间执行，也可以按照某一个频度执行，配置起来稍显复杂。</span></span></p><p><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="font-size:18px;">3.Spring3.0以后自带的task，可以将它看成一个轻量级的Quartz，而且使用起来比Quartz简单许多。</span></span></p><p><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="font-size:18px;">从任务调度来说可以分为两种，这里主要是针对调度的触发时机和场景来说的：</span></span></p><p><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="font-size:18px;"><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;">1.每隔指定时间则触发一次；</span><br /></span></span></p><p><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="font-size:18px;">2.每到指定时间触发一次；</span></span></span></p><h1><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="font-size:18px;">JAVA自带的类：</span></span></span></h1><p><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="font-size:18px;">Java自带的类Timer和TimerTask,Timer类是用来记时，定时的类，它接受一个TimerTask<span style="font-family: Arial; line-height: 26px;">做参数；<span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;">TimerTask里面可以写我们的任务。</span></span></span></span></span></p><p><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="font-family: Arial; line-height: 26px;"><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="font-family: Arial; line-height: 26px;"><span style="font-size:18px;">Timer有两种执行任务的模式,最常用的是schedule,它可以以两种方式执行任务:1:在某个时间(Data)，2:在某个固定的时间之后(int delay)</span></span><br /></span></span></span></span></p><p><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="font-family: Arial; line-height: 26px;"><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="font-family: Arial; line-height: 26px;"><span style="font-size:18px;"></span></span></span></span></span></span></p><pre code_snippet_id="1872004" snippet_file_name="blog_20160908_1_136336" name="code" class="java">public class TimeTest {
	public static void main(String[] args){     
        Timer timer = new Timer();     
        timer.schedule(new MyTask(), 1000, 2000);//在1秒后执行此任务,每次间隔2秒执行一次,如果传递一个Data参数,就可以在某个固定的时间执行这个任务. 
        //timer.scheduleAtFixedRate(new MyTask(), 2000, 3000); 
    }    
    static class MyTask extends java.util.TimerTask{ 
    	int i=0;
        @Override
		public void run(){     
            System.out.println(i++);     
        }     
    }   
}</pre>还有另外一种是<pre code_snippet_id="1872004" snippet_file_name="blog_20160908_2_9547690" name="code" class="java" style="color: rgb(61, 70, 77); line-height: 26px;">timer.scheduleAtFixedRate</pre><p></p><p><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="font-family: Arial; line-height: 26px;"><span style="font-size:18px;">两个方式调用方法一模一样，区别就在于；</span><span style="font-family: Arial; line-height: 26px;"><span style="font-size:18px;">scheduleAtFixedRate()方法<span style="font-family: Arial; line-height: 26px;">安排指定的任务在指定的时间开始进行重复的</span><span style="font-family: Arial; line-height: 26px;">固定速率执行</span><span style="font-family: Arial; line-height: 26px;">。以近似固定的时间间隔（由指定的周期分隔）进行后续执行。</span></span></span></span></span></span></p><p><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="font-family: Arial; line-height: 26px;"><span style="font-family: Arial; line-height: 26px;"><span style="font-size:18px;"><span style="font-family: Arial; line-height: 26px;">简单来说就是，定时器在我们的JVM里面执行优先级并不算高，可能在执行定时器的时候进程在执行其他事情（比如垃圾回收），忙不过来，无法去执行定时器，比如说这个时候<span style="color: rgb(61, 70, 77); font-family: Arial;font-size:18px; line-height: 26px;">schedule安排了三秒后执行，每两秒执行一次，那么这三秒到了，没有执行，到了5秒才开始执行，那么定时器就会从这第五秒开始，每两秒执行一次。</span></span></span></span></span></span></span><span style="color: rgb(61, 70, 77); font-family: Arial; font-size: 18px; line-height: 26px;">而</span><span style="font-family: Arial; line-height: 26px;"><span style="font-size:18px;color: rgb(61, 70, 77);">scheduleAtFixedRate()会把这多出来两秒，在后面执行的时候给加上，使得他能够平均的去执行定时器。</span></span></p><p align="left" style="color: rgb(61, 70, 77); font-size: 18px;">用固定比率调度。使用本方法时，所有后续执行根据初始执行的时间进行调度，</p><p align="left" style="color: rgb(61, 70, 77); font-size: 18px;">从而希望减小延迟。</p><p align="left"></p><h1 style="color: rgb(61, 70, 77); box-sizing: inherit; -webkit-tap-highlight-color: transparent; font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="font-size:18px;">Quartz</span></h1><div><span style="font-size:18px;color:#ff0000;"><strong>quartz主要有两种方式；</strong></span></div><div><span style="font-size:18px;color:#ff0000;"><strong><span style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; font-family: 'courier new', courier; line-height: 30px;">1.利用JobDetailBean包装QuartzJobBean子类（即Job类）的实例，主要是继承的方式。</span><br /></strong></span></div><div><span style="font-size:18px;color:#ff0000;"><strong>2.<span style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; font-family: 'courier new', courier; line-height: 30px;">利用MethodInvokingJobDetailFactoryBean工厂Bean包装普通的Java对象（即Job类）。</span></strong></span></div><span style="color:#ff0000;"><strong><span style="font-size:18px;">第一种继承</span><span style="font-size:18px; font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;">org.springframework.scheduling.quartz.QuartzJobBean</span></strong></span><p></p><h2><span style="font-size:18px; color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;">1.定义作业类：</span></h2><p align="left"><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"></span></p><pre code_snippet_id="1872004" snippet_file_name="blog_20160908_3_7214159" name="code" class="java" style="font-size:18px;">public class Job  extends QuartzJobBean  {  
    //判断作业是否执行的旗标  
    private boolean isRunning = false;  
  
    //定义任务执行体  
    @Override
	public void executeInternal(JobExecutionContext ctx)   
        throws JobExecutionException   
    {  
        if (!isRunning)  
        {  
            System.out.println("开始执行定时任务");  
            isRunning = true;  
      
        }  
    }
}  </pre><h2><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="font-size:18px;">2.<span style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;">spring配置文件中配置作业类JobDetailBean</span></span></span></h2><p></p><p align="left"></p><pre code_snippet_id="1872004" snippet_file_name="blog_20160908_4_7040218" name="code" class="java">&lt;bean name="job" class="org.springframework.scheduling.quartz.JobDetailBean"&gt;  
&lt;property name="jobClass" value="com.Job" /&gt;  
&lt;property name="jobDataAsMap"&gt;  
&lt;map&gt;  
&lt;entry key="timeout" value="0" /&gt;  
&lt;/map&gt;  
&lt;/property&gt;  
&lt;/bean&gt;  </pre><br /><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; font-size: 16px; line-height: 30px;">jobClass属性即我们在java代码中定义的任务类，jobDataAsMap属性即该任务类中需要注入的属性值。</span><br /><p></p><p align="left"><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; font-size: 16px; line-height: 30px;"><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; font-size: 16px; line-height: 30px;">Quartz的作业触发器有两种，分别是</span><br /></span></p><p align="left"><span style="font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"></span></span></p><p style="color: rgb(61, 70, 77); font-size: 16px; box-sizing: inherit; -webkit-tap-highlight-color: transparent; margin-top: 5px; margin-bottom: 5px; font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;">org.springframework.scheduling.quartz.SimpleTriggerBean 每隔多少时间执行一次</p><p style="color: rgb(61, 70, 77); font-size: 16px; box-sizing: inherit; -webkit-tap-highlight-color: transparent; margin-top: 5px; margin-bottom: 5px; font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;">org.springframework.scheduling.quartz.CronTriggerBean<span style="white-space:pre">	</span>每到什么时间执行一次</p><p style="color: rgb(61, 70, 77); font-size: 16px; box-sizing: inherit; -webkit-tap-highlight-color: transparent; margin-top: 5px; margin-bottom: 5px; font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"></p><pre code_snippet_id="1872004" snippet_file_name="blog_20160908_5_3070484" name="code" class="html">&lt;bean id="simpleTrigger" class="org.springframework.scheduling.quartz.SimpleTriggerFactoryBean"&gt;  
&lt;property name="jobDetail" ref="job" /&gt;  
&lt;property name="startDelay" value="0" /&gt;&lt;!-- 调度工厂实例化后，经过0秒开始执行调度 --&gt;  
&lt;property name="repeatInterval" value="2000" /&gt;&lt;!-- 每2秒调度一次 --&gt;  
&lt;/bean&gt;  </pre><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; font-size: 16px; line-height: 30px;">第二种CronTriggerBean，支持到指定时间运行一次，如每天03:00运行一次等。</span><br /><p></p><p style="color: rgb(61, 70, 77); font-size: 16px; box-sizing: inherit; -webkit-tap-highlight-color: transparent; margin-top: 5px; margin-bottom: 5px; font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; font-size: 16px; line-height: 30px;"></span></p><pre code_snippet_id="1872004" snippet_file_name="blog_20160908_6_2688801" name="code" class="html">&lt;bean id="cronTrigger" class="org.springframework.scheduling.quartz.CronTriggerBean"&gt;  

&lt;property name="jobDetail" ref="job" /&gt;  

&lt;!—每天12:00运行一次 --&gt;  

&lt;property name="cronExpression" value="0 0 3 * * ?" /&gt;  

&lt;/bean&gt;  </pre><h2><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; font-size: 16px; line-height: 30px;"><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; font-size: 16px; line-height: 30px;">cronExpression表达式的语法</span></span></h2><p></p><p style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; margin-top: 5px; margin-bottom: 5px; font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"></span></p><p style="color: rgb(61, 70, 77); font-size: 16px; margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;">CronTriggers往往比SimpleTrigger更有用，如果您需要基于日历的概念，而非SimpleTrigger完全指定的时间间隔，复发的发射工作的时间表。<br />CronTrigger，你可以指定触发的时间表如“每星期五中午”，或“每个工作日9:30时”，甚至“每5分钟一班9:00和10:00逢星期一上午，星期三星期五“。<br />即便如此，SimpleTrigger一样，CronTrigger拥有的startTime指定的时间表时生效，指定的时间表时，应停止（可选）结束时间。</p><h4 style="font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif;"><span style="font-size:18px;">Cron Expressions</span></h4><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;">cron的表达式被用来配置CronTrigger实例。 cron的表达式是字符串，实际上是由七子表达式，描述个别细节的时间表。这些子表达式是分开的空白，代表：</span></p><ol style="padding-left: 40px; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><li style="list-style-type: decimal;"><strong><span style="font-size:18px;">1.        Seconds</span></strong></li><li style="list-style-type: decimal;"><strong><span style="font-size:18px;">2.        Minutes</span></strong></li><li style="list-style-type: decimal;"><strong><span style="font-size:18px;">3.        Hours</span></strong></li><li style="list-style-type: decimal;"><strong><span style="font-size:18px;">4.        Day-of-Month</span></strong></li><li style="list-style-type: decimal;"><strong><span style="font-size:18px;">5.        Month</span></strong></li><li style="list-style-type: decimal;"><strong><span style="font-size:18px;">6.        Day-of-Week</span></strong></li><li style="list-style-type: decimal;"><strong><span style="font-size:18px;">7.        Year (可选字段)</span></strong></li></ol><p align="left" style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;">例  "0 0 12 ? * WED" 在每星期三下午12:00 执行,</span></p><p align="left" style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;">个别子表达式可以包含范围, 例如，在前面的例子里("WED")可以替换成 "MON-FRI", "MON, WED, FRI"甚至"MON-WED,SAT".</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;">“*” 代表整个时间段.</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;">每一个字段都有一套可以指定有效值，如</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;"><strong>Seconds</strong> (秒)         ：可以用数字0－59 表示，</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;"><strong>Minutes(</strong>分)          ：可以用数字0－59 表示，</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;"><strong>Hours(</strong>时)             ：可以用数字0-23表示,</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;"><strong>Day-of-Month(</strong>天) ：可以用数字1-31 中的任一一个值，但要注意一些特别的月份</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;"><strong>Month(</strong>月)            ：可以用0-11 或用字符串  “JAN, FEB, MAR, APR, MAY, JUN, JUL, AUG, SEP, OCT, NOV and DEC” 表示</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;"><strong>Day-of-Week(每周)：</strong>可以用数字1-7表示（1 ＝ 星期日）或用字符口串“SUN, MON, TUE, WED, THU, FRI and SAT”表示</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;">“/”：为特别单位，表示为“每”如“0/15”表示每隔15分钟执行一次,“0”表示为从“0”分开始, “3/20”表示表示每隔20分钟执行一次，“3”表示从第3分钟开始执行</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;">“?”：表示每月的某一天，或第周的某一天</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;">“L”：用于每月，或每周，表示为每月的最后一天，或每个月的最后星期几如“6L”表示“每月的最后一个星期五”</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;">“W”：表示为最近工作日，如“15W”放在每月（day-of-month）字段上表示为“到本月15日最近的工作日”</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;">““#”：是用来指定“的”每月第n个工作日,例 在每周（day-of-week）这个字段中内容为"6#3" or "FRI#3" 则表示“每月第三个星期五”</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;"> </span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;">1）Cron表达式的格式：秒 分 时 日 月 周 年(可选)。</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;">               字段名                 允许的值                        允许的特殊字符  <br />               秒                         0-59                               , - * /  <br />               分                         0-59                               , - * /  <br />               小时                     0-23                               , - * /  <br />               日                         1-31                               , - * ? / L W C  <br />               月                         1-12 or JAN-DEC         , - * /  <br />               周几                     1-7 or SUN-SAT           , - * ? / L C #  <br />               年 (可选字段)     empty, 1970-2099      , - * /</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;"> </span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;">               “?”字符：表示不确定的值</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;">               “,”字符：指定数个值</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;">               “-”字符：指定一个值的范围</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;">               “/”字符：指定一个值的增加幅度。n/m表示从n开始，每次增加m</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;">               “L”字符：用在日表示一个月中的最后一天，用在周表示该月最后一个星期X</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;">               “W”字符：指定离给定日期最近的工作日(周一到周五)</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;">               “#”字符：表示该月第几个周X。6#3表示该月第3个周五</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;"> </span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;"> </span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;">         2）Cron表达式范例：</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;">                 每隔5秒执行一次：*/5 * * * * ?</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;">                 每隔1分钟执行一次：0 */1 * * * ?</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;">                 每天23点执行一次：0 0 23 * * ?</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;">                 每天凌晨1点执行一次：0 0 1 * * ?</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;">                 每月1号凌晨1点执行一次：0 0 1 1 * ?</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;">                 每月最后一天23点执行一次：0 0 23 L * ?</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;">                 每周星期天凌晨1点实行一次：0 0 1 ? * L</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;">                 在26分、29分、33分执行一次：0 26,29,33 * * * ?</span></p><p style="margin: 10px auto; font-family: Verdana, 'Lucida Grande', Arial, Helvetica, sans-serif; line-height: 18px;"><span style="font-size:18px;">                 每天的0点、13点、18点、21点都执行一次：0 0 0,13,18,21 * * ?</span></p><br /><h2><span style="font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="font-size:18px;">4.配置调度工厂</span></span></h2><pre code_snippet_id="1872004" snippet_file_name="blog_20160908_7_2307117" name="code" class="html">&lt;bean class="org.springframework.scheduling.quartz.SchedulerFactoryBean"&gt;  
&lt;property name="triggers"&gt;  
&lt;list&gt;  
&lt;ref bean="cronTrigger" /&gt;  
&lt;/list&gt;  
&lt;/property&gt;  
&lt;/bean&gt;  </pre><span style="font-size:18px;">当然也有人是把时间指定到调度工厂里面的。</span><br /><span style="font-size:18px;">第二种调度器是<span style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; font-family: 'courier new', courier; line-height: 30px;">利用MethodInvokingJobDetailFactoryBean工厂Bean包装普通的Java对象（即Job类）。</span></span><p><span style="font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="font-family: Arial; line-height: 26px;"><span style="font-size:18px;">1.编写作业类</span></span></span></span></p><p><span style="font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="font-family: Arial; line-height: 26px;"><span style="font-size:18px;">作业类即普通的类：</span></span></span></span></p><p><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; font-size: 16px; line-height: 30px;"><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; font-size: 16px; line-height: 30px;"><span style="font-family: Arial; font-size: 14px; line-height: 26px;"></span></span></span></p><pre code_snippet_id="1872004" snippet_file_name="blog_20160908_8_9101532" name="code" class="java">public class InvDetailDayJob {
	private Logger logger = LogUtils.getLogger(InvDetailDayJob.class);
	

	/**
	 * 任务执行
	 */
	public void run() {
		try {
			logger.info("Run InvDetailDayJob at: "+new Date());
		} catch(Exception e) {
			logger.error("Run InvDetailDayJob error at: "+new Date() + ", with error message: " + e.getMessage());
		}
	}
	
}</pre><h2><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; font-size: 16px; line-height: 30px;"><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; font-size: 16px; line-height: 30px;"><span style="font-family: Arial; font-size: 14px; line-height: 26px;">Spring配置如下：</span></span></span></h2><p></p><p><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; font-size: 16px; line-height: 30px;"><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; font-size: 16px; line-height: 30px;"><span style="font-family: Arial; font-size: 14px; line-height: 26px;"></span></span></span></p><pre code_snippet_id="1872004" snippet_file_name="blog_20160908_9_7291389" name="code" class="html">&lt;!-- 使用MethodInvokingJobDetailFactoryBean，任务类可以不实现Job接口，通过targetMethod指定调用方法 --&gt;
	&lt;bean id="taskJob" class="com.odianyun.owms.task.job.InvDetailDayJob" /&gt;

	&lt;bean id="jobDetail"
		class="org.springframework.scheduling.quartz.MethodInvokingJobDetailFactoryBean"&gt;
		&lt;property name="group" value="job_work" /&gt;
		&lt;property name="name" value="job_work_name" /&gt;
		&lt;!--false表示等上一个任务执行完后再开启新的任务 --&gt;
		&lt;property name="concurrent" value="false" /&gt;
		&lt;property name="targetObject"&gt;
			&lt;ref bean="taskJob" /&gt;
		&lt;/property&gt;
		&lt;property name="targetMethod"&gt;
			&lt;value&gt;run&lt;/value&gt;
		&lt;/property&gt;
	&lt;/bean&gt;

	&lt;!-- 调度触发器 --&gt;
	&lt;bean id="myTrigger"
		class="org.springframework.scheduling.quartz.CronTriggerFactoryBean"&gt;
		&lt;property name="name" value="work_default_name" /&gt;
		&lt;property name="group" value="work_default" /&gt;
		&lt;property name="jobDetail"&gt;
			&lt;ref bean="jobDetail" /&gt;
		&lt;/property&gt;
		&lt;property name="cronExpression"&gt;
			&lt;!-- 每天早上3点 --&gt;
			&lt;value&gt;0 0 3 * * ?&lt;/value&gt;
		&lt;/property&gt;
	&lt;/bean&gt;</pre><p></p><p></p><h1 style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; line-height: 30px;"><span style="font-size:18px;">Spring-Task</span></h1><div><span style="font-size:18px;"><span style="color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; font-size: 16px; line-height: 30px;">spring task，可以将它比作一个轻量级的Quartz，而且使用起来很简单，强烈建议使用这个。</span><br /></span></div><div><span style="font-family:Pingfang SC, STHeiti, Lantinghei SC, Open Sans, Arial, Hiragino Sans GB, Microsoft YaHei, WenQuanYi Micro Hei, SimSun, sans-serif;font-size:14px;color:#3d464d;"><span style="line-height: 30px;">配置：</span></span></div><h2><span style="font-family:Pingfang SC, STHeiti, Lantinghei SC, Open Sans, Arial, Hiragino Sans GB, Microsoft YaHei, WenQuanYi Micro Hei, SimSun, sans-serif;font-size:14px;color:#3d464d;"><span style="line-height: 30px;"><span style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; font-size: 16px; line-height: 30px;">第一步：编写作业类</span></span></span></h2><div><span style="font-family:Pingfang SC, STHeiti, Lantinghei SC, Open Sans, Arial, Hiragino Sans GB, Microsoft YaHei, WenQuanYi Micro Hei, SimSun, sans-serif;font-size:14px;color:#3d464d;"><span style="line-height: 30px;"><span style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; font-size: 16px; line-height: 30px;"></span></span></span><pre code_snippet_id="1872004" snippet_file_name="blog_20160908_10_1369808" name="code" class="java">@Service  
public class TaskJob {  
    public void job1() {  
       System.out.println(“任务进行中。。。”);  
    }  
}  </pre><h2><span style="font-family:Pingfang SC, STHeiti, Lantinghei SC, Open Sans, Arial, Hiragino Sans GB, Microsoft YaHei, WenQuanYi Micro Hei, SimSun, sans-serif;font-size:14px;color:#3d464d;"><span style="line-height: 30px;"><span style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; font-size: 16px; line-height: 30px;"><span style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; font-size: 16px; line-height: 30px;"><span style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; font-size: 16px; line-height: 30px;">第二步：在spring配置文件头中添加命名空间及描述</span></span></span></span></span></h2></div><div><span style="font-family:Pingfang SC, STHeiti, Lantinghei SC, Open Sans, Arial, Hiragino Sans GB, Microsoft YaHei, WenQuanYi Micro Hei, SimSun, sans-serif;font-size:14px;color:#3d464d;"><span style="line-height: 30px;"><span style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; font-size: 16px; line-height: 30px;"><span style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; font-size: 16px; line-height: 30px;"></span></span></span></span><pre code_snippet_id="1872004" snippet_file_name="blog_20160908_11_7400073" name="code" class="html">&lt;beans xmlns="http://www.springframework.org/schema/beans"  
    xmlns:task="http://www.springframework.org/schema/task"   
    xsi:schemaLocation="http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd"&gt;  </pre><h2><span style="font-family:Pingfang SC, STHeiti, Lantinghei SC, Open Sans, Arial, Hiragino Sans GB, Microsoft YaHei, WenQuanYi Micro Hei, SimSun, sans-serif;font-size:14px;color:#3d464d;"><span style="line-height: 30px;"><span style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; font-size: 16px; line-height: 30px;"><span style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; font-size: 16px; line-height: 30px;">第三步：spring配置文件中设置具体的任务</span></span></span></span></h2></div><div><span style="font-family:Pingfang SC, STHeiti, Lantinghei SC, Open Sans, Arial, Hiragino Sans GB, Microsoft YaHei, WenQuanYi Micro Hei, SimSun, sans-serif;font-size:14px;color:#3d464d;"><span style="line-height: 30px;"><span style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; font-size: 16px; line-height: 30px;"></span></span></span><pre code_snippet_id="1872004" snippet_file_name="blog_20160908_12_7226132" name="code" class="html">&lt;task:scheduled-tasks&gt;   
&lt;task:scheduled ref="taskJob" method="job1" cron="0 * * * * ?"/&gt;   
&lt;/task:scheduled-tasks&gt;  

&lt;context:component-scan base-package="com.gy.mytask " /&gt;  </pre><h2><span style="font-family:Pingfang SC, STHeiti, Lantinghei SC, Open Sans, Arial, Hiragino Sans GB, Microsoft YaHei, WenQuanYi Micro Hei, SimSun, sans-serif;font-size:14px;color:#3d464d;"><span style="line-height: 30px;"><span style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; font-size: 16px; line-height: 30px;">注解：</span></span></span></h2></div><div><span style="font-family:Pingfang SC, STHeiti, Lantinghei SC, Open Sans, Arial, Hiragino Sans GB, Microsoft YaHei, WenQuanYi Micro Hei, SimSun, sans-serif;font-size:14px;color:#3d464d;"><span style="line-height: 30px;"><span style="box-sizing: inherit; -webkit-tap-highlight-color: transparent; color: rgb(61, 70, 77); font-family: 'Pingfang SC', STHeiti, 'Lantinghei SC', 'Open Sans', Arial, 'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', SimSun, sans-serif; font-size: 16px; line-height: 30px;"></span></span></span><pre code_snippet_id="1872004" snippet_file_name="blog_20160908_13_6844448" name="code" class="java">@Component(“taskJob”)  
public class TaskJob {  
    @Scheduled(cron = "0 0 3 * * ?")  
    public void job1() {  
       System.out.println(“任务进行中。。。”);  
    } 
}  </pre><pre code_snippet_id="1872004" snippet_file_name="blog_20160908_14_8937999" name="code" class="html">&lt;?xml version="1.0" encoding="UTF-8"?&gt;  
&lt;beans xmlns="http://www.springframework.org/schema/beans"  
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"  
    xmlns:context="http://www.springframework.org/schema/context"  
    xmlns:tx="http://www.springframework.org/schema/tx"  
    xmlns:task="http://www.springframework.org/schema/task"  
    xsi:schemaLocation="  
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd  
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd  
    http://www.springframework.org/schema/context   
    http://www.springframework.org/schema/jdbc/spring-jdbc-3.0.xsd  
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd  
    http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.0.xsd"  
    default-lazy-init="false"&gt;  

    &lt;context:annotation-config /&gt;  
    &lt;!—spring扫描注解的配置   --&gt;  
    &lt;context:component-scan base-package="com.gy.mytask" /&gt;  
&lt;!—开启这个配置，spring才能识别@Scheduled注解   --&gt;  
    &lt;task:annotation-driven scheduler="qbScheduler" mode="proxy"/&gt;  
    &lt;task:scheduler id="qbScheduler" pool-size="10"/&gt;  </pre><br /></div><p></p>   &#13;
