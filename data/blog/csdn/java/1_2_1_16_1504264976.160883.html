

<p style="text-indent:12pt; font-family:&#x5B8B;&#x4F53;; line-height:20px"><strong>一 、工厂方法(Factory Method)模式</strong></p>&#13;
<p style="text-indent:12pt; font-family:&#x5B8B;&#x4F53;; line-height:20px">工厂方法模式的意义是定义一个创建产品对象的工厂接口，将实际创建工作推迟到子类当中。核心工厂类不再负责产品的创建，这样核心类成为一个抽象工厂角色，仅负责具体工厂子类必须实现的接口，这样进一步抽象化的好处是使得工厂方法模式可以使系统在不修改具体工厂角色的情况下引进新的产品。</p>&#13;
<p style="text-indent:12pt; font-family:&#x5B8B;&#x4F53;; line-height:20px"><strong>二、 工厂方法模式角色与结构</strong></p>&#13;
<p style="text-indent:12pt; font-family:&#x5B8B;&#x4F53;; line-height:20px">抽象工厂(Creator)角色：是工厂方法模式的核心，与应用程序无关。任何在模式中创建的对象的工厂类必须实现这个接口。</p>&#13;
<p style="text-indent:12pt; font-family:&#x5B8B;&#x4F53;; line-height:20px">具体工厂(Concrete Creator)角色：这是实现抽象工厂接口的具体工厂类，包含与应用程序密切相关的逻辑，并且受到应用程序调用以创建产品对象。在上图中有两个这样的角色：BulbCreator与TubeCreator。</p>&#13;
<p style="text-indent:12pt; font-family:&#x5B8B;&#x4F53;; line-height:20px">抽象产品(Product)角色：工厂方法模式所创建的对象的超类型，也就是产品对象的共同父类或共同拥有的接口。在上图中，这个角色是Light。</p>&#13;
<p style="text-indent:12pt; font-family:&#x5B8B;&#x4F53;; line-height:20px">具体产品(Concrete Product)角色：这个角色实现了抽象产品角色所定义的接口。某具体产品有专门的具体工厂创建，它们之间往往一一对应。</p>&#13;
<p style="text-indent:12pt; font-family:&#x5B8B;&#x4F53;; line-height:20px"><img src="http://www.uml.org.cn/j2ee/images/201004273.jpg" width="473" height="284" alt="" /></p>&#13;
<p style="text-indent:12pt; font-family:&#x5B8B;&#x4F53;; line-height:20px"><strong>三、一个简单的实例</strong></p>&#13;
<div style="font-family:&#x5B8B;&#x4F53;; line-height:20px; border:0.5pt solid windowtext; padding:4px 5.4pt; width:740.875px; word-break:break-all; background:rgb(230,230,230)">&#13;
<span style="color:rgb(0,128,128)">  1</span> <span style="color:rgb(0,128,0)">//</span><span style="color:rgb(0,128,0)"> 产品 Plant接口</span><span style="color:rgb(0,128,0)"><br />&#13;
</span><span style="color:rgb(0,128,128)">  2</span> <br />&#13;
<span style="color:rgb(0,128,128)">  3</span> 　　<span style="color:rgb(0,0,255)">public</span> <span style="color:rgb(0,0,255)">interface</span> Plant { }<br />&#13;
<span style="color:rgb(0,128,128)">  4</span> <br />&#13;
<span style="color:rgb(0,128,128)">  5</span> 　　<span style="color:rgb(0,128,0)">//</span><span style="color:rgb(0,128,0)">具体产品PlantA，PlantB</span><span style="color:rgb(0,128,0)"><br />&#13;
</span><span style="color:rgb(0,128,128)">  6</span> <br />&#13;
<span style="color:rgb(0,128,128)">  7</span> 　　<span style="color:rgb(0,0,255)">public</span> <span style="color:rgb(0,0,255)">class</span> PlantA <span style="color:rgb(0,0,255)">implements</span> Plant {<br />&#13;
<span style="color:rgb(0,128,128)">  8</span> <br />&#13;
<span style="color:rgb(0,128,128)">  9</span> 　　<span style="color:rgb(0,0,255)">public</span> PlantA () {<br />&#13;
<span style="color:rgb(0,128,128)">10</span> <br />&#13;
<span style="color:rgb(0,128,128)">11</span> 　　System.out.println("create PlantA !");<br />&#13;
<span style="color:rgb(0,128,128)">12</span> <br />&#13;
<span style="color:rgb(0,128,128)">13</span> 　　}<br />&#13;
<span style="color:rgb(0,128,128)">14</span> <br />&#13;
<span style="color:rgb(0,128,128)">15</span> 　　<span style="color:rgb(0,0,255)">public</span> <span style="color:rgb(0,0,255)">void</span> doSomething() {<br />&#13;
<span style="color:rgb(0,128,128)">16</span> <br />&#13;
<span style="color:rgb(0,128,128)">17</span> 　　System.out.println(" PlantA do something ...");<br />&#13;
<span style="color:rgb(0,128,128)">18</span> <br />&#13;
<span style="color:rgb(0,128,128)">19</span> 　　}<br />&#13;
<span style="color:rgb(0,128,128)">20</span> <br />&#13;
<span style="color:rgb(0,128,128)">21</span> 　　}<br />&#13;
<span style="color:rgb(0,128,128)">22</span> <br />&#13;
<span style="color:rgb(0,128,128)">23</span> 　　<span style="color:rgb(0,0,255)">public</span> <span style="color:rgb(0,0,255)">class</span> PlantB <span style="color:rgb(0,0,255)">implements</span> Plant {<br />&#13;
<span style="color:rgb(0,128,128)">24</span> <br />&#13;
<span style="color:rgb(0,128,128)">25</span> 　　<span style="color:rgb(0,0,255)">public</span> PlantB () {<br />&#13;
<span style="color:rgb(0,128,128)">26</span> <br />&#13;
<span style="color:rgb(0,128,128)">27</span> 　　System.out.println("create PlantB !");<br />&#13;
<span style="color:rgb(0,128,128)">28</span> <br />&#13;
<span style="color:rgb(0,128,128)">29</span> 　　}<br />&#13;
<span style="color:rgb(0,128,128)">30</span> <br />&#13;
<span style="color:rgb(0,128,128)">31</span> 　　<span style="color:rgb(0,0,255)">public</span> <span style="color:rgb(0,0,255)">void</span> doSomething() {<br />&#13;
<span style="color:rgb(0,128,128)">32</span> <br />&#13;
<span style="color:rgb(0,128,128)">33</span> 　　System.out.println(" PlantB do something ...");<br />&#13;
<span style="color:rgb(0,128,128)">34</span> <br />&#13;
<span style="color:rgb(0,128,128)">35</span> 　　}<br />&#13;
<span style="color:rgb(0,128,128)">36</span> <br />&#13;
<span style="color:rgb(0,128,128)">37</span> 　　}<br />&#13;
<span style="color:rgb(0,128,128)">38</span> <br />&#13;
<span style="color:rgb(0,128,128)">39</span> 　　<span style="color:rgb(0,128,0)">//</span><span style="color:rgb(0,128,0)"> 产品 Fruit接口</span><span style="color:rgb(0,128,0)"><br />&#13;
</span><span style="color:rgb(0,128,128)">40</span> <br />&#13;
<span style="color:rgb(0,128,128)">41</span> 　　<span style="color:rgb(0,0,255)">public</span> <span style="color:rgb(0,0,255)">interface</span> Fruit { }<br />&#13;
<span style="color:rgb(0,128,128)">42</span> <br />&#13;
<span style="color:rgb(0,128,128)">43</span> 　　<span style="color:rgb(0,128,0)">//</span><span style="color:rgb(0,128,0)">具体产品FruitA，FruitB</span><span style="color:rgb(0,128,0)"><br />&#13;
</span><span style="color:rgb(0,128,128)">44</span> <br />&#13;
<span style="color:rgb(0,128,128)">45</span> 　　<span style="color:rgb(0,0,255)">public</span> <span style="color:rgb(0,0,255)">class</span> FruitA <span style="color:rgb(0,0,255)">implements</span> Fruit {<br />&#13;
<span style="color:rgb(0,128,128)">46</span> <br />&#13;
<span style="color:rgb(0,128,128)">47</span> 　　<span style="color:rgb(0,0,255)">public</span> FruitA() {<br />&#13;
<span style="color:rgb(0,128,128)">48</span> <br />&#13;
<span style="color:rgb(0,128,128)">49</span> 　　System.out.println("create FruitA !");<br />&#13;
<span style="color:rgb(0,128,128)">50</span> <br />&#13;
<span style="color:rgb(0,128,128)">51</span> 　　}<br />&#13;
<span style="color:rgb(0,128,128)">52</span> <br />&#13;
<span style="color:rgb(0,128,128)">53</span> 　　<span style="color:rgb(0,0,255)">public</span> <span style="color:rgb(0,0,255)">void</span> doSomething() {<br />&#13;
<span style="color:rgb(0,128,128)">54</span> <br />&#13;
<span style="color:rgb(0,128,128)">55</span> 　　System.out.println(" FruitA do something ...");<br />&#13;
<span style="color:rgb(0,128,128)">56</span> <br />&#13;
<span style="color:rgb(0,128,128)">57</span> 　　}<br />&#13;
<span style="color:rgb(0,128,128)">58</span> <br />&#13;
<span style="color:rgb(0,128,128)">59</span> 　　}<br />&#13;
<span style="color:rgb(0,128,128)">60</span> <br />&#13;
<span style="color:rgb(0,128,128)">61</span> 　　<span style="color:rgb(0,0,255)">public</span> <span style="color:rgb(0,0,255)">class</span> FruitB <span style="color:rgb(0,0,255)">implements</span> Fruit {<br />&#13;
<span style="color:rgb(0,128,128)">62</span> <br />&#13;
<span style="color:rgb(0,128,128)">63</span> 　　<span style="color:rgb(0,0,255)">public</span> FruitB() {<br />&#13;
<span style="color:rgb(0,128,128)">64</span> <br />&#13;
<span style="color:rgb(0,128,128)">65</span> 　　System.out.println("create FruitB !");<br />&#13;
<span style="color:rgb(0,128,128)">66</span> <br />&#13;
<span style="color:rgb(0,128,128)">67</span> 　　}<br />&#13;
<span style="color:rgb(0,128,128)">68</span> <br />&#13;
<span style="color:rgb(0,128,128)">69</span> 　　<span style="color:rgb(0,0,255)">public</span> <span style="color:rgb(0,0,255)">void</span> doSomething() {<br />&#13;
<span style="color:rgb(0,128,128)">70</span> <br />&#13;
<span style="color:rgb(0,128,128)">71</span> 　　System.out.println(" FruitB do something ...");<br />&#13;
<span style="color:rgb(0,128,128)">72</span> <br />&#13;
<span style="color:rgb(0,128,128)">73</span> 　　}<br />&#13;
<span style="color:rgb(0,128,128)">74</span> <br />&#13;
<span style="color:rgb(0,128,128)">75</span> 　　}<br />&#13;
<span style="color:rgb(0,128,128)">76</span> <br />&#13;
<span style="color:rgb(0,128,128)">77</span> 　　<span style="color:rgb(0,128,0)">//</span><span style="color:rgb(0,128,0)"> 抽象工厂方法</span><span style="color:rgb(0,128,0)"><br />&#13;
</span><span style="color:rgb(0,128,128)">78</span> <br />&#13;
<span style="color:rgb(0,128,128)">79</span> 　　<span style="color:rgb(0,0,255)">public</span> <span style="color:rgb(0,0,255)">interface</span> AbstractFactory {<br />&#13;
<span style="color:rgb(0,128,128)">80</span> <br />&#13;
<span style="color:rgb(0,128,128)">81</span> 　　<span style="color:rgb(0,0,255)">public</span> Plant createPlant();<br />&#13;
<span style="color:rgb(0,128,128)">82</span> <br />&#13;
<span style="color:rgb(0,128,128)">83</span> 　　<span style="color:rgb(0,0,255)">public</span> Fruit createFruit() ;<br />&#13;
<span style="color:rgb(0,128,128)">84</span> <br />&#13;
<span style="color:rgb(0,128,128)">85</span> 　　}<br />&#13;
<span style="color:rgb(0,128,128)">86</span> <br />&#13;
<span style="color:rgb(0,128,128)">87</span> 　　<span style="color:rgb(0,128,0)">//</span><span style="color:rgb(0,128,0)">具体工厂方法</span><span style="color:rgb(0,128,0)"><br />&#13;
</span><span style="color:rgb(0,128,128)">88</span> <br />&#13;
<span style="color:rgb(0,128,128)">89</span> 　　<span style="color:rgb(0,0,255)">public</span> <span style="color:rgb(0,0,255)">class</span> FactoryA <span style="color:rgb(0,0,255)">implements</span> AbstractFactory {<br />&#13;
<span style="color:rgb(0,128,128)">90</span> <br />&#13;
<span style="color:rgb(0,128,128)">91</span> 　　<span style="color:rgb(0,0,255)">public</span> Plant createPlant() {<br />&#13;
<span style="color:rgb(0,128,128)">92</span> <br />&#13;
<span style="color:rgb(0,128,128)">93</span> 　　<span style="color:rgb(0,0,255)">return</span> <span style="color:rgb(0,0,255)">new</span> PlantA();<br />&#13;
<span style="color:rgb(0,128,128)">94</span> <br />&#13;
<span style="color:rgb(0,128,128)">95</span> 　　}<br />&#13;
<span style="color:rgb(0,128,128)">96</span> <br />&#13;
<span style="color:rgb(0,128,128)">97</span> 　　<span style="color:rgb(0,0,255)">public</span> Fruit createFruit() {<br />&#13;
<span style="color:rgb(0,128,128)">98</span> <br />&#13;
<span style="color:rgb(0,128,128)">99</span> 　　<span style="color:rgb(0,0,255)">return</span> <span style="color:rgb(0,0,255)">new</span> FruitA();<br />&#13;
<span style="color:rgb(0,128,128)">100</span> <br />&#13;
<span style="color:rgb(0,128,128)">101</span> 　　}<br />&#13;
<span style="color:rgb(0,128,128)">102</span> <br />&#13;
<span style="color:rgb(0,128,128)">103</span> 　　}<br />&#13;
<span style="color:rgb(0,128,128)">104</span> <br />&#13;
<span style="color:rgb(0,128,128)">105</span> 　　<span style="color:rgb(0,0,255)">public</span> <span style="color:rgb(0,0,255)">class</span> FactoryB <span style="color:rgb(0,0,255)">implements</span> AbstractFactory {<br />&#13;
<span style="color:rgb(0,128,128)">106</span> <br />&#13;
<span style="color:rgb(0,128,128)">107</span> 　　<span style="color:rgb(0,0,255)">public</span> Plant createPlant() {<br />&#13;
<span style="color:rgb(0,128,128)">108</span> <br />&#13;
<span style="color:rgb(0,128,128)">109</span> 　　<span style="color:rgb(0,0,255)">return</span> <span style="color:rgb(0,0,255)">new</span> PlantB();<br />&#13;
<span style="color:rgb(0,128,128)">110</span> <br />&#13;
<span style="color:rgb(0,128,128)">111</span> 　　}<br />&#13;
<span style="color:rgb(0,128,128)">112</span> <br />&#13;
<span style="color:rgb(0,128,128)">113</span> 　　<span style="color:rgb(0,0,255)">public</span> Fruit createFruit() {<br />&#13;
<span style="color:rgb(0,128,128)">114</span> <br />&#13;
<span style="color:rgb(0,128,128)">115</span> 　　<span style="color:rgb(0,0,255)">return</span> <span style="color:rgb(0,0,255)">new</span> FruitB();<br />&#13;
<span style="color:rgb(0,128,128)">116</span> <br />&#13;
<span style="color:rgb(0,128,128)">117</span> 　　}<br />&#13;
<span style="color:rgb(0,128,128)">118</span> <br />&#13;
<span style="color:rgb(0,128,128)">119</span> 　　}<br />&#13;
<span style="color:rgb(0,128,128)">120</span> <br />&#13;
<span style="color:rgb(0,128,128)">121</span></div>&#13;
<p style="text-indent:12pt; font-family:&#x5B8B;&#x4F53;; line-height:20px"><strong>四、工厂方法模式与简单工厂模式</strong></p>&#13;
<p style="text-indent:12pt; font-family:&#x5B8B;&#x4F53;; line-height:20px">工厂方法模式与简单工厂模式再结构上的不同不是很明显。工厂方法类的核心是一个抽象工厂类，而简单工厂模式把核心放在一个具体类上。</p>&#13;
<p style="text-indent:12pt; font-family:&#x5B8B;&#x4F53;; line-height:20px">工厂方法模式之所以有一个别名叫多态性工厂模式是因为具体工厂类都有共同的接口，或者有共同的抽象父类。</p>&#13;
<p style="text-indent:12pt; font-family:&#x5B8B;&#x4F53;; line-height:20px">当系统扩展需要添加新的产品对象时，仅仅需要添加一个具体对象以及一个具体工厂对象，原有工厂对象不需要进行任何修改，也不需要修改客户端，很好的符合了"开放-封闭"原则。而简单工厂模式在添加新产品对象后不得不修改工厂方法，扩展性不好。</p>&#13;
<p style="text-indent:12pt; font-family:&#x5B8B;&#x4F53;; line-height:20px">工厂方法模式退化后可以演变成简单工厂模式。</p>&#13;
   &#13;
