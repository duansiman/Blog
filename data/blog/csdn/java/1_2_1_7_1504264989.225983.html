

<p>对自己说声对不起：大年初二去姥姥家玩了，所以迟更新了一天，罪过。。。</p>&#13;
<p><strong>一、概述：</strong></p>&#13;
<p><span style="font-family:'ms shell dlg'; font-size:14px; line-height:28px">观察者模式定义了一种<strong>一对多</strong>的依赖关系，让多个观察者对象同时监听某一个主题对象。</span></p>&#13;
<p><span style="font-family:'ms shell dlg'; font-size:14px; line-height:28px">这个主题对象在状态上发生变化时，会通知所有观察者对象，使它们能够自动更新自己。</span><br />&#13;
</p>&#13;
<p><span style="font-family:'ms shell dlg'; font-size:14px; line-height:28px">二、观察者模式所设计的角色：</span></p>&#13;
<p>         <span style="font-family:'ms shell dlg'; font-size:14px; line-height:28px">●　　</span><span style="font-family:'ms shell dlg'; font-size:14px; line-height:28px"><strong>抽象主题(Subject)角色：</strong></span><span style="font-family:'ms shell dlg'; font-size:14px; line-height:28px">抽象主题角色把所有对观察者对象的引用保存在一个聚集（比如ArrayList对象）里，每个主题都可以有任何数量的观察者。抽象主题提供一个接口，可以增加和删除观察者对象，抽象主题角色又叫做抽象被观察者(Observable)角色。</span></p>&#13;
<p><span style="font-family:'ms shell dlg'; font-size:14px; line-height:28px"></span></p>&#13;
<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px">&#13;
　　●　　<strong>具体主题(ConcreteSubject)角色：</strong>将有关状态存入具体观察者对象；在具体主题的内部状态改变时，给所有登记过的观察者发出通知。具体主题角色又叫做具体被观察者(Concrete Observable)角色。</p>&#13;
<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px">&#13;
　　●　　<strong>抽象观察者(Observer)角色：</strong>为所有的具体观察者定义一个接口，在得到主题的通知时更新自己，这个接口叫做更新接口。</p>&#13;
<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px">&#13;
　　●　　<strong>具体观察者(ConcreteObserver)角色：</strong>存储与主题的状态自恰的状态。具体观察者角色实现抽象观察者角色所要求的更新接口，以便使本身的状态与主题的状态 像协调。如果需要，具体观察者角色可以保持一个指向具体主题对象的引用。</p>&#13;
<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px">&#13;
</p>&#13;
<div style="color:rgb(54,46,43); font-family:Arial; font-size:14px; line-height:26px">&#13;
<span style="font-size:18px"><strong>适用场景</strong></span></div>&#13;
<div style="color:rgb(54,46,43); font-family:Arial; font-size:14px; line-height:26px">&#13;
1) 当一个抽象模型有两个方面, 其中一个方面依赖于另一方面。将这二者封装在独立的对象中以使它们可以各自独立地改变和复用。</div>&#13;
<div style="color:rgb(54,46,43); font-family:Arial; font-size:14px; line-height:26px">&#13;
2) 当对一个对象的改变需要同时改变其它对象, 而不知道具体有多少对象有待改变。</div>&#13;
<div style="color:rgb(54,46,43); font-family:Arial; font-size:14px; line-height:26px">&#13;
3) 当一个对象必须通知其它对象，而它又不能假定其它对象是谁。换言之, 你不希望这些对象是紧密耦合的。</div>&#13;
<div><br />&#13;
</div>&#13;
<br />&#13;
<p></p>&#13;
<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px">&#13;
<br />&#13;
</p>&#13;
<strong>三、UML：</strong>&#13;
<p><span style="font-family:'ms shell dlg'; font-size:14px; line-height:28px"><img src="http://img.blog.csdn.net/20151126113303575?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" /><br />&#13;
</span></p>&#13;
<p><span style="font-family:'ms shell dlg'; font-size:14px; line-height:28px"><br />&#13;
</span></p>&#13;
<p><span style="font-family:'ms shell dlg'; font-size:14px; line-height:28px"><strong>四、代码：</strong></span></p>&#13;
<p><span style="font-family:'ms shell dlg'; font-size:14px; line-height:28px"></span></p>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; list-style-type:none; color:rgb(68,68,68); font-family:Helvetica,arial,sans-serif; font-size:14px; line-height:25.2px">&#13;
<span style="font-size:15px">首先定义抽象的观察者：</span></p>&#13;
<div class="cnblogs_code" style="border:1px solid rgb(204,204,204); padding:5px; overflow:auto; margin:5px 0px; font-family:'Courier New'!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin-top:0px"><span class="cnblogs_code_copy" style="padding-right:5px; line-height:1.5!important"><a target="_blank" title="复制代码" style="color:rgb(51,153,255); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; float:left; max-width:650px; border:none!important" /></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; white-space:pre-wrap; word-wrap:break-word; padding:0px; list-style-type:none; font-family:'Courier New'!important"><span style="color:rgb(0,128,0); line-height:1.5!important">//</span><span style="color:rgb(0,128,0); line-height:1.5!important">抽象观察者角色</span>
<span style="color:rgb(0,0,255); line-height:1.5!important">public</span> <span style="color:rgb(0,0,255); line-height:1.5!important">interface</span><span style="line-height:1.5!important"> Watcher
{
    </span><span style="color:rgb(0,0,255); line-height:1.5!important">public</span> <span style="color:rgb(0,0,255); line-height:1.5!important">void</span><span style="line-height:1.5!important"> update(String str);

}</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin-top:0px"><span class="cnblogs_code_copy" style="padding-right:5px; line-height:1.5!important"><a target="_blank" title="复制代码" style="color:rgb(51,153,255); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; float:left; max-width:650px; border:none!important" /></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; list-style-type:none; color:rgb(68,68,68); font-family:Helvetica,arial,sans-serif; font-size:14px; line-height:25.2px">&#13;
<span style="font-size:15px">　　然后定义抽象的主题角色，即抽象的被观察者，在其中声明方法（添加、移除观察者，通知观察者）：</span></p>&#13;
<div class="cnblogs_code" style="border:1px solid rgb(204,204,204); padding:5px; overflow:auto; margin:5px 0px; font-family:'Courier New'!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin-top:0px"><span class="cnblogs_code_copy" style="padding-right:5px; line-height:1.5!important"><a target="_blank" title="复制代码" style="color:rgb(51,153,255); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; float:left; max-width:650px; border:none!important" /></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; white-space:pre-wrap; word-wrap:break-word; padding:0px; list-style-type:none; font-family:'Courier New'!important"><span style="color:rgb(0,128,0); line-height:1.5!important">//</span><span style="color:rgb(0,128,0); line-height:1.5!important">抽象主题角色，watched：被观察</span>
<span style="color:rgb(0,0,255); line-height:1.5!important">public</span> <span style="color:rgb(0,0,255); line-height:1.5!important">interface</span><span style="line-height:1.5!important"> Watched
{
    </span><span style="color:rgb(0,0,255); line-height:1.5!important">public</span> <span style="color:rgb(0,0,255); line-height:1.5!important">void</span><span style="line-height:1.5!important"> addWatcher(Watcher watcher);

    </span><span style="color:rgb(0,0,255); line-height:1.5!important">public</span> <span style="color:rgb(0,0,255); line-height:1.5!important">void</span><span style="line-height:1.5!important"> removeWatcher(Watcher watcher);

    </span><span style="color:rgb(0,0,255); line-height:1.5!important">public</span> <span style="color:rgb(0,0,255); line-height:1.5!important">void</span><span style="line-height:1.5!important"> notifyWatchers(String str);

}</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin-top:0px"><span class="cnblogs_code_copy" style="padding-right:5px; line-height:1.5!important"><a target="_blank" title="复制代码" style="color:rgb(51,153,255); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; float:left; max-width:650px; border:none!important" /></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; list-style-type:none; color:rgb(68,68,68); font-family:Helvetica,arial,sans-serif; font-size:14px; line-height:25.2px">&#13;
<span style="font-size:15px">　　然后定义具体的观察者：</span></p>&#13;
<div class="cnblogs_code" style="border:1px solid rgb(204,204,204); padding:5px; overflow:auto; margin:5px 0px; font-family:'Courier New'!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin-top:0px"><span class="cnblogs_code_copy" style="padding-right:5px; line-height:1.5!important"><a target="_blank" title="复制代码" style="color:rgb(51,153,255); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; float:left; max-width:650px; border:none!important" /></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; white-space:pre-wrap; word-wrap:break-word; padding:0px; list-style-type:none; font-family:'Courier New'!important"><span style="color:rgb(0,0,255); line-height:1.5!important">public</span> <span style="color:rgb(0,0,255); line-height:1.5!important">class</span> ConcreteWatcher <span style="color:rgb(0,0,255); line-height:1.5!important">implements</span><span style="line-height:1.5!important"> Watcher
{

    @Override
    </span><span style="color:rgb(0,0,255); line-height:1.5!important">public</span> <span style="color:rgb(0,0,255); line-height:1.5!important">void</span><span style="line-height:1.5!important"> update(String str)
    {
        System.out.println(str);
    }

}</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin-top:0px"><span class="cnblogs_code_copy" style="padding-right:5px; line-height:1.5!important"><a target="_blank" title="复制代码" style="color:rgb(51,153,255); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; float:left; max-width:650px; border:none!important" /></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; list-style-type:none; color:rgb(68,68,68); font-family:Helvetica,arial,sans-serif; font-size:14px; line-height:25.2px">&#13;
<span style="font-size:15px">　　之后是具体的主题角色：</span><span style="font-size:15px">　</span></p>&#13;
<div class="cnblogs_code" style="border:1px solid rgb(204,204,204); padding:5px; overflow:auto; margin:5px 0px; font-family:'Courier New'!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin-top:0px"><span class="cnblogs_code_copy" style="padding-right:5px; line-height:1.5!important"><a target="_blank" title="复制代码" style="color:rgb(51,153,255); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; float:left; max-width:650px; border:none!important" /></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; white-space:pre-wrap; word-wrap:break-word; padding:0px; list-style-type:none; font-family:'Courier New'!important"><span style="color:rgb(0,0,255); line-height:1.5!important">import</span><span style="line-height:1.5!important"> java.util.ArrayList;
</span><span style="color:rgb(0,0,255); line-height:1.5!important">import</span><span style="line-height:1.5!important"> java.util.List;

</span><span style="color:rgb(0,0,255); line-height:1.5!important">public</span> <span style="color:rgb(0,0,255); line-height:1.5!important">class</span> ConcreteWatched <span style="color:rgb(0,0,255); line-height:1.5!important">implements</span><span style="line-height:1.5!important"> Watched
{
    </span><span style="color:rgb(0,128,0); line-height:1.5!important">//</span><span style="color:rgb(0,128,0); line-height:1.5!important"> 存放观察者</span>
    <span style="color:rgb(0,0,255); line-height:1.5!important">private</span> List&lt;Watcher&gt; list = <span style="color:rgb(0,0,255); line-height:1.5!important">new</span> ArrayList&lt;Watcher&gt;<span style="line-height:1.5!important">();

    @Override
    </span><span style="color:rgb(0,0,255); line-height:1.5!important">public</span> <span style="color:rgb(0,0,255); line-height:1.5!important">void</span><span style="line-height:1.5!important"> addWatcher(Watcher watcher)
    {
        list.add(watcher);
    }

    @Override
    </span><span style="color:rgb(0,0,255); line-height:1.5!important">public</span> <span style="color:rgb(0,0,255); line-height:1.5!important">void</span><span style="line-height:1.5!important"> removeWatcher(Watcher watcher)
    {
        list.remove(watcher);
    }

    @Override
    </span><span style="color:rgb(0,0,255); line-height:1.5!important">public</span> <span style="color:rgb(0,0,255); line-height:1.5!important">void</span><span style="line-height:1.5!important"> notifyWatchers(String str)
    {
        </span><span style="color:rgb(0,128,0); line-height:1.5!important">//</span><span style="color:rgb(0,128,0); line-height:1.5!important"> 自动调用实际上是主题进行调用的</span>
        <span style="color:rgb(0,0,255); line-height:1.5!important">for</span><span style="line-height:1.5!important"> (Watcher watcher : list)
        {
            watcher.update(str);
        }
    }

}</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin-top:0px"><span class="cnblogs_code_copy" style="padding-right:5px; line-height:1.5!important"><a target="_blank" title="复制代码" style="color:rgb(51,153,255); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; float:left; max-width:650px; border:none!important" /></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; padding-top:0px; padding-bottom:0px; list-style-type:none; color:rgb(68,68,68); font-family:Helvetica,arial,sans-serif; font-size:14px; line-height:25.2px">&#13;
<span style="font-size:15px">　　编写测试类：</span></p>&#13;
<div class="cnblogs_code" style="border:1px solid rgb(204,204,204); padding:5px; overflow:auto; margin:5px 0px; font-family:'Courier New'!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="margin-top:0px"><span class="cnblogs_code_copy" style="padding-right:5px; line-height:1.5!important"><a target="_blank" title="复制代码" style="color:rgb(51,153,255); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="margin:0px; float:left; max-width:650px; border:none!important" /></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; white-space:pre-wrap; word-wrap:break-word; padding:0px; list-style-type:none; font-family:'Courier New'!important"><span style="color:rgb(0,0,255); line-height:1.5!important">public</span> <span style="color:rgb(0,0,255); line-height:1.5!important">class</span><span style="line-height:1.5!important"> Test
{
    </span><span style="color:rgb(0,0,255); line-height:1.5!important">public</span> <span style="color:rgb(0,0,255); line-height:1.5!important">static</span> <span style="color:rgb(0,0,255); line-height:1.5!important">void</span><span style="line-height:1.5!important"> main(String[] args)
    {
        Watched girl </span>= <span style="color:rgb(0,0,255); line-height:1.5!important">new</span><span style="line-height:1.5!important"> ConcreteWatched();
        
        Watcher watcher1 </span>= <span style="color:rgb(0,0,255); line-height:1.5!important">new</span><span style="line-height:1.5!important"> ConcreteWatcher();
        Watcher watcher2 </span>= <span style="color:rgb(0,0,255); line-height:1.5!important">new</span><span style="line-height:1.5!important"> ConcreteWatcher();
        Watcher watcher3 </span>= <span style="color:rgb(0,0,255); line-height:1.5!important">new</span><span style="line-height:1.5!important"> ConcreteWatcher();
        
        girl.addWatcher(watcher1);
        girl.addWatcher(watcher2);
        girl.addWatcher(watcher3);
        
        girl.notifyWatchers(</span>"开心"<span style="line-height:1.5!important">);
    }

}</span></pre>&#13;
</div>&#13;
<br />&#13;
<p><span style="font-family:'ms shell dlg'; font-size:14px; line-height:28px"></span></p>&#13;
<h1 style="margin:0px; height:auto; padding-right:0px; font-family:verdana,Arial,Helvetica,sans-serif; font-size:16px; border-bottom-style:none; line-height:1.5">&#13;
<span style="font-size:18pt">在JAVA中对观察者模式的支持</span></h1>&#13;
<p></p>&#13;
<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px">&#13;
　　这里给出一个非常简单的例子，说明怎样使用JAVA所提供的对观察者模式的支持。在这个例子中，被观察对象叫做Watched；而观察者对象叫做Watcher。Watched对象继承自java.util.Observable类；而Watcher对象实现了java.util.Observer接口。另外有一个Test类扮演客户端角色。</p>&#13;
<h3 style="font-size:16px; border-bottom-width:1px; border-bottom-style:dotted; border-bottom-color:rgb(214,214,214); line-height:1.5; margin:10px 0px; font-family:'ms shell dlg'">&#13;
　　源代码</h3>&#13;
<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px">&#13;
　　被观察者Watched类源代码</p>&#13;
<div class="cnblogs_code" style="word-wrap:break-word; border:1px solid rgb(204,204,204); padding:5px; overflow:auto; margin:5px 0px; line-height:28px; font-family:'Courier New'!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="word-wrap:break-word; margin-top:5px"><span class="cnblogs_code_copy" style="padding-right:5px; line-height:1.5!important"><a target="_blank" title="复制代码" style="color:rgb(46,156,233); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="max-width:900px; border:none!important" /></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="color:rgb(0,0,255); line-height:1.5!important">public</span> <span style="color:rgb(0,0,255); line-height:1.5!important">class</span> Watched <span style="color:rgb(0,0,255); line-height:1.5!important">extends</span><span style="line-height:1.5!important"> Observable{
    
    </span><span style="color:rgb(0,0,255); line-height:1.5!important">private</span> String data = ""<span style="line-height:1.5!important">;
    
    </span><span style="color:rgb(0,0,255); line-height:1.5!important">public</span><span style="line-height:1.5!important"> String getData() {
        </span><span style="color:rgb(0,0,255); line-height:1.5!important">return</span><span style="line-height:1.5!important"> data;
    }

    </span><span style="color:rgb(0,0,255); line-height:1.5!important">public</span> <span style="color:rgb(0,0,255); line-height:1.5!important">void</span><span style="line-height:1.5!important"> setData(String data) {
        
        </span><span style="color:rgb(0,0,255); line-height:1.5!important">if</span>(!<span style="color:rgb(0,0,255); line-height:1.5!important">this</span><span style="line-height:1.5!important">.data.equals(data)){
            </span><span style="color:rgb(0,0,255); line-height:1.5!important">this</span>.data =<span style="line-height:1.5!important"> data;
            setChanged();
        }
        notifyObservers();
    }
    
    
}</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="word-wrap:break-word; margin-top:5px"><span class="cnblogs_code_copy" style="padding-right:5px; line-height:1.5!important"><a target="_blank" title="复制代码" style="color:rgb(46,156,233); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="max-width:900px; border:none!important" /></a></span></div>&#13;
</div>&#13;
<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px">&#13;
 </p>&#13;
<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px">&#13;
　　观察者类源代码</p>&#13;
<div class="cnblogs_code" style="word-wrap:break-word; border:1px solid rgb(204,204,204); padding:5px; overflow:auto; margin:5px 0px; line-height:28px; font-family:'Courier New'!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="word-wrap:break-word; margin-top:5px"><span class="cnblogs_code_copy" style="padding-right:5px; line-height:1.5!important"><a target="_blank" title="复制代码" style="color:rgb(46,156,233); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="max-width:900px; border:none!important" /></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="color:rgb(0,0,255); line-height:1.5!important">public</span> <span style="color:rgb(0,0,255); line-height:1.5!important">class</span> Watcher <span style="color:rgb(0,0,255); line-height:1.5!important">implements</span><span style="line-height:1.5!important"> Observer{
    
    </span><span style="color:rgb(0,0,255); line-height:1.5!important">public</span><span style="line-height:1.5!important"> Watcher(Observable o){
        o.addObserver(</span><span style="color:rgb(0,0,255); line-height:1.5!important">this</span><span style="line-height:1.5!important">);
    }
    
    @Override
    </span><span style="color:rgb(0,0,255); line-height:1.5!important">public</span> <span style="color:rgb(0,0,255); line-height:1.5!important">void</span><span style="line-height:1.5!important"> update(Observable o, Object arg) {
        
        System.out.println(</span>"状态发生改变：" +<span style="line-height:1.5!important"> ((Watched)o).getData());
    }

}</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="word-wrap:break-word; margin-top:5px"><span class="cnblogs_code_copy" style="padding-right:5px; line-height:1.5!important"><a target="_blank" title="复制代码" style="color:rgb(46,156,233); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="max-width:900px; border:none!important" /></a></span></div>&#13;
</div>&#13;
<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px">&#13;
　　测试类源代码</p>&#13;
<div class="cnblogs_code" style="word-wrap:break-word; border:1px solid rgb(204,204,204); padding:5px; overflow:auto; margin:5px 0px; line-height:28px; font-family:'Courier New'!important; background-color:rgb(245,245,245)">&#13;
<div class="cnblogs_code_toolbar" style="word-wrap:break-word; margin-top:5px"><span class="cnblogs_code_copy" style="padding-right:5px; line-height:1.5!important"><a target="_blank" title="复制代码" style="color:rgb(46,156,233); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="max-width:900px; border:none!important" /></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'!important"><span style="color:rgb(0,0,255); line-height:1.5!important">public</span> <span style="color:rgb(0,0,255); line-height:1.5!important">class</span><span style="line-height:1.5!important"> Test {

    </span><span style="color:rgb(0,0,255); line-height:1.5!important">public</span> <span style="color:rgb(0,0,255); line-height:1.5!important">static</span> <span style="color:rgb(0,0,255); line-height:1.5!important">void</span><span style="line-height:1.5!important"> main(String[] args) {
        
        </span><span style="color:rgb(0,128,0); line-height:1.5!important">//</span><span style="color:rgb(0,128,0); line-height:1.5!important">创建被观察者对象</span>
        Watched watched = <span style="color:rgb(0,0,255); line-height:1.5!important">new</span><span style="line-height:1.5!important"> Watched();
        </span><span style="color:rgb(0,128,0); line-height:1.5!important">//</span><span style="color:rgb(0,128,0); line-height:1.5!important">创建观察者对象，并将被观察者对象登记</span>
        Observer watcher = <span style="color:rgb(0,0,255); line-height:1.5!important">new</span><span style="line-height:1.5!important"> Watcher(watched);
        </span><span style="color:rgb(0,128,0); line-height:1.5!important">//</span><span style="color:rgb(0,128,0); line-height:1.5!important">给被观察者状态赋值</span>
        watched.setData("start"<span style="line-height:1.5!important">);
        watched.setData(</span>"run"<span style="line-height:1.5!important">);
        watched.setData(</span>"stop"<span style="line-height:1.5!important">);

    }

}</span></pre>&#13;
<div class="cnblogs_code_toolbar" style="word-wrap:break-word; margin-top:5px"><span class="cnblogs_code_copy" style="padding-right:5px; line-height:1.5!important"><a target="_blank" title="复制代码" style="color:rgb(46,156,233); border:none!important"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="max-width:900px; border:none!important" /></a></span></div>&#13;
</div>&#13;
<p style="word-wrap:break-word; margin:10px auto; font-family:'ms shell dlg'; font-size:14px; line-height:28px">&#13;
　　Test对象首先创建了Watched和Watcher对象。在创建Watcher对象时，将Watched对象作为参数传入；然后Test对象调用Watched对象的setData()方法，触发Watched对象的内部状态变化；Watched对象进而通知实现登记过的Watcher对象，也就是调用它的update()方法。</p>&#13;
<br />&#13;
<p><span style="font-family:'ms shell dlg'; font-size:14px; line-height:28px"><br />&#13;
</span></p>&#13;
<p><br />&#13;
</p>&#13;
   &#13;
