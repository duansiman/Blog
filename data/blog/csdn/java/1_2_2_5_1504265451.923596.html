
                <div class="markdown_views"><p>很久之前就想写的教程，因为忙着找实习的原因，没有整理出来，首先SSM框架组合(SpringMVC+Spring+Mybatis)和SSH(Spring4.0+Struts2+Hibernate4.0)组合是外面企业里很常用的两种MVC架构，本博客介绍SSM框架组合，这种MVC架构的搭建过程</p>

<p>jar准备的话，可以用maven或者网上下载 <br/>
SpringMVC需要的jar <br/>
<img src="http://img.blog.csdn.net/20161227172034269?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxNDQyNzM5MQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""/></p>

<p>jar作用详解(网上收集)： <br/>
aopaliance.jar <br/>
包含了针对面向切面的接口,通常Spring等其它具备动态织入功能的框架依赖此包</p>

<p>spring-aop.jar <br/>
这个jar 文件包含在应用中使用Spring 的AOP 特性时所需的类和源码级元数据支持。使用基于AOP 的Spring特性，如声明型事务管理（Declarative Transaction Management），也要在应用里包含这个jar包。 <br/>
外部依赖spring-core， (spring-beans，AOP Alliance， CGLIB，Commons Attributes)。</p>

<p>spring-aspects.jar <br/>
提供对AspectJ的支持，以便可以方便的将面向方面的功能集成进IDE中，比如Eclipse AJDT。 <br/>
外部依赖。</p>

<p>spring-beans.jar <br/>
这个jar 文件是所有应用都要用到的，它包含访问配置文件、创建和管理bean 以及进行Inversion of Control / Dependency Injection（IoC/DI）操作相关的所有类。如果应用只需基本的IoC/DI 支持，引入spring-core.jar 及spring-beans.jar 文件就可以了。 <br/>
外部依赖spring-core，(CGLIB)。</p>

<p>spring-context.jar <br/>
这个jar 文件为Spring 核心提供了大量扩展。可以找到使用Spring ApplicationContext特性时所需的全部类，JDNI 所需的全部类，instrumentation组件以及校验Validation 方面的相关类。 <br/>
外部依赖spring-beans, (spring-aop)。</p>

<p>spring-core.jar <br/>
这个jar 文件包含Spring 框架基本的核心工具类。Spring 其它组件要都要使用到这个包里的类，是其它组件的基本核心，当然你也可以在自己的应用系统中使用这些工具类。 <br/>
外部依赖Commons Logging， (Log4J)。</p>

<p>spring-expression.jar <br/>
Spring表达式语言需要的jar</p>

<p>spring-jdbc.jar <br/>
这个jar 文件包含对Spring 对JDBC 数据访问进行封装的所有类。 <br/>
外部依赖spring-beans，spring-dao。</p>

<p>spring-test.jar <br/>
spring框架对junit框架简单封装的jar</p>

<p>spring-tx.jar <br/>
提供对事务的支持，事务的相关处理以及实现类就在这个jar包中</p>

<p>spring-context-support.jar <br/>
这个jar 文件包含支持UI模版（Velocity，FreeMarker，JasperReports），邮件服务，脚本服务(JRuby)，缓存Cache（EHCache），任务计划Scheduling（uartz）方面的类。 <br/>
外部依赖spring-context, (spring-jdbc, Velocity, FreeMarker, JasperReports, BSH, Groovy, JRuby, Quartz, EHCache)</p>

<p>spring-web.jar <br/>
这个jar 文件包含Web 应用开发时，用到Spring 框架时所需的核心类，包括自动载入Web Application Context 特性的类、Struts 与JSF 集成类、文件上传的支持类、Filter 类和大量工具辅助类。 <br/>
外部依赖spring-context, Servlet API, (JSP API, JSTL, Commons FileUpload, COS)。</p>

<p>spring-webmvc.jar <br/>
这个jar 文件包含Spring MVC 框架相关的所有类。包括框架的Servlets，Web MVC框架，控制器和视图支持。当然，如果你的应用使用了独立的MVC 框架，则无需这个JAR 文件里的任何类。 <br/>
外部依赖spring-web, (spring-support，Tiles，iText，POI)。</p>

<p>Mybatis需要的jar，mybatis-spring1.2.1.jar用于spring整合mybatis框架 <br/>
<img src="http://img.blog.csdn.net/20161227172057659?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxNDQyNzM5MQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""/> <br/>
jstl需要的jar，主要开发中，SSH框架习惯用Struts2提供的标签，SSM框架习惯用JSTL <br/>
<img src="http://img.blog.csdn.net/20161227172319942?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxNDQyNzM5MQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""/> <br/>
Log4j需要的jar: <br/>
<img src="http://img.blog.csdn.net/20161227172342380?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxNDQyNzM5MQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""/> <br/>
另外加入：aspectjweaver.jar: <br/>
aspectjweaver.jar是spring集成AspectJ LTW织入器所需包</p>

<p>需要AOP动态代理的需要加入： <br/>
cglib-nodep.jar</p>

<p>阿里连接池框架加入:druid.jar</p>

<p>权限安全框架Shiro加入：shiro.jar</p>

<p>Json解析需要加入的jar有： <br/>
<img src="http://img.blog.csdn.net/20170102165034413?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxNDQyNzM5MQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""/></p>

<p><img src="http://img.blog.csdn.net/20170102165136997?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxNDQyNzM5MQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""/> <br/>
新建一个resource的资源文件 <br/>
配置mybatis和spring <br/>
ok，现在配置XML <br/>
mybatis.xml:</p>



<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hljs-doctype">&lt;!DOCTYPE configuration PUBLIC "-//mybatis.org//DTD Config 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-config.dtd"&gt;</span>
<span class="hljs-comment">&lt;!-- MyBatis的配置文件 --&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">configuration</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">settings</span>&gt;</span> 
        <span class="hljs-tag">&lt;<span class="hljs-title">setting</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"cacheEnabled"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"true"</span> /&gt;</span><span class="hljs-comment">&lt;!-- 全局映射器启用缓存 --&gt;</span>   
        <span class="hljs-tag">&lt;<span class="hljs-title">setting</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"useGeneratedKeys"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"true"</span> /&gt;</span> 
        <span class="hljs-tag">&lt;<span class="hljs-title">setting</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"defaultExecutorType"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"REUSE"</span> /&gt;</span> 
    <span class="hljs-tag">&lt;/<span class="hljs-title">settings</span>&gt;</span>
<span class="hljs-comment">&lt;!-- 这些根据项目需要进行配置 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">typeAliases</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">typeAlias</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"com.appms.entity.User"</span> <span class="hljs-attribute">alias</span>=<span class="hljs-value">"User"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">typeAlias</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"com.appms.entity.Role"</span> <span class="hljs-attribute">alias</span>=<span class="hljs-value">"Role"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">typeAlias</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"com.appms.entity.Menu"</span> <span class="hljs-attribute">alias</span>=<span class="hljs-value">"Menu"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">typeAlias</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"com.appms.entity.Member"</span> <span class="hljs-attribute">alias</span>=<span class="hljs-value">"Member"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">typeAlias</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"com.appms.entity.Knowledge"</span> <span class="hljs-attribute">alias</span>=<span class="hljs-value">"Knowledge"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">typeAlias</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"com.appms.entity.Produce"</span> <span class="hljs-attribute">alias</span>=<span class="hljs-value">"Produce"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">typeAlias</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"com.appms.entity.News"</span> <span class="hljs-attribute">alias</span>=<span class="hljs-value">"News"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">typeAlias</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"com.appms.entity.GroupClassify"</span> <span class="hljs-attribute">alias</span>=<span class="hljs-value">"GroupClassify"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">typeAlias</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"com.appms.entity.GroupPost"</span> <span class="hljs-attribute">alias</span>=<span class="hljs-value">"GroupPost"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">typeAlias</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"com.appms.entity.Period"</span> <span class="hljs-attribute">alias</span>=<span class="hljs-value">"Period"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">typeAlias</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"com.appms.entity.KLClassify"</span> <span class="hljs-attribute">alias</span>=<span class="hljs-value">"KLClassify"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">typeAlias</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"com.appms.entity.Knowledge"</span> <span class="hljs-attribute">alias</span>=<span class="hljs-value">"Knowledge"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">typeAlias</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"com.appms.entity.Video"</span> <span class="hljs-attribute">alias</span>=<span class="hljs-value">"Video"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">typeAlias</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"com.appms.entity.VideoClassify"</span> <span class="hljs-attribute">alias</span>=<span class="hljs-value">"VideoClassify"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">typeAlias</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"com.appms.entity.Retroaction"</span> <span class="hljs-attribute">alias</span>=<span class="hljs-value">"Retroaction"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">typeAlias</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"com.appms.entity.PageData"</span> <span class="hljs-attribute">alias</span>=<span class="hljs-value">"pd"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">typeAlias</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"com.appms.entity.Page"</span> <span class="hljs-attribute">alias</span>=<span class="hljs-value">"Page"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">typeAliases</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">plugins</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">plugin</span> <span class="hljs-attribute">interceptor</span>=<span class="hljs-value">"com.appms.plugin.PagePlugin"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"dialect"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"mysql"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"pageSqlId"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">".*listPage.*"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">plugin</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">plugins</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-title">configuration</span>&gt;</span>
</code></pre>

<p>SpringMVC的配置:</p>



<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">beans</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://www.springframework.org/schema/beans"</span>
    <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attribute">xmlns:mvc</span>=<span class="hljs-value">"http://www.springframework.org/schema/mvc"</span>
    <span class="hljs-attribute">xmlns:context</span>=<span class="hljs-value">"http://www.springframework.org/schema/context"</span>
    <span class="hljs-attribute">xsi:schemaLocation</span>=<span class="hljs-value">"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc.xsd  
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">mvc:annotation-driven</span>/&gt;</span>    
    <span class="hljs-tag">&lt;<span class="hljs-title">mvc:default-servlet-handler</span>/&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">context:component-scan</span> <span class="hljs-attribute">base-package</span>=<span class="hljs-value">"com.appms.controller"</span> /&gt;</span>

    <span class="hljs-comment">&lt;!-- 对静态资源文件的访问  restful--&gt;</span>     
    <span class="hljs-tag">&lt;<span class="hljs-title">mvc:resources</span> <span class="hljs-attribute">mapping</span>=<span class="hljs-value">"/assets/**"</span> <span class="hljs-attribute">location</span>=<span class="hljs-value">"/,/assets/"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">mvc:resources</span> <span class="hljs-attribute">mapping</span>=<span class="hljs-value">"/admin/**"</span> <span class="hljs-attribute">location</span>=<span class="hljs-value">"/,/admin/"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">mvc:resources</span> <span class="hljs-attribute">mapping</span>=<span class="hljs-value">"/source/**"</span> <span class="hljs-attribute">location</span>=<span class="hljs-value">"/,/source/"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">mvc:resources</span> <span class="hljs-attribute">mapping</span>=<span class="hljs-value">"/images/**"</span> <span class="hljs-attribute">location</span>=<span class="hljs-value">"/,/images/"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">mvc:resources</span> <span class="hljs-attribute">mapping</span>=<span class="hljs-value">"/music/**"</span> <span class="hljs-attribute">location</span>=<span class="hljs-value">"/,/music/"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">mvc:resources</span> <span class="hljs-attribute">mapping</span>=<span class="hljs-value">"/uploadFile/**"</span> <span class="hljs-attribute">location</span>=<span class="hljs-value">"/,/uploadFile/"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">mvc:resources</span> <span class="hljs-attribute">mapping</span>=<span class="hljs-value">"/plugins/**"</span> <span class="hljs-attribute">location</span>=<span class="hljs-value">"/,/plugins/"</span> /&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">mvc:resources</span> <span class="hljs-attribute">mapping</span>=<span class="hljs-value">"/uploadFiles/**"</span> <span class="hljs-attribute">location</span>=<span class="hljs-value">"/,/uploadFiles/"</span> /&gt;</span> 

    <span class="hljs-comment">&lt;!-- 访问拦截 
    &lt;mvc:interceptors&gt;
        &lt;mvc:interceptor&gt;
            &lt;mvc:mapping path="/**/**"/&gt;
            &lt;bean class="com.appweb.interceptor.LoginHandlerInterceptor"/&gt;
        &lt;/mvc:interceptor&gt;
    &lt;/mvc:interceptors&gt;
      --&gt;</span>  

    <span class="hljs-comment">&lt;!-- 配置SpringMVC的视图解析器 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"prefix"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"/WEB-INF/jsp/"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"suffix"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">".jsp"</span>/&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"multipartResolver"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.springframework.web.multipart.commons.CommonsMultipartResolver"</span> /&gt;</span>  

<span class="hljs-tag">&lt;/<span class="hljs-title">beans</span>&gt;</span></code></pre>

<p>Spring的配置:</p>



<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">beans</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://www.springframework.org/schema/beans"</span>
    <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span>
    <span class="hljs-attribute">xmlns:aop</span>=<span class="hljs-value">"http://www.springframework.org/schema/aop"</span> 
    <span class="hljs-attribute">xmlns:context</span>=<span class="hljs-value">"http://www.springframework.org/schema/context"</span>
    <span class="hljs-attribute">xmlns:tx</span>=<span class="hljs-value">"http://www.springframework.org/schema/tx"</span>
    <span class="hljs-attribute">xsi:schemaLocation</span>=<span class="hljs-value">"http://www.springframework.org/schema/beans 
                        http://www.springframework.org/schema/beans/spring-beans.xsd
                        http://www.springframework.org/schema/aop 
                        http://www.springframework.org/schema/aop/spring-aop.xsd
                        http://www.springframework.org/schema/context 
                        http://www.springframework.org/schema/context/spring-context.xsd
                        http://www.springframework.org/schema/tx 
                        http://www.springframework.org/schema/tx/spring-tx.xsd"</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- 启用注解 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">context:annotation-config</span> /&gt;</span>

    <span class="hljs-comment">&lt;!-- 启动组件扫描，排除@Controller组件，该组件由SpringMVC配置文件扫描 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">context:component-scan</span> <span class="hljs-attribute">base-package</span>=<span class="hljs-value">"com.appms"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">context:exclude-filter</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"annotation"</span>
            <span class="hljs-attribute">expression</span>=<span class="hljs-value">"org.springframework.stereotype.Controller"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">context:component-scan</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"transactionManager"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.springframework.jdbc.datasource.DataSourceTransactionManager"</span>&gt;</span>   
        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"dataSource"</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"dataSource"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"propertyConfigurer"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.springframework.beans.factory.config.PropertyPlaceholderConfigurer"</span>&gt;</span>  
        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"locations"</span>&gt;</span>  
            <span class="hljs-tag">&lt;<span class="hljs-title">list</span>&gt;</span>  
                 <span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>/WEB-INF/classes/dbconfig.properties<span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>  
            <span class="hljs-tag">&lt;/<span class="hljs-title">list</span>&gt;</span>  
        <span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>  
    <span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span> 

    <span class="hljs-comment">&lt;!-- 阿里 druid数据库连接池 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"dataSource"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"com.alibaba.druid.pool.DruidDataSource"</span> <span class="hljs-attribute">destroy-method</span>=<span class="hljs-value">"close"</span>&gt;</span>  
         <span class="hljs-comment">&lt;!-- 数据库基本信息配置 --&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"url"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${url}"</span> /&gt;</span>  
         <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"username"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${username}"</span> /&gt;</span>  
         <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"password"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${password}"</span> /&gt;</span>  
         <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"driverClassName"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${driverClassName}"</span> /&gt;</span>  
         <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"filters"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${filters}"</span> /&gt;</span>  
         <span class="hljs-comment">&lt;!-- 最大并发连接数 --&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"maxActive"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${maxActive}"</span> /&gt;</span>
         <span class="hljs-comment">&lt;!-- 初始化连接数量 --&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"initialSize"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${initialSize}"</span> /&gt;</span>
         <span class="hljs-comment">&lt;!-- 配置获取连接等待超时的时间 --&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"maxWait"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${maxWait}"</span> /&gt;</span>
         <span class="hljs-comment">&lt;!-- 最小空闲连接数 --&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"minIdle"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${minIdle}"</span> /&gt;</span>  
         <span class="hljs-comment">&lt;!-- 配置间隔多久才进行一次检测，检测需要关闭的空闲连接，单位是毫秒 --&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"timeBetweenEvictionRunsMillis"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${timeBetweenEvictionRunsMillis}"</span> /&gt;</span>
         <span class="hljs-comment">&lt;!-- 配置一个连接在池中最小生存的时间，单位是毫秒 --&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"minEvictableIdleTimeMillis"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${minEvictableIdleTimeMillis}"</span> /&gt;</span>  
         <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"validationQuery"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${validationQuery}"</span> /&gt;</span>  
         <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"testWhileIdle"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${testWhileIdle}"</span> /&gt;</span>  
         <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"testOnBorrow"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${testOnBorrow}"</span> /&gt;</span>  
         <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"testOnReturn"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${testOnReturn}"</span> /&gt;</span>  
         <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"maxOpenPreparedStatements"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${maxOpenPreparedStatements}"</span> /&gt;</span>
         <span class="hljs-comment">&lt;!-- 打开removeAbandoned功能 --&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"removeAbandoned"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${removeAbandoned}"</span> /&gt;</span>
         <span class="hljs-comment">&lt;!-- 1800秒，也就是30分钟 --&gt;</span>
         <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"removeAbandonedTimeout"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${removeAbandonedTimeout}"</span> /&gt;</span>
         <span class="hljs-comment">&lt;!-- 关闭abanded连接时输出错误日志 --&gt;</span>   
         <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"logAbandoned"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"${logAbandoned}"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span>  

    <span class="hljs-tag">&lt;<span class="hljs-title">tx:advice</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"txAdvice"</span> <span class="hljs-attribute">transaction-manager</span>=<span class="hljs-value">"transactionManager"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">tx:attributes</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">tx:method</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"delete*"</span> <span class="hljs-attribute">propagation</span>=<span class="hljs-value">"REQUIRED"</span> <span class="hljs-attribute">read-only</span>=<span class="hljs-value">"false"</span> 
                       <span class="hljs-attribute">rollback-for</span>=<span class="hljs-value">"java.lang.Exception"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">tx:method</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"insert*"</span> <span class="hljs-attribute">propagation</span>=<span class="hljs-value">"REQUIRED"</span> <span class="hljs-attribute">read-only</span>=<span class="hljs-value">"false"</span> 
                       <span class="hljs-attribute">rollback-for</span>=<span class="hljs-value">"java.lang.Exception"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">tx:method</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"update*"</span> <span class="hljs-attribute">propagation</span>=<span class="hljs-value">"REQUIRED"</span> <span class="hljs-attribute">read-only</span>=<span class="hljs-value">"false"</span> 
                       <span class="hljs-attribute">rollback-for</span>=<span class="hljs-value">"java.lang.Exception"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">tx:method</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"save*"</span> <span class="hljs-attribute">propagation</span>=<span class="hljs-value">"REQUIRED"</span> <span class="hljs-attribute">read-only</span>=<span class="hljs-value">"false"</span> 
                       <span class="hljs-attribute">rollback-for</span>=<span class="hljs-value">"java.lang.Exception"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">tx:attributes</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">tx:advice</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">aop:aspectj-autoproxy</span> <span class="hljs-attribute">proxy-target-class</span>=<span class="hljs-value">"true"</span>/&gt;</span>

    <span class="hljs-comment">&lt;!-- 事物处理 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">aop:config</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">aop:pointcut</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"pc"</span> <span class="hljs-attribute">expression</span>=<span class="hljs-value">"execution(* com.appms.service..*(..))"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">aop:advisor</span> <span class="hljs-attribute">pointcut-ref</span>=<span class="hljs-value">"pc"</span> <span class="hljs-attribute">advice-ref</span>=<span class="hljs-value">"txAdvice"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">aop:config</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- 配置mybatis --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"sqlSessionFactory"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.mybatis.spring.SqlSessionFactoryBean"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"dataSource"</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"dataSource"</span> /&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"configLocation"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"classpath:mybatis/mybatis-config.xml"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>
        <span class="hljs-comment">&lt;!-- mapper扫描 --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"mapperLocations"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"classpath:mybatis/*/*.xml"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"sqlSessionTemplate"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.mybatis.spring.SqlSessionTemplate"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">constructor-arg</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"sqlSessionFactory"</span> /&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span>

    <span class="hljs-comment">&lt;!--  Shiro start  --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"securityManager"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.apache.shiro.web.mgt.DefaultWebSecurityManager"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"realm"</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"ShiroRealm"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- 項目自定义的Realm --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"ShiroRealm"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"com.appms.shiro.ShiroRealm"</span> &gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span>

        <span class="hljs-comment">&lt;!-- Shiro Filter --&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">bean</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"shiroFilter"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"org.apache.shiro.spring.web.ShiroFilterFactoryBean"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"securityManager"</span> <span class="hljs-attribute">ref</span>=<span class="hljs-value">"securityManager"</span> /&gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"loginUrl"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"/"</span> /&gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"successUrl"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"/main/index"</span> /&gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"unauthorizedUrl"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"/login_toLogin"</span> /&gt;</span>

            <span class="hljs-tag">&lt;<span class="hljs-title">property</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"filterChainDefinitions"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">value</span>&gt;</span>
                /source/**                  = anon
                /images/**                  = anon
                /music/**                   = anon
                /uploadFiles/**             = anon
                /plugins/**                 = anon
                /uploadFiles/**             = anon
                /code.do                    = anon
                /login_login                = anon
                /**                         = authc
                <span class="hljs-tag">&lt;/<span class="hljs-title">value</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">property</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">bean</span>&gt;</span>
    <span class="hljs-comment">&lt;!--  Shiro end  --&gt;</span>


<span class="hljs-tag">&lt;/<span class="hljs-title">beans</span>&gt;</span>
</code></pre>

<p>jsbc和log4j的配置</p>



<pre class="prettyprint"><code class=" hljs avrasm"><span class="hljs-label">url:</span>jdbc:mysql://<span class="hljs-number">127.0</span><span class="hljs-number">.0</span><span class="hljs-number">.1</span>:<span class="hljs-number">3306</span>/db_app?autoReconnect=true&amp;useUnicode=true&amp;characterEncoding=utf8&amp;characterSetResults=utf8 
<span class="hljs-label">driverClassName:</span><span class="hljs-keyword">com</span><span class="hljs-preprocessor">.mysql</span><span class="hljs-preprocessor">.jdbc</span><span class="hljs-preprocessor">.Driver</span>
<span class="hljs-label">username:</span>root
<span class="hljs-label">password:</span>root

<span class="hljs-label">filters:</span>stat

<span class="hljs-label">maxActive:</span><span class="hljs-number">20</span>
<span class="hljs-label">initialSize:</span><span class="hljs-number">1</span>
<span class="hljs-label">maxWait:</span><span class="hljs-number">60000</span>
<span class="hljs-label">minIdle:</span><span class="hljs-number">10</span>
<span class="hljs-label">maxIdle:</span><span class="hljs-number">15</span>

<span class="hljs-label">timeBetweenEvictionRunsMillis:</span><span class="hljs-number">60000</span>
<span class="hljs-label">minEvictableIdleTimeMillis:</span><span class="hljs-number">300000</span>

<span class="hljs-label">validationQuery:</span>SELECT <span class="hljs-string">'x'</span>
<span class="hljs-label">testWhileIdle:</span>true
<span class="hljs-label">testOnBorrow:</span>false
<span class="hljs-label">testOnReturn:</span>false

<span class="hljs-label">maxOpenPreparedStatements:</span><span class="hljs-number">20</span>
<span class="hljs-label">removeAbandoned:</span>true
<span class="hljs-label">removeAbandonedTimeout:</span><span class="hljs-number">1800</span>
<span class="hljs-label">logAbandoned:</span>true
</code></pre>

<p>log4j配置</p>



<pre class="prettyprint"><code class=" hljs avrasm"><span class="hljs-preprocessor">### set log levels ### </span>
log4j<span class="hljs-preprocessor">.rootLogger</span> = info , Console , D
<span class="hljs-preprocessor">#Console</span>
log4j<span class="hljs-preprocessor">.appender</span><span class="hljs-preprocessor">.Console</span>=org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.log</span>4j<span class="hljs-preprocessor">.ConsoleAppender</span>
log4j<span class="hljs-preprocessor">.appender</span><span class="hljs-preprocessor">.Console</span><span class="hljs-preprocessor">.layout</span>=org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.log</span>4j<span class="hljs-preprocessor">.PatternLayout</span>
log4j<span class="hljs-preprocessor">.appender</span><span class="hljs-preprocessor">.Console</span><span class="hljs-preprocessor">.layout</span><span class="hljs-preprocessor">.ConversionPattern</span>=%d [%t] %-<span class="hljs-number">5</span>p [%c] - %m%n
log4j<span class="hljs-preprocessor">.logger</span><span class="hljs-preprocessor">.java</span><span class="hljs-preprocessor">.sql</span><span class="hljs-preprocessor">.ResultSet</span>=INFO
log4j<span class="hljs-preprocessor">.logger</span><span class="hljs-preprocessor">.org</span><span class="hljs-preprocessor">.apache</span>=INFO
log4j<span class="hljs-preprocessor">.logger</span><span class="hljs-preprocessor">.java</span><span class="hljs-preprocessor">.sql</span><span class="hljs-preprocessor">.Connection</span>=INFO
log4j<span class="hljs-preprocessor">.logger</span><span class="hljs-preprocessor">.java</span><span class="hljs-preprocessor">.sql</span><span class="hljs-preprocessor">.Statement</span>=INFO
log4j<span class="hljs-preprocessor">.logger</span><span class="hljs-preprocessor">.java</span><span class="hljs-preprocessor">.sql</span><span class="hljs-preprocessor">.PreparedStatement</span>=INFO
<span class="hljs-preprocessor">#output2file</span>
log4j<span class="hljs-preprocessor">.appender</span><span class="hljs-preprocessor">.D</span> = org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.log</span>4j<span class="hljs-preprocessor">.DailyRollingFileAppender</span> 
log4j<span class="hljs-preprocessor">.appender</span><span class="hljs-preprocessor">.D</span><span class="hljs-preprocessor">.File</span> = D\:/logs/log<span class="hljs-preprocessor">.log</span> 
log4j<span class="hljs-preprocessor">.appender</span><span class="hljs-preprocessor">.D</span><span class="hljs-preprocessor">.Append</span> = true 
log4j<span class="hljs-preprocessor">.appender</span><span class="hljs-preprocessor">.D</span><span class="hljs-preprocessor">.Threshold</span> = INFO \<span class="hljs-preprocessor">#\# \u8F93\u51FAinfo\u7EA7\u522B\u4EE5\u4E0A\u7684\u65E5\u5FD7 </span>
log4j<span class="hljs-preprocessor">.appender</span><span class="hljs-preprocessor">.D</span><span class="hljs-preprocessor">.layout</span> = org<span class="hljs-preprocessor">.apache</span><span class="hljs-preprocessor">.log</span>4j<span class="hljs-preprocessor">.PatternLayout</span> 
log4j<span class="hljs-preprocessor">.appender</span><span class="hljs-preprocessor">.D</span><span class="hljs-preprocessor">.layout</span><span class="hljs-preprocessor">.ConversionPattern</span> = %-d{yyyy-MM-dd HH\:mm\:ss} [ %t\:%r ] - [ %p ] %m%n 

</code></pre>

<p>web.xml</p>



<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">web-app</span> <span class="hljs-attribute">xmlns:xsi</span>=<span class="hljs-value">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="hljs-attribute">xmlns</span>=<span class="hljs-value">"http://java.sun.com/xml/ns/javaee"</span> <span class="hljs-attribute">xsi:schemaLocation</span>=<span class="hljs-value">"http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"WebApp_ID"</span> <span class="hljs-attribute">version</span>=<span class="hljs-value">"2.5"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">display-name</span>&gt;</span>AppManagerSystem<span class="hljs-tag">&lt;/<span class="hljs-title">display-name</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">welcome-file-list</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">welcome-file</span>&gt;</span>index.jsp<span class="hljs-tag">&lt;/<span class="hljs-title">welcome-file</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">welcome-file-list</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">context-param</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">param-name</span>&gt;</span>contextConfigLocation<span class="hljs-tag">&lt;/<span class="hljs-title">param-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">param-value</span>&gt;</span>classpath:spring/ApplicationContext.xml<span class="hljs-tag">&lt;/<span class="hljs-title">param-value</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">context-param</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">context-param</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">param-name</span>&gt;</span>log4jConfigLocation<span class="hljs-tag">&lt;/<span class="hljs-title">param-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">param-value</span>&gt;</span>classpath:log4j.properties<span class="hljs-tag">&lt;/<span class="hljs-title">param-value</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">context-param</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">filter</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">filter-name</span>&gt;</span>encodingFilter<span class="hljs-tag">&lt;/<span class="hljs-title">filter-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="hljs-tag">&lt;/<span class="hljs-title">filter-class</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">init-param</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">param-name</span>&gt;</span>encoding<span class="hljs-tag">&lt;/<span class="hljs-title">param-name</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">param-value</span>&gt;</span>utf-8<span class="hljs-tag">&lt;/<span class="hljs-title">param-value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">init-param</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">filter</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">filter-mapping</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">filter-name</span>&gt;</span>encodingFilter<span class="hljs-tag">&lt;/<span class="hljs-title">filter-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-title">url-pattern</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">filter-mapping</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- 连接池 启用Web监控统计功能 --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">filter</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">filter-name</span>&gt;</span>DruidWebStatFilter<span class="hljs-tag">&lt;/<span class="hljs-title">filter-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">filter-class</span>&gt;</span>com.alibaba.druid.support.http.WebStatFilter<span class="hljs-tag">&lt;/<span class="hljs-title">filter-class</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">init-param</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">param-name</span>&gt;</span>exclusions<span class="hljs-tag">&lt;/<span class="hljs-title">param-name</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">param-value</span>&gt;</span>*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*<span class="hljs-tag">&lt;/<span class="hljs-title">param-value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">init-param</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">filter</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">filter-mapping</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">filter-name</span>&gt;</span>DruidWebStatFilter<span class="hljs-tag">&lt;/<span class="hljs-title">filter-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-title">url-pattern</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">filter-mapping</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">servlet</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">servlet-name</span>&gt;</span>DruidStatView<span class="hljs-tag">&lt;/<span class="hljs-title">servlet-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">servlet-class</span>&gt;</span>com.alibaba.druid.support.http.StatViewServlet<span class="hljs-tag">&lt;/<span class="hljs-title">servlet-class</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">servlet</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">servlet-mapping</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">servlet-name</span>&gt;</span>DruidStatView<span class="hljs-tag">&lt;/<span class="hljs-title">servlet-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">url-pattern</span>&gt;</span>/druid/*<span class="hljs-tag">&lt;/<span class="hljs-title">url-pattern</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">servlet-mapping</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">filter</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">filter-name</span>&gt;</span>loginFilter<span class="hljs-tag">&lt;/<span class="hljs-title">filter-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">filter-class</span>&gt;</span>com.appms.filter.LoginFilter<span class="hljs-tag">&lt;/<span class="hljs-title">filter-class</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">filter</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">filter</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">filter-name</span>&gt;</span>startFilter<span class="hljs-tag">&lt;/<span class="hljs-title">filter-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">filter-class</span>&gt;</span>com.appms.filter.StartFilter<span class="hljs-tag">&lt;/<span class="hljs-title">filter-class</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">filter</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">listener</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">listener-class</span>&gt;</span>org.springframework.web.util.Log4jConfigListener<span class="hljs-tag">&lt;/<span class="hljs-title">listener-class</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">listener</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">listener</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">listener-class</span>&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="hljs-tag">&lt;/<span class="hljs-title">listener-class</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">listener</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">servlet</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">servlet-name</span>&gt;</span>springMvc<span class="hljs-tag">&lt;/<span class="hljs-title">servlet-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="hljs-tag">&lt;/<span class="hljs-title">servlet-class</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">init-param</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">param-name</span>&gt;</span>contextConfigLocation<span class="hljs-tag">&lt;/<span class="hljs-title">param-name</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">param-value</span>&gt;</span>classpath:spring/ApplicationContext-mvc.xml<span class="hljs-tag">&lt;/<span class="hljs-title">param-value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">init-param</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">load-on-startup</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">load-on-startup</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">servlet</span>&gt;</span>


  <span class="hljs-tag">&lt;<span class="hljs-title">servlet-mapping</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">servlet-name</span>&gt;</span>springMvc<span class="hljs-tag">&lt;/<span class="hljs-title">servlet-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">url-pattern</span>&gt;</span>/<span class="hljs-tag">&lt;/<span class="hljs-title">url-pattern</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">servlet-mapping</span>&gt;</span>

  <span class="hljs-tag">&lt;<span class="hljs-title">filter</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">filter-name</span>&gt;</span>shiroFilter<span class="hljs-tag">&lt;/<span class="hljs-title">filter-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">filter-class</span>&gt;</span>
            org.springframework.web.filter.DelegatingFilterProxy
        <span class="hljs-tag">&lt;/<span class="hljs-title">filter-class</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">init-param</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">param-name</span>&gt;</span>targetFilterLifecycle<span class="hljs-tag">&lt;/<span class="hljs-title">param-name</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">param-value</span>&gt;</span>true<span class="hljs-tag">&lt;/<span class="hljs-title">param-value</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">init-param</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">filter</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">filter-mapping</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">filter-name</span>&gt;</span>shiroFilter<span class="hljs-tag">&lt;/<span class="hljs-title">filter-name</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">url-pattern</span>&gt;</span>/*<span class="hljs-tag">&lt;/<span class="hljs-title">url-pattern</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">filter-mapping</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">session-config</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">session-timeout</span>&gt;</span>600<span class="hljs-tag">&lt;/<span class="hljs-title">session-timeout</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">session-config</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">web-app</span>&gt;</span></code></pre>

<p>现在以Dao代理的方式实习数据获取</p>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> com.appms.dao;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">DAO</span> {</span>

    <span class="hljs-javadoc">/**
     * 保存对象
     *<span class="hljs-javadoctag"> @param</span> str
     *<span class="hljs-javadoctag"> @param</span> obj
     *<span class="hljs-javadoctag"> @return</span>
     *<span class="hljs-javadoctag"> @throws</span> Exception
     */</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title">save</span>(String str, Object obj) <span class="hljs-keyword">throws</span> Exception;

    <span class="hljs-javadoc">/**
     * 修改对象
     *<span class="hljs-javadoctag"> @param</span> str
     *<span class="hljs-javadoctag"> @param</span> obj
     *<span class="hljs-javadoctag"> @return</span>
     *<span class="hljs-javadoctag"> @throws</span> Exception
     */</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title">update</span>(String str, Object obj) <span class="hljs-keyword">throws</span> Exception;

    <span class="hljs-javadoc">/**
     * 删除对象 
     *<span class="hljs-javadoctag"> @param</span> str
     *<span class="hljs-javadoctag"> @param</span> obj
     *<span class="hljs-javadoctag"> @return</span>
     *<span class="hljs-javadoctag"> @throws</span> Exception
     */</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title">delete</span>(String str, Object obj) <span class="hljs-keyword">throws</span> Exception;

    <span class="hljs-javadoc">/**
     * 查找对象
     *<span class="hljs-javadoctag"> @param</span> str
     *<span class="hljs-javadoctag"> @param</span> obj
     *<span class="hljs-javadoctag"> @return</span>
     *<span class="hljs-javadoctag"> @throws</span> Exception
     */</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title">findForObject</span>(String str, Object obj) <span class="hljs-keyword">throws</span> Exception;

    <span class="hljs-javadoc">/**
     * 查找对象
     *<span class="hljs-javadoctag"> @param</span> str
     *<span class="hljs-javadoctag"> @param</span> obj
     *<span class="hljs-javadoctag"> @return</span>
     *<span class="hljs-javadoctag"> @throws</span> Exception
     */</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title">findForList</span>(String str, Object obj) <span class="hljs-keyword">throws</span> Exception;

    <span class="hljs-javadoc">/**
     * 查找对象封装成Map
     *<span class="hljs-javadoctag"> @param</span> s
     *<span class="hljs-javadoctag"> @param</span> obj
     *<span class="hljs-javadoctag"> @return</span>
     *<span class="hljs-javadoctag"> @throws</span> Exception
     */</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title">findForMap</span>(String sql, Object obj, String key , String value) <span class="hljs-keyword">throws</span> Exception;

}
</code></pre>

<p>DaoSupport.java</p>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> com.appms.dao;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">import</span> javax.annotation.Resource;

<span class="hljs-keyword">import</span> org.apache.ibatis.session.ExecutorType;
<span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSession;
<span class="hljs-keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;
<span class="hljs-keyword">import</span> org.mybatis.spring.SqlSessionTemplate;
<span class="hljs-keyword">import</span> org.springframework.stereotype.Repository;

<span class="hljs-annotation">@Repository</span>(<span class="hljs-string">"daoSupport"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DaoSupport</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">DAO</span> {</span>

    <span class="hljs-annotation">@Resource</span>(name = <span class="hljs-string">"sqlSessionTemplate"</span>)
    <span class="hljs-keyword">private</span> SqlSessionTemplate sqlSessionTemplate;

    <span class="hljs-javadoc">/**
     * 保存对象
     *<span class="hljs-javadoctag"> @param</span> str
     *<span class="hljs-javadoctag"> @param</span> obj
     *<span class="hljs-javadoctag"> @return</span>
     *<span class="hljs-javadoctag"> @throws</span> Exception
     */</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title">save</span>(String str, Object obj) <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-keyword">return</span> sqlSessionTemplate.insert(str, obj);
    }

    <span class="hljs-javadoc">/**
     * 批量更新
     *<span class="hljs-javadoctag"> @param</span> str
     *<span class="hljs-javadoctag"> @param</span> obj
     *<span class="hljs-javadoctag"> @return</span>
     *<span class="hljs-javadoctag"> @throws</span> Exception
     */</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title">batchSave</span>(String str, List objs )<span class="hljs-keyword">throws</span> Exception{
        <span class="hljs-keyword">return</span> sqlSessionTemplate.insert(str, objs);
    }

    <span class="hljs-javadoc">/**
     * 修改对象
     *<span class="hljs-javadoctag"> @param</span> str
     *<span class="hljs-javadoctag"> @param</span> obj
     *<span class="hljs-javadoctag"> @return</span>
     *<span class="hljs-javadoctag"> @throws</span> Exception
     */</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title">update</span>(String str, Object obj) <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-keyword">return</span> sqlSessionTemplate.update(str, obj);
    }

    <span class="hljs-javadoc">/**
     * 批量更新
     *<span class="hljs-javadoctag"> @param</span> str
     *<span class="hljs-javadoctag"> @param</span> obj
     *<span class="hljs-javadoctag"> @return</span>
     *<span class="hljs-javadoctag"> @throws</span> Exception
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">batchUpdate</span>(String str, List objs )<span class="hljs-keyword">throws</span> Exception{
        SqlSessionFactory sqlSessionFactory = sqlSessionTemplate.getSqlSessionFactory();
        <span class="hljs-comment">//批量执行器</span>
        SqlSession sqlSession = sqlSessionFactory.openSession(ExecutorType.BATCH,<span class="hljs-keyword">false</span>);
        <span class="hljs-keyword">try</span>{
            <span class="hljs-keyword">if</span>(objs!=<span class="hljs-keyword">null</span>){
                <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>,size=objs.size();i&lt;size;i++){
                    sqlSession.update(str, objs.get(i));
                }
                sqlSession.flushStatements();
                sqlSession.commit();
                sqlSession.clearCache();
            }
        }<span class="hljs-keyword">finally</span>{
            sqlSession.close();
        }
    }

    <span class="hljs-javadoc">/**
     * 批量更新
     *<span class="hljs-javadoctag"> @param</span> str
     *<span class="hljs-javadoctag"> @param</span> obj
     *<span class="hljs-javadoctag"> @return</span>
     *<span class="hljs-javadoctag"> @throws</span> Exception
     */</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title">batchDelete</span>(String str, List objs )<span class="hljs-keyword">throws</span> Exception{
        <span class="hljs-keyword">return</span> sqlSessionTemplate.delete(str, objs);
    }

    <span class="hljs-javadoc">/**
     * 删除对象 
     *<span class="hljs-javadoctag"> @param</span> str
     *<span class="hljs-javadoctag"> @param</span> obj
     *<span class="hljs-javadoctag"> @return</span>
     *<span class="hljs-javadoctag"> @throws</span> Exception
     */</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title">delete</span>(String str, Object obj) <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-keyword">return</span> sqlSessionTemplate.delete(str, obj);
    }

    <span class="hljs-javadoc">/**
     * 查找对象
     *<span class="hljs-javadoctag"> @param</span> str
     *<span class="hljs-javadoctag"> @param</span> obj
     *<span class="hljs-javadoctag"> @return</span>
     *<span class="hljs-javadoctag"> @throws</span> Exception
     */</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title">findForObject</span>(String str, Object obj) <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-keyword">return</span> sqlSessionTemplate.selectOne(str, obj);
    }

    <span class="hljs-javadoc">/**
     * 查找对象
     *<span class="hljs-javadoctag"> @param</span> str
     *<span class="hljs-javadoctag"> @param</span> obj
     *<span class="hljs-javadoctag"> @return</span>
     *<span class="hljs-javadoctag"> @throws</span> Exception
     */</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title">findForList</span>(String str, Object obj) <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-keyword">return</span> sqlSessionTemplate.selectList(str, obj);
    }

    <span class="hljs-keyword">public</span> Object <span class="hljs-title">findForMap</span>(String str, Object obj, String key, String value) <span class="hljs-keyword">throws</span> Exception {
        <span class="hljs-keyword">return</span> sqlSessionTemplate.selectMap(str, obj, key);
    }

}</code></pre>

<p>写个实体信息类：</p>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> com.appms.entity;

<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Member</span> {</span>

    <span class="hljs-javadoc">/**
     * 会员账号
     */</span>
    <span class="hljs-keyword">private</span> String memberID;

    <span class="hljs-javadoc">/**
     * 会员密码
     */</span>
    <span class="hljs-keyword">private</span> String password;

    <span class="hljs-javadoc">/**
     * 会员级别
     */</span>
    <span class="hljs-keyword">private</span> String rank;

    <span class="hljs-javadoc">/**
     * 会员积分
     */</span>
    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> credit;

    <span class="hljs-javadoc">/**
     * 会员手机号
     */</span>
    <span class="hljs-keyword">private</span> String phone;

    <span class="hljs-javadoc">/**
     * 会员皮肤
     */</span>
    <span class="hljs-keyword">private</span> String imgPath;

    <span class="hljs-javadoc">/**
     * 邮箱
     */</span>
    <span class="hljs-keyword">private</span> String email;

    <span class="hljs-keyword">private</span> List&lt;GroupPost&gt; postes;

    <span class="hljs-keyword">private</span> List&lt;Retroaction&gt; retroaction;

    <span class="hljs-keyword">public</span> String <span class="hljs-title">getMemberID</span>() {
        <span class="hljs-keyword">return</span> memberID;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setMemberID</span>(String memberID) {
        <span class="hljs-keyword">this</span>.memberID = memberID;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title">getPassword</span>() {
        <span class="hljs-keyword">return</span> password;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setPassword</span>(String password) {
        <span class="hljs-keyword">this</span>.password = password;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title">getRank</span>() {
        <span class="hljs-keyword">return</span> rank;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setRank</span>(String rank) {
        <span class="hljs-keyword">this</span>.rank = rank;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getCredit</span>() {
        <span class="hljs-keyword">return</span> credit;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setCredit</span>(<span class="hljs-keyword">int</span> credit) {
        <span class="hljs-keyword">this</span>.credit = credit;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title">getPhone</span>() {
        <span class="hljs-keyword">return</span> phone;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setPhone</span>(String phone) {
        <span class="hljs-keyword">this</span>.phone = phone;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title">getImgPath</span>() {
        <span class="hljs-keyword">return</span> imgPath;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setImgPath</span>(String imgPath) {
        <span class="hljs-keyword">this</span>.imgPath = imgPath;
    }

    <span class="hljs-keyword">public</span> String <span class="hljs-title">getEmail</span>() {
        <span class="hljs-keyword">return</span> email;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setEmail</span>(String email) {
        <span class="hljs-keyword">this</span>.email = email;
    }

    <span class="hljs-keyword">public</span> List&lt;GroupPost&gt; <span class="hljs-title">getPostes</span>() {
        <span class="hljs-keyword">return</span> postes;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setPostes</span>(List&lt;GroupPost&gt; postes) {
        <span class="hljs-keyword">this</span>.postes = postes;
    }

    <span class="hljs-keyword">public</span> List&lt;Retroaction&gt; <span class="hljs-title">getRetroaction</span>() {
        <span class="hljs-keyword">return</span> retroaction;
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setRetroaction</span>(List&lt;Retroaction&gt; retroaction) {
        <span class="hljs-keyword">this</span>.retroaction = retroaction;
    }

}
</code></pre>

<p>其Mapper代码：</p>



<pre class="prettyprint"><code class=" hljs xml"><span class="hljs-pi">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span>
<span class="hljs-doctype">&lt;!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd"&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">mapper</span> <span class="hljs-attribute">namespace</span>=<span class="hljs-value">"MemberMapper"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">resultMap</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"Member"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"memberResultMap"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">id</span> <span class="hljs-attribute">column</span>=<span class="hljs-value">"memberID"</span> <span class="hljs-attribute">property</span>=<span class="hljs-value">"memberID"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">result</span> <span class="hljs-attribute">column</span>=<span class="hljs-value">"password"</span> <span class="hljs-attribute">property</span>=<span class="hljs-value">"password"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">result</span> <span class="hljs-attribute">column</span>=<span class="hljs-value">"rank"</span> <span class="hljs-attribute">property</span>=<span class="hljs-value">"rank"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">result</span> <span class="hljs-attribute">column</span> =<span class="hljs-value">"credit"</span> <span class="hljs-attribute">property</span>=<span class="hljs-value">"credit"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">result</span> <span class="hljs-attribute">column</span>=<span class="hljs-value">"phone"</span> <span class="hljs-attribute">property</span>=<span class="hljs-value">"phone"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">result</span> <span class="hljs-attribute">column</span>=<span class="hljs-value">"imgPath"</span> <span class="hljs-attribute">property</span>=<span class="hljs-value">"imgPath"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">result</span> <span class="hljs-attribute">column</span>=<span class="hljs-value">"email"</span> <span class="hljs-attribute">property</span>=<span class="hljs-value">"email"</span>/&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">collection</span> <span class="hljs-attribute">property</span>=<span class="hljs-value">"postes"</span> <span class="hljs-attribute">ofType</span>=<span class="hljs-value">"GroupPost"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">id</span> <span class="hljs-attribute">column</span>=<span class="hljs-value">"postID"</span> <span class="hljs-attribute">property</span>=<span class="hljs-value">"postID"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">result</span> <span class="hljs-attribute">column</span>=<span class="hljs-value">"postTitle"</span> <span class="hljs-attribute">property</span>=<span class="hljs-value">"postTitle"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">result</span> <span class="hljs-attribute">column</span>=<span class="hljs-value">"postContent"</span> <span class="hljs-attribute">property</span>=<span class="hljs-value">"postContent"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">result</span> <span class="hljs-attribute">column</span>=<span class="hljs-value">"likeAmount"</span> <span class="hljs-attribute">property</span>=<span class="hljs-value">"likeAmount"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">result</span> <span class="hljs-attribute">column</span>=<span class="hljs-value">"commentAmount"</span> <span class="hljs-attribute">property</span>=<span class="hljs-value">"commentAmount"</span>/&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">result</span> <span class="hljs-attribute">column</span>=<span class="hljs-value">"commitTime"</span> <span class="hljs-attribute">property</span>=<span class="hljs-value">"commitTime"</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">collection</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">collection</span> <span class="hljs-attribute">property</span>=<span class="hljs-value">"retroaction"</span> <span class="hljs-attribute">ofType</span>=<span class="hljs-value">"Retroaction"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">id</span> <span class="hljs-attribute">column</span>=<span class="hljs-value">"rID"</span> <span class="hljs-attribute">property</span>=<span class="hljs-value">"rID"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">result</span> <span class="hljs-attribute">column</span>=<span class="hljs-value">"content"</span> <span class="hljs-attribute">property</span>=<span class="hljs-value">"content"</span> /&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">result</span> <span class="hljs-attribute">column</span>=<span class="hljs-value">"commitTime"</span> <span class="hljs-attribute">property</span>=<span class="hljs-value">"commitTime"</span> /&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">collection</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">resultMap</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- 修改 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">update</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"editM"</span> <span class="hljs-attribute">parameterType</span>=<span class="hljs-value">"pd"</span> <span class="hljs-attribute">flushCache</span>=<span class="hljs-value">"false"</span>&gt;</span>
        update tb_members
            set memberID            = #{memberID},
                password            = #{password},
                rank                = #{rank},
                credit              = #{credit},
                phone               = #{phone}
        where
            memberID = #{memberID}
    <span class="hljs-tag">&lt;/<span class="hljs-title">update</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- 通过会员账号获取数据 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">select</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"findByMId"</span> <span class="hljs-attribute">parameterType</span>=<span class="hljs-value">"pd"</span> <span class="hljs-attribute">resultType</span>=<span class="hljs-value">"pd"</span> <span class="hljs-attribute">useCache</span>=<span class="hljs-value">"false"</span>&gt;</span>
        select
            p.memberID,
            p.password,
            p.rank,
            p.credit,
            p.phone,
            p.imgPath
        from
            tb_members p
        where
            memberID = #{memberID}
    <span class="hljs-tag">&lt;/<span class="hljs-title">select</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- 删除会员信息 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">delete</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"deleteM"</span> <span class="hljs-attribute">parameterType</span>=<span class="hljs-value">"String"</span> <span class="hljs-attribute">flushCache</span>=<span class="hljs-value">"false"</span>&gt;</span>
        delete from tb_members
        where 
        memberID = #{memberID}
    <span class="hljs-tag">&lt;/<span class="hljs-title">delete</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- 批量删除会员信息 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">delete</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"deleteAllM"</span> <span class="hljs-attribute">parameterType</span>=<span class="hljs-value">"String"</span> <span class="hljs-attribute">flushCache</span>=<span class="hljs-value">"false"</span>&gt;</span>
        delete from tb_members
        where memberID in
        <span class="hljs-tag">&lt;<span class="hljs-title">foreach</span> <span class="hljs-attribute">item</span>=<span class="hljs-value">"item"</span> <span class="hljs-attribute">index</span>=<span class="hljs-value">"index"</span> <span class="hljs-attribute">collection</span>=<span class="hljs-value">"array"</span> <span class="hljs-attribute">open</span>=<span class="hljs-value">"("</span> <span class="hljs-attribute">separator</span>=<span class="hljs-value">","</span> <span class="hljs-attribute">close</span>=<span class="hljs-value">")"</span>&gt;</span>
            #{item}
        <span class="hljs-tag">&lt;/<span class="hljs-title">foreach</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">delete</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- 用户信息列表(全部) --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">select</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"memberListPage"</span> <span class="hljs-attribute">parameterType</span>=<span class="hljs-value">"page"</span> <span class="hljs-attribute">resultType</span>=<span class="hljs-value">"pd"</span> <span class="hljs-attribute">useCache</span>=<span class="hljs-value">"false"</span>&gt;</span>
        select m.memberID,
               m.password,
               m.rank,
               m.credit,
               m.phone,
               m.imgPath
        from tb_members m
    <span class="hljs-tag">&lt;/<span class="hljs-title">select</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- 用户信息列表 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">select</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"memberList"</span> <span class="hljs-attribute">parameterType</span>=<span class="hljs-value">"pd"</span> <span class="hljs-attribute">resultType</span>=<span class="hljs-value">"pd"</span> <span class="hljs-attribute">useCache</span>=<span class="hljs-value">"false"</span>&gt;</span>
        select m.memberID,
               m.password,
               m.rank,
               m.credit,
               m.phone
        from tb_members m
    <span class="hljs-tag">&lt;/<span class="hljs-title">select</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- 按月统计注册用户数量 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">select</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"queryCount"</span> <span class="hljs-attribute">parameterType</span>=<span class="hljs-value">"String"</span> <span class="hljs-attribute">resultType</span>=<span class="hljs-value">"Long"</span>&gt;</span>
        select year(regTime),
               count(*) 
        from tb_member group by year(regTime) 
    <span class="hljs-tag">&lt;/<span class="hljs-title">select</span>&gt;</span>

    <span class="hljs-comment">&lt;!-- 搜索会员信息 --&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">select</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"queryMemberInfo"</span> <span class="hljs-attribute">parameterType</span>=<span class="hljs-value">"pd"</span> <span class="hljs-attribute">resultType</span>=<span class="hljs-value">"pd"</span> <span class="hljs-attribute">useCache</span>=<span class="hljs-value">"false"</span>&gt;</span>
        select m.memberID,
               m.password,
               m.rank,
               m.phone,
               m.imgPath
        from tb_members m 
        where m.memberID like "%"#{keyword}"%"
    <span class="hljs-tag">&lt;/<span class="hljs-title">select</span>&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-title">mapper</span>&gt;</span></code></pre>

<p>写个BaseController：</p>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> com.appms.base;


<span class="hljs-keyword">import</span> javax.servlet.http.HttpServletRequest;

<span class="hljs-keyword">import</span> org.springframework.web.context.request.RequestContextHolder;
<span class="hljs-keyword">import</span> org.springframework.web.context.request.ServletRequestAttributes;
<span class="hljs-keyword">import</span> org.springframework.web.servlet.ModelAndView;

<span class="hljs-keyword">import</span> com.appms.entity.Page;
<span class="hljs-keyword">import</span> com.appms.entity.PageData;
<span class="hljs-keyword">import</span> com.appms.logger.Logger;
<span class="hljs-keyword">import</span> com.appms.utils.UuidUtil;

<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">BaseController</span> {</span>

    <span class="hljs-keyword">protected</span> Logger logger = Logger.getLogger(<span class="hljs-keyword">this</span>.getClass());

    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">long</span> serialVersionUID = <span class="hljs-number">6357869213649815390</span>L;

    <span class="hljs-javadoc">/**
     * 得到PageData
     */</span>
    <span class="hljs-keyword">public</span> PageData <span class="hljs-title">getPageData</span>(){
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> PageData(<span class="hljs-keyword">this</span>.getRequest());
    }

    <span class="hljs-javadoc">/**
     * 得到ModelAndView
     */</span>
    <span class="hljs-keyword">public</span> ModelAndView <span class="hljs-title">getModelAndView</span>(){
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ModelAndView();
    }

    <span class="hljs-javadoc">/**
     * 得到request对象
     */</span>
    <span class="hljs-keyword">public</span> HttpServletRequest <span class="hljs-title">getRequest</span>() {
        HttpServletRequest request = ((ServletRequestAttributes)RequestContextHolder.getRequestAttributes()).getRequest();

        <span class="hljs-keyword">return</span> request;
    }

    <span class="hljs-javadoc">/**
     * 得到32位的uuid
     *<span class="hljs-javadoctag"> @return</span>
     */</span>
    <span class="hljs-keyword">public</span> String <span class="hljs-title">get32UUID</span>(){

        <span class="hljs-keyword">return</span> UuidUtil.get32UUID();
    }

    <span class="hljs-javadoc">/**
     * 得到分页列表的信息 
     */</span>
    <span class="hljs-keyword">public</span> Page <span class="hljs-title">getPage</span>(){
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Page();
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">logBefore</span>(Logger logger, String interfaceName){
        logger.info(<span class="hljs-string">""</span>);
        logger.info(<span class="hljs-string">"start"</span>);
        logger.info(interfaceName);
    }

    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">logAfter</span>(Logger logger){
        logger.info(<span class="hljs-string">"end"</span>);
        logger.info(<span class="hljs-string">""</span>);
    }

}
</code></pre>

<p>业务层代码Service:</p>

<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> com.appms.service.member;

<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.List;

<span class="hljs-keyword">import</span> javax.annotation.Resource;

<span class="hljs-keyword">import</span> org.springframework.stereotype.Service;

<span class="hljs-keyword">import</span> com.appms.dao.DaoSupport;
<span class="hljs-keyword">import</span> com.appms.entity.Member;
<span class="hljs-keyword">import</span> com.appms.entity.Page;
<span class="hljs-keyword">import</span> com.appms.entity.PageData;

<span class="hljs-annotation">@Service</span>(<span class="hljs-string">"memberService"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MemberService</span> {</span>

    <span class="hljs-annotation">@Resource</span>(name=<span class="hljs-string">"daoSupport"</span>)
    DaoSupport dao;

    <span class="hljs-javadoc">/**
     * 通过会员账号获取信息
     */</span>
    <span class="hljs-keyword">public</span> PageData <span class="hljs-title">findByUId</span>(PageData pd) <span class="hljs-keyword">throws</span> Exception{
        <span class="hljs-keyword">return</span> (PageData)dao.findForObject(<span class="hljs-string">"MemberMapper.findByMId"</span>, pd);
    }

    <span class="hljs-javadoc">/**
     * 修改会员信息
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">editM</span>(PageData pd)<span class="hljs-keyword">throws</span> Exception{
        dao.update(<span class="hljs-string">"MemberMapper.editM"</span>, pd);
    }

    <span class="hljs-javadoc">/**
     * 删除会员信息
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">deleteM</span>(PageData pd)<span class="hljs-keyword">throws</span> Exception{
        dao.delete(<span class="hljs-string">"MemberMapper.deleteM"</span>, pd);
    }

    <span class="hljs-javadoc">/**
     * 批量删除会员信息
     */</span>
    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">deleteAllM</span>(String[] mids)<span class="hljs-keyword">throws</span> Exception{
        dao.delete(<span class="hljs-string">"MemberMapper.deleteAllM"</span>,mids);
    }

    <span class="hljs-javadoc">/**
     * 会员信息列表
     */</span>
    <span class="hljs-keyword">public</span> List&lt;PageData&gt; <span class="hljs-title">listPdPageM</span>(Page page)<span class="hljs-keyword">throws</span> Exception{
        <span class="hljs-keyword">return</span> (List&lt;PageData&gt;)dao.findForList(<span class="hljs-string">"MemberMapper.memberListPage"</span>, page);
    }

    <span class="hljs-javadoc">/**
     * 会员信息列表
     *<span class="hljs-javadoctag"> @param</span> pd
     *<span class="hljs-javadoctag"> @return</span>
     *<span class="hljs-javadoctag"> @throws</span> Exception
     */</span>
    <span class="hljs-keyword">public</span> List&lt;PageData&gt; <span class="hljs-title">listM</span>(PageData pd)<span class="hljs-keyword">throws</span> Exception{
        <span class="hljs-keyword">return</span> (List&lt;PageData&gt;)dao.findForList(<span class="hljs-string">"MemberMapper.memberList"</span>, pd);
    }

    <span class="hljs-keyword">public</span> List&lt;Long&gt; <span class="hljs-title">getCount</span>()<span class="hljs-keyword">throws</span> Exception{
        <span class="hljs-keyword">return</span> (List&lt;Long&gt;)dao.findForObject(<span class="hljs-string">"MemberMapper.queryCount"</span>, <span class="hljs-keyword">null</span>);
    }


    <span class="hljs-javadoc">/**
     * 模糊查询
     *<span class="hljs-javadoctag"> @param</span> pd
     *<span class="hljs-javadoctag"> @return</span>
     *<span class="hljs-javadoctag"> @throws</span> Exception
     */</span>
    <span class="hljs-keyword">public</span> List&lt;PageData&gt; <span class="hljs-title">queryM</span>(PageData pd)<span class="hljs-keyword">throws</span> Exception{
        <span class="hljs-keyword">return</span> (List&lt;PageData&gt;)dao.findForList(<span class="hljs-string">"MemberMapper.queryMemberInfo"</span>, pd);
    }

}
</code></pre>

<p>Controller层代码：</p>



<pre class="prettyprint"><code class=" hljs java"><span class="hljs-keyword">package</span> com.appms.controller.member;

<span class="hljs-keyword">import</span> java.util.ArrayList;
<span class="hljs-keyword">import</span> java.util.HashMap;
<span class="hljs-keyword">import</span> java.util.List;
<span class="hljs-keyword">import</span> java.util.Map;

<span class="hljs-keyword">import</span> javax.annotation.Resource;

<span class="hljs-keyword">import</span> org.springframework.stereotype.Controller;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;
<span class="hljs-keyword">import</span> org.springframework.web.bind.annotation.ResponseBody;
<span class="hljs-keyword">import</span> org.springframework.web.servlet.ModelAndView;

<span class="hljs-keyword">import</span> com.appms.base.BaseController;
<span class="hljs-keyword">import</span> com.appms.entity.Page;
<span class="hljs-keyword">import</span> com.appms.entity.PageData;
<span class="hljs-keyword">import</span> com.appms.service.member.MemberService;
<span class="hljs-keyword">import</span> com.appms.utils.AppUtil;
<span class="hljs-keyword">import</span> com.appms.view.ObjectExcelView;

<span class="hljs-annotation">@Controller</span>
<span class="hljs-annotation">@RequestMapping</span>(value=<span class="hljs-string">"/member"</span>)
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MemberController</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">BaseController</span>{</span>

    <span class="hljs-annotation">@Resource</span>(name=<span class="hljs-string">"memberService"</span>)
    <span class="hljs-keyword">private</span> MemberService memberService;

    <span class="hljs-javadoc">/**
     * 编辑会员信息
     */</span>
    <span class="hljs-annotation">@RequestMapping</span>(value=<span class="hljs-string">"/editM"</span>,produces=<span class="hljs-string">"application/json;charset=UTF-8"</span>)
    <span class="hljs-annotation">@ResponseBody</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title">editM</span>()<span class="hljs-keyword">throws</span> Exception{
        Map&lt;String,String&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;String, String&gt;();
        PageData pd = <span class="hljs-keyword">new</span> PageData();
        pd = <span class="hljs-keyword">this</span>.getPageData();
        String KEYDATA[] = pd.get(<span class="hljs-string">"KEYDATA"</span>).toString().split(<span class="hljs-string">","</span>);
        pd.put(<span class="hljs-string">"memberID"</span>, KEYDATA[<span class="hljs-number">0</span>]);
        pd.put(<span class="hljs-string">"password"</span>, KEYDATA[<span class="hljs-number">1</span>]);
        pd.put(<span class="hljs-string">"rank"</span>, KEYDATA[<span class="hljs-number">2</span>]);
        pd.put(<span class="hljs-string">"credit"</span>, KEYDATA[<span class="hljs-number">3</span>]);
        pd.put(<span class="hljs-string">"phone"</span>, KEYDATA[<span class="hljs-number">4</span>]);
        memberService.editM(pd);
        map.put(<span class="hljs-string">"result"</span>, <span class="hljs-string">"success"</span>);
        <span class="hljs-keyword">return</span> AppUtil.returnObject(<span class="hljs-keyword">new</span> PageData(), map);
    }

    <span class="hljs-javadoc">/**
     * 跳转到编辑页面
     *<span class="hljs-javadoctag"> @return</span>
     *<span class="hljs-javadoctag"> @throws</span> Exception
     */</span>
    <span class="hljs-annotation">@RequestMapping</span>(value=<span class="hljs-string">"/goEditM"</span>)
    <span class="hljs-keyword">public</span> ModelAndView <span class="hljs-title">goEditM</span>()<span class="hljs-keyword">throws</span> Exception{
        ModelAndView mv = <span class="hljs-keyword">this</span>.getModelAndView();
        PageData pd = <span class="hljs-keyword">new</span> PageData();
        pd = <span class="hljs-keyword">this</span>.getPageData();
        String ID = pd.getString(<span class="hljs-string">"memberID"</span>);

        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">null</span> != ID&amp;&amp; !<span class="hljs-string">""</span>.equals(ID)){
            ID = ID.trim();
            pd.put(<span class="hljs-string">"memberID"</span>, ID);
            pd = memberService.findByUId(pd);
            mv.setViewName(<span class="hljs-string">"/member/member_edit"</span>);  
            mv.addObject(<span class="hljs-string">"pd"</span>,pd);
        }
        <span class="hljs-keyword">return</span> mv;
    }

    <span class="hljs-javadoc">/**
     * 是否存在会员信息
     */</span>
    <span class="hljs-annotation">@RequestMapping</span>(value=<span class="hljs-string">"/hasM"</span>)
    <span class="hljs-annotation">@ResponseBody</span>
    <span class="hljs-keyword">public</span> Object <span class="hljs-title">hasM</span>() <span class="hljs-keyword">throws</span> Exception{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;
    }

    <span class="hljs-javadoc">/**
     * 获取所有的会员信息
     */</span>
    <span class="hljs-annotation">@RequestMapping</span>(value=<span class="hljs-string">"/listMember"</span>)
    <span class="hljs-keyword">public</span> ModelAndView <span class="hljs-title">listMemberInfo</span>(Page page)<span class="hljs-keyword">throws</span> Exception{
        ModelAndView mv = <span class="hljs-keyword">this</span>.getModelAndView();
        PageData pd = <span class="hljs-keyword">new</span> PageData();
        pd = <span class="hljs-keyword">this</span>.getPageData();
        String memberID = pd.getString(<span class="hljs-string">"memberID"</span>);
        <span class="hljs-keyword">if</span>(<span class="hljs-keyword">null</span> != memberID &amp;&amp; !<span class="hljs-string">""</span>.equals(memberID)){
            memberID = memberID.trim();
            pd.put(<span class="hljs-string">"memberID"</span>, memberID);
        }
        page.setShowCount(<span class="hljs-number">5</span>);
        page.setPd(pd);
        mv.addObject(<span class="hljs-string">"page"</span>,page);
        List&lt;PageData&gt; infoList = memberService.listPdPageM(page);
        mv.setViewName(<span class="hljs-string">"/member/member_list"</span>);
        mv.addObject(<span class="hljs-string">"memberInfoList"</span>,infoList);
        mv.addObject(<span class="hljs-string">"pd"</span>, pd);
        <span class="hljs-keyword">return</span> mv;
    }

    <span class="hljs-javadoc">/**
     * 模糊查询
     *<span class="hljs-javadoctag"> @return</span>
     *<span class="hljs-javadoctag"> @throws</span> Exception
     */</span>
    <span class="hljs-annotation">@RequestMapping</span>(<span class="hljs-string">"/queryM"</span>)
    <span class="hljs-keyword">public</span> ModelAndView <span class="hljs-title">queryM</span>()<span class="hljs-keyword">throws</span> Exception{
        ModelAndView mv = <span class="hljs-keyword">this</span>.getModelAndView();
        PageData pd = <span class="hljs-keyword">new</span> PageData();
        pd = <span class="hljs-keyword">this</span>.getPageData();
        String keyword = pd.getString(<span class="hljs-string">"keyword"</span>);
        keyword = <span class="hljs-keyword">new</span> String(keyword.getBytes(<span class="hljs-string">"iso-8859-1"</span>),<span class="hljs-string">"UTF-8"</span>);
        <span class="hljs-keyword">if</span>(keyword!=<span class="hljs-keyword">null</span>&amp;&amp;!<span class="hljs-string">""</span>.equals(keyword)){
            keyword = keyword.trim();
            pd.put(<span class="hljs-string">"keyword"</span>, keyword);
            List&lt;PageData&gt; memberInfo = memberService.queryM(pd);
            mv.setViewName(<span class="hljs-string">"member/member_list"</span>);
            mv.addObject(<span class="hljs-string">"memberInfoList"</span>, memberInfo);
        }
        <span class="hljs-keyword">return</span> mv;
    }

    <span class="hljs-javadoc">/**
     * 导出Excel
     *<span class="hljs-javadoctag"> @return</span>
     *<span class="hljs-javadoctag"> @throws</span> Exception
     */</span>
    <span class="hljs-annotation">@RequestMapping</span>(<span class="hljs-string">"/exportExcel"</span>)
    <span class="hljs-keyword">public</span> ModelAndView <span class="hljs-title">exportExcel</span>()<span class="hljs-keyword">throws</span> Exception{
        ModelAndView mv = <span class="hljs-keyword">this</span>.getModelAndView();
        PageData pd = <span class="hljs-keyword">new</span> PageData();
        pd = <span class="hljs-keyword">this</span>.getPageData();
        <span class="hljs-comment">//检索条件</span>
        Map&lt;String,Object&gt; dataMap = <span class="hljs-keyword">new</span> HashMap&lt;String,Object&gt;();
        List&lt;String&gt; titles = <span class="hljs-keyword">new</span> ArrayList&lt;String&gt;();

        titles.add(<span class="hljs-string">"用户名"</span>);
        titles.add(<span class="hljs-string">"密码"</span>);
        titles.add(<span class="hljs-string">"级别"</span>);
        titles.add(<span class="hljs-string">"积分"</span>);
        titles.add(<span class="hljs-string">"手机号"</span>);

        dataMap.put(<span class="hljs-string">"titles"</span>, titles);

        List&lt;PageData&gt; memberList = memberService.listM(pd);
        List&lt;PageData&gt; varList = <span class="hljs-keyword">new</span> ArrayList&lt;PageData&gt;();
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>;i&lt;memberList.size();i++){
            PageData vpd = <span class="hljs-keyword">new</span> PageData();
            vpd.put(<span class="hljs-string">"var1"</span>, memberList.get(i).getString(<span class="hljs-string">"memberID"</span>));
            vpd.put(<span class="hljs-string">"var2"</span>, memberList.get(i).getString(<span class="hljs-string">"password"</span>));
            vpd.put(<span class="hljs-string">"var3"</span>, memberList.get(i).getString(<span class="hljs-string">"rank"</span>));
            vpd.put(<span class="hljs-string">"var4"</span>, memberList.get(i).get(<span class="hljs-string">"credit"</span>).toString());
            vpd.put(<span class="hljs-string">"var5"</span>, memberList.get(i).getString(<span class="hljs-string">"phone"</span>));
            varList.add(vpd);
        }
        dataMap.put(<span class="hljs-string">"varList"</span>, varList);
        ObjectExcelView erv = <span class="hljs-keyword">new</span> ObjectExcelView();
        mv = <span class="hljs-keyword">new</span> ModelAndView(erv,dataMap);

        <span class="hljs-keyword">return</span> mv;
    }

}
</code></pre>

<p>为了代码安全性，将jsp全部放在WEB-INF下面：</p>

<p><img src="http://img.blog.csdn.net/20170102193710160?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxNDQyNzM5MQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""/> <br/>
jsp页面代码，用cstl获取数据</p>



<pre class="prettyprint"><code class=" hljs handlebars"><span class="xml"><span class="hljs-tag">&lt;%@<span class="hljs-attribute">page</span> <span class="hljs-attribute">import</span>=<span class="hljs-value">"com.appms.base.Const"</span><span class="hljs-value">%</span>&gt;</span>
<span class="vbscript">&lt;%@ page language=<span class="hljs-string">"java"</span> import=<span class="hljs-string">"java.util.*"</span> pageEncoding=<span class="hljs-string">"UTF-8"</span>%&gt;</span>
<span class="vbscript">&lt;%
<span class="hljs-built_in">String</span> path = <span class="hljs-built_in">request</span>.getContextPath();
<span class="hljs-built_in">String</span> basePath = <span class="hljs-built_in">request</span>.getScheme()+<span class="hljs-string">"://"</span>+<span class="hljs-built_in">request</span>.getServerName()+<span class="hljs-string">":"</span>+<span class="hljs-built_in">request</span>.getServerPort()+path+<span class="hljs-string">"/"</span>;
%&gt;</span>
<span class="vbscript">&lt;%@ taglib prefix=<span class="hljs-string">"c"</span> uri=<span class="hljs-string">"http://java.sun.com/jsp/jstl/core"</span>%&gt;</span>
<span class="vbscript">&lt;%@ taglib prefix=<span class="hljs-string">"fmt"</span> uri=<span class="hljs-string">"http://java.sun.com/jsp/jstl/fmt"</span>%&gt;</span>
<span class="hljs-doctype">&lt;!doctype html&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">base</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"&lt;%=basePath %&gt;"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">charset</span>=<span class="hljs-value">"utf-8"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">http-equiv</span>=<span class="hljs-value">"X-UA-Compatible"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"IE=edge"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span>${pd.SYSNAME}<span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"description"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"这是一个 index 页面"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"keywords"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"index"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"viewport"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"renderer"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"webkit"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">http-equiv</span>=<span class="hljs-value">"Cache-Control"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"no-siteapp"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"icon"</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"image/png"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"assets/i/favicon.png"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"apple-touch-icon-precomposed"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"assets/i/app-icon72x72@2x.png"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">meta</span> <span class="hljs-attribute">name</span>=<span class="hljs-value">"apple-mobile-web-app-title"</span> <span class="hljs-attribute">content</span>=<span class="hljs-value">"Amaze UI"</span> /&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"assets/css/amazeui.min.css"</span>/&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"assets/css/admin.css"</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span>&gt;</span><span class="javascript">window.jQuery || document.write(<span class="hljs-string">"&lt;script src='source/js/jquery-1.9.1.min.js'&gt;\x3C/script&gt;"</span>);</span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"source/js/jquery.tips.js"</span>&gt;</span><span class="javascript"/><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span><span class="hljs-comment">&lt;!--提示框--&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-comment">&lt;!--[if lte IE 9]&gt;
&lt;p class="browsehappy"&gt;你正在使用&lt;strong&gt;过时&lt;/strong&gt;的浏览器，Amaze UI 暂不支持。 请 &lt;a href="http://browsehappy.com/" target="_blank"&gt;升级浏览器&lt;/a&gt;
  以获得更好的体验！&lt;/p&gt;
&lt;![endif]--&gt;</span>

   <span class="hljs-comment">&lt;!-- 页面顶部¨ --&gt;</span>
   <span class="vbscript">&lt;%@ include file=<span class="hljs-string">"../admin/head.jsp"</span>%&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"am-cf admin-main"</span>&gt;</span>

  <span class="hljs-comment">&lt;!-- 左侧菜单• --&gt;</span>
  <span class="vbscript">&lt;%@ include file=<span class="hljs-string">"../admin/left.jsp"</span>%&gt;</span>

  <span class="hljs-comment">&lt;!-- content start --&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"admin-content"</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"am-cf am-padding"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"am-fl am-cf"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">strong</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"am-text-primary am-text-lg"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"main/index"</span>&gt;</span>首页<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">strong</span>&gt;</span> / <span class="hljs-tag">&lt;<span class="hljs-title">small</span>&gt;</span>会员管理<span class="hljs-tag">&lt;/<span class="hljs-title">small</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"am-g"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"am-u-md-6 am-cf"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"am-fl am-cf"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"am-btn-toolbar am-fl"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"am-btn-group am-btn-group-xs"</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"am-btn am-btn-default"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"member/exportExcel.do"</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">"background-color: white;"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"am-icon-save"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>导出Excel<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"am-u-md-3 am-cf"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"am-fr"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"am-input-group am-input-group-sm"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"am-form-field"</span> <span class="hljs-attribute">id</span>=<span class="hljs-value">"keyword"</span>/&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"am-input-group-btn"</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-title">input</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"button"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"am-btn am-btn-default"</span> <span class="hljs-attribute">onclick</span>=<span class="hljs-value">"queryInfo();"</span> <span class="hljs-attribute">value</span>=<span class="hljs-value">"搜索"</span> /&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>

    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"am-g"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"am-u-sm-12"</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-title">form</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"am-form"</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">table</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"am-table am-table-striped am-table-hover table-main"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">thead</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">tr</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">th</span>&gt;</span>图片<span class="hljs-tag">&lt;/<span class="hljs-title">th</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">th</span>&gt;</span>账号<span class="hljs-tag">&lt;/<span class="hljs-title">th</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">th</span>&gt;</span>密码<span class="hljs-tag">&lt;/<span class="hljs-title">th</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">th</span>&gt;</span>级别<span class="hljs-tag">&lt;/<span class="hljs-title">th</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">th</span>&gt;</span>积分<span class="hljs-tag">&lt;/<span class="hljs-title">th</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">th</span>&gt;</span>手机<span class="hljs-tag">&lt;/<span class="hljs-title">th</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">th</span>&gt;</span>操作<span class="hljs-tag">&lt;/<span class="hljs-title">th</span>&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-title">tr</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">thead</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">tbody</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">c:choose</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">c:when</span> <span class="hljs-attribute">test</span>=<span class="hljs-value">"${not empty memberInfoList}"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">c:forEach</span> <span class="hljs-attribute">items</span>=<span class="hljs-value">"${memberInfoList}"</span> <span class="hljs-attribute">var</span>=<span class="hljs-value">"u"</span> <span class="hljs-attribute">varStatus</span>=<span class="hljs-value">"vs"</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">tr</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">td</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">img</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"${pageContext.request.contextPath}${u.imgPath}"</span> <span class="hljs-attribute">width</span>=<span class="hljs-value">"30px"</span> <span class="hljs-attribute">height</span>=<span class="hljs-value">"30px"</span> /&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">td</span>&gt;</span>${u.memberID}<span class="hljs-tag">&lt;/<span class="hljs-title">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">td</span>&gt;</span>${u.password}<span class="hljs-tag">&lt;/<span class="hljs-title">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">td</span>&gt;</span>${u.rank}<span class="hljs-tag">&lt;/<span class="hljs-title">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">td</span>&gt;</span>${u.credit}<span class="hljs-tag">&lt;/<span class="hljs-title">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">td</span>&gt;</span>${u.phone}<span class="hljs-tag">&lt;/<span class="hljs-title">td</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-title">td</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"am-btn-toolbar"</span>&gt;</span>
                  <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"am-btn-group am-btn-group-xs"</span>&gt;</span>
                    <span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"member/goEditM.do?memberID=${u.memberID}"</span> <span class="hljs-attribute">style</span>=<span class="hljs-value">"background-color: white;"</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"am-btn am-btn-default am-btn-xs am-text-secondary"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">span</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"am-icon-pencil-square-o"</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">span</span>&gt;</span> 编辑<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span>
                  <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
                <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-title">td</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">tr</span>&gt;</span>

            <span class="hljs-tag">&lt;/<span class="hljs-title">c:forEach</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">c:when</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">c:otherwise</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-title">tr</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"main_info"</span>&gt;</span>
                <span class="hljs-tag">&lt;<span class="hljs-title">td</span> <span class="hljs-attribute">colspan</span>=<span class="hljs-value">"10"</span>&gt;</span>没有相关数据<span class="hljs-tag">&lt;/<span class="hljs-title">td</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">tr</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-title">c:otherwise</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">c:choose</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-title">tbody</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">table</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"am-cf"</span>&gt;</span>
  共 15 条记录
  <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"am-fr"</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">ul</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"am-pagination"</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"am-disabled"</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"#"</span>&gt;</span>«<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"#"</span>&gt;</span>1<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"#"</span>&gt;</span>2<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"#"</span>&gt;</span>3<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"#"</span>&gt;</span>4<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"#"</span>&gt;</span>5<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"#"</span>&gt;</span>»<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">li</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">ul</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">hr</span> /&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-title">p</span>&gt;</span>注：.....<span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-title">form</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>

    <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
  <span class="hljs-comment">&lt;!-- content end --&gt;</span>

<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">footer</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">hr</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">p</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"am-padding-left"</span>&gt;</span>© 2017 E创工作室开发. <span class="hljs-tag">&lt;<span class="hljs-title">a</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"http://www.mianfeimoban.com/"</span> <span class="hljs-attribute">target</span>=<span class="hljs-value">"_blank"</span>&gt;</span>网站模板<span class="hljs-tag">&lt;/<span class="hljs-title">a</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">p</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">footer</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">type</span>=<span class="hljs-value">"text/javascript"</span>&gt;</span><span class="javascript">
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">queryInfo</span><span class="hljs-params">()</span>{</span>
        <span class="hljs-keyword">var</span> keyword = $(<span class="hljs-string">"#keyword"</span>).val();
        window.location.href=<span class="hljs-string">"member/queryM.do?keyword="</span>+keyword;
    }
</span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-comment">&lt;!--[if lt IE 9]&gt;
&lt;script src="assets/js/jquery1.11.1.min.js"&gt;&lt;/script&gt;
&lt;script src="assets/js/modernizr.js"&gt;&lt;/script&gt;
&lt;script src="assets/js/polyfill/rem.min.js"&gt;&lt;/script&gt;
&lt;script src="assets/js/polyfill/respond.min.js"&gt;&lt;/script&gt;
&lt;script src="assets/js/amazeui.legacy.js"&gt;&lt;/script&gt;
&lt;![endif]--&gt;</span>

<span class="hljs-comment">&lt;!--[if (gte IE 9)|!(IE)]&gt;&lt;!--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"assets/js/jquery.min.js"</span>&gt;</span><span class="javascript"/><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"assets/js/amazeui.min.js"</span>&gt;</span><span class="javascript"/><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-comment">&lt;!--&lt;![endif]--&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"assets/js/app.js"</span>&gt;</span><span class="javascript"/><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span>
</span></code></pre>

<p><img src="http://img.blog.csdn.net/20170102193853317?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvdTAxNDQyNzM5MQ==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title=""/></p><link rel="stylesheet" href="http://static.blog.csdn.net/public/res-min/markdown_views.css?v=1.0"/></div><link rel="stylesheet" href="http://static.blog.csdn.net/public/res-min/markdown_views.css?v=1.0"/>&#13;
            