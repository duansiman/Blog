
                
<p style="margin:0pt"><strong><span style="background:rgb(255,255,255); color:rgb(11,0,128); text-transform:none; letter-spacing:0pt; font-family:宋体; font-size:12pt; font-style:normal"><strong><span style="font-family:Comic Sans MS">一、下载tar包，上传解压</span></strong></span></strong></p>&#13;
<p align="justify" style=""><span style="background:rgb(255,255,255); color:rgb(0,0,0); text-transform:none; letter-spacing:0pt; font-size:10.5pt; font-style:normal; font-weight:normal"><span style="font-family:Comic Sans MS">1、下载压缩包vsftpd-3.0.2.tar.gz</span></span></p>&#13;
<p align="justify" style=""><span style="font-family:Comic Sans MS"><span style="background:rgb(255,255,255); color:rgb(0,0,0); text-transform:none; letter-spacing:0pt; font-size:10.5pt; font-style:normal; font-weight:normal">2、将压缩包上传到Linux，使用tar zxvf</span><span style="background:rgb(255,255,255); color:rgb(0,0,0); text-transform:none; letter-spacing:0pt; font-size:10.5pt; font-style:normal; font-weight:normal">vsftpd-3.0.2.tar.gz</span><span style="background:rgb(255,255,255); color:rgb(0,0,0); text-transform:none; letter-spacing:0pt; font-size:10.5pt; font-style:normal; font-weight:normal">命令将其解压。笔者上传并解压到lamp文件路径下。</span></span></p>&#13;
<p style="margin:0pt"><strong><span style="background:rgb(255,255,255); color:rgb(11,0,128); text-transform:none; letter-spacing:0pt; font-size:12pt; font-style:normal"><strong><span style="font-family:Comic Sans MS">二、编译安装</span></strong></span></strong></p>&#13;
<p align="justify" style=""><span style="font-family:Comic Sans MS"><span style="background:rgb(255,255,255); color:rgb(0,0,0); text-transform:none; letter-spacing:0pt; font-size:10.5pt; font-style:normal; font-weight:normal">1、进入lamp/</span><span style="background:rgb(255,255,255); color:rgb(0,0,0); text-transform:none; letter-spacing:0pt; font-size:10.5pt; font-style:normal; font-weight:normal">vsftpd-3.0.2</span><span style="background:rgb(255,255,255); color:rgb(0,0,0); text-transform:none; letter-spacing:0pt; font-size:10.5pt; font-style:normal; font-weight:normal">,依次执行./configure&#13;
 命令-监测安装相关的配置和平台，</span><span style="background:rgb(255,255,255); color:rgb(0,0,0); text-transform:none; letter-spacing:0pt; font-size:10.5pt; font-style:normal; font-weight:normal">M</span><span style="background:rgb(255,255,255); color:rgb(0,0,0); text-transform:none; letter-spacing:0pt; font-size:10.5pt; font-style:normal; font-weight:normal">ake-执行编译，最后make&#13;
 install 进行安装。</span></span></p>&#13;
<p align="justify" style=""><span style="font-family:Comic Sans MS"><span style="background:rgb(255,255,255); color:rgb(0,0,0); text-transform:none; letter-spacing:0pt; font-size:10.5pt; font-style:normal; font-weight:normal">注：不下载解压tar.gz文件，直接使用</span><span style="font-size:10.5pt">yum&#13;
 -y install vsftpd</span><span style="font-size:10.5pt"> 进行在线安装。</span></span></p>&#13;
<p style="margin:0pt"><strong><span style="background:rgb(255,255,255); color:rgb(11,0,128); text-transform:none; letter-spacing:0pt; font-size:12pt; font-style:normal"><strong><span style="font-family:Comic Sans MS">三、添加ftp用户并设置密码</span></strong></span></strong></p>&#13;
<p align="justify" style=""><span style="font-size:10.5pt"><span style="font-family:Comic Sans MS; color:#ff0000">1、执行useradd ftpuser添加用户为ftpuser；</span></span></p>&#13;
<p align="justify" style=""><span style="font-size:10.5pt"><span style="font-family:Comic Sans MS; color:#ff0000">2、执行passwd ftpuser设置密码为ftpuser。</span></span></p>&#13;
<p style="margin:0pt"><strong><span style="background:rgb(255,255,255); color:rgb(11,0,128); text-transform:none; letter-spacing:0pt; font-size:12pt; font-style:normal"><strong><span style="font-family:Comic Sans MS">四、开启防火墙21号端口</span></strong></span></strong></p>&#13;
<p align="justify" style=""><span style="font-family:Comic Sans MS"><span style="background:rgb(255,255,255); color:rgb(0,0,0); text-transform:none; letter-spacing:0pt; font-size:10.5pt; font-style:normal; font-weight:normal">因为vsftpd默认端口为21，所以需要</span><span style="font-size:10.5pt">修改iptables文件，</span><span style="background:rgb(255,255,255); color:rgb(0,0,0); text-transform:none; letter-spacing:0pt; font-size:10.5pt; font-style:normal; font-weight:normal">开启本机21号端口。</span></span></p>&#13;
<ol style="list-style-type:decimal; direction:ltr">&#13;
<li style="font-size:10.5pt; font-style:normal; font-weight:normal">&#13;
<p align="justify" style=""><span style="font-family:Comic Sans MS"><span style="color:#ff0000"><span style="font-size:10.5pt">执行vi /etc/sysconfig/iptables</span></span></span></p>&#13;
</li><li style="font-size:10.5pt; font-style:normal; font-weight:normal">&#13;
<p align="justify" style=""><span style="font-size:10.5pt"><span style="font-family:Comic Sans MS; color:#ff0000">Copy 22 -j ACCEPT一行，把端口号22改为21即可。</span></span></p>&#13;
<p align="justify" style=""><span style="font-family:Comic Sans MS"><img src="http://img.blog.csdn.net/20160521113434160?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""/></span></p>&#13;
<p style="color:rgb(0,0,0); font-size:10.5pt; font-style:normal; font-weight:normal; margin-top:0pt; margin-bottom:0pt">&#13;
<span style="font-family:Comic Sans MS"><span style="color:#ff0000"><span style="background:rgb(255,255,255); color:rgb(0,0,0); text-transform:none; letter-spacing:0pt; font-size:10.5pt; font-style:normal; font-weight:normal">3、</span><span style="background:rgb(255,255,255); text-transform:none; letter-spacing:0pt; font-size:10.5pt; font-style:normal; font-weight:normal">执行</span><span style="font-size:10.5pt">service&#13;
 iptables restart，</span><span style="background:rgb(255,255,255); color:rgb(0,0,0); text-transform:none; letter-spacing:0pt; font-size:10.5pt; font-style:normal; font-weight:normal">重启iptables</span></span></span></p>&#13;
<p style="color:rgb(0,0,0); font-size:10.5pt; font-style:normal; font-weight:normal; margin-top:0pt; margin-bottom:0pt">&#13;
<strong><span style="background:rgb(255,255,255); color:rgb(11,0,128); text-transform:none; letter-spacing:0pt; font-size:12pt; font-style:normal"><strong><span style="font-family:Comic Sans MS">五、修改selinux，允许文件传输外网访问</span></strong></span></strong></p>&#13;
<p style="color:rgb(0,0,0); font-size:10.5pt; font-style:normal; font-weight:normal; margin-top:0pt; margin-bottom:0pt">&#13;
<span style="background-color:rgb(255,204,153)"><span style="font-size:10.5pt"><span style="font-family:Comic Sans MS">selinux是一个安全程序，旨在提高</span></span><span style="font-size:10.5pt"><span style="font-family:Comic Sans MS">Linux系统</span></span><span style="font-family:Comic Sans MS"><span style="font-size:10.5pt">的安全性，提供强健的安全保证，可防御未知攻击。如果不关闭它，可能会出现"Permission&#13;
 denied"的错误提示！</span><span style="font-size:10.5pt">但是使用ftp进行文件传输需要打开ftp相关配置，开启外网访问权限。</span></span></span></p>&#13;
<p style="color:rgb(0,0,0); font-size:10.5pt; font-style:normal; font-weight:normal; margin-top:0pt; margin-bottom:0pt">&#13;
<span style="font-size:10.5pt"><span style="font-family:Comic Sans MS">1、首先执行<span style="font-size:10.5pt"><span style="font-family:Comic Sans MS; color:#ff0000">getsebool -a | grep ftp</span></span>命令查看状态：</span></span><span style="font-size:10.5pt"><span style="font-family:Comic Sans MS">  </span></span></p>&#13;
<p style="color:rgb(0,0,0); font-size:10.5pt; font-style:normal; font-weight:normal; margin-top:0pt; margin-bottom:0pt">&#13;
<span style="font-size:10.5pt"><span style="font-family:Comic Sans MS">allow_ftpd_anon_write --&gt; off</span></span></p>&#13;
<p style="color:rgb(0,0,0); font-size:10.5pt; font-style:normal; font-weight:normal; margin-top:0pt; margin-bottom:0pt">&#13;
<span style="background:rgb(255,255,0); font-size:10.5pt"><span style="font-family:Comic Sans MS">allow_ftpd_full_access --&gt; off</span></span></p>&#13;
<p style="color:rgb(0,0,0); font-size:10.5pt; font-style:normal; font-weight:normal; margin-top:0pt; margin-bottom:0pt">&#13;
<span style="font-size:10.5pt"><span style="font-family:Comic Sans MS">allow_ftpd_use_cifs --&gt; off</span></span></p>&#13;
<p style="color:rgb(0,0,0); font-size:10.5pt; font-style:normal; font-weight:normal; margin-top:0pt; margin-bottom:0pt">&#13;
<span style="font-size:10.5pt"><span style="font-family:Comic Sans MS">allow_ftpd_use_nfs --&gt; off</span></span></p>&#13;
<p style="color:rgb(0,0,0); font-size:10.5pt; font-style:normal; font-weight:normal; margin-top:0pt; margin-bottom:0pt">&#13;
<span style="background:rgb(255,255,0); font-size:10.5pt"><span style="font-family:Comic Sans MS">ftp_home_dir --&gt; off</span></span></p>&#13;
<p style="color:rgb(0,0,0); font-size:10.5pt; font-style:normal; font-weight:normal; margin-top:0pt; margin-bottom:0pt">&#13;
<span style="font-size:10.5pt"><span style="font-family:Comic Sans MS">ftpd_connect_db --&gt; off</span></span></p>&#13;
<p style="color:rgb(0,0,0); font-size:10.5pt; font-style:normal; font-weight:normal; margin-top:0pt; margin-bottom:0pt">&#13;
<span style="font-size:10.5pt"><span style="font-family:Comic Sans MS">ftpd_use_passive_mode --&gt; off</span></span></p>&#13;
<p style="color:rgb(0,0,0); font-size:10.5pt; font-style:normal; font-weight:normal; margin-top:0pt; margin-bottom:0pt">&#13;
<span style="font-size:10.5pt"><span style="font-family:Comic Sans MS">httpd_enable_ftp_server --&gt; off</span></span></p>&#13;
<p style="color:rgb(0,0,0); font-size:10.5pt; font-style:normal; font-weight:normal; margin-top:0pt; margin-bottom:0pt">&#13;
<span style="font-size:10.5pt"><span style="font-family:Comic Sans MS">tftp_anon_write --&gt; off</span></span></p>&#13;
<p style="color:rgb(0,0,0); font-size:10.5pt; font-style:normal; font-weight:normal; margin-top:0pt; margin-bottom:0pt">&#13;
<span style="font-size:10.5pt"><span style="font-family:Comic Sans MS">2、执行以下命令，开启开启外网的访问权限</span></span></p>&#13;
<p style="font-size:10.5pt; font-style:normal; font-weight:normal; margin-top:0pt; margin-bottom:0pt">&#13;
<span style="background:rgb(255,255,255); color:rgb(0,0,0); text-transform:none; letter-spacing:0pt; font-size:9.5pt; font-style:normal; font-weight:normal"><span style="font-family:Comic Sans MS; color:#ff0000">setsebool -P allow_ftpd_full_access on</span></span></p>&#13;
<p style="font-size:10.5pt; font-style:normal; font-weight:normal; margin-top:0pt; margin-bottom:0pt">&#13;
<span style="background:rgb(255,255,255); color:rgb(0,0,0); text-transform:none; letter-spacing:0pt; font-size:9.5pt; font-style:normal; font-weight:normal"><span style="font-family:Comic Sans MS; color:#ff0000">etsebool -P ftp_home_dir on</span></span></p>&#13;
<p style="color:rgb(0,0,0); font-size:10.5pt; font-style:normal; font-weight:normal; margin-top:0pt; margin-bottom:0pt">&#13;
<strong><span style="background:rgb(255,255,255); color:rgb(11,0,128); text-transform:none; letter-spacing:0pt; font-size:12pt; font-style:normal"><strong><span style="font-family:Comic Sans MS">六、开启FTP服务并验证</span></strong></span></strong></p>&#13;
<p style="color:rgb(0,0,0); font-size:10.5pt; font-style:normal; font-weight:normal; margin-top:0pt; margin-bottom:0pt">&#13;
<span style="font-family:Comic Sans MS"><span style="color:#ff0000"><span style="font-size:10.5pt">1、执行</span><span style="font-size:10.5pt">service vsftpd start</span><span style="font-size:10.5pt">，</span><span style="font-size:10.5pt">启动vsftpd服务</span></span></span></p>&#13;
<p style="font-size:10.5pt; font-style:normal; font-weight:normal; margin-top:0pt; margin-bottom:0pt">&#13;
<span style="font-size:10.5pt"><span style="font-family:Comic Sans MS">   注：其他相关命令：</span></span></p>&#13;
<p style="font-size:10.5pt; font-style:normal; font-weight:normal; margin-top:0pt; margin-bottom:0pt">&#13;
<span style="font-family:Comic Sans MS"><span style="color:#ff0000"><span style="font-size:10.5pt">           service vsftpd restart</span><span style="font-size:10.5pt"> </span><span style="font-size:10.5pt">重启vsftpd服务</span></span></span><span style="font-size:10.5pt"><br/>&#13;
</span><span style="font-family:Comic Sans MS"><span style="color:#ff0000"><span style="font-size:10.5pt"> </span><span style="font-size:10.5pt"><span style="font-size:10.5pt">          </span>service vsftpd stop停止vsftpd服务</span></span></span><span style="font-size:10.5pt"><br/>&#13;
</span><span style="font-family:Comic Sans MS"><span style="color:#ff0000"><span style="font-size:10.5pt"> </span><span style="font-size:10.5pt"><span style="font-size:10.5pt">          </span>chkconfig --list |grep vsftpd</span><span style="font-size:10.5pt">  </span><span style="font-size:10.5pt">查询Vsftpd在运行模式下是否开机启动</span></span></span></p>&#13;
<p style="color:rgb(0,0,0); font-size:10.5pt; font-style:normal; font-weight:normal; margin-top:0pt; margin-bottom:0pt">&#13;
<span style="font-size:10.5pt"><span style="font-family:Comic Sans MS">2、浏览器输入<span style="background-color:rgb(255,204,153)">ftp://192.168.132.128/</span>，显示Linux系统下默认FTP文件储存路径，如下：</span></span></p>&#13;
<p style="color:rgb(0,0,0); font-size:10.5pt; font-style:normal; font-weight:normal; margin-top:0pt; margin-bottom:0pt">&#13;
<span style="font-family:Comic Sans MS"><img src="http://img.blog.csdn.net/20160521113658717?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt=""/></span></p>&#13;
<p align="justify" style=""><span style="background:rgb(255,255,255); color:rgb(0,0,0); text-transform:none; letter-spacing:0pt; font-size:10.5pt; font-style:normal; font-weight:normal"><span style="font-family:Comic Sans MS; color:#ff0000"><strong>ftp服务安装成功,</strong></span></span></p>&#13;
</li><li style="font-size:10.5pt; font-style:normal; font-weight:normal">&#13;
<p align="justify" style=""><span style="background:rgb(255,255,255); color:rgb(0,0,0); text-transform:none; letter-spacing:0pt; font-size:10.5pt; font-style:normal; font-weight:normal"/><span style="background:rgb(255,255,255); color:rgb(0,0,0); text-transform:none; letter-spacing:0pt; font-size:10.5pt; font-style:normal; font-weight:normal"><span style="font-family:Comic Sans MS; background-color:rgb(255,204,153)">使用FTP可视化工具传输文件&#13;
 : </span></span><span style="background:rgb(255,255,255); color:rgb(0,0,0); text-transform:none; letter-spacing:0pt; font-family:宋体; font-size:10.5pt; font-style:normal; font-weight:normal"><span style="font-family:Comic Sans MS">ftp有多款可视化工具，笔者安装了一款名为FileZilla，输入Linux&#13;
 本机IP，ftp用户名密码，以及21端口号即可连接上FTP服务，使用拖拽的方式进行文件传输，十分方便。然后通过图片在Linux中的路径便可进行访问，效果如下。</span></span></p>&#13;
</li><li style="font-size:10.5pt; font-style:normal; font-weight:normal">&#13;
<p align="justify" style=""><span style="background:rgb(255,255,255); color:rgb(0,0,0); text-transform:none; letter-spacing:0pt; font-family:宋体; font-size:10.5pt; font-style:normal; font-weight:normal"><span style="font-family:Comic Sans MS"><img width="824" height="382" src="http://img.blog.csdn.net/20160521113845885?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" style="width:761px; height:346px"/></span></span></p>&#13;
</li></ol>&#13;
<p align="justify" style=""><span style="background:rgb(255,255,255); color:rgb(0,0,0); text-transform:none; letter-spacing:0pt; font-family:宋体; font-size:10.5pt; font-style:normal; font-weight:normal"><span style="font-family:Comic Sans MS"><br/>&#13;
</span></span></p>&#13;
<p align="justify" style=""><span style="background:rgb(255,255,255); color:rgb(0,0,0); text-transform:none; letter-spacing:0pt; font-family:宋体; font-size:10.5pt; font-style:normal; font-weight:normal"><span style="font-family:Comic Sans MS"><br/>&#13;
</span></span></p>&#13;
<p align="justify" style=""><span style="background:rgb(255,255,255); color:rgb(0,0,0); text-transform:none; letter-spacing:0pt; font-family:宋体; font-size:10.5pt; font-style:normal; font-weight:normal"><span style="font-family:Comic Sans MS"><br/>&#13;
</span></span></p>&#13;
<p align="justify" style=""><span style="background:rgb(255,255,255); color:rgb(0,0,0); text-transform:none; letter-spacing:0pt; font-family:宋体; font-size:10.5pt; font-style:normal; font-weight:normal"><span style="font-family:Comic Sans MS"><br/>&#13;
</span></span></p>&#13;
<p align="justify" style=""><span style="background:rgb(255,255,255); color:rgb(0,0,0); text-transform:none; letter-spacing:0pt; font-family:宋体; font-size:10.5pt; font-style:normal; font-weight:normal"><span style="font-family:Comic Sans MS"><br/>&#13;
</span></span></p>&#13;
<link rel="stylesheet" href="http://static.blog.csdn.net/public/res-min/markdown_views.css?v=1.0"/>&#13;
            