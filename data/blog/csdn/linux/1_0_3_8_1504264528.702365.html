

<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<span style="font-weight:bold"><span style="font-size:18px"><span style="font-family:Arial; font-size:14px; line-height:26px"><span style="font-family:FangSong_GB2312; font-size:24px; background-color:rgb(255,255,0)">一个进程在CPU上运行可以有两种运行模式（进程状态）：用户模式和内核模式。如果当前运行的是用户程序（用户代码），那么对应进程就处于用户模式（用户态），如果出现系统调用或者发生中断，那么对应进程就处于内核模式（核心态）。</span></span><br />&#13;
</span></span></p>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px"><br />&#13;
</span></strong></p>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">Linux进程通过一个task_struct结构体描述，在linux/sched.h中定义，通过理解该结构，可更清楚的理解linux进程模型。  <span style="line-height:1.5; font-family:宋体">    </span></span></strong></p>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<span style="line-height:1.5; font-family:宋体"><strong><span style="font-size:18px">包含进程所有信息的<span lang="EN-US" style="line-height:1.5" xml:lang="EN-US">task_struct</span>数据结构是比较庞大的，但是该数据结构本身并不复杂，我们将它的所有域按其功能可做如下划分：</span></strong></span></p>&#13;
<ul style="margin-left:45px; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<li style="list-style:inherit"><strong><span style="font-size:18px">进程状态（State）</span></strong></li><li style="list-style:inherit"><strong><span style="font-size:18px">进程调度信息（Scheduling Information）</span></strong></li><li style="list-style:inherit"><strong><span style="font-size:18px">各种标识符（Identifiers）</span></strong></li><li style="list-style:inherit"><strong><span style="font-size:18px">进程通信有关信息（IPC：Inter_Process Communication）</span></strong></li><li style="list-style:inherit"><strong><span style="font-size:18px">时间和定时器信息（Times and Timers）</span></strong></li><li style="list-style:inherit"><strong><span style="font-size:18px">进程链接信息（Links）</span></strong></li><li style="list-style:inherit"><strong><span style="font-size:18px">文件系统信息（File System）</span></strong></li><li style="list-style:inherit"><strong><span style="font-size:18px">虚拟内存信息（Virtual Memory）</span></strong></li><li style="list-style:inherit"><strong><span style="font-size:18px">页面管理信息（page）</span></strong></li><li style="list-style:inherit"><strong><span style="font-size:18px">对称多处理器（SMP）信息</span></strong></li><li style="list-style:inherit"><strong><span style="font-size:18px">和处理器相关的环境（上下文）信息（Processor Specific Context）</span></strong></li><li style="list-style:inherit"><strong><span style="font-size:18px">其它信息</span></strong></li></ul>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<span style="line-height:1.5; font-family:宋体"><span style="line-height:1.5"><strong><span style="font-size:18px"><span style="font-family:Cambria"> 1. </span>进程状态（<span style="font-family:Cambria">State</span>）</span></strong></span></span></p>&#13;
<p align="left" style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">进程执行时，它会根据具体情况改变状态。进程状态是调度和对换的依据。Linux中的进程主要有如下状态，如表1所示。</span></strong></p>&#13;
<p align="left" style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px"> </span></strong></p>&#13;
<p align="center" style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">表3.1  Linux进程的状态</span></strong></p>&#13;
<div align="center" style="font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<table border="1" cellspacing="0" cellpadding="0" style="border:1px solid rgb(192,192,192); border-collapse:collapse; width:587px; height:336px">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top" width="220" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">内核表示</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="198" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">含义</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="220" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">TASK_RUNNING</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="198" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">可运行</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="220" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">TASK_INTERRUPTIBLE</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="198" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">可中断的等待状态</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="220" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">TASK_UNINTERRUPTIBLE</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="198" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">不可中断的等待状态</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="220" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">TASK_ZOMBIE</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="198" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">僵死</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="220" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">TASK_STOPPED</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="198" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">暂停</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="220" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">TASK_SWAPPING</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="198" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">换入/换出</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
</div>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px"> </span></strong></p>&#13;
<p style="margin:10px auto 10px 30px; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">1).可运行状态：处于这种状态的进程，要么正在运行、要么正准备运行。正在运行的进程就是当前进程（由current所指向的进程），而准备运行的进程只要得到CPU就可以立即投入运行，CPU是这些进程唯一等待的系统资源。</span></strong></p>&#13;
<p style="margin:10px auto 10px 30px; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">2).等待状态：处于该状态的进程正在等待某个事件（event）或某个资源，它肯定位于系统中的某个等待队列（wait_queue）中。</span></strong></p>&#13;
<p style="margin:10px auto 10px 30px; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">3).暂停状态：此时的进程暂时停止运行来接受某种特殊处理。通常当进程接收到SIGSTOP、SIGTSTP、SIGTTIN或 SIGTTOU信号后就处于这种状态。例如，正接受调试的进程就处于这种状态。</span></strong></p>&#13;
<p style="margin:10px auto 10px 30px; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">4).僵死状态：进程虽然已经终止，但由于某种原因，父进程还没有执行wait()系统调用，终止进程的信息也还没有回收。顾名思义，处于该状态的进程就是死进程，这种进程实际上是系统中的垃圾，必须进行相应处理以释放其占用的资源。</span></strong></p>&#13;
<p style="margin:10px auto 10px 30px; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">进程状态转换如下图：</span></strong></p>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<img src="http://pic002.cnblogs.com/images/2012/426620/2012080110271639.jpg" alt="" style="border:0px; margin-right:auto; margin-left:auto; display:block" /></p>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">2.进程调度信息</span></strong></p>&#13;
<p align="left" style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">    调度程序利用这部分信息决定系统中哪个进程最应该运行，并结合进程的状态信息保证系统运转的公平和高效。这一部分信息通常包括进程的类别（普通进程还是实时进程）、进程的优先级等。表2描述了跟进程调度有关的字段，表3.3说明了几种常用的进程调度算法及这些算法的使用范围，如先来先服务主要用于实时进程的调度。</span></strong></p>&#13;
<p align="center" style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">表2 进程调度信息</span></strong></p>&#13;
<div align="center" style="font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<table border="1" cellspacing="0" cellpadding="0" style="border:1px solid rgb(192,192,192); border-collapse:collapse; width:610px; height:252px">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top" width="151" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">域名</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="151" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">含义</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="151" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">need_resched</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="151" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">调度标志</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="151" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">Nice</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="151" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">静态优先级</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="151" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">Counter</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="151" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">动态优先级</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="151" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">Policy</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="151" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">调度策略</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="151" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">rt_priority</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="151" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">实时优先级</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
</div>&#13;
<p align="left" style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px"> </span></strong></p>&#13;
<p align="center" style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">表3  进程调度的策略</span></strong></p>&#13;
<div align="center" style="font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<table border="1" cellspacing="0" cellpadding="0" align="center" style="border:1px solid rgb(192,192,192); border-collapse:collapse; width:613px; height:192px">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top" width="80" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">名称</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="123" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">解释</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="106" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">适用范围</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="80" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">SCHED_OTHER</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="123" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">其他调度</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="106" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">普通进程</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="80" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">SCHED_FIFO</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="123" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">先来先服务调度</span></strong></p>&#13;
</td>&#13;
<td rowspan="2" valign="top" width="106" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">实时进程</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="80" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">SCHED_RR</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="123" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">时间片轮转调度</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
</div>&#13;
<p align="left" style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px"> </span></strong></p>&#13;
<p align="left" style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">只有root用户能通过sched_setscheduler（）系统调用来改变调度策略。</span></strong></p>&#13;
<p align="left" style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px"> </span></strong></p>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px"><span style="font-family:Cambria">3.</span>标识符（<span style="font-family:Cambria">Identifiers</span>）</span></strong></p>&#13;
<p align="left" style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">   每个进程有进程标识符、用户标识符、组标识符，如表4所示。</span></strong></p>&#13;
<p align="left" style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">   不管对内核还是普通用户来说，怎么用一种简单的方式识别不同的进程呢？这就引入了进程标识符（PID：process identifier），每个进程都有一个唯一的标识符，内核通过这个标识符来识别不同的进程，同时，进程标识符PID也是内核提供给用户程序的接口，用户程序通过PID对进程发号施令。PID是32位的无符号整数，它被顺序编号：新创建进程的PID通常是前一个进程的PID加1。然而，为了与16位硬件平台的传统Linux系统保持兼容，在Linux上允许的最大PID号是32767，当内核在系统中创建第32768个进程时，就必须重新开始使用已闲置的PID号。</span></strong></p>&#13;
<p align="center" style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">表4 各种标识符</span></strong></p>&#13;
<div align="center" style="font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<table border="1" cellspacing="0" cellpadding="0" style="border:1px solid rgb(192,192,192); border-collapse:collapse">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top" width="170" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">域名</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="252" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">含义</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="170" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">Pid</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="252" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">进程标识符</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="170" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">Uid、gid</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="252" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">用户标识符、组标识符</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="170" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">Euid、egid</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="252" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">有效用户标识符、有效组标识符</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="170" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">Suid、sgid</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="252" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">备份用户标识符、备份组标识符</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="170" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">Fsuid、fsgid</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="252" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">文件系统用户标识符、文件系统组标识符</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
</div>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px"> </span></strong></p>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px"><span style="font-family:Cambria">4.</span>进程通信有关信息（<span style="font-family:Cambria">IPC</span>：<span style="font-family:Cambria">Inter_Process Communication</span>）</span></strong></p>&#13;
<p align="left" style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">    为了使进程能在同一项任务上协调工作，进程之间必须能进行通信即交流数据。</span></strong></p>&#13;
<p align="left" style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">    Linux支持多种不同形式的通信机制。它支持典型的Unix 通信机制（IPC Mechanisms）：信号（Signals）、管道（Pipes），也支持System V 通信机制：共享内存（Shared Memory）、信号量和消息队列（Message Queues）,如表5</span></strong></p>&#13;
<p align="center" style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">表5 进程通信有关信息</span></strong></p>&#13;
<div align="center" style="font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<table border="1" cellspacing="0" cellpadding="0" style="border:1px solid rgb(192,192,192); border-collapse:collapse">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top" width="217" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">域名</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="238" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">含义</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="217" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">Spinlock_t sigmask_lock</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="238" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">信号掩码的自旋锁</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="217" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">Long blocked</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="238" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">信号掩码</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="217" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">Struct signal  *sig</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="238" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">信号处理函数</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="217" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">Struct sem_undo *semundo</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="238" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">为避免死锁而在信号量上设置的取消操作</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="217" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">Struct sem_queue *semsleeping</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="238" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">与信号量操作相关的等待队列</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
</div>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px"> </span></strong></p>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px"> </span></strong></p>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">5.进程链接信息（Links）</span></strong></p>&#13;
<p align="left" style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">    程序创建的进程具有父/子关系。因为一个进程能创建几个子进程，而子进程之间有兄弟关系，在task_struct结构中有几个域来表示这种关系。</span></strong></p>&#13;
<p align="left" style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">    在Linux系统中，除了初始化进程init，其他进程都有一个父进程（parent process）或称为双亲进程。可以通过fork（）或clone()系统调用来创建子进程，除了进程标识符（PID）等必要的信息外，子进程的task_struct结构中的绝大部分的信息都是从父进程中拷贝，或说“克隆”过来的。系统有必要记录这种“亲属”关系，使进程之间的协作更加方便，例如父进程给子进程发送杀死（kill）信号、父子进程通信等，就可以用这种关系很方便地实现。</span></strong></p>&#13;
<p align="left" style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">    每个进程的task_struct结构有许多指针，通过这些指针，系统中所有进程的task_struct结构就构成了一棵进程树，这棵进程树的根就是初始化进程init的task_struct结构（init进程是Linux内核建立起来后人为创建的一个进程，是所有进程的祖先进程）。表6是进程所有的链接信息。</span></strong></p>&#13;
<p align="center" style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">表6 进程链接信息</span></strong></p>&#13;
<div align="center" style="font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<table border="1" cellspacing="0" cellpadding="0" align="center" style="border:1px solid rgb(192,192,192); border-collapse:collapse; width:658px; height:491px">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top" width="113" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">名称</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="208" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">解释 [指向哪个进程]</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="113" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">p_opptr</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="208" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">祖先</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="113" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">p_pptr</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="208" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">父进程</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="113" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">p_cptr</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="208" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">子进程</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="113" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">p_ysptr</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="208" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">弟进程</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="113" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">p_osptr</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="208" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">兄进程</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="113" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">Pidhash_next、</span></strong></p>&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">Pidhash_pprev</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="208" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">进程在哈希表中的链接</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="113" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">Next_task、</span></strong></p>&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">prev_task</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="208" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">进程在双向循环链表中的链接</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="113" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">Run_list</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="208" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="left" style="margin:10px auto"><strong><span style="font-size:18px">运行队列的链表</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
</div>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px"> </span></strong></p>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">6.时间和定时器信息（Times and Timers）</span></strong></p>&#13;
<p align="left" style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">    一个进程从创建到终止叫做该进程的生存期（lifetime）。进程在其生存期内使用CPU的时间，内核都要进行记录，以便进行统计、计费等有关操作。进程耗费CPU的时间由两部分组成：一是在用户模式（或称为用户态）下耗费的时间、一是在系统模式（或称为系统态）下耗费的时间。每个时钟滴答，也就是每个时钟中断，内核都要更新当前进程耗费CPU的时间信息。</span></strong></p>&#13;
<p align="left" style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">    表7是和时间有关的域，上面所说的counter是指进程剩余的CPU时间片，也和时间有关，所以这里我们再次提及它。表8是进程的所有定时器。</span></strong></p>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px"> </span></strong></p>&#13;
<p align="center" style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">表7与时间有关的域</span></strong></p>&#13;
<div align="center" style="font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<table border="1" cellspacing="0" cellpadding="0" style="border:1px solid rgb(192,192,192); border-collapse:collapse; width:639px; height:209px">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top" width="210" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">域名</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="211" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">含义</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="210" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">Start_time</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="211" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">进程创建时间</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="210" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">Per_cpu_utime</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="211" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">进程在某个CPU上运行时在用户态下耗费的时间</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="210" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">Per_cpu_stime</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="211" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">进程在某个CPU上运行时在系统态下耗费的时间</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="210" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">Counter</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="211" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">进程剩余的时间片</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
</div>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px"> </span></strong></p>&#13;
<p align="center" style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">表8  进程的所有定时器</span></strong></p>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px"> </span></strong></p>&#13;
<div align="center" style="font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<table border="1" cellspacing="0" cellpadding="0" style="border:1px solid rgb(192,192,192); border-collapse:collapse; width:637px; height:382px">&#13;
<tbody>&#13;
<tr>&#13;
<td width="98" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">定时器类型</span></strong></p>&#13;
</td>&#13;
<td width="86" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">解释</span></strong></p>&#13;
</td>&#13;
<td width="123" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">什么时候更新</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="157" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">用来表示此种定时器的域</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td rowspan="3" width="98" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">ITIMER_REAL</span></strong></p>&#13;
</td>&#13;
<td rowspan="3" width="86" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">实时定时器</span></strong></p>&#13;
</td>&#13;
<td rowspan="3" width="123" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">实时更新，即不论该进程是否运行</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="157" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">it_real_value</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="157" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">it_real_incr</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="157" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">real_timer</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td rowspan="2" width="98" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">ITIMER_VIRTUAL</span></strong></p>&#13;
</td>&#13;
<td rowspan="2" width="86" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">虚拟定时器</span></strong></p>&#13;
</td>&#13;
<td rowspan="2" width="123" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">只在进程运行于用户态时更新</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="157" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">it_virt_value</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="157" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">it_virt_incr</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td rowspan="2" width="98" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">ITIMER_PROF</span></strong></p>&#13;
</td>&#13;
<td rowspan="2" width="86" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">概况定时器</span></strong></p>&#13;
</td>&#13;
<td rowspan="2" width="123" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">进程运行于用户态和系统态时更新</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="157" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">it_prof_value</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="157" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">it_prof_incr</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
</div>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px"> </span></strong></p>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">7.文件系统信息（File System）</span></strong></p>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<span style="font-family:宋体"><strong><span style="font-size:18px">   进程可以打开或关闭文件，文件属于系统资源，<span lang="EN-US" xml:lang="EN-US">Linux</span>内核要对进程使用文件的情况进行记录。<span lang="EN-US" xml:lang="EN-US">task_struct</span>结构中有两个数据结构用于描述进程与文件相关的信息。其中，<span lang="EN-US" xml:lang="EN-US">fs_struct</span>中描述了两个<span lang="EN-US" xml:lang="EN-US">VFS</span>索引节点（<span lang="EN-US" xml:lang="EN-US">VFS&#13;
 inode</span>），这两个索引节点叫做<span lang="EN-US" xml:lang="EN-US">root</span>和<span lang="EN-US" xml:lang="EN-US">pwd</span>，分别指向进程的可执行映象所对应的根目录（<span lang="EN-US" xml:lang="EN-US">home directory</span>）和当前目录或工作目录。<span lang="EN-US" xml:lang="EN-US">file_struct</span>结构用来记录了进程打开的文件的描述符（<span lang="EN-US" xml:lang="EN-US">descriptor</span>）。如表<span lang="EN-US" xml:lang="EN-US">9</span>所示。</span></strong></span></p>&#13;
<p align="center" style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">表9  与文件系统相关的域</span></strong></p>&#13;
<table border="1" cellspacing="0" cellpadding="0" style="border:1px solid rgb(192,192,192); border-collapse:collapse; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px; width:605px; height:158px">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top" width="188" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">定义形式</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="200" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">解释</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="188" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">Sruct fs_struct *fs</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="200" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">进程的可执行映象所在的文件系统</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="188" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">Struct files_struct *files</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="200" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">进程打开的文件</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">    在文件系统中，每个VFS索引节点唯一描述一个文件或目录，同时该节点也是向更低层的文件系统提供的统一的接口。</span></strong></p>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px"> </span></strong></p>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">8.虚拟内存信息（Virtual Memory）</span></strong></p>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<span style="font-weight:bold"><span style="font-size:18px"><span style="font-family:宋体">   除了内核线程（<span lang="EN-US" xml:lang="EN-US">kernel thread</span>），每个进程都拥有自己的地址空间（也叫虚拟空间），用</span><span lang="EN-US" style="font-family:宋体" xml:lang="EN-US">mm_struct</span><span style="font-family:宋体">来描述。另外<span lang="EN-US" xml:lang="EN-US">Linux2.4</span>还引入了另外一个域<span lang="EN-US" xml:lang="EN-US">active_mm,</span>这是为内核线程而引入。因为内核线程没有自己的地址空间，为了让内核线程与普通进程具有统一的上下文切换方式，当内核线程进行上下文切换时，让切换进来的线程的<span lang="EN-US" xml:lang="EN-US">active_mm</span>指向刚被调度出去的进程的<span lang="EN-US" xml:lang="EN-US">active_mm</span>（如果进程的<span lang="EN-US" xml:lang="EN-US">mm</span>域不为空，则其<span lang="EN-US" xml:lang="EN-US">active_mm</span>域与<span lang="EN-US" xml:lang="EN-US">mm</span>域相同）。内存信息如表<span lang="EN-US" xml:lang="EN-US">10</span>所示</span></span></span></p>&#13;
<p align="center" style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">表10   虚拟内存描述信息</span></strong></p>&#13;
<div align="center" style="font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<table border="1" cellspacing="0" cellpadding="0" style="border:1px solid rgb(192,192,192); border-collapse:collapse">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top" width="191" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">定义形式</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="189" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">解释</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="191" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">Struct mm_struct *mm</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="189" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">描述进程的地址空间</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="191" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">Struct mm_struct *active_mm</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="189" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">内核线程所借用的地址空间</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
</div>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px"> </span></strong></p>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<span style="font-family:宋体"><strong><span style="font-size:18px">9.页面管理信息</span></strong></span></p>&#13;
<p align="left" style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">   当物理内存不足时，Linux内存管理子系统需要把内存中的部分页面交换到外存，其交换是以页为单位的。有关页面的描述信息如表11。</span></strong></p>&#13;
<p align="center" style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">表11 页面管理信息</span></strong></p>&#13;
<table border="1" cellspacing="0" cellpadding="0" style="border:1px solid rgb(192,192,192); border-collapse:collapse; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px; width:656px; height:306px">&#13;
<tbody>&#13;
<tr>&#13;
<td valign="top" width="173" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">  定义形式</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="236" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">解释</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="173" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">Int swappable</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="236" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">进程占用的内存页面是否可换出</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="173" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">Unsigned long min_flat,</span></strong></p>&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">maj_flt,nswap</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="236" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">进程累计的次（minor）缺页次数、</span></strong></p>&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">主(major)次数及累计换出、换入页面数</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
<tr>&#13;
<td valign="top" width="173" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">Unsigned long cmin_flat,</span></strong></p>&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">cmaj_flt,cnswap</span></strong></p>&#13;
</td>&#13;
<td valign="top" width="236" style="border:1px solid rgb(192,192,192); border-collapse:collapse; padding:3px; word-break:normal!important">&#13;
<p align="center" style="margin:10px auto"><strong><span style="font-size:18px">本进程作为祖先进程，其所有层次子进程的累计的次（minor）缺页次数、主(major)次数及累计换出、换入页面数</span></strong></p>&#13;
</td>&#13;
</tr>&#13;
</tbody>&#13;
</table>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px"> </span></strong></p>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">10.进程内核栈及<span style="font-family:Cambria">current</span>宏</span></strong></p>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">    在<span style="font-family:Calibri">Linux-2.6</span>内核中堆栈这么定义：</span></strong></p>&#13;
<div class="cnblogs_code" style="background-color:rgb(245,245,245); font-family:'Courier New'; border:1px solid rgb(204,204,204); padding:5px; overflow:auto; margin:5px 0px; line-height:25.600000381469727px">&#13;
<pre style="margin-top:0px; margin-bottom:0px; margin-left:22px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'"><strong><span style="font-size:18px"><span style="line-height:1.5">union thread_union {
     </span><span style="line-height:1.5">struct</span><span style="line-height:1.5"> thread_info thread_info;
     unsigned </span><span style="line-height:1.5">long</span> stack[THREAD_SIZE/<span style="line-height:1.5">sizeof</span>(<span style="line-height:1.5">long</span><span style="line-height:1.5">)];
};     </span></span></strong></pre>&#13;
</div>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<strong><span style="font-size:18px">     根据内核的配置，THREAD_SIZE既可以是4K字节(1个页面)也可以是8K字节(2个页面)。thread_info是52个字节长。下图是当设为8KB时候的内核堆栈：Thread_info在这个内存区的开始处，内核堆栈从末端向下增长。进程描述符不是在这个内存区中，而分别通过task与thread_info指针使thread_info与进程描述符互联。所以获得当前进程描述符的current定义如下: </span></strong></p>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<img src="http://pic002.cnblogs.com/images/2012/426620/2012080112594814.jpg" alt="" style="border:0px; margin-right:auto; margin-left:auto; display:block" /></p>&#13;
<div class="cnblogs_code" style="background-color:rgb(245,245,245); font-family:'Courier New'; border:1px solid rgb(204,204,204); padding:5px; overflow:auto; margin:5px 0px; line-height:25.600000381469727px">&#13;
<div class="cnblogs_code_toolbar" style="margin-top:5px"><span class="cnblogs_code_copy" style="padding-right:5px; line-height:1.5"><a href="http://blog.csdn.net/dlutbrucezhang/article/details/8696296" title="复制代码" style="text-decoration:none; border:none!important"><strong><span style="font-size:18px"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none!important" /></span></strong></a></span></div>&#13;
<pre style="margin-top:0px; margin-bottom:0px; margin-left:22px; white-space:pre-wrap; word-wrap:break-word; font-family:'Courier New'"><strong><span style="font-size:18px"><span style="line-height:1.5">#define</span> current get_current()
<span style="line-height:1.5">static</span> inline <span style="line-height:1.5">struct</span> task_struct * get_current(<span style="line-height:1.5">void</span><span style="line-height:1.5">)
{
      </span><span style="line-height:1.5">return</span> current_thread_info()-&gt;<span style="line-height:1.5">task;
}
</span><span style="line-height:1.5">static</span> inline <span style="line-height:1.5">struct</span> thread_info *current_thread_info(<span style="line-height:1.5">void</span><span style="line-height:1.5">)
{
       </span><span style="line-height:1.5">struct</span> thread_info *<span style="line-height:1.5">ti;
       __asm__(</span><span style="line-height:1.5">"</span><span style="line-height:1.5">andl %%esp,%0; </span><span style="line-height:1.5">"</span>:<span style="line-height:1.5">"</span><span style="line-height:1.5">=r</span><span style="line-height:1.5">"</span> (ti) : <span style="line-height:1.5">""</span> (~(THREAD_SIZE - <span style="line-height:1.5">1</span><span style="line-height:1.5">)));
       </span><span style="line-height:1.5">return</span><span style="line-height:1.5"> ti;
}</span></span></strong></pre>&#13;
<div class="cnblogs_code_toolbar" style="margin-top:5px"><span class="cnblogs_code_copy" style="padding-right:5px; line-height:1.5"><a href="http://blog.csdn.net/dlutbrucezhang/article/details/8696296" title="复制代码" style="text-decoration:none; border:none!important"><strong><span style="font-size:18px"><img src="http://common.cnblogs.com/images/copycode.gif" alt="复制代码" style="border:none!important" /></span></strong></a></span></div>&#13;
</div>&#13;
<p style="margin:10px auto; font-family:Verdana,Arial,Helvetica,sans-serif; line-height:25.600000381469727px">&#13;
<span style="font-family:宋体"><strong><span style="font-size:18px">根据<span lang="EN-US" xml:lang="EN-US">THREAD_SIZE</span>大小，分别屏蔽掉内核栈的<span lang="EN-US" xml:lang="EN-US">12-bit LSB(4K)</span>或<span lang="EN-US" xml:lang="EN-US">13-bit LSB(8K)</span>，从而获得内核栈的起始位置，及当前进程描述符的指针。</span></strong></span></p>&#13;
   &#13;
