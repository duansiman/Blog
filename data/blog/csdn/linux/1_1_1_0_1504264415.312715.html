

<p style="white-space:normal"><img src="https://mmbiz.qlogo.cn/mmbiz/iaHL5mQLicPYM9iakKXib1GuyQaQ1TSNwr8Q2ZkS5HzL0JZsbTZpFFnElnhOZO7e1iaQqnaFjT1ZyBs5WZk5icj2GX8A/0?wx_fmt=jpeg" alt="" /><br />&#13;
</p>&#13;
<p style="white-space:normal"><span style="font-size:18px; color:#ff00; padding:0px; margin:0px"><strong style="padding:0px; margin:0px"></strong></span></p>&#13;
<hr style="white-space:normal" />&#13;
<p style="white-space:normal"><span style="font-size:18px; color:#ff00; padding:0px; margin:0px"><strong style="padding:0px; margin:0px"></strong></span></p>&#13;
<h2 style=""><strong><span style="font-size:18px">内容简介</span></strong></h2>&#13;
<p style="white-space:normal"><strong><span style="color:#ff00">1</span><span style="font-size:18px; color:#ff00; padding:0px; margin:0px">、</span><span style="padding:0px; margin:0px; color:rgb(255,0,0); font-size:18px"><span style="padding:0px; margin:0px"><span style="padding:0px; margin:0px"><span style="padding:0px; margin:0px"><span style="padding:0px; margin:0px"><span style="padding:0px; margin:0px"><span style="padding:0px; margin:0px"><span style="padding:0px; margin:0px"><span style="padding:0px; margin:0px"><strong><span style="padding:0px; margin:0px; color:rgb(255,0,0); font-size:18px"><strong><span style="padding:0px; margin:0px">第四部分第五课：<strong><span style="padding:0px; margin:0px; color:rgb(255,0,0); font-size:18px"><strong><span style="padding:0px; margin:0px"><strong><span style="font-size:18px; color:#ff00; padding:0px; margin:0px"><strong><span style="padding:0px; margin:0px"></span></strong></span><span style="font-size:18px; color:#ff00; padding:0px; margin:0px"><strong><span style="padding:0px; margin:0px">源码编译，安装便利</span></strong></span></strong></span></strong></span></strong></span></strong></span><span style="font-size:18px; color:#ff00; padding:0px; margin:0px"><span style="padding:0px; margin:0px"></span></span></strong></span></span></span></span></span></span></span></span></span></strong></p>&#13;
<p style="white-space:normal"><strong><span style="padding:0px; margin:0px; color:rgb(255,0,0); font-size:18px">2、<strong><span style="padding:0px; margin:0px">第四部分第六课：<strong><span style="padding:0px; margin:0px; color:rgb(255,0,0); font-size:18px"><span style="padding:0px; margin:0px"><span style="padding:0px; margin:0px"><span style="padding:0px; margin:0px"><span style="padding:0px; margin:0px"><span style="padding:0px; margin:0px"><span style="padding:0px; margin:0px"><span style="padding:0px; margin:0px"><span style="padding:0px; margin:0px"><strong><span style="padding:0px; margin:0px; color:rgb(255,0,0); font-size:18px"><strong><span style="padding:0px; margin:0px"><strong><span style="font-size:18px; color:#ff00; padding:0px; margin:0px"><strong><span style="padding:0px; margin:0px">DNS和域名，一探究竟</span></strong></span></strong></span></strong></span></strong></span></span></span></span></span></span></span></span></span></strong></span></strong></span></strong></p>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<hr style="white-space:normal" />&#13;
<h2 style=""><span style="font-size:18px">源码编译，安装便利</span></h2>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<p style="white-space:normal">这一课相对轻松，毕竟刚跨年（2015-2016）么，新年怎么能让大家一个头两个大呢~ 小编怎么可能这么坏呢？小编是这样的人吗？（是啊 -_-#）。<br />&#13;
</p>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">之前的课程（<a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzAxMTE3MDkyMA==&amp;mid=209567535&amp;idx=1&amp;sn=17fa541b02290aef224354136ec79c91&amp;scene=21#wechat_redirect">【Linux探索之旅】第二部分第七课：软件安装，如虎添翼</a>）中，我们已经了解过Ubuntu这个Linux的发行版下安装软件是何等方便，用apt-get这个工具可以轻松搞定。这种方式可以让我们下载并安装大部分的软件。</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">其他Linux发行版也类似，一通百通。<br />&#13;
</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p>但是，有些软件并没有包含在软件仓库中，那么我们只能手动来安装了，也就是只能下载软件的源代码，编译以生成可执行文件。<br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p>这个方式有时候会比较复杂。我们需要首先下载源代码，下载下来的源码通常是一个压缩包，解压压缩包，然后配置，再编译，再安装。希望这课能让大家把之前学的一些知识应用到实践中，我们一步步来探究软件的编译。<br />&#13;
</p>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<hr style="white-space:normal" />&#13;
<p style="white-space:normal"><span style="color:#ffffff; background-color:rgb(0,176,80)">首先尝试找deb安装包</span></p>&#13;
<p><br />&#13;
</p>&#13;
<p>首先，我们得声明：这一部分涉及到的软件包安装等知识点是基于Debian一族的Linux发行版，包括Ubuntu。</p>&#13;
<p><br />&#13;
</p>&#13;
<p>其他不是Debian一族的Linux发行版，例如Fedora，Redhat，CentOS，等等。其实安装软件的方式大同小异，就是每个Linux发行版之间所用的命令不一样，软件包的名称有点区别罢了。</p>&#13;
<p><br />&#13;
</p>&#13;
<p>大部分Ubuntu下的软件都可以在软件仓库中找到，你只要用apt-get命令就可以安装它们。但是，有少部分比较新的或者还在开发中的或者还不是很有名的软件，就没被收录到软件仓库中，那你就不能用apt-get来获取到了。</p>&#13;
<p><br />&#13;
</p>&#13;
<p>在这种情况下，事情会变得复杂一些。在Windows下面，要安装某个软件，我们很习惯于先去软件的官网，然后下载.exe结尾的安装文件。</p>&#13;
<p><br />&#13;
</p>&#13;
<p>然而，那些为Linux系统编写软件的程序员却一般不创建类似Windows下的那些安装文件。为什么呢？难道是Linux的程序员很懒惰吗？</p>&#13;
<p><br />&#13;
</p>&#13;
<p>是的，Linux程序员是很懒惰。开玩笑啦。是因为Linux存在极为多样的发行版（比如Ubuntu，Fedora，CentOS，SUSE，等等），每个发行版又有不同版本号。而且又有不同的处理器种类（32位的和64位的CPU，ARM架构，Intel架构，等等）要适配，不像Windows因为是微软自己定义，没有太多变数。因此，要为每种Linux创建一个安装文件几乎成了不可能的事。<br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p>当我们要找的软件不在Ubuntu的软件仓库中时，我们可以试试去软件的官方网站找后缀是.deb（表示Debian）的安装包。.deb的安装包只能用于Debian一族的操作系统，包括Ubuntu。而Redhat一族（包括Fedora）用的则是后缀为.rpm（表示Redhat Package Manager）的安装包。<br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p>不过有个软件可以帮忙将rpm安装包转换为deb安装包。这个软件是alien（就是“外星人”的意思，哈哈）：</p>&#13;
<p><br />&#13;
</p>&#13;
<p>#alien默认没有安装，所以首先要安装它</p>&#13;
<pre class="brush:bash;toolbar:false">sudo apt-get install alien</pre>&#13;
<p><br />&#13;
</p>&#13;
<p>#将rpm转换为deb，完成后会生成一个同名的xxxx.deb</p>&#13;
<pre class="brush:bash;toolbar:false">sudo alien xxxx.rpm</pre>&#13;
<p><br />&#13;
</p>&#13;
<p>#安装。注意，用alien转换的deb包并不能保证100%顺利安装，所以可以找到deb最好直接用deb</p>&#13;
<pre class="brush:bash;toolbar:false">sudo dpkg -i xxxx.deb</pre>&#13;
<p><br />&#13;
</p>&#13;
<p>如果你有幸直接在网上找到了软件的deb安装包，那么下载下来，双击安装包（或者用上面的命令行的形式：sudo dpkg -i xxxx.deb）。<br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p>然后一个窗口会弹出，问你是否确定安装，选择“安装”。<br />&#13;
</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">如果安装过程没出错，那很好。如果有错误，一般可能是因为：</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<ol class=" list-paddingleft-2" style="list-style-type:decimal">&#13;
<li>&#13;
<p class="hoveredCourseElement">也许你下载的deb安装包不符合你的电脑环境。可能位数搞错了，32位和64位有区别的。</p>&#13;
</li><li>&#13;
<p class="hoveredCourseElement">也许你没有安装那些依赖软件。因为apt-get工具会帮我们自动下载各种依赖软件，所以不需要我们亲自动手。但现在你需要自己动手安装缺失的依赖软件，可以根据提示信息，缺什么就装什么。<br />&#13;
</p>&#13;
</li></ol>&#13;
<p><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">假如实在找不到deb安装包，那么只能：获取软件的源代码，然后自行了断（哦，不是，是自行编译）。<br />&#13;
</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">那下面我们就来看看如何从源代码出发直到编译安装完成咯。<br />&#13;
</p>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<hr style="white-space:normal" />&#13;
<p style="white-space:normal"><span style="color:#ffffff; background-color:rgb(0,176,80)">实在没有其他方法，选择编译安装</span></p>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<p>如果你要安装的软件既不在软件仓库里，你在网上又找不到相应的deb安装包的话，你就只能回到石器时代，用编译源代码的方式来安装了。<br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p><strong><span style="color:#ffffff; background-color:rgb(255,76,0)">什么是编译？</span></strong><br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p>简单来说，编译就是将程序的源代码转换成可执行文件的过程。就好比我们做糕点，用到的原料（如鸡蛋，面粉等）等就是源代码，而最终制成的蛋糕就是可执行文件。在这个比喻中，编译就是制作蛋糕的过程。</p>&#13;
<p><br />&#13;
</p>&#13;
<p>假如复杂地说就说不完了。<br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p>大多数Linux的程序都是开放源码的，我们可以比较轻易地获取它们的源代码，然后将其编译成适合我们的电脑和操作系统属性的可执行文件。<br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p>编译安装软件的步骤根据软件的不同有所区别。有些软件的编译安装非常复杂，可能会让你抓狂（特别是一些非标准，非主流的软件），需要很多准备工作。不过一般安装手册都会说明详细的安装步骤。即使如此，有时还是会让你比较头大，只能解决一个个遇到的小错误。没办法，谁让程序员爱折腾呢，不折腾的人生有什么意义，木啊哈哈。<br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p><strong><span style="color:#ffffff; background-color:rgb(255,76,0)">一步步编译程序</span></strong><br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">在编译之前，你需要安装编译的工具。在Ubuntu下有一个方法可以一次性安装跟编译有关的工具，就是build-essential（build是“构建”或“编译”的意思，essential是“必要的”的意思，顾名思义就是“进行构建/编译所需的必要工具”），运行如下命令安装：</p>&#13;
<pre class="brush:bash;toolbar:false">sudo apt-get install build-essential</pre>&#13;
<p><br />&#13;
</p>&#13;
<p>一句命令搞定，Linux之威武帅气展露无遗。Windows君基本已经哭晕在厕所~ （日常黑Windows任务又完成了，科科）<br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p><img src="https://mmbiz.qlogo.cn/mmbiz/iaHL5mQLicPYMkmoPJOecqAz8wz4DU2NLmdz58fZRFnOSMcvS4FE1iaZBNU1F17GaxB6m22WTiaM2bmaSw28kGO6qw/0?wx_fmt=jpeg" alt="" /><br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p>安装完编译需要的基本工具，我们就可以开工了。<br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">我们就用一个小软件作为例子来讲解吧。这个软件是htop。之前我们学过top命令，它可以查看电脑中运行的各种进程状态，占用多少内存，cpu用量等等，有点类似Windows中的任务管理器。htop就是类似于top的一个小软件。<br />&#13;
</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">虽然htop这个软件从apt-get中也可以安装。但是我们为了演示编译安装的过程，就拿它来开刀啦（可怜的娃）。<br />&#13;
</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p>第一步去软件的官网：<a target="_blank" title="" href="http://hisham.hm/htop/">http://hisham.hm/htop/</a>​</p>&#13;
<p><br />&#13;
</p>&#13;
<p><img src="https://mmbiz.qlogo.cn/mmbiz/iaHL5mQLicPYMkmoPJOecqAz8wz4DU2NLm52YXQz5wdkfQyOcXicItGJoJevzfuvawiaEIkwxOQRlqK28bry6nNWyg/0?wx_fmt=jpeg" alt="" /></p>&#13;
<p><br />&#13;
</p>&#13;
<p>然后点击左边的 [Downloads / Git]，目前这个软件的开发源代码托管在Github上，Github的相关页面：<a target="_blank" title="" href="https://github.com/hishamhm/htop">https://github.com/hishamhm/htop</a> （可以上去看看，熟悉一下全球闻名的Github）<br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p>但是稳定的发布版本不是在Github上，而是以tar.gz的压缩包格式存放在</p>&#13;
<p><br />&#13;
</p>&#13;
<p><a target="_blank" title="" href="http://hisham.hm/htop/releases">http://hisham.hm/htop/releases</a></p>&#13;
<p><br />&#13;
</p>&#13;
<p>我们进入最新的稳定版：1.0.3版的目录<br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p><a target="_blank" title="" href="http://hisham.hm/htop/releases/1.0.3/">http://hisham.hm/htop/releases/1.0.3/</a></p>&#13;
<p><br />&#13;
</p>&#13;
<p>下载那个文件 <br />&#13;
</p>&#13;
<pre class="brush:bash;toolbar:false">htop-1.0.3.tar.gz</pre>&#13;
<p><br />&#13;
</p>&#13;
<p>下载之后，我们用之前学过的解压方法解压之：</p>&#13;
<pre class="brush:bash;toolbar:false">tar zxvf htop-1.0.3.tar.gz</pre>&#13;
<p><br />&#13;
</p>&#13;
<p>解压后生成了htop-1.0.3这个目录。</p>&#13;
<p><br />&#13;
</p>&#13;
<p>然后进入目录中：</p>&#13;
<pre class="brush:bash;toolbar:false">cd htop-1.0.3</pre>&#13;
<p><br />&#13;
</p>&#13;
<p>假如用ls命令来列出文件，你会发现有好多，不要怕。我们并不需要在意这些细节。<br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p>在众多文件中个，我们对一个文件比较感兴趣：</p>&#13;
<pre class="brush:bash;toolbar:false">configure</pre>&#13;
<p><br />&#13;
</p>&#13;
<p>configure是英语“配置”的意思，顾名思义就是为软件的编译做一些配置的前期准备工作。</p>&#13;
<p><br />&#13;
</p>&#13;
<p>我们运行它：</p>&#13;
<pre class="brush:bash;toolbar:false">./configure</pre>&#13;
<p><br />&#13;
</p>&#13;
<p>configure这个程序会分析你的电脑，确认是否编译所必须的所有工具都安装了。它的执行需要些时间，因为要做不少检测。</p>&#13;
<p><br />&#13;
</p>&#13;
<p>结果检测出现了错误：</p>&#13;
<p><br />&#13;
</p>&#13;
<p><img src="https://mmbiz.qlogo.cn/mmbiz/iaHL5mQLicPYMkmoPJOecqAz8wz4DU2NLmZg4d8Kco3grTNnwOKX8Y28ogKPibGl7icflwdicD3efyXLibxcFYPnzCJw/0?wx_fmt=jpeg" alt="" /><br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p>错误是：</p>&#13;
<p><br />&#13;
</p>&#13;
<p>没有找到 -lncursesw</p>&#13;
<p><br />&#13;
</p>&#13;
<p>提示信息是：</p>&#13;
<p><br />&#13;
</p>&#13;
<p>error: You may want to use --disable-unicode or install libncursesw</p>&#13;
<p><br />&#13;
</p>&#13;
<p>意思是：“出错啦：你也许想要用 --disable-unicode 参数 或者 安装libncursesw”</p>&#13;
<p><br />&#13;
</p>&#13;
<p>首先小编到网上去找了安装libncursesw的方法，都不行，所以为了快速起见，就不折腾了。直接用第一个建议：用 --disable-unicode 参数</p>&#13;
<p><br />&#13;
</p>&#13;
<p>重新运行configure（加上 --disable-unicode 参数）</p>&#13;
<pre class="brush:bash;toolbar:false">./configure --disable-unicode</pre>&#13;
<p><br />&#13;
</p>&#13;
<p>这会没错误了。</p>&#13;
<p><br />&#13;
</p>&#13;
<p>然后我们就可以开始编译了。用make命令：</p>&#13;
<pre class="brush:bash;toolbar:false">make</pre>&#13;
<p><br />&#13;
</p>&#13;
<p>也没错误，编译完成。</p>&#13;
<p><br />&#13;
</p>&#13;
<p>然后最后一步用make install命令来安装 （需要加上sudo以用root权限来安装软件）：</p>&#13;
<pre class="brush:bash;toolbar:false">sudo make install</pre>&#13;
<p><br />&#13;
</p>&#13;
<p>没有问题。安装完成。然后运行htop软件试试：</p>&#13;
<pre class="brush:bash;toolbar:false">htop</pre>&#13;
<p><br />&#13;
</p>&#13;
<p><img src="https://mmbiz.qlogo.cn/mmbiz/iaHL5mQLicPYMkmoPJOecqAz8wz4DU2NLmPFMrFgPicVicpm3ibcMh6xp9R57U8icud5ycibs72DnpDRvOmHnVXTfbAuQ/0?wx_fmt=jpeg" alt="" /><br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p>大功告成，收工~</p>&#13;
<p><br />&#13;
</p>&#13;
<p>下一课会比较难，我们来好好探究一下IP地址，域名和DNS域名解析系统的来龙去脉。<br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<hr style="white-space:normal" />&#13;
<p style="white-space:normal"><span style="color:#ffffff; background-color:rgb(0,176,80)">总结</span></p>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<ol class=" list-paddingleft-2" style="list-style-type:decimal">&#13;
<li>&#13;
<p>大多数Linux发行版的软件都可以用包管理工具apt-get来安装（对于Debian一族）。</p>&#13;
</li><li>&#13;
<p>有些软件不能通过apt-get来安装，因为没有被收录到Ubuntu的软件仓库中。在这种情况下，我们可以试着在网上找软件的deb安装包。</p>&#13;
</li><li>&#13;
<p>假如前两种方法都不行，我们只能选择从源代码编译安装的方法。一般通用的步骤如下：</p>&#13;
<p><br />&#13;
</p>&#13;
</li></ol>&#13;
<ul class=" list-paddingleft-2" style="list-style-type:disc">&#13;
<li>&#13;
<p>从网上下载程序的源代码（通常被打包压缩为 .tar.gz 的格式）。<br />&#13;
</p>&#13;
</li><li>&#13;
<p>解压压缩包（tar zxvf xxx.tar.gz）<br />&#13;
</p>&#13;
</li><li>&#13;
<p>运行解压之后的文件夹里的configure文件： ./configure<br />&#13;
</p>&#13;
</li><li>&#13;
<p>运行make来编译<br />&#13;
</p>&#13;
</li><li>&#13;
<p>运行sudo make install完成安装<br />&#13;
</p>&#13;
</li></ul>&#13;
<p><br />&#13;
</p>&#13;
<hr style="white-space:normal" />&#13;
<h2 style=""><span style="font-size:18px">第四部分第六课预告</span></h2>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<p style="white-space:normal">今天的课就到这里，一起加油吧！</p>&#13;
<p style="white-space:normal">下一课我们学习：<strong><span style="color:#0b050">DNS和域名，一探究竟</span></strong></p>&#13;
   &#13;
