

<p style="white-space:normal"><img src="https://mmbiz.qlogo.cn/mmbiz/iaHL5mQLicPYPqZHk6qgj6c3gjNickAs5Jrod5SMABZ5pWxwHhwOqE8JFpVf0G4aDclApK24AY4zDeNAkcUJBn8cw/0?wx_fmt=jpeg" alt="" /><br />&#13;
</p>&#13;
<p style="white-space:normal"><span style="font-size:18px; color:#ff00; padding:0px; margin:0px"><strong style="padding:0px; margin:0px"></strong></span></p>&#13;
<hr style="white-space:normal" />&#13;
<p style="white-space:normal"><span style="font-size:18px; color:#ff00; padding:0px; margin:0px"><strong style="padding:0px; margin:0px"></strong></span></p>&#13;
<h2 style=""><strong><span style="font-size:18px">内容简介</span></strong></h2>&#13;
<p style="white-space:normal"><strong><span style="color:#ff00">1</span><span style="font-size:18px; color:#ff00; padding:0px; margin:0px">、</span><span style="padding:0px; margin:0px; color:rgb(255,0,0); font-size:18px"><span style="padding:0px; margin:0px"><span style="padding:0px; margin:0px"><span style="padding:0px; margin:0px"><span style="padding:0px; margin:0px"><span style="padding:0px; margin:0px"><span style="padding:0px; margin:0px"><span style="padding:0px; margin:0px"><span style="padding:0px; margin:0px"><strong><span style="font-size:18px; color:#ff00; padding:0px; margin:0px"><strong><span style="padding:0px; margin:0px">第四部分第三课：文件传输，潇洒同步</span></strong></span><span style="font-size:18px; color:#ff00; padding:0px; margin:0px"><span style="padding:0px; margin:0px"></span></span></strong></span></span></span></span></span></span></span></span></span></strong></p>&#13;
<p style="white-space:normal"><strong><span style="padding:0px; margin:0px; color:rgb(255,0,0); font-size:18px">2、<strong><span style="padding:0px; margin:0px">第四部分第四课：分析<strong><span style="font-size:18px; color:#ff00; padding:0px; margin:0px"><strong><span style="padding:0px; margin:0px">网络</span></strong></span></strong>，隔离防火</span></strong></span></strong></p>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<hr style="white-space:normal" />&#13;
<h2 style=""><span style="font-size:18px">文件传输，潇洒同步</span></h2>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<p style="white-space:normal">这一课的内容相对简单，所以我们慢慢享用。</p>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<p>经过上一课的学习，我们已经知道如何远程连接到其他电脑了。从今以后，你就可以在自己的电脑上运行命令，来控制远方的另一台电脑了，很酷吧。<br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">我们继续探究Linux的奇幻网络世界。这个网络世界比较特别，也许你已经有所体会：前辈们做了大量努力，靠加密方法来保证网络间传输的数据的安全，以防我们私人的信息泄露，例如密码。</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p>这一课我们来学习文件传输，主要分为以下几方面：</p>&#13;
<p><br />&#13;
</p>&#13;
<ul class=" list-paddingleft-2" style="list-style-type:disc">&#13;
<li>&#13;
<p>如何下载文件</p>&#13;
</li><li>&#13;
<p>如何连接到FTP，读取，下载文件</p>&#13;
</li><li>&#13;
<p>如何安全地拷贝文件<br />&#13;
</p>&#13;
</li></ul>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<p style="white-space:normal">其中涉及的关于网络方面的知识，可以查阅小编已完结的系列教程《<a target="_blank" href="http://mp.weixin.qq.com/s?__biz=MzAxMTE3MDkyMA==&amp;mid=400575249&amp;idx=5&amp;sn=94ca4257ab2bbd29009c6bcae9aed079&amp;scene=21#wechat_redirect">Web探索之旅</a>》：<a target="_blank" title="" href="http://blog.csdn.net/column/details/webexplore.html">http://blog.csdn.net/column/details/webexplore.html</a>​</p>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<hr style="white-space:normal" />&#13;
<p style="white-space:normal"><span style="color:#ffffff; background-color:rgb(0,176,80)">wget：下载文件</span></p>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">我们就从一个简单的命令开始吧，就是：wget</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">它可以使我们直接从终端控制台下载文件，只需要给出文件的HTTP或FTP地址。</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">命令格式：</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p>wget  [参数]  [URL地址]</p>&#13;
<p><br />&#13;
</p>&#13;
<p>例如：</p>&#13;
<p><br />&#13;
</p>&#13;
<pre class="brush:bash;toolbar:false">wget http://cdimage.debian.org/debian-cd/8.2.0/i386/iso-cd/debian-8.2.0-i386-netinst.iso</pre>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">就会开始从http://cdimage.debian.org/debian-cd/8.2.0/i386/iso-cd/上下载debian-8.2.0-i386-netinst.iso这个文件。</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">如果要停止下载，只需要按Ctrl +C</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">可以看到下方会出现一个进度条，显示下载进度：</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement"><img src="https://mmbiz.qlogo.cn/mmbiz/iaHL5mQLicPYMaQnuIoQMzu7vdrwl8Xn3ub8DIObiaCibwxaHPHX725wPtugp2I1ooLJ90gXqGAeGwOcvPxTd6XnUg/0?wx_fmt=jpeg" alt="" /><br />&#13;
</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">38%表示已下载百分之38。</p>&#13;
<p class="hoveredCourseElement">117k/s是下载速度，表示117kb每秒。</p>&#13;
<p class="hoveredCourseElement">eta是预计剩余时间，此处是70秒。</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">那么，怎么事先获得供wget下载的地址呢？</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">你可以用浏览器（比如firefox），找到要下载的文件，然后在文件上点击鼠标右键，左键点击"复制链接地址"，如下图：</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement"><img src="https://mmbiz.qlogo.cn/mmbiz/iaHL5mQLicPYMaQnuIoQMzu7vdrwl8Xn3uxbn05ibyAhUncwO2EmFu3ia4KP9KZ7qDEF9DeldChdWodUkyh9nPOy7Q/0?wx_fmt=jpeg" alt="" /><br />&#13;
</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">然后黏贴到wget命令的地址参数中就可以了。</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">wget 非常稳定，它在带宽很窄的情况下和不稳定网络中有很强的适应性。如果是由于网络的原因下载失败，wget会不断的尝试，直到整个文件下载完毕。如果是服务器打断下载过程，它会再次联到服务器上从停止的地方继续下载。这对从那些限定了链接时间的服务器上下载大文件非常有用。简直是bug般的存在。</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement"><strong><span style="color:#ffffff; background-color:rgb(255,76,0)">继续中断的下载</span></strong></p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">要继续一个中断的下载，只要在相同的下载命令中加入 -c 参数，例如：</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<pre class="brush:bash;toolbar:false">wget -c http://cdimage.debian.org/debian-cd/8.2.0/i386/iso-cd/debian-8.2.0-i386-netinst.iso</pre>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">c是英语continue的缩写，表示“继续”。<br />&#13;
</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">wget有非常多的参数选项，我们不能逐一列举。可以参看wget的使用手册：man wget<br />&#13;
</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">wget的一个不错的地方是它显示下载的进度。稍后我们会学习的ftp命令则不会显示下载进度。<br />&#13;
</p>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<hr style="white-space:normal" />&#13;
<p style="white-space:normal"><span style="color:#ffffff; background-color:rgb(0,176,80)">scp：网间拷贝</span></p>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<p>我们以前的课程中学习过cp命令，它用于在自己的电脑上拷贝文件。</p>&#13;
<p><br />&#13;
</p>&#13;
<p>scp是Secure CoPy的缩写，表示“安全拷贝”。这个命令可以使我们通过网络，把文件从一台电脑拷贝到另一台。当然，拷贝的信息是安全的，正如它的名字所示。</p>&#13;
<p><br />&#13;
</p>&#13;
<p>也有一个命令rcp，是Remote CoPy的缩写。也可以做同样的事，但是信息没有得到安全保护，不推荐。</p>&#13;
<p><br />&#13;
</p>&#13;
<p>scp使用起来有点类似上一课学过的SSH（Secure SHell）。这并不是巧合，因为scp是基于SSH的原理来运作的。SSH首先会在两台通过网络连接的电脑之间创建一条安全通信的管道（如上一课所示），scp就利用这条管道安全地拷贝文件。</p>&#13;
<p><br />&#13;
</p>&#13;
<p>scp的基本命令格式如下：</p>&#13;
<p><br />&#13;
</p>&#13;
<pre class="brush:bash;toolbar:false">scp original_file destination_file</pre>&#13;
<p><br />&#13;
</p>&#13;
<p>其中original_file表示源文件，就是被拷贝的文件。destination_file表示目标文件，就是拷贝产生的文件。</p>&#13;
<p><br />&#13;
</p>&#13;
<p>这两个文件都可以如下方式来表示：</p>&#13;
<p><br />&#13;
</p>&#13;
<p>user@ip:file_name</p>&#13;
<p><br />&#13;
</p>&#13;
<p>其中user是登录名，ip是域名（例如google.fr）或ip地址（例如89.231.45.67），file_name是文件路径。不要忘了中间的@号和冒号（:）。</p>&#13;
<p><br />&#13;
</p>&#13;
<p><strong><span style="color:#ffffff; background-color:rgb(255,76,0)">从自己电脑拷贝文件到另一台电脑</span></strong><br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p style="white-space:normal">这很简单，例如：</p>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<pre class="brush:bash;toolbar:false">scp image.png oscar@89.231.45.67:/home/oscar/images/</pre>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<p style="white-space:normal">表示把我的电脑中当前文件夹下的image.png文件拷贝到远程电脑（ip地址是89.231.45.67）的用户oscar的/home/oscar/images目录下，文件名不变（还是image.png，你也可以改名字）。如下图所示：</p>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<p style="white-space:normal"><img src="https://mmbiz.qlogo.cn/mmbiz/iaHL5mQLicPYMaQnuIoQMzu7vdrwl8Xn3uiblSHlmiax8ewzVAzIr9bcqQ4tZqg4X1vBOGb3ZLSxASG9M2JG4uMK7g/0?wx_fmt=jpeg" alt="" /><br />&#13;
</p>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<p style="white-space:normal">当然了，scp会请求你输入远程电脑（ip地址是89.231.45.67）的用户oscar的密码。输入密码，回车，就开始拷贝了。</p>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<p style="white-space:normal"><strong><span style="color:#ffffff; background-color:rgb(255,76,0)">从<strong><span style="color:#ffffff; background-color:rgb(255,76,0)">另一台电脑</span></strong>拷贝文件到自己电脑</span></strong></p>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<p style="white-space:normal">类似的用法，例如：</p>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<pre class="brush:bash;toolbar:false">scp oscar@89.231.45.67:/home/oscar/images/image.png file_changed_name.png</pre>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<p style="white-space:normal">表示从远程电脑（ip地址是89.231.45.67）的用户oscar的/home/oscar/images目录下把image.png拷贝到我的电脑中当前文件夹下，并改名为file_changed_name.png（不改名也可以）。如下图所示：</p>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<p style="white-space:normal"><img src="https://mmbiz.qlogo.cn/mmbiz/iaHL5mQLicPYMaQnuIoQMzu7vdrwl8Xn3u9vbwnrShic0OAM0icQOwev6U4fom9TSLERFLiaQMbPC17q4icOVkxKF9gw/0?wx_fmt=jpeg" alt="" /><br />&#13;
</p>&#13;
<p style="white-space:normal"><strong><span style="color:#ffffff; background-color:rgb(255,76,0)">修改端口</span></strong><br />&#13;
</p>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<p style="white-space:normal">上述命令中，我们并没有指定用哪个端口，只指定了ip地址。默认的端口号是22，和SSH一样。我们也可以修改端口号，用-P参数。例如：</p>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<pre class="brush:bash;toolbar:false">scp -P 7821 oscar@89.231.45.67:/home/oscar/images/image.png .</pre>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<p style="white-space:normal">表示从远程电脑（ip地址是89.231.45.67，端口7821）的用户oscar的/home/oscar/images目录下把image.png拷贝到我的电脑中当前文件夹下，名字不变。此处用点号（.）表示当前目录。</p>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<p style="white-space:normal">注意：上一课中，SSH修改端口号使用-p参数，p是小写。而scp修改端口号使用-P参数，P是大写。<br />&#13;
</p>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<hr style="white-space:normal" />&#13;
<p style="white-space:normal"><span style="color:#ffffff; background-color:rgb(0,176,80)">ftp&amp;sftp：传输文件</span></p>&#13;
<p><br />&#13;
</p>&#13;
<p>FTP是File Transfer Protocol的缩写，表示《文件传输协议》。顾名思义，就是用于传输文件的。</p>&#13;
<p><br />&#13;
</p>&#13;
<p>FTP协议已经有点岁数了，1985年诞生，比小编来老呢。现在仍然是传输文件的最常用协议。正所谓“廉颇老矣，尚能饭否”，人家是“FTP当道，宝刀未老”。</p>&#13;
<p><br />&#13;
</p>&#13;
<p>使用ftp主要分为两种情况：</p>&#13;
<p><br />&#13;
</p>&#13;
<ol class=" list-paddingleft-2" style="list-style-type:decimal">&#13;
<li>&#13;
<p>从公共的FTP服务器下载文件。一般来说，当你点击浏览器上的下载链接时，浏览器就以自动和透明的方式来完成这个操作。这种情况下，连接是匿名的。</p>&#13;
</li><li>&#13;
<p>从私有的FTP服务器上传或下载文件。当我们从服务器出租商处租用一台服务器作为个人网站之用时，出租商通常会给我们一个FTP的登录名和密码，我们可以连接，以上传及下载文件。这种情况下，连接是需要身份验证的。<br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
</li></ol>&#13;
<p class="hoveredCourseElement">因为并不是每个读者都有自己私人的FTP服务器，所以下面演示的时候，我们会连接到公共的FTP服务器。当然，如果你想要连接到私人FTP服务器，那方法是一样的。</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">我们这里使用纯命令行的形式来操作，当然了，也存在不少优秀的FTP软件，可以提供图形操作界面，例如著名的FileZilla。</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement"><strong><span style="color:#ffffff; background-color:rgb(255,76,0)">连接到FTP服务器</span></strong><br />&#13;
</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p>我们试着连接到Debian的FTP服务器，地址如下：ftp://ftp.debian.org</p>&#13;
<p><br />&#13;
</p>&#13;
<p>方法很简单：</p>&#13;
<p><br />&#13;
</p>&#13;
<pre class="brush:bash;toolbar:false">ftp ftp.debian.org</pre>&#13;
<p><br />&#13;
</p>&#13;
<p>Debian的FTP服务器应该会有所回应，并向你请求输入用户名和密码。对于公共的FTP服务器，用户名一般都填写 anonymous （表示“匿名”）。</p>&#13;
<p><br />&#13;
</p>&#13;
<p>密码你随便输入什么都会被接受。</p>&#13;
<p><br />&#13;
</p>&#13;
<p>登录成功后，会看到类似以下信息：</p>&#13;
<p><br />&#13;
</p>&#13;
<p>230 Login successful.</p>&#13;
<p>Remote system type is UNIX.</p>&#13;
<p>Using binary mode to transfer files.</p>&#13;
<p>ftp&gt;</p>&#13;
<p><br />&#13;
</p>&#13;
<p>现在你有了命令提示符了，就是那个 ftp&gt;</p>&#13;
<p><br />&#13;
</p>&#13;
<p>你就可以输入FTP命令了。</p>&#13;
<p><br />&#13;
</p>&#13;
<p><strong><span style="color:#ffffff; background-color:rgb(255,76,0)">在FTP服务器中操作</span></strong><br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p>好消息：你在FTP服务器上可以使用的命令基本和我们到目前为止学习的Linux命令是一样的。</p>&#13;
<p><br />&#13;
</p>&#13;
<p>例如：</p>&#13;
<p><br />&#13;
</p>&#13;
<p>ls：列出当前目录的文件</p>&#13;
<p>pwd：显示当前目录的路径</p>&#13;
<p>cd：转换目录</p>&#13;
<p><br />&#13;
</p>&#13;
<p>你可以试试其他命令。<br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p><strong><span style="color:#ffffff; background-color:rgb(255,76,0)">文件传输</span></strong><br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p>如果你想要上传及下载文件，有两个命令要知道：</p>&#13;
<p><br />&#13;
</p>&#13;
<ul class=" list-paddingleft-2" style="list-style-type:disc">&#13;
<li>&#13;
<p>put：用于上传文件</p>&#13;
</li><li>&#13;
<p>get：用于下载文件</p>&#13;
</li></ul>&#13;
<p><br />&#13;
</p>&#13;
<p>如下图所示：<br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p><img src="https://mmbiz.qlogo.cn/mmbiz/iaHL5mQLicPYMaQnuIoQMzu7vdrwl8Xn3u20aHL4EwooodgDlQDs9Xiaxrd0HVbyYjRnyY9w7VVVzrhgzRE6g0HQQ/0?wx_fmt=jpeg" alt="" /></p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">我们来下载一个文件试试（README）：</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<pre class="brush:bash;toolbar:false">ftp&gt; get README</pre>&#13;
<p class="hoveredCourseElement">local: README remote: README</p>&#13;
<p class="hoveredCourseElement">200 PORT command successful. Consider using PASV.</p>&#13;
<p class="hoveredCourseElement">150 Opening BINARY mode data connection for README (940 bytes).</p>&#13;
<p class="hoveredCourseElement">226 File send OK.</p>&#13;
<p class="hoveredCourseElement">940 bytes received in 0.00 secs (918.9 kB/s)</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">下载完毕，README文件现在位于你的当前目录了。</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">如果你连接到FTP服务器，但又想要在自己的电脑上运行命令，怎么办呢？</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">只要在命令前加一个感叹号就可以了，例如：</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<pre class="brush:bash;toolbar:false">!pwd</pre>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">就会在自己电脑上执行pwd命令，而不是在FTP服务器上执行。<br />&#13;
</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement"><strong>其他的ftp命令</strong></p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p>还有好些其他的FTP命令，我们就不逐一列举了。<br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">用man ftp来看看其他可用的命令吧。你会发现，并不是所有的命令都与你到目前学过的Linux命令一样的。例如，删除文件不是用rm命令，而是delete命令。<br />&#13;
</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p>要从FTP服务器断开连接，你可以用Ctrl+D组合键。也可以用bye，exit或quit命令，效果是一样的。<br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p><strong><span style="color:#ffffff; background-color:rgb(255,76,0)">sftp：安全加密的ftp</span></strong><br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p>ftp命令虽然方便，但是有一个致命缺点：不安全，数据不是加密传输的。任何人，只要连接到同一个网络，可以想办法截取到你传输的数据，或者你的密码。</p>&#13;
<p><br />&#13;
</p>&#13;
<p>因此，我们需要请出sftp。sftp是Secure FTP的缩写。表示“安全的FTP”。</p>&#13;
<p><br />&#13;
</p>&#13;
<p>sftp也是基于SSH的，所以登录需要用户名和密码，用法如下：</p>&#13;
<p><br />&#13;
</p>&#13;
<pre class="brush:bash;toolbar:false">sftp user@ip</pre>&#13;
<p><br />&#13;
</p>&#13;
<p>例如：</p>&#13;
<p><br />&#13;
</p>&#13;
<pre class="brush:bash;toolbar:false">sftp oscar@coderunity.com</pre>&#13;
<p><br />&#13;
</p>&#13;
<p>一旦你输入用户名和密码，连接上之后，其他的操作和ftp是一样的。只不过通信被加密了，更安全。</p>&#13;
<p><br />&#13;
</p>&#13;
<p>用man sftp来看看其他可用的命令和参数吧。</p>&#13;
<p><br />&#13;
</p>&#13;
<p style="white-space:normal">上述命令中，我们并没有指定用哪个端口，只指定了ip地址。默认的端口号是22，和SSH一样。我们也可以修改端口号，用-oPort参数。例如：</p>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<pre class="brush:bash;toolbar:false">sftp -oPort 3592 oscar@89.231.45.67</pre>&#13;
<p><br />&#13;
</p>&#13;
<hr style="white-space:normal" />&#13;
<p style="white-space:normal"><span style="color:#ffffff; background-color:rgb(0,176,80)">rsync：同步备份</span></p>&#13;
<p><br />&#13;
</p>&#13;
<p>rsync命令易于使用，功能很强大。</p>&#13;
<p><br />&#13;
</p>&#13;
<p>rsync是一个小程序，需要安装，默认系统一般没有这个命令。</p>&#13;
<p><br />&#13;
</p>&#13;
<pre class="brush:bash;toolbar:false">sudo apt-get install rsync</pre>&#13;
<p><br />&#13;
</p>&#13;
<p>rsync命令使我们可以同步两个目录，不管这两个目录位于同一台电脑还是不同的电脑（用网络连接）。</p>&#13;
<p><br />&#13;
</p>&#13;
<p>rsync应该是最常用于“增量备份”的命令了吧。什么是“增量备份”呢？</p>&#13;
<p><br />&#13;
</p>&#13;
<p>增量备份（incremental backup）是备份的一个类型，指在一次全备份或上一次增量备份后，以后每次的备份只需备份与前一次相比增加或者被修改的文件。</p>&#13;
<p><br />&#13;
</p>&#13;
<p><strong><span style="color:#ffffff; background-color:rgb(255,76,0)">备份有什么好处呢？</span></strong></p>&#13;
<p><br />&#13;
</p>&#13;
<p>想象一下，假如你不备份文件。那么一旦你的个人电脑遭遇不测，例如坏了，被偷，等等。那么你的数据就找不回来了。如果有写了几十页的论文在里面，那哭倒长城都有可能啊。好些朋友就有过这样惨痛的经历。</p>&#13;
<p><br />&#13;
</p>&#13;
<p>小编以前就有备份的良好习惯，而且我备份不止会在一个地方。<br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p>所以备份很重要。假如你把你电脑上的文件备份到远程服务器上，那么如下图所示：</p>&#13;
<p><br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p><img src="https://mmbiz.qlogo.cn/mmbiz/iaHL5mQLicPYMaQnuIoQMzu7vdrwl8Xn3umULEgY25ibRuFibLhic8ibZ4MTwgibXHGiaiaG97pcGPSlouDiapf7ZlqhFBsg/0?wx_fmt=jpeg" alt="" /></p>&#13;
<p><br />&#13;
</p>&#13;
<p>用rsync来进行备份，是非常方便的。假如，你把自己的用户家目录都备份到服务器上了，也许有十几个G的内容啊。</p>&#13;
<p><br />&#13;
</p>&#13;
<p>第一次备份时，需要传输这整整十几个G的内容，但是以后呢，只需要传输新增或修改的内容就够了，不需要再传一遍。这就是rsync的强大之处，所谓“增量备份”的好处。<br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p><img src="https://mmbiz.qlogo.cn/mmbiz/iaHL5mQLicPYMMiabHBLJicYXu1FbjQoiaD7GXfmrTWCUWWD9fcjPBTF7XAMxNdgatP8S9icZg6iaich82qCzmJMDt8icmg/0?wx_fmt=jpeg" alt="" /><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">如上图所示，我用rsync只传输了新的那个文件。其他的并没有再传输。</p>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">rsync就好像更智能的scp。<br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p><strong><span style="color:#ffffff; background-color:rgb(255,76,0)">备份到同一台电脑的其他目录</span></strong></p>&#13;
<p><strong><span style="color:#ffffff; background-color:rgb(255,76,0)"></span></strong><br />&#13;
</p>&#13;
<pre class="brush:bash;toolbar:false">rsync -arv Images/ backups/</pre>&#13;
<p class="hoveredCourseElement"><br />&#13;
</p>&#13;
<p class="hoveredCourseElement">以上命令，将Images目录下的所有文件备份到backups目录下。</p>&#13;
<p><br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p>-arv参数分别表示：</p>&#13;
<p><br />&#13;
</p>&#13;
<ul class=" list-paddingleft-2" style="list-style-type:disc">&#13;
<li>&#13;
<p>-a：保留文件的所有信息，包括权限，修改日期，等等。</p>&#13;
</li><li>&#13;
<p>-r：递归调用。表示子目录的所有文件也都包括。</p>&#13;
</li><li>&#13;
<p>-v：冗余模式。输出详细操作信息。<br />&#13;
</p>&#13;
</li></ul>&#13;
<p><br />&#13;
</p>&#13;
<p><strong><span style="color:#ffffff; background-color:rgb(255,76,0)">删除文件</span></strong><br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p>默认地，rsync在同步时并不会删除目标目录的文件。例如，你的源目录（被同步目录）中删除了一个文件，但是用rsync同步时，它并不会删除同步目录中的相同文件。</p>&#13;
<p><br />&#13;
</p>&#13;
<p>如果要使rsync也同步删除操作。那么可以这么做：</p>&#13;
<p><br />&#13;
</p>&#13;
<pre class="brush:bash;toolbar:false">rsync -arv --delete Images/ backups/</pre>&#13;
<p><br />&#13;
</p>&#13;
<p>加上 --delete 参数就可以了。<br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p><strong><span style="color:#ffffff; background-color:rgb(255,76,0)">备份到另一台电脑的目录</span></strong></p>&#13;
<p><strong><span style="color:#ffffff; background-color:rgb(255,76,0)"><br />&#13;
</span></strong></p>&#13;
<pre class="brush:bash;toolbar:false">rsync -arv --delete Images/ oscar@89.231.45.67:backups/</pre>&#13;
<p><br />&#13;
</p>&#13;
<p>是不是很简单呢。<br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p>至于更多参数，可以用man rsync学习。<br />&#13;
</p>&#13;
<p><br />&#13;
</p>&#13;
<p>当然，rsync的强大之处绝不止于此。</p>&#13;
<p><br />&#13;
</p>&#13;
<p>你可以自己配置rsync，使得它从指定目录（可以是多个目录）备份到指定的ip地址的目录下，而且可以指定哪些类型文件是要备份的，哪些类型不要备份，然后把这一长串命令统一用Shell来写成一个文件（例如取名叫backup），使之可执行（用chmod命令），再把这个文件的路径添加到PATH中。</p>&#13;
<p><br />&#13;
</p>&#13;
<p>这样你以后不论在哪个目录下输入backup，rsync就帮你自动同步了，非常帅气。这酸爽，不言而喻~</p>&#13;
<p><br />&#13;
</p>&#13;
<p>至于怎么做，就算是留给大家的课后兴趣作业咯。可以自己百度，例如“Ubuntu下rsync配置”。<br />&#13;
</p>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<hr style="white-space:normal" />&#13;
<p style="white-space:normal"><span style="color:#ffffff; background-color:rgb(0,176,80)">总结</span></p>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<ol class=" list-paddingleft-2" style="list-style-type:decimal">&#13;
<li>&#13;
<p style="white-space:normal">wget命令可以下载文件。</p>&#13;
</li><li>&#13;
<p style="white-space:normal">为了将文件从一台电脑拷贝到另一台电脑，我们可以使用scp命令。它使用上一课提到的SSH，因此传输是加密的，是安全的。</p>&#13;
</li><li>&#13;
<p style="white-space:normal">我们可以用ftp命令来连接到一个FTP服务器，然后就可以上传及下载文件了。</p>&#13;
</li><li>&#13;
<p style="white-space:normal">sftp和ftp命令类似，但是它用了SSH，所以传输的信息是加密的。</p>&#13;
</li><li>&#13;
<p style="white-space:normal">rsync命令可以同步同一台电脑或两台不同电脑上的两个文件（夹）的内容，用rsync命令来备份文件特别方便。<br />&#13;
</p>&#13;
</li></ol>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<hr style="white-space:normal" />&#13;
<h2 style=""><span style="font-size:18px">第四部分第四课预告</span></h2>&#13;
<p style="white-space:normal"><br />&#13;
</p>&#13;
<p style="white-space:normal">今天的课就到这里，一起加油吧！</p>&#13;
<p style="white-space:normal">下一课我们学习：<strong><span style="color:#0b050">分析网络，隔离防火</span></strong></p>&#13;
   &#13;
