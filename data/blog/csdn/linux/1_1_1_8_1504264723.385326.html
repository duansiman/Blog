

<span style="font-weight:bold">当然此处仅仅是对于单用户请求的处理，对于多用户的请求后面再说！</span><br style="font-weight:bold" />&#13;
<br style="font-weight:bold" />&#13;
<span style="font-weight:bold">对于server处理：</span><br style="font-weight:bold" />&#13;
<span style="font-weight:bold"> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr>server要做的就是创建自己的套接字，然后设置一些参数：例如协议类型，IP之类。</wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></span><br style="font-weight:bold" />&#13;
<span style="font-weight:bold"> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr>然后就是bind参数，再次就是监听( listen)，最后就是accept进入睡眠等待状态，if</wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></span><br style="font-weight:bold" />&#13;
<span style="font-weight:bold"> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr>有cilent的请求就会有反应！</wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></span><br style="font-weight:bold" />&#13;
<span style="font-weight:bold"> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr></wbr></wbr></wbr></wbr></wbr></wbr></span><br style="font-weight:bold" />&#13;
<span style="font-weight:bold">对于chient的处理：</span><br style="font-weight:bold" />&#13;
<span style="font-weight:bold"> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr>建立自己的套接字，然后就是连接到server，发送自己的数据，然后等待server的回送！</wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></span><br />&#13;
<br />&#13;
<br />&#13;
<span style="font-size:16px"><span style="font-weight:bold; font-style:italic">server.cpp</span></span><br />&#13;
<br />&#13;
#include&lt;stdio.h&gt;<br />&#13;
#include&lt;stdlib.h&gt;<br />&#13;
#include&lt;errno.h&gt;<br />&#13;
#include&lt;string.h&gt;<br />&#13;
#include&lt;sys/types.h&gt;<br />&#13;
#include&lt;sys/wait.h&gt;<br />&#13;
 &#13;
<div id="sina_keyword_ad_area2" class="articalContent  "><wbr><br />&#13;
#include&lt;sys/socket.h&gt;<br />&#13;
#include&lt;netinet/in.h&gt;<br />&#13;
#include&lt;arpa/inet.h&gt;<br />&#13;
 <wbr><br />&#13;
#include &lt;iostream&gt;<br />&#13;
using namespace std;<br />&#13;
 <wbr><br />&#13;
#define PORT6000 <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr>//!&gt; 端口<br />&#13;
#define MAX_REQ5 <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr>//!&gt; 监听情况下：在请求队列中允许的最大请求数<br />&#13;
 <wbr><br />&#13;
int main()<br />&#13;
{<br />&#13;
 <wbr> <wbr> <wbr> intlisten_socket,client_socket; <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr>//!&gt; 监听，客户套接字<br />&#13;
 <wbr> <wbr> <wbr> structsockaddr_inlocal_addr; <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr>//!&gt; server结构<br />&#13;
 <wbr> <wbr> <wbr> structsockaddr_inclient_addr; <wbr> <wbr> <wbr> <wbr> <wbr> <wbr>//!&gt; client结构<br />&#13;
 <wbr> <wbr> <wbr> intrecv_len;<br />&#13;
 <wbr> <wbr> <wbr> <wbr><br />&#13;
<br />&#13;
 <wbr><br />&#13;
 <wbr> <wbr> <wbr> charbuf[1024];<br />&#13;
 <wbr> <wbr> <wbr> charrecv_buf[1024];<br />&#13;
 <wbr><br />&#13;
 <wbr> <wbr> <wbr>//!&gt; <wbr> <wbr> <wbr> intsocket(int domain, int type, int protocol);参数：协议族；套接字类型；协议，一般为0-&gt;TCP/IP<br />&#13;
 <wbr><br />&#13;
 <wbr> <wbr> <wbr>//!&gt; 创建套接字<br />&#13;
 <wbr> <wbr> <wbr>//!&gt;<br />&#13;
 <wbr> <wbr> <wbr>if((listen_socket = socket(AF_INET,SOCK_STREAM, 0)) ==-1) <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr>//!&gt; 创建套接字<br />&#13;
 <wbr> <wbr> <wbr> {<br />&#13;
 <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr>cout &lt;&lt; "创建server套接字失败～"&lt;&lt; endl;<br />&#13;
 <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr>exit(1);<br />&#13;
 <wbr> <wbr> <wbr> }<br />&#13;
 <wbr><br />&#13;
 <wbr> <wbr> <wbr>//!&gt; 下面设置本地的套接字的参数结构<br />&#13;
 <wbr> <wbr> <wbr>//!&gt; <wbr><br />&#13;
 <wbr> <wbr> <wbr>local_addr.sin_family =AF_INET; <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr>//!&gt; 代表TCP/IP<br />&#13;
 <wbr> <wbr> <wbr>local_addr.sin_port =htons(PORT); <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr>//!&gt; 端口号( 转化成流格式 )<br />&#13;
 <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr> <wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></wbr></div>