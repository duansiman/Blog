

<pre code_snippet_id="2570952" snippet_file_name="blog_20170909_1_2159453" name="code" class="cpp">static int get_master_uuid(MYSQL *mysql, Master_info *mi)
    if (!mysql_real_query(mysql,STRING_WITH_LEN("SHOW VARIABLES LIKE 'SERVER_UUID'")) &amp;&amp;(master_res= mysql_store_result(mysql)) &amp;&amp; (master_row= mysql_fetch_row(master_res))){
        strcmp(::server_uuid, master_row[1]);
	}
int io_thread_init_commands(MYSQL *mysql, Master_info *mi)
    sprintf(query, "SET @slave_uuid= '%s'", server_uuid);
    mysql_real_query(mysql, query, strlen(query));</pre>这两个函数分别获取master的server_uuid，保存到：：server_uuid中和将slave 的server_uuid注册到master中。&#13;
   &#13;
