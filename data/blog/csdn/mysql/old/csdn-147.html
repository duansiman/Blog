\n <div class="markdown_views"><h1 id="更新和删除数据">更新和删除数据</h1>\n\n<p>上篇博文介绍了下插入数据的几种方式。这篇博文就来讲述下更新和删除数据。</p>\n\n\n\n<h1 id="更新数据">更新数据</h1>\n\n<p>更新（修改）表中的数据，使用update语句。</p>\n\n<p>更新数据一般采用如下两种方式：</p>\n\n<blockquote>\n <ul>\n <li>更新表中特定行的数据。</li>\n <li>更新表中所有行的数据。</li>\n </ul>\n</blockquote>\n\n<p>作为一个老师，可能在登入成绩时，将某人的成绩登错了，应该怎么来修改呢？例如：更新student2表中name=’z’的mathScore成绩为99分的语句如下：</p>\n\n<pre><code>update student2 set mathScore=99 where name='z';\n</code></pre>\n\n<p><img src="http://7xknzt.com1.z0.glb.clouddn.com/MySQL_update_v1.PNG" alt="" title="" /></p>\n\n<p>在更新数据时，一定要加上 where子句，否则，就会将表中所有的行数据进行了相同的更新。</p>\n\n<p>如下就是更新了表中所有行的mathScore了99；</p>\n\n<pre><code>update student2 set mathScore=99;\n</code></pre>\n\n<p><img src="http://7xknzt.com1.z0.glb.clouddn.com/MySQL_update_v2.PNG" alt="" title="" /></p>\n\n<p>因此，在使用update更新（修改）表中的数据时，一定要谨慎。因此在MySQL中是没有撤销命令的。</p>\n\n<p><font color="red">ignore关键字:如果用update语句更新多行，并且在更新这些行中的一行或多行时出一个错误，则整个update操作被取消（错误发生前更新的所有行被恢复到它们原来的值）。为了即使发生错误，因为继续进行更新，可使用ignore关键字，如下所有： <br />\nupdate ignore student2 …; </font></p>\n\n\n\n<h2 id="删除数据">删除数据。</h2>\n\n<p>删除数据，使用delete语句。</p>\n\n<p>删除数据一般采用如下两种方式：</p>\n\n<blockquote>\n <ul>\n <li>删除表中特定行的数据。</li>\n <li>删除表中所有行的数据。</li>\n </ul>\n</blockquote>\n\n<p>例如：将表student2中的name=’z’的行数据删除，语句如下：</p>\n\n<pre><code>delete from student2 where name='z';\n</code></pre>\n\n<p><img src="http://7xknzt.com1.z0.glb.clouddn.com/MySQL_delete_v1.PNG" alt="" title="" /> <br />\n<font color="red">注意：一定要有where子句。否则会删除表中的所有行。</font></p>\n\n<p>如下就是在没有where子句的删除语句。</p>\n\n<pre><code>delete from student2 ;//删除表中所有行数据。\n</code></pre>\n\n<p><img src="http://7xknzt.com1.z0.glb.clouddn.com/MySQL_delete_v2.PNG" alt="" title="" /></p>\n\n<p>如果我们真的要删除某个表中的数据时，《MySQL必知必会》这本书上介绍建议我们使用 truncate关键字来做。说这样性能会快点，因此，delete删除表中的数据是一行一行的删除，而truncate是直接删除此表，再新建一个表。</p>\n\n<p>实践结果如下，</p>\n\n<p><img src="http://7xknzt.com1.z0.glb.clouddn.com/MySQL_truncate_v1.PNG" alt="" title="" /></p>\n\n<p>从结果可以看出，truncate student2 语句的执行时间比 delete from student2要慢一些；</p>\n\n<p><font color="red" size="4">分析了下原因：可能是表中的数据只有3行，而创建表需要的时间也是比较大的，因此效果就没有体现出来。如果数据比较多，创建表的时间相比删除很多行数据就可以被忽略了，truncate将会效果更好。</font></p>\n\n<p>用delete只能以行为单位进行删除，如果我们要删除某列的值，应该怎么做呢？</p>\n\n<p>解决方法是：利用update设置他为NULL（假如表定义允许NULL值）；</p>\n\n<p>例如</p>\n\n<pre><code>update student2 set mathScore=NULL where name='z';\n</code></pre>\n\n<p><img src="http://7xknzt.com1.z0.glb.clouddn.com/MySQL_update_v5.PNG" alt="" title="" /></p>\n\n\n\n<h2 id="小结">小结</h2>\n\n<p>使用update或delete时所遵循的习惯如下：</p>\n\n<p>1、除非确实打算更新和删除每一行，否则绝对不要使用不带where子句的update或delete语句。</p>\n\n<p>2、在对update或delete语句使用where子句前，最好先用select进行测试，保证它过滤的你想要过滤的数据，以防编写的where子句不正确。</p>\n\n<p><font color="red" size="5">MySQL没有撤销按钮。应该非常小心的使用update和delete，否则会错误的更新和删除了表中的数据。</font></p></div>&#13;\n <script type="text/javascript">&#13;\n $(function () {&#13;\n $('pre.prettyprint code').each(function () {&#13;\n var lines = $(this).text().split('\\n').length;&#13;\n var $numbering = $('&lt;ul/&gt;').addClass('pre-numbering').hide();&#13;\n $(this).addClass('has-numbering').parent().append($numbering);&#13;\n for (i = 1; i &lt;= lines; i++) {&#13;\n $numbering.append($('&lt;li/&gt;').text(i));&#13;\n };&#13;\n $numbering.fadeIn(1700);&#13;\n });&#13;\n });&#13;\n </script>&#13;\n &#13;\n
