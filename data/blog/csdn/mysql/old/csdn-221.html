\n\n一、理论：<br />&#13;\n1.使用连接池<br />&#13;\na.把连接当做对象或设备，统一放在‘连接池’里。凡是需要访问数据库的地方都从连接池里取连接<br />&#13;\n2.减少对mysql的访问：<br />&#13;\na.避免对同一数据做重复检索<br />&#13;\nb.使用查询缓存<br />&#13;\n1)have_query_cache:表明服务器在安装时是否已经配置了高速缓存<br />&#13;\n2)query_cache_size:表明缓存区大小<br />&#13;\n3)query_cache_type:0/off = 缓存关闭，1/on = 缓存打开（使用sql_no_cache的select除外），2/demand（只有带sql_cache的select语句提供高速缓存<br />&#13;\n3.使用show status命令，监视查询缓存使用：<br />&#13;\na.qcache_queries_in_cache:在缓存中已注册的查询数目<br />&#13;\nb.qcache_inserts:被加入到缓存中的查询数目<br />&#13;\nc.qcache_his:缓存采样数目<br />&#13;\nd.qcache_lowmem_prunes:因为缺少内存而被从缓存中删除的查询数目 <br />&#13;\ne.qcache_not_cached:没有被缓存的查询数目 <br />&#13;\nf.qcache_free_memory:查询缓存的空间内存总数<br />&#13;\ng.qcache_free_blocks:查询缓存的空闲内存块数目 <br />&#13;\nh.qcache_total_blocks:查询缓存的块的总数目<br />&#13;\n4.增加cache层：<br />&#13;\na.将部分数据从数据库抽取出来存成文件<br />&#13;\nb.建立二级数据库<br />&#13;\n5.负载均衡：<br />&#13;\na.采取mysql复制分流查询操作<br />&#13;\nb.采取分布式数据库架构，具体可以用mysql的cluster功能，但必须采用innod存储引擎<br />&#13;\n6.其他优化方案：<br />&#13;\na.对于没有删除行操作的myisam表，插入操作可以和查询操作并行进行。因为不会出现阻塞。如果一定要删除，可以在空闲时间删除。并且在删除之后进行optimize操作<br />&#13;\nb.充分利用列有默认值，只有插入的值不同于默认值时才‘明确’插入值，这样可以提高插入速度<br />&#13;\n<p>c.表的字段尽可能不使用自增长变量，因为在高并发情况下自增长可能对效率有影响</p>&#13;\n<p>二、实践：</p>&#13;\n<pre name="code" class="sql">mysql&gt; use sakila;\nReading table information for completion of table and column names\nYou can turn off this feature to get a quicker startup with -A\n\nDatabase changed\nmysql&gt; show variables like '%query_cache%';\n+------------------------------+---------+\n| Variable_name | Value |\n+------------------------------+---------+\n| have_query_cache | YES |\n| query_cache_limit | 1048576 |\n| query_cache_min_res_unit | 4096 |\n| query_cache_size | 0 |\n| query_cache_type | OFF |\n| query_cache_wlock_invalidate | OFF |\n+------------------------------+---------+\n6 rows in set (0.00 sec)</pre><br />&#13;\n<br />&#13;\n &#13;\n
