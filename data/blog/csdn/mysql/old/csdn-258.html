\n\n<p><span style="font-size:18px">        我们接着上一篇的添加约束的操作讲述。</span></p>&#13;\n<h1><span style="font-size:18px">        <span style="color:#ff0000">三添加约束</span></span></h1>&#13;\n<h2><span style="font-size:18px">        <span style="color:#33cc00">(3)添加外键约束</span></span></h2>&#13;\n<p><span style="font-size:18px">        ALTER TABLE table_name ADD [CONSTRAINT [symbol]] FOREIGN KEY [index_name] [index_type] </span></p>&#13;\n<p><span style="font-size:18px">(index_col_name,...) references_definition;</span></p>&#13;\n<p><span style="font-size:18px">        例子：</span></p>&#13;\n<p><span style="font-size:18px">        <span style="color:#ff6600">ALTER TABLE users2 ADD FOREIGN KEY (pid) REFERENCES provinces (id);</span></span></p>&#13;\n<p><span style="font-size:18px">        SHOW COLUMNS FROM users2;</span></p>&#13;\n<p style="text-align:center"><span style="font-size:18px"><img src="http://img.blog.csdn.net/20160511155321832?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" /><br />&#13;\n</span></p>&#13;\n<h2><span style="font-size:18px">        <span style="color:#33cc00">(4)添加默认约束</span></span></h2>&#13;\n<span style="font-size:18px">        ALTER TABLE table_name ALTER [COLUMN] col_name {SET DEFAULT literal} ;<br />&#13;\n</span>&#13;\n<p><span style="font-size:18px">        例子：</span></p>&#13;\n<p><span style="font-size:18px">        首先添加一列要做为默认约束的字段：</span></p>&#13;\n<span style="font-size:18px">        <span style="color:#ff6600">ALTER TABLE users2 ADD age TINYINT UNSIGNED NOT NULL;</span><br />&#13;\n</span>&#13;\n<p><span style="font-size:18px">        SHOW COLUMNS FROM users2;</span></p>&#13;\n<p style="text-align:center"><span style="font-size:18px"><img src="http://img.blog.csdn.net/20160511155551074?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" /><br />&#13;\n</span></p>&#13;\n<p><span style="font-size:18px">        添加默认约束age字段为默认值为15：</span></p>&#13;\n<p><span style="font-size:18px">        <span style="color:#ff6600">ALTER TABLE users2  ALTER age SET DEFAULT 15;</span></span></p>&#13;\n<p><span style="font-size:18px">        SHOW COLUMNS FROM users2;</span></p>&#13;\n<p style="text-align:center"><span style="font-size:18px"><img src="http://img.blog.csdn.net/20160511155607868?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" /><br />&#13;\n</span></p>&#13;\n<h1><span style="font-size:18px">        <span style="color:#ff0000">四删除约束</span></span></h1>&#13;\n<h2><span style="font-size:18px">        <span style="color:#33cc00">(1)删除主键约束</span></span></h2>&#13;\n<p><span style="font-size:18px">        删除主键约束语法格式(由于一张数据表只有一个主键，因此不用加上列明)：</span></p>&#13;\n<span style="font-size:18px">        ALTER TABLE table_name DROP PRIMARY KEY;<br />&#13;\n</span>&#13;\n<p><span style="font-size:18px">        例子：</span></p>&#13;\n<span style="font-size:18px">        <span style="color:#ff6600">ALTER TABLE users2  DROP PRIMARY KEY;</span><br />&#13;\n</span>&#13;\n<p><span style="font-size:18px">        SHOW COLUMNS FROM users2;</span></p>&#13;\n<p style="text-align:center"><span style="font-size:18px"><img src="http://img.blog.csdn.net/20160511155808698?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" /><br />&#13;\n</span></p>&#13;\n<h2><span style="font-size:18px">        <span style="color:#33cc00">(2)删除唯一约束</span></span></h2>&#13;\n<p><span style="font-size:18px">        删除唯一约束的语法格式(一张数据表可以有多个唯一约束)：</span></p>&#13;\n<span style="font-size:18px">        ALTER TABLE table_name DROP {INDEX|KEY} index_name;<br />&#13;\n</span>&#13;\n<p><span style="font-size:18px">        例子：</span></p>&#13;\n<p><span style="font-size:18px">        先来查看有索引的字段名称，找到唯一约束字段：</span></p>&#13;\n<p><span style="font-size:18px">        <span style="color:#ff6600">SHOW INDEXES FROM users2\\G;</span></span></p>&#13;\n<p style="text-align:center"><span style="font-size:18px"><img src="http://img.blog.csdn.net/20160511155900278?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" /><br />&#13;\n</span></p>&#13;\n<p><span style="font-size:18px">        <span style="color:#ff6600">ALTER TABLE users2  DROP INDEX username;</span></span></p>&#13;\n<p><span style="font-size:18px">        SHOW COLUMNS FROM users2;</span></p>&#13;\n<p style="text-align:center"><span style="font-size:18px"><img src="http://img.blog.csdn.net/20160511155955731?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" /><br />&#13;\n</span></p>&#13;\n<h2><span style="font-size:18px">        <span style="color:#33cc00">(3)删除外键约束</span></span></h2>&#13;\n<span style="font-size:18px">        ALTER TABLE table_name DROP FOREIGN KEY fk_symbol;<br />&#13;\n</span>&#13;\n<p><span style="font-size:18px">        例子：</span></p>&#13;\n<p><span style="font-size:18px">        先来查看外键约束：</span></p>&#13;\n<p><span style="font-size:18px">        <span style="color:#ff6600">SHOW CREATE TABLE users2;</span></span></p>&#13;\n<p style="text-align:center"><span style="font-size:18px"><img src="http://img.blog.csdn.net/20160511160229170?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" /><br />&#13;\n</span></p>&#13;\n<p><span style="font-size:18px">        由此知道外键约束的名称为users2_ibfk_1，因此可以删除外键约束：</span></p>&#13;\n<p><span style="font-size:18px">        <span style="color:#ff6600">ALTER TABLE users2 DROP REIGN KEY users2_ibfk_1;</span></span></p>&#13;\n<p><span style="font-size:18px">        SHOW CREATE TABLE users2;</span></p>&#13;\n<p style="text-align:center"><span style="font-size:18px"><img src="http://img.blog.csdn.net/20160511160353128?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" /><br />&#13;\n</span></p>&#13;\n<h2><span style="font-size:18px">        <span style="color:#33cc00">(4)删除默认约束</span></span></h2>&#13;\n<p><span style="font-size:18px">        删除默认约束的语法格式为：</span></p>&#13;\n<p><span style="font-size:18px">        ALTER TABLE table_name ALTER [COLUMN] col_name {DROP DEFAULT};</span></p>&#13;\n<p><span style="font-size:18px">        例子：</span></p>&#13;\n<p><span style="font-size:18px">        <span style="color:#ff6600">ALTER TABLE users2  ALTER age DROP DEFAULT;</span></span></p>&#13;\n<p><span style="font-size:18px">        SHOW COLUMNS FROM users2;</span></p>&#13;\n<p style="text-align:center"><span style="font-size:18px"><img src="http://img.blog.csdn.net/20160511155745932?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" /><br />&#13;\n</span></p>&#13;\n<h1><span style="font-size:18px">        <span style="color:#ff0000">五修改列定义和更名数据表</span></span></h1>&#13;\n<h2><span style="font-size:18px">        <span style="color:#33cc00">(1)修改列定义</span></span></h2>&#13;\n<p><span style="font-size:18px">        修改列定义语法格式：</span></p>&#13;\n<p><span style="font-size:18px">        ALTER TABLE table_name MODIFY [COLUMN] col_name column_definition [FIRST | AFTER col_name];</span></p>&#13;\n<p><span style="font-size:18px">        例子：</span></p>&#13;\n<p><span style="font-size:18px">        1)如果我们看到数据表的id字段并没有在第一列，要是改到第一列需要这样做：</span></p>&#13;\n<p><span style="font-size:18px">        SHOW COLUMNS FROM users2;</span></p>&#13;\n<p><span style="font-size:18px">        <span style="color:#ff6600">ALTER TABLE users2 MODIFY id SMALLINT UNSIGNED NOT NULL FIRST;</span></span></p>&#13;\n<p><span style="font-size:18px">        SHOW COLUMNS FROM users2;</span></p>&#13;\n<p style="text-align:center"><span style="font-size:18px"><img src="http://img.blog.csdn.net/20160511160514099?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" /><br />&#13;\n</span></p>&#13;\n<p><span style="font-size:18px">        2)我们也可以修改字段的数据类型：</span></p>&#13;\n<p><span style="font-size:18px">        SHOW COLUMNS FROM users2;</span></p>&#13;\n<p><span style="font-size:18px">        <span style="color:#ff6600">ALTER TABLE users2 MODIFY id TINYINT UNSIGNED NOT NULL FIRST;</span></span></p>&#13;\n<p><span style="font-size:18px">        SHOW COLUMNS FROM users2;</span></p>&#13;\n<p style="text-align:center"><span style="font-size:18px"><img src="http://img.blog.csdn.net/20160511160908735?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" /><br />&#13;\n</span></p>&#13;\n<p><span style="font-size:18px">        大数据类型改到小数据类型会造成数据的丢失。谨慎使用改变数据类型。因此这就需要我们在进行数据库设计的</span></p>&#13;\n<p><span style="font-size:18px">时候一定要事先设计好字段的数据类型，避免不必要的麻烦。</span></p>&#13;\n<h2><span style="font-size:18px">        <span style="color:#33cc00">(2)修改列名称</span></span></h2>&#13;\n<p><span style="font-size:18px">        修改列名称的语法格式：</span></p>&#13;\n<p><span style="font-size:18px">        ALTER TABLE table_name CHANGE [COLUMN] old_col_name new_col_name column_definition [FIRST |</span></p>&#13;\n<p><span style="font-size:18px"> AFTER col_name];</span></p>&#13;\n<p><span style="font-size:18px">        例子：修改列名称和列的数据类型</span></p>&#13;\n<p><span style="font-size:18px">        SHOW COLUMNS FROM users2;<br />&#13;\n        <span style="color:#ff6600">ALTER TABLE users2 CHANGE pid p_id TINYINT UNSIGNED NOT NULL;</span></span></p>&#13;\n<p><span style="font-size:18px">        SHOW COLUMNS FROM users2;</span></p>&#13;\n<p></p>&#13;\n<div style="text-align:center"><img src="http://img.blog.csdn.net/20160511161100830?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" style="font-size:18px" /></div>&#13;\n<h2><span style="font-size:18px">        <span style="color:#33cc00">(3)修改数据表名称</span></span></h2>&#13;\n<p></p>&#13;\n<p><span style="font-size:18px">        修改数据表名称的方式有两种：</span></p>&#13;\n<p><span style="font-size:18px">        方法1：</span></p>&#13;\n<p><span style="font-size:18px">        ALTER TABLE table_name RENAME [TO|AS] new_table_name;</span></p>&#13;\n<p><span style="font-size:18px">        方法2：</span></p>&#13;\n<p><span style="font-size:18px">        RENAME TABLE table_name TO new_table_name [,table_name2 To </span><span style="font-size:18px">new_table_name2] ...;</span></p>&#13;\n<p><span style="font-size:18px">        例子：</span></p>&#13;\n<p><span style="font-size:18px">        SHOW TABLES;</span></p>&#13;\n<p><span style="font-size:18px">        <span style="color:#ff6600">ALTER TABLE users2 RENAME users3;</span></span></p>&#13;\n<p><span style="font-size:18px">        SHOW TABLES;</span></p>&#13;\n<p style="text-align:center"><span style="font-size:18px"><img src="http://img.blog.csdn.net/20160511161320159?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" /><br />&#13;\n</span></p>&#13;\n<p><span style="font-size:18px">        我们再来使用另一种方法修改数据表名称：</span></p>&#13;\n<p><span style="font-size:18px">        <span style="color:#ff6600">RENAME TABLE users3 TO users2;</span></span></p>&#13;\n<p><span style="font-size:18px">        SHOW TABLES;</span></p>&#13;\n<p style="text-align:center"><span style="font-size:18px"><img src="http://img.blog.csdn.net/20160511161339050?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" /><br />&#13;\n</span></p>&#13;\n<p><span style="font-size:18px">        我们应该尽量少使用修改列定义和数据表名称，可能导致视图或存储过程不能使用。</span></p>&#13;\n<h1><span style="font-size:18px">        <span style="color:#ff0000">总结：</span></span></h1>&#13;\n<p><span style="font-size:18px">        修改数据表</span></p>&#13;\n<p><span style="font-size:18px">        针对字段的操作：添加/删除字段、修改列定义，修改列名称等。</span></p>&#13;\n<p><span style="font-size:18px">        针对约束的操作：添加/删除各种约束。</span></p>&#13;\n<p><span style="font-size:18px">        针对数据表的操作：数据表更名(两种方式)。</span></p>&#13;\n<p><span style="font-size:18px"><br />&#13;\n</span></p>&#13;\n<p><span style="font-size:18px"><br />&#13;\n</span></p>&#13;\n &#13;\n
