\n <div class="markdown_views"><h1 id="前言">前言</h1>\n\n<p>在MySQL日常开发或者是维护中，有一些问题或是故障往往是难以避免的，如丢失密码、表损坏。在此总结一下常见的问题，以备今后所需。</p>\n\n\n\n<h1 id="忘记mysql的root密码">忘记MySQL的root密码</h1>\n\n<p>解决办法：</p>\n\n\n\n<h2 id="1登录数据库所在服务器手动kill掉mysql进程">1.登录数据库所在服务器，手动kill掉Mysql进程</h2>\n\n<p>关闭进程的命令为：<code>kill 进程号</code>（linux下） <br />\n 关闭进程的命令为：<code>taskkill 进程号</code>（win下） <br />\n怎么查看进程号呢？ <br />\n我们都知道MySQL的进程号一般都会保存在Mysql数据目录下的，它记录了Mysql的服务进程号。文件名为hostname.pid,如下，其中YEGZT8JOIIU2LKY为主机名。 <br />\n<img src="http://img.blog.csdn.net/20160510144820957" alt="这里写图片描述" title="" /> <br />\nlinux下查看进程通过使用ps命令；在win下，我们也可以通过tasklist查看进程号， <br />\n<img src="http://img.blog.csdn.net/20160510145929692" alt="这里写图片描述" title="" /></p>\n\n<p>打开该文件，可以看到，里面仅仅记录着进程好 <br />\n<img src="http://img.blog.csdn.net/20160510144916092" alt="这里写图片描述" title="" /> <br />\n现在为了方便，我主要演示win下操作，不准备打开虚拟机在测试了。如果我们不熟悉taskkill命令，可以通过taskkill /?来查看命令。 <br />\n<img src="http://img.blog.csdn.net/20160510150650109" alt="这里写图片描述" title="" /></p>\n\n\n\n<h2 id="2使用skip-grant-tables选项重启mysql服务">2.使用–skip-grant-tables选项重启MySQL服务</h2>\n\n<p>linux下 <br />\n语法：<code>./bin/mysqld_safe --skip-grant-tables</code> <br />\n其中<code>--skip-grant-tables</code>选项代表启动mysql <br />\n（注意win下安装的Mysql，我使用<code>mysqld --skip-grant-tables</code> )</p>\n\n<h2 id="3使用空密码的root用户连接mysql并修改root口令">3.使用空密码的root用户连接MySQL，并修改root口令</h2>\n\n<p><img src="http://img.blog.csdn.net/20160510173217159" alt="这里写图片描述" title="" /> <br />\n修改如下 <br />\n因为使用–skip-grant-tables启动，故使用set password命令失败。 <br />\n<img src="http://img.blog.csdn.net/20160510173612209" alt="这里写图片描述" title="" /> <br />\n使用update语句，直接更新mysql数据库中user表。 <br />\n<img src="http://img.blog.csdn.net/20160510173618459" alt="这里写图片描述" title="" /></p>\n\n\n\n<h2 id="4更新权限">4.更新权限</h2>\n\n<p><img src="http://img.blog.csdn.net/20160510173837069" alt="这里写图片描述" title="" /></p>\n\n\n\n<h2 id="5重新登录">5.重新登录</h2>\n\n<p>退出后，发现在此使用mysql -uroot登录，会登陆不成功，只能使用密码登陆。 <br />\n<img src="http://img.blog.csdn.net/20160510173943061" alt="这里写图片描述" title="" /></p>\n\n\n\n<h1 id="处理myisam存储引擎的表损坏">处理MyISAM存储引擎的表损坏</h1>\n\n<p>在使用MySQL，可能会遇到过MyISAM存储引擎的表损坏的情况。如以下情况：</p>\n\n<ul>\n<li>.frm被锁定不能修改</li>\n<li>找不到.myi文件（索引文件)</li>\n<li>我呢间意外结束</li>\n<li>记录文件被毁坏</li>\n<li>从表处理器得到错误nnn <br />\n解决办法1 <br />\n使用MySQL自带的myisamchk工具进行修复 <br />\n打开bin目录，可以看到该工具 <br />\n<img src="http://img.blog.csdn.net/20160510202226668" alt="这里写图片描述" title="" /> <br />\n命令如下 <br />\nmyisamchk -r tablename <br />\nr代表recover <br />\n或 <br />\nmyisamchk -o tablename <br />\n-o参数代表–safe-recover 可以进行更安全的修复 <br />\n解决办法2 <br />\n使用MySQL的CHECK table和repair table命令进行修复 <br />\ncheck table用来检查表是否有损坏，repair table用来对坏表进行修复。</li>\n</ul>\n\n\n\n<h1 id="myisam表过大无法访问问题">MyISAM表过大，无法访问问题</h1>\n\n<p>首先我们可以通过myisamchk命令来查看MyISAM表的情况。如下图，我查看admin表 <br />\n<img src="http://img.blog.csdn.net/20160510203835205" alt="这里写图片描述" title="" /> <br />\ndatefile length代表当前文件大小 <br />\nkeyfile length代表索引文件大小 <br />\nmax datefile length 最大文件大小 <br />\nmax keyfile length 最大索引大小 <br />\n可以通过如下命令来进行扩展数据文件大小 <br />\nalter table table_name MAX_ROWS=88888888 AVG_ROW_LE=66666</p>\n\n\n\n<h1 id="数据目录磁盘空间不足的问题">数据目录磁盘空间不足的问题</h1>\n\n\n\n<h2 id="针对myisam存储引擎">针对MyISAM存储引擎</h2>\n\n<p>可以将数据目录和索引目录存储到不同的磁盘空间。</p>\n\n\n\n<h2 id="针对innodb存储引擎">针对InnoDB存储引擎</h2>\n\n<p>对于InnoDB存储引擎的表，因为数据文件和索引文件时存放在一起的。所以无法将他们分离。当磁盘空间出现不足时候，可以增加一个新的数据文件，这个文件放在有充足空间的磁盘上。具体实现是通过InnoDB_data_file_path中增加此文件。 <br />\ninnodb_data_file_path=/home/mysql/data:10000M;/user/mysql/data:10000M:autoextend <br />\n参数修改之后，需要重启服务器，才可以生效。</p>\n\n\n\n<h1 id="同一台主机上安装多个mysql">同一台主机上安装多个Mysql</h1>\n\n<p>除了每个Mysql安装目录不能相同外，还需要的是port和socket不能一样。 <br />\nmysql.sock就是客户端连接与mysql间通信用的。socket文件，只能本机使用，远程连接要通过tcp/ip了。</p>\n\n\n\n<h1 id="总结">总结</h1>\n\n<p>时隔一个月了，方将《MySQL数据库开发、优化与管理维护》阅读完。感觉这本书还是相当不错的，挺适合像我这样的初学者。在阅读过程中，感觉受益颇多。</p></div>&#13;\n <script type="text/javascript">&#13;\n $(function () {&#13;\n $('pre.prettyprint code').each(function () {&#13;\n var lines = $(this).text().split('\\n').length;&#13;\n var $numbering = $('&lt;ul/&gt;').addClass('pre-numbering').hide();&#13;\n $(this).addClass('has-numbering').parent().append($numbering);&#13;\n for (i = 1; i &lt;= lines; i++) {&#13;\n $numbering.append($('&lt;li/&gt;').text(i));&#13;\n };&#13;\n $numbering.fadeIn(1700);&#13;\n });&#13;\n });&#13;\n </script>&#13;\n &#13;\n
