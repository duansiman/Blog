\n<h2>1.<span style="font-family:宋体">什么是外键：</span></h2><p><span style="color:rgb(0,0,255)">      主键：是唯一标识一条记录，不能有重复的，不允许为空，用来保证数据完整性</span></p><p>      <span style="color: rgb(0, 0, 255);">外键：是另一表的主键<span style="font-family:Times New Roman">, </span><span style="font-family:宋体">外键可以有重复的</span><span style="font-family:Times New Roman">, </span><span style="font-family:宋体">可以是空值，用来和其他表建立联系用的。所以说，如果谈到了外键，一定是至少涉及到两张表。</span></span>例如下面这两张表：</p><p style="text-align:center"> <img src="http://img.blog.csdn.net/20150514155354950?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc3VuaHVhcWlhbmcx/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" /></p><p>     上面有两张表：部门表（<span style="font-family:Times New Roman">dept</span><span style="font-family:宋体">）、员工表</span><span style="font-family:Times New Roman">(emp)</span><span style="font-family:宋体">。</span><span style="font-family:Times New Roman">Id=Dept_id</span><span style="font-family:宋体">，而</span><span style="font-family:Times New Roman">Dept_id</span><span style="font-family:宋体">就是员工表中的外键：因为员工表中的员工需要知道自己属于哪个部门，就可以通过外键</span><span style="font-family:Times New Roman">Dept_id</span><span style="font-family:宋体">找到对应的部门，然后才能找到部门表里的各种字段信息，从而让二者相关联。所以说，</span><span style="color:rgb(255,0,0)">外键一定是在从表中创建，从而找到与主表之间的联系；从表负责维护二者之间的关系。</span></p><h2>2.<span style="font-family:宋体">外键的使用需要满足下列的条件：（这里涉及到了</span><span style="font-family:Times New Roman">InnoDB</span><span style="font-family:宋体">的概念）</span></h2><p>     1. <span style="font-family:宋体">两张表必须都是</span><span style="font-family:Times New Roman">InnoDB</span><span style="font-family:宋体">表，并且它们没有临时表。</span></p><p>      注：<span style="font-family: &quot;Times New Roman&quot;;">InnoDB</span><span style="font-family: 宋体;">是数据库的引擎。</span><span style="font-family: &quot;Times New Roman&quot;;">MySQL</span><span style="font-family: 宋体;">常见引擎有两种：</span><span style="font-family: &quot;Times New Roman&quot;;">InnoDB</span><span style="font-family: 宋体;">和</span><span style="font-family: &quot;Times New Roman&quot;;">MyISAM</span><span style="font-family: 宋体;">，后者不支持外键。</span></p><p>      2. <span style="font-family: 宋体;">建立外键关系的对应列必须具有相似的</span><span style="font-family: &quot;Times New Roman&quot;;">InnoDB</span><span style="font-family: 宋体;">内部数据类型。</span></p><p>      3. <span style="font-family: 宋体;">建立外键关系的对应列必须建立了索引。</span></p><p>      4. <span style="font-family: 宋体;">假如显式的给出了</span><span style="font-family: &quot;Times New Roman&quot;;">CONSTRAINT symbol</span><span style="font-family: 宋体;">，那</span><span style="font-family: &quot;Times New Roman&quot;;">symbol</span><span style="font-family: 宋体;">在数据库中必须是唯一的。假如没有显式的给出，</span><span style="font-family: &quot;Times New Roman&quot;;">InnoDB</span><span style="font-family: 宋体;">会自动的创建。</span></p><h2>面试题：你的数据库用什么存储引擎？区别是？</h2><p>      答案：常见的有<span style="font-family:Times New Roman">MyISAM</span><span style="font-family:宋体">和</span><span style="font-family:Times New Roman">InnoDB</span><span style="font-family:宋体">。</span></p><p>      MyISAM<span style="font-family: 宋体;">：不支持外键约束。不支持事务。对数据大批量导入时，它会边插入数据边建索引，所以为了提高执行效率，应该先禁用索引，在完全导入后再开启索引。</span></p><p>      InnoDB<span style="font-family: 宋体;">：支持外键约束，支持事务。对索引都是单独处理的，无需引用索引。</span></p><p>      CONSTRAINT symbol<span style="font-family: 宋体;">：可以给这个外键约束起一个名字，有了名字，以后找到它就很方便了。如果不加此参数的话，系统会自动分配一个名字。</span></p><p>      FOREIGN KEY<span style="font-family: 宋体;">：将从表中的字段</span><span style="font-family: &quot;Times New Roman&quot;;">1</span><span style="font-family: 宋体;">作为外键的字段。</span></p><p>      REFERENCES<span style="font-family: 宋体;">：映射到主表的字段</span><span style="font-family: &quot;Times New Roman&quot;;">2</span><span style="font-family: 宋体;">。</span></p><p>      ON DELETE<span style="font-family: 宋体;">后面的四个参数：代表的是当删除主表的记录时，所做的约定。</span></p><p>           <span style="color: rgb(0, 0, 255);">RESTRICT(</span><span style="color: rgb(0, 0, 255); font-family: 宋体;">限制</span><span style="color: rgb(0, 0, 255); font-family: &quot;Times New Roman&quot;;">)</span><span style="color: rgb(0, 0, 255); font-family: 宋体;">：如果你想删除的那个主表，它的下面有对应从表的记录，此主表将无法删除。</span></p><p><span style="color:rgb(0,0,255)">           CASCADE<span style="font-family:宋体">（级联）：如果主表的记录删掉，则从表中相关联的记录都将被删掉。</span></span></p><p>           SET NULL<span style="font-family:宋体">：将外键设置为空。</span></p><p>           NO ACTION<span style="font-family:宋体">：什么都不做。</span></p><p>     注：一般是<span style="font-family:Times New Roman">RESTRICT</span><span style="font-family:宋体">和</span><span style="font-family:Times New Roman">CASCADE</span><span style="font-family:宋体">用的最多。</span></p><h2><span style="font-family:宋体;">美文美图</span></h2><div style="text-align: center;"><img src="http://img.blog.csdn.net/20160715211937913?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" /><br /></div><div style="text-align: center;"><img src="http://img.blog.csdn.net/20160715211952382?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" /><br /></div> &#13;\n
