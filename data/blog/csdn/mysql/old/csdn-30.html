\n\n<h1 style="text-align:center">mysql<span style="font-family:宋体">中模糊查询的四种用法介绍</span></h1>&#13;\n<p>这篇文章主要介绍了<span style="font-family:Times New Roman">mysql</span><span style="font-family:宋体">中模糊查询的四种用法</span><span style="font-family:Times New Roman">,</span><span style="font-family:宋体">需要的朋友可以参考下</span>。</p>&#13;\n<p> </p>&#13;\n<p>下面介绍<span style="font-family:Times New Roman">mysql</span><span style="font-family:宋体">中模糊查询的四种用法： </span></p>&#13;\n<h2>1<span style="white-space:pre"> </span>%<span style="font-family:宋体">：</span></h2>&#13;\n<p><span style="font-family:宋体">表示任意</span><span style="font-family:Times New Roman">0</span><span style="font-family:宋体">个或多个字符。可匹配任意类型和长度的字符，有些情况下若是中文，请使用两个百分号（</span><span style="font-family:Times New Roman">%%</span><span style="font-family:宋体">）表示。 </span></p>&#13;\n<p>比如 <span style="font-family:Times New Roman">SELECT * FROM [user] WHERE u_name LIKE '%</span><span style="font-family:宋体">三</span><span style="font-family:Times New Roman">%' </span></p>&#13;\n<p>将会把<span style="font-family:Times New Roman">u_name</span><span style="font-family:宋体">为“张三”，“张猫三”、“三脚猫”，“唐三藏”等等有“三”的记录全找出来。 </span></p>&#13;\n<p>另外，如果需要找出<span style="font-family:Times New Roman">u_name</span><span style="font-family:宋体">中既有“三”又有“猫”的记录，请使用</span><span style="font-family:Times New Roman">and</span><span style="font-family:宋体">条件 </span></p>&#13;\n<p>SELECT * FROM [user] WHERE u_name LIKE '%<span style="font-family:宋体">三</span><span style="font-family:Times New Roman">%' AND u_name LIKE '%</span><span style="font-family:宋体">猫</span><span style="font-family:Times New Roman">%' </span></p>&#13;\n<p>若使用 <span style="font-family:Times New Roman">SELECT * FROM [user] WHERE u_name LIKE '%</span><span style="font-family:宋体">三</span><span style="font-family:Times New Roman">%</span><span style="font-family:宋体">猫</span><span style="font-family:Times New Roman">%' </span></p>&#13;\n<p> </p>&#13;\n<p>虽然能搜索出“三脚猫”，但不能搜索出符合条件的“张猫三”。 </p>&#13;\n<h2>2<span style="white-space:pre"> </span>_<span style="font-family:宋体">：</span></h2>&#13;\n<p><span style="font-family:宋体">表示任意单个字符。匹配单个任意字符，它常用来限制表达式的字符长度语句： </span></p>&#13;\n<p>比如 <span style="font-family:Times New Roman">SELECT * FROM [user] WHERE u_name LIKE '_</span><span style="font-family:宋体">三</span><span style="font-family:Times New Roman">_' </span></p>&#13;\n<p>只找出“唐三藏”这样<span style="font-family:Times New Roman">u_name</span><span style="font-family:宋体">为三个字且中间一个字是“三”的； </span></p>&#13;\n<p> </p>&#13;\n<p>再比如 <span style="font-family:Times New Roman">SELECT * FROM [user] WHERE u_name LIKE '</span><span style="font-family:宋体">三</span><span style="font-family:Times New Roman">__'; </span><span style="font-family:宋体">只找出“三脚猫”这样</span><span style="font-family:Times New Roman">name</span><span style="font-family:宋体">为三个字且第一个字是“三”的； </span></p>&#13;\n<h2>3<span style="white-space:pre"> </span>[ ]<span style="font-family:宋体">：</span></h2>&#13;\n<p><span style="font-family:宋体">表示括号内所列字符中的一个（类似正则表达式）。指定一个字符、字符串或范围，要求所匹配对象为它们中的任一个。 </span></p>&#13;\n<p>比如 <span style="font-family:Times New Roman">SELECT * FROM [user] WHERE u_name LIKE '[</span><span style="font-family:宋体">张李王</span><span style="font-family:Times New Roman">]</span><span style="font-family:宋体">三</span><span style="font-family:Times New Roman">' </span><span style="font-family:宋体">将找出“张三”、“李三”、“王三”（而不是“张李王三”）； </span></p>&#13;\n<p>如 <span style="font-family:Times New Roman">[ ] </span><span style="font-family:宋体">内有一系列字符（</span><span style="font-family:Times New Roman">01234</span><span style="font-family:宋体">、</span><span style="font-family:Times New Roman">abcde</span><span style="font-family:宋体">之类的）则可略写为“</span><span style="font-family:Times New Roman">0-4</span><span style="font-family:宋体">”、“</span><span style="font-family:Times New Roman">a-e</span><span style="font-family:宋体">” </span></p>&#13;\n<p>SELECT * FROM [user] WHERE u_name LIKE '<span style="font-family:宋体">老</span><span style="font-family:Times New Roman">[1-9]' </span><span style="font-family:宋体">将找出“老</span><span style="font-family:Times New Roman">1</span><span style="font-family:宋体">”、“老</span><span style="font-family:Times New Roman">2</span><span style="font-family:宋体">”、……、“老</span><span style="font-family:Times New Roman">9</span><span style="font-family:宋体">”； </span></p>&#13;\n<h2>4<span style="white-space:pre"> </span>[^ ] <span style="font-family:宋体">：</span></h2>&#13;\n<p><span style="font-family:宋体">表示不在括号所列之内的单个字符。其取值和 </span><span style="font-family:Times New Roman">[] </span><span style="font-family:宋体">相同，但它要求所匹配对象为指定字符以外的任一个字符。 </span></p>&#13;\n<p>比如 <span style="font-family:Times New Roman">SELECT * FROM [user] WHERE u_name LIKE '[^</span><span style="font-family:宋体">张李王</span><span style="font-family:Times New Roman">]</span><span style="font-family:宋体">三</span><span style="font-family:Times New Roman">' </span><span style="font-family:宋体">将找出不姓“张”、“李”、“王”的“赵三”、“孙三”等； </span></p>&#13;\n<p>SELECT * FROM [user] WHERE u_name LIKE '<span style="font-family:宋体">老</span><span style="font-family:Times New Roman">[^1-4]'; </span><span style="font-family:宋体">将排除“老</span><span style="font-family:Times New Roman">1</span><span style="font-family:宋体">”到“老</span><span style="font-family:Times New Roman">4</span><span style="font-family:宋体">”，寻找“老</span><span style="font-family:Times New Roman">5</span><span style="font-family:宋体">”、“老</span><span style="font-family:Times New Roman">6</span><span style="font-family:宋体">”、…… </span></p>&#13;\n<p> </p>&#13;\n<h2>5<span style="white-space:pre"> </span><span style="font-family:宋体">查询内容包含通配符时 </span></h2>&#13;\n<p>由于通配符的缘故，导致我们查询特殊字符“<span style="font-family:Times New Roman">%</span><span style="font-family:宋体">”、“</span><span style="font-family:Times New Roman">_</span><span style="font-family:宋体">”、“</span><span style="font-family:Times New Roman">[</span><span style="font-family:宋体">”的语句无法正常实现，而把特殊字符用“</span><span style="font-family:Times New Roman">[ ]</span><span style="font-family:宋体">”括起便可正常查询。据此我们写出以下函数： </span></p>&#13;\n<p>function sqlencode(str) str=replace(str,"';","';';") </p>&#13;\n<p>str=replace(str,"[","[[]") ';<span style="font-family:宋体">此句一定要在最先 </span><span style="font-family:Times New Roman">str=replace(str,"_","[_]") str=replace(str,"%","[%]") sqlencode=str end function</span></p>&#13;\n &#13;\n
