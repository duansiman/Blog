\n\n<pre><span style="color:#ff9900"><strong><a target="_blank" href="http://blog.csdn.net/l1028386804/article/details/46561659">转载请注明出处：http://blog.csdn.net/l1028386804/article/details/46561659</a>&#13;\n</strong></span></pre>&#13;\n<p><span style="color:#ff9900"><strong>数学函数</strong></span></p>&#13;\n<p>1、求余函数MOD(X,Y)</p>&#13;\n<p>MOD(X,Y)返回x被y除后的余数，MOD()对于带有小数部分的数值也起作用，他返回除法运算后的精确余数</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> MOD(<span style="color:#800000; font-weight:bold">31</span>,<span style="color:#800000; font-weight:bold">8</span>)</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/021351034396315.jpg" alt="" /></p>&#13;\n<p>2、四舍五入函数TRUNCATE(X,Y)</p>&#13;\n<p>TRUNCATE(X,Y)返回被舍去至小数点后y位的数字x。若y的值为0，则结果不带有小数点或不带有小数部分。</p>&#13;\n<p>若y设为负数，则截去（归零）x小数点左边起第y位开始后面所有低位的值。</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> <span style="color:#0000ff">TRUNCATE</span>(<span style="color:#800000; font-weight:bold">1.32</span>,<span style="color:#800000; font-weight:bold">1</span>)</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/021400181892328.jpg" alt="" /></p>&#13;\n<p>TRUNCATE(1.32,1)保留小数点后一位数字，返回值为1.3</p>&#13;\n<p>TIPS：ROUND(X,Y)函数在截取值的时候会四舍五入，而TRUNCATE(x，y)直接截取值，并不进行四舍五入</p>&#13;\n<p>3、求余函数HEX(X)和UNHEX（X）函数</p>&#13;\n<p>有以下的代码可以演示HEX和UNHEX的功能：</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> HEX(<span style="color:#ff0000">'</span><span style="color:#ff0000">this is a test str</span><span style="color:#ff0000">'</span>)</pre>&#13;\n</div>&#13;\n<p>查询的结果为：746869732069732061207465737420737472 </p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> UNHEX(<span style="color:#ff0000">'</span><span style="color:#ff0000">746869732069732061207465737420737472</span><span style="color:#ff0000">'</span>)</pre>&#13;\n</div>&#13;\n<p>查询的结果为：this is a test str</p>&#13;\n<hr />&#13;\n<p><span style="color:#ff9900"><strong>字符串函数</strong></span></p>&#13;\n<p>计算字符串字符数的函数</p>&#13;\n<p>1、CHAR_LENGTH(STR)返回值为字符串str所包含的字符个数。一个多字节字符算作一个单字符</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> CHAR_LENGTH(<span style="color:#ff0000">'</span><span style="color:#ff0000">DATE</span><span style="color:#ff0000">'</span>)</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/021735449397456.jpg" alt="" /></p>&#13;\n<p> </p>&#13;\n<p>2、合并字符串函数CONCAT_WS（x,s1,s2,......）</p>&#13;\n<p>CONCAT_WS（x,s1,s2,......）,CONCAT_WS代表CONCAT with Separator，是CONCAT（）函数的特殊形式。</p>&#13;\n<p>第一个参数x是其他参数的分隔符，分隔符的位置放在要连接的两个字符串之间。分隔符可以是一个字符串，也可以是</p>&#13;\n<p>其他参数。如果分隔符为NULL，则结果为NULL。函数会忽略任何分隔符参数后的NULL值。</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> CONCAT_WS(<span style="color:#ff0000">'</span><span style="color:#ff0000">-</span><span style="color:#ff0000">'</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">1st</span><span style="color:#ff0000">'</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">2nd</span><span style="color:#ff0000">'</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">3rd</span><span style="color:#ff0000">'</span>),CONCAT_WS(<span style="color:#ff0000">'</span><span style="color:#ff0000">-</span><span style="color:#ff0000">'</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">1st</span><span style="color:#ff0000">'</span>,<span style="color:#0000ff">NULL</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">3rd</span><span style="color:#ff0000">'</span>)</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/021745322369078.jpg" alt="" /></p>&#13;\n<p>CONCAT_WS('-','1st','2nd','3rd')使用分隔符‘-’将3个字符串连接成一个字符串，结果为“1st-2nd-3rd”；</p>&#13;\n<p>CONCAT_WS('-','1st',NULL,'3rd')因为第二个值为NULL，所以第二个值不会出现在结果里</p>&#13;\n<p><br />&#13;\n</p>&#13;\n<p>3、替换字符串的函数INSERT(S1,X,LEN,S2)</p>&#13;\n<p>INSERT(S1,X,LEN,S2)函数跟SQLSERVER里的STUFF()函数的功能是一样的，这里不作介绍了</p>&#13;\n<p> </p>&#13;\n<p>4、填充字符串的函数LPAD(S1,LEN,S2)和RPAD(S1,LEN,S2)</p>&#13;\n<p>LPAD(S1,LEN,S2)返回字符串s1，其左边由字符串s2填补到len字符串长度。假如s1的长度大于len，则返回值被缩短至len字符。</p>&#13;\n<p><strong>LPAD（）</strong>函数和<strong>RPAD（</strong>）函数功能跟SQLSERVER里的 REPLACE()相似，不过功能更加强大</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> LPAD(<span style="color:#ff0000">'</span><span style="color:#ff0000">hello</span><span style="color:#ff0000">'</span>,<span style="color:#800000; font-weight:bold">4</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">??</span><span style="color:#ff0000">'</span>),LPAD(<span style="color:#ff0000">'</span><span style="color:#ff0000">hello</span><span style="color:#ff0000">'</span>,<span style="color:#800000; font-weight:bold">10</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">??</span><span style="color:#ff0000">'</span>)</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/021813326897400.jpg" alt="" /></p>&#13;\n<p>字符串“hello”长度大于4，不需要填充，因此LPAD('hello',4,'??')只返回被缩短的长度为4的子串</p>&#13;\n<p>字符串“hello”长度小于10，LPAD('hello',10,'??')返回结果为“?????hello”，左侧填充“？”，长度为10</p>&#13;\n<p> </p>&#13;\n<p> </p>&#13;\n<p>5、RPAD(S1,LEN,S2)返回字符串s1，其右边被字符串s2填补至len字符长度。假如字符串s1的长度大于len，则返回值被缩短到len字符长度</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> RPAD(<span style="color:#ff0000">'</span><span style="color:#ff0000">hello</span><span style="color:#ff0000">'</span>,<span style="color:#800000; font-weight:bold">4</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">?</span><span style="color:#ff0000">'</span>)</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/021819166112370.jpg" alt="" /></p>&#13;\n<p> 字符串“hello”长度大于4，不需要填充，因此RPAD('hello',4,'?')只返回被缩短的长度为4的子串"hell"</p>&#13;\n<p> </p>&#13;\n<p>6、删除空格的函数TRIM(S)</p>&#13;\n<p><strong>TRIM(S)</strong>删除字符串s两侧的空格</p>&#13;\n<p>MYSQL这里比SQLSERVER方便，SQLSERVER要删除两边的空格，需要使用： <span class="cnblogs_code"><span style="color:#0000ff">SELECT</span><span style="color:#ff00ff">LTRIM</span>(<span style="color:#ff00ff">RTRIM</span>(<span style="color:#ff0000">'</span><span style="color:#ff0000">&#13;\n hello</span><span style="color:#ff0000">'</span>))</span> </p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> TRIM(<span style="color:#ff0000">'</span><span style="color:#ff0000"> book </span><span style="color:#ff0000">'</span>)</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/021824023777839.jpg" alt="" /></p>&#13;\n<p> </p>&#13;\n<p>删除指定字符串的函数TRIM(S1 FROM S)</p>&#13;\n<p> </p>&#13;\n<p>7、TRIM(S1 FROM S)删除字符串s中两端所有的子字符串s1。s1为可选项，在未指定情况下，删除空格</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> TRIM(<span style="color:#ff0000">'</span><span style="color:#ff0000">xy</span><span style="color:#ff0000">'</span> <span style="color:#0000ff">FROM</span> <span style="color:#ff0000">'</span><span style="color:#ff0000">xyxboxyokxxyxy</span><span style="color:#ff0000">'</span>)</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/021826226731501.jpg" alt="" /></p>&#13;\n<p> </p>&#13;\n<p> 'xyxboxyokxxyxy'两端的重复字符串“xy”，而中间的“xy”并不删除，结果为</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre>xboxyokx</pre>&#13;\n</div>&#13;\n<p> </p>&#13;\n<p>8、重复生成字符串的函数REPEAT(S,N)</p>&#13;\n<p>这个函数跟SQLSERVER里的<strong>REPLICATE()</strong>函数是一样的，参数个数都是一样的，这里不作介绍了</p>&#13;\n<p> </p>&#13;\n<p>9、比较字符串大小的函数STRCMP(S1,S2)</p>&#13;\n<p>STRCMP(S1,S2)若所有的字符串均相同，则返回0；若根据当前分类次序，第一个参数小于第二个，则返回-1，其他情况返回1</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> STRCMP(<span style="color:#ff0000">'</span><span style="color:#ff0000">txt</span><span style="color:#ff0000">'</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">txt2</span><span style="color:#ff0000">'</span>) ,STRCMP(<span style="color:#ff0000">'</span><span style="color:#ff0000">txt2</span><span style="color:#ff0000">'</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">txt</span><span style="color:#ff0000">'</span>),STRCMP(<span style="color:#ff0000">'</span><span style="color:#ff0000">txt</span><span style="color:#ff0000">'</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">txt</span><span style="color:#ff0000">'</span>)</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/021837096583125.jpg" alt="" /></p>&#13;\n<p>“txt”小于“txt2”，因此 STRCMP('txt','txt2') 返回结果为-1</p>&#13;\n<p>STRCMP('txt2','txt')返回结果为1</p>&#13;\n<p>“txt”与“txt”相等，因此STRCMP('txt','txt')返回结果为0</p>&#13;\n<p> </p>&#13;\n<p>10、匹配子串开始位置的函数</p>&#13;\n<p>LOCATE(STR1,STR)、POSITION(STR1 IN STR)、INSTR(STR,STR1)3个函数作用相同，返回子字符串str1在字符串str中的开始位置</p>&#13;\n<p>这三个函数跟SQLSERVER里的<strong>CHARINDEX()</strong>函数功能类似</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> LOCATE(<span style="color:#ff0000">'</span><span style="color:#ff0000">ball</span><span style="color:#ff0000">'</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">football</span><span style="color:#ff0000">'</span>),POSITION(<span style="color:#ff0000">'</span><span style="color:#ff0000">ball</span><span style="color:#ff0000">'</span> <span style="color:#808080">IN</span> <span style="color:#ff0000">'</span><span style="color:#ff0000">football</span><span style="color:#ff0000">'</span>) ,INSTR(<span style="color:#ff0000">'</span><span style="color:#ff0000">football</span><span style="color:#ff0000">'</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">ball</span><span style="color:#ff0000">'</span>)</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/021846143308158.jpg" alt="" /></p>&#13;\n<p>子字符串“ball”在字符串“football”中从第5个字母位置开始，因此3个函数返回结果都为5</p>&#13;\n<p> </p>&#13;\n<p>11、返回指定位置的字符串的函数</p>&#13;\n<p>ELT(N,字符串1,字符串2,字符串3,...,)，若N=1,则返回值为字符串1，若N=2，则返回值为字符串2，以此类推。</p>&#13;\n<p>若N小于1或大于参数的数目，则返回值为NULL</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> ELT(<span style="color:#800000; font-weight:bold">3</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">1st</span><span style="color:#ff0000">'</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">2nd</span><span style="color:#ff0000">'</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">3rd</span><span style="color:#ff0000">'</span>),ELT(<span style="color:#800000; font-weight:bold">3</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">net</span><span style="color:#ff0000">'</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">os</span><span style="color:#ff0000">'</span>)</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/021852156115099.jpg" alt="" /></p>&#13;\n<p>由结果可以看到,ELT(3,'1st','2nd','3rd')返回第3个位置的字符串“3rd”；指定返回字符串位置超出参数个数，返回NULL</p>&#13;\n<p> </p>&#13;\n<p>12、返回指定字符串位置的函数FIELD(S,S1,S2,...)</p>&#13;\n<p>FIELD(S,S1,S2,...)返回字符串s在列表s1，s2，......中第一次出现的位置，在找不到s的情况下，返回值为0。</p>&#13;\n<p>如果s为NULL，则返回值为0，原因是NULL不能同任何值进行同等比较。</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> FIELD(<span style="color:#ff0000">'</span><span style="color:#ff0000">hi</span><span style="color:#ff0000">'</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">hihi</span><span style="color:#ff0000">'</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">hey</span><span style="color:#ff0000">'</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">hi</span><span style="color:#ff0000">'</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">bas</span><span style="color:#ff0000">'</span>) <span style="color:#0000ff">AS</span><span style="color:#000000"> coll,\nFIELD(</span><span style="color:#ff0000">'</span><span style="color:#ff0000">hi</span><span style="color:#ff0000">'</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">hihi</span><span style="color:#ff0000">'</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">lo</span><span style="color:#ff0000">'</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">hilo</span><span style="color:#ff0000">'</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">foo</span><span style="color:#ff0000">'</span>) <span style="color:#0000ff">AS</span> col2</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/021857304085804.jpg" alt="" /></p>&#13;\n<p>FIELD('hi','hihi','hey','hi','bas')函数中字符串hi出现在列表的第3个字符串位置，因此返回结果为3</p>&#13;\n<p>FIELD('hi','hihi','lo','hilo','foo') 列表中没有字符串hi，因此返回结果为0</p>&#13;\n<p> </p>&#13;\n<p>13、返回子串位置的函数FIND_IN_SET(S1,S2)</p>&#13;\n<p>FIND_IN_SET(S1,S2)返回字符串s1在字符串列表s2中出现的位置，字符串列表是一个由多个逗号</p>&#13;\n<p>‘,’分开的字符串组成的列表。如果s1不在s2或s2为空字符串，则返回值为0。如果任意一个参数为NULL，则返回值为NULL。</p>&#13;\n<p>这个函数在第一个参数包含一个逗号‘,’时将无法正常运行。</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> FIND_IN_SET(<span style="color:#ff0000">'</span><span style="color:#ff0000">hi</span><span style="color:#ff0000">'</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">hihi,hey,hi,bas</span><span style="color:#ff0000">'</span>)</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/022308416581156.jpg" alt="" /></p>&#13;\n<p>虽然FIND_IN_SET(S1,S2)和FIELD(S,S1,S2,...)两个函数格式不同，但作用类似，都可以返回指定字符串在字符串列表中的位置</p>&#13;\n<p> </p>&#13;\n<p>14、选取字符串的函数MAKE_SET(X,S1,S2,...)</p>&#13;\n<p>MAKE_SET(X,S1,S2,...)返回由x的二进制数指定的相应位的字符串组成的字符串，s1对应比特1，s2对应比特01以此类推。</p>&#13;\n<p>s1，s2...中的NULL值不会被添加到结果中。</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> MAKE_SET(<span style="color:#800000; font-weight:bold">1</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">a</span><span style="color:#ff0000">'</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">b</span><span style="color:#ff0000">'</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">c</span><span style="color:#ff0000">'</span>) <span style="color:#0000ff">AS</span><span style="color:#000000"> col1,\nMAKE_SET(</span><span style="color:#800000; font-weight:bold">1</span><span style="color:#808080">|</span><span style="color:#800000; font-weight:bold">4</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">hello</span><span style="color:#ff0000">'</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">nice</span><span style="color:#ff0000">'</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">world</span><span style="color:#ff0000">'</span>) <span style="color:#0000ff">AS</span> col2</pre>&#13;\n</div>&#13;\n<p> </p>&#13;\n<p>1的二进制值为0001，4的二进制值为0100，1与4进行异或操作之后的二进制值为0101，从右到左第一位和第三位为1。</p>&#13;\n<p>MAKE_SET(1,'a','b','c')返回第一个字符串</p>&#13;\n<p>MAKE_SET(1|4,'hello','nice','world') 返回从左端开始第一和第三个字符串组成的字符串</p>&#13;\n<p> <img src="http://images.cnitblog.com/i/257159/201405/022315103774345.jpg" alt="" /></p>&#13;\n<hr />&#13;\n<p><span style="color:#ff9900"><strong>日期和时间函数</strong></span></p>&#13;\n<p>1、获取当前日期的函数和获取当前时间的函数</p>&#13;\n<p>CURDATE()、CURRENT_DATE()、CURRENT_TIMESTAMP()、LOCALTIME()、NOW()、SYSDATE()</p>&#13;\n<p>以上函数都是返回当前日期和时间值，MYSQL的函数数量的确比SQLSERVER多很多，<strong>SQLSERVER</strong>获取当前时间和日期用的</p>&#13;\n<p>函数是： <span class="cnblogs_code"><span style="color:#0000ff">SELECT</span> <span style="color:#ff00ff">&#13;\nGETDATE</span>()</span> </p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> NOW()</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/022321566589032.jpg" alt="" /></p>&#13;\n<p> </p>&#13;\n<p>返回UTC日期的函数和返回UTC时间的函数</p>&#13;\n<p>MYSQL里返回UTC日期和时间是分开的，而SQLSERVER里是一起的</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> GETUTCDATE()</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/031650129234296.jpg" alt="" /></p>&#13;\n<p> </p>&#13;\n<p>MYSQL</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> UTC_DATE(),UTC_TIME()</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/031652095338854.jpg" alt="" /></p>&#13;\n<p> </p>&#13;\n<p>2、获取月份的函数MONTHNAME(DATE)</p>&#13;\n<p>MONTHNAME(DATE)函数返回日期date对应月份的英文全名</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> MONTHNAME(<span style="color:#ff0000">'</span><span style="color:#ff0000">2013-8-2</span><span style="color:#ff0000">'</span>)</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/031719198613296.jpg" alt="" /></p>&#13;\n<p>返回8月份的英文</p>&#13;\n<p> </p>&#13;\n<p>3、获取季度、分钟和秒钟的函数</p>&#13;\n<p>QUARTER(DATE)返回date对应的一年中的季度值，范围是从1~4</p>&#13;\n<p>使用QUARTER(DATE)函数返回指定日期对应的季度</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> QUARTER(<span style="color:#ff0000">'</span><span style="color:#ff0000">11-04-01</span><span style="color:#ff0000">'</span>)</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/031724472984196.jpg" alt="" /></p>&#13;\n<p> </p>&#13;\n<p>4月份在第二季度，所以返回2</p>&#13;\n<p> </p>&#13;\n<p>4、MINUTE(TIME)返回time对应的分钟数，范围是从0~59</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> MINUTE(<span style="color:#ff0000">'</span><span style="color:#ff0000">11-02-03 10:10:06</span><span style="color:#ff0000">'</span>)</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/031728083772060.jpg" alt="" /></p>&#13;\n<p>返回10分钟</p>&#13;\n<p> </p>&#13;\n<p>5、SECOND(time) 返回time对应的秒数，范围是从0~59</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> SECOND(<span style="color:#ff0000">'</span><span style="color:#ff0000">10:23:10</span><span style="color:#ff0000">'</span>)</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/031730199701729.jpg" alt="" /></p>&#13;\n<p>返回10秒</p>&#13;\n<p> </p>&#13;\n<p>6、获取日期的指定值的函数EXTRACT(type FROM date)</p>&#13;\n<p>EXTRACT(type FROM date)这个函数跟SQLSERVER里的DATEPART()函数是一样的</p>&#13;\n<p>获取日期中的年份</p>&#13;\n<p><strong>SQLSERVER</strong></p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> <span style="color:#ff00ff">DATEPART</span>(<span style="color:#ff00ff">YEAR</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">2013-2-3</span><span style="color:#ff0000">'</span>)</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/031734182677262.jpg" alt="" /></p>&#13;\n<p> </p>&#13;\n<p><strong>MYSQL</strong></p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> EXTRACT(<span style="color:#ff00ff">YEAR</span> <span style="color:#0000ff">FROM</span> <span style="color:#ff0000">'</span><span style="color:#ff0000">2013-2-3</span><span style="color:#ff0000">'</span>)</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/031734519392018.jpg" alt="" /></p>&#13;\n<p> </p>&#13;\n<p>7、时间和秒钟转换的函数</p>&#13;\n<p><strong>TIME_TO_SEC(time)</strong>返回已转化为秒的time参数，转换公式为：小时*3600+分钟*60+秒</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> TIME_TO_SEC(<span style="color:#ff0000">'</span><span style="color:#ff0000">23:22:00</span><span style="color:#ff0000">'</span>)</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/031739209397332.jpg" alt="" /></p>&#13;\n<p> </p>&#13;\n<p><strong>SEC_TO_TIME(second)</strong>函数可以将秒转换为小时、分钟和秒数的second参数值</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> SEC_TO_TIME(<span style="color:#ff0000">'</span><span style="color:#ff0000">84120</span><span style="color:#ff0000">'</span>)</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/031742353774333.jpg" alt="" /></p>&#13;\n<p> </p>&#13;\n<p>SEC_TO_TIME(second)函数和TIME_TO_SEC(time)函数互为反函数</p>&#13;\n<p> </p>&#13;\n<p>8、计算日期和时间的函数</p>&#13;\n<p>MYSQL里计算日期和时间的函数比较多</p>&#13;\n<p>增加日期：DATE_ADD(date,interval  expr type)，ADDDATE(date,interval  expr type)</p>&#13;\n<p>减去日期：DATE_SUB(date,interval  expr type)，SUBDATE(date,interval  expr type)</p>&#13;\n<p>增加时间：ADD_TIME(date,expr)</p>&#13;\n<p>减去时间：SUBTIME(date,expr)</p>&#13;\n<p>时间差：DATEDIFF()</p>&#13;\n<p>日期和时间格式化：</p>&#13;\n<p>DATE_FORMAT(date,format)</p>&#13;\n<p>TIME_FORMAT(time,format)</p>&#13;\n<p>返回日期时间字符串的显示格式：GET_FORMAT(val_type,format_type)</p>&#13;\n<p>相对来说，<strong>SQLSERVER</strong>在时间日期方面的计算就没有那么多函数了</p>&#13;\n<p>基本上SQLSERVER利用下面两个函数来通杀日期时间计算的场景</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> <span style="color:#ff00ff">DATEADD</span>(),<span style="color:#ff00ff">DATEDIFF</span>()</pre>&#13;\n</div>&#13;\n<hr />&#13;\n<p><span style="color:#ff9900"><strong>条件判断函数</strong></span></p>&#13;\n<p>条件判断函数也称为流程控制函数，根据满足的条件的不同，执行相应的流程。</p>&#13;\n<p>MYSQL中进行条件判断的函数有IF、IFNULL、CASE</p>&#13;\n<p>虽然<strong>SQLSERVER</strong>里也有IF和CASE，不过MYSQL里的IF语句的语法跟SQLERVER有很大出入</p>&#13;\n<p> </p>&#13;\n<p>1、IF(expr,v1,v2)函数</p>&#13;\n<p>IF(expr,v1,v2)如果表达式expr是TRUE（expr&lt;&gt;0 and expr&lt;&gt;NULL），则IF()的返回值为v1；</p>&#13;\n<p>否则返回值为v2。IF()的返回值为数字值或字符串值，具体情况视其所在语境而定</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> <span style="color:#0000ff">IF</span>(<span style="color:#800000; font-weight:bold">1</span><span style="color:#808080">&gt;</span><span style="color:#800000; font-weight:bold">2</span>,<span style="color:#800000; font-weight:bold">2</span>,<span style="color:#800000; font-weight:bold">3</span>)</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/032023468926268.jpg" alt="" /></p>&#13;\n<p>1&gt;2的结果为FALSE，IF(1&gt;2,2,3)返回第二个表达式的值3。</p>&#13;\n<p> </p>&#13;\n<p>TIPS：如果v1或v2中只有一个明确是NULL，则IF()函数的结果类型为非NULL表达式的结果类型。</p>&#13;\n<p> </p>&#13;\n<p>2、IFNULL(V1,V2)函数</p>&#13;\n<p>IFNULL(V1,V2)假如v1不为NULL，则IFNULL(V1,V2)的返回值为v1；否则其返回值为v2。</p>&#13;\n<p>IFNULL()的返回值是数字或是字符串，具体情况视语境而定</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> IFNULL(<span style="color:#800000; font-weight:bold">1</span>,<span style="color:#800000; font-weight:bold">2</span>),IFNULL(<span style="color:#0000ff">NULL</span>,<span style="color:#800000; font-weight:bold">10</span>)</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/032032561425334.jpg" alt="" /></p>&#13;\n<p>IFNULL(1,2)虽然第二个值也不为空，但返回结果依然是第一个值；</p>&#13;\n<p>IFNULL(NULL,10)第一个值为空，因此返回“10”</p>&#13;\n<p>注意：IFNULL(V1,V2)函数跟SQLSERVER里的 <span class="cnblogs_code"><span style="color:#0000ff">SELECT</span><span style="color:#ff00ff">NULLIF</span>()</span> 函数不一样</p>&#13;\n<p><strong>SQLSERVER</strong>里的NULLIF函数</p>&#13;\n<blockquote>&#13;\n<p>需要两个参数,如果两个指定的表达式等价，则返回null </p>&#13;\n<p>例子：NULLIF(a,b) </p>&#13;\n<p>说明：如果a和b是相等的，那么返回NULL，如果不相等返回a </p>&#13;\n<p>select NULLIF('eqeqweqwe','1') 结果是eqeqweqwe </p>&#13;\n<p>select NULLIF(1,1) 结果是NULL </p>&#13;\n<p>a和b的类型要一致 </p>&#13;\n</blockquote>&#13;\n<p> </p>&#13;\n<p>3、CASE函数</p>&#13;\n<p>注意：一个CASE表达式的默认返回值类型是任何返回值的相容集合类型，但具体情况视其所在语境而定。</p>&#13;\n<p>如果用字符串语境中，则返回结果为字符串。如果用在数字语境中，则返回结果为十进制、实数值或整数值</p>&#13;\n<p> </p>&#13;\n<p><span style="color:#ff0000"><strong>这个数据类型在拼接SQL语句的时候特别容易忽略，有时候会在拼接SQL语句的时候，case 后面的表达式或者when后面的表达式不一致报错！</strong></span></p>&#13;\n<br />&#13;\n<hr />&#13;\n<p><span style="color:#ff9900"><strong>系统信息函数</strong></span></p>&#13;\n<p>1、获取MYSQL版本号、连接数和数据库名的函数</p>&#13;\n<p>VERSION()返回指示MYSQL服务器版本的字符串。这个字符串使用utf8字符集</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> VERSION()</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/032051306894936.jpg" alt="" /></p>&#13;\n<p> </p>&#13;\n<p>2、CONNECTION_ID()返回MYSQL服务器当前连接的次数，每个连接都有各自唯一的ID</p>&#13;\n<p>查看当前用户的连接数</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> CONNECTION_ID()</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/032052435959774.jpg" alt="" /></p>&#13;\n<p>这里返回1，返回值根据登录的次数会有不同。</p>&#13;\n<p> </p>&#13;\n<p>3、SHOW PROCESSLIST;</p>&#13;\n<p>4、SHOW FULL PROCESSLIST;</p>&#13;\n<p>processlist命令的输出结果显示了有哪些线程在运行，不仅可以查看当前所有的连接数，还可以查看当前的连接状态</p>&#13;\n<p>帮助识别出有问题的查询语句等。</p>&#13;\n<p>如果是root帐号，能看到所有用户的当前连接。如果是其他普通帐号，则只能看到自己占用的连接。showprocesslist只能列出当前100条</p>&#13;\n<p>如果想全部列出，可以使用SHOW FULL PROCESSLIST命令</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre>SHOW PROCESSLIST</pre>&#13;\n</div>&#13;\n<div class="cnblogs_code">&#13;\n<pre>SHOW <span style="color:#0000ff">FULL</span> PROCESSLIST</pre>&#13;\n</div>&#13;\n<p>show full processlist会看到连接使用的内存</p>&#13;\n<p><strong>show processlist</strong></p>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/032058415644870.jpg" alt="" /></p>&#13;\n<p>show full processlist</p>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/032100261114876.jpg" alt="" /></p>&#13;\n<p> </p>&#13;\n<p> 各个列的含义</p>&#13;\n<p>（1）id列，用户登录mysql时，系统分配的“connection_id”</p>&#13;\n<p>（2）user列，显示当前用户。如果不是root，这个命令就只显示用户权限范围的sql语句</p>&#13;\n<p>（3）host列，显示这个语句是从哪个ip的哪个端口上发的，可以用来跟踪出现问题语句的用户</p>&#13;\n<p>（4）db列，显示这个进程目前连接的是哪个数据库</p>&#13;\n<p>（5）command列，显示当前连接的执行的命令，一般取值为休眠（sleep），查询（query），连接（connect）</p>&#13;\n<p>（6）time列，显示这个状态持续的时间，单位是秒</p>&#13;\n<p>（7）state列，显示使用当前连接的sql语句的状态，很重要的列，后续会有所有状态的描述，state只是语句执行中的某一个状态。一个sql语句，</p>&#13;\n<p>以查询为例</p>&#13;\n<p>可能需要经过</p>&#13;\n<p>copying to tmp table，</p>&#13;\n<p>sorting result，</p>&#13;\n<p>sending data</p>&#13;\n<p>等状态才可以完成</p>&#13;\n<p>（8）info列，显示这个sql语句，是判断问题语句的一个重要依据。</p>&#13;\n<p> </p>&#13;\n<p>5、DATABASE()和SCHEMA()函数返回使用utf8字符集的默认（当前）数据库名</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> <span style="color:#0000ff">DATABASE</span>(),<span style="color:#0000ff">SCHEMA</span>()</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/032108020488900.jpg" alt="" /></p>&#13;\n<p>可以看到，两个函数的作用相同</p>&#13;\n<p> </p>&#13;\n<p>6、获取用户名的函数</p>&#13;\n<p>USER()、CURRENT_USER()、CURRENT_USER、SYSTEM_USER()、SESSION_USER()</p>&#13;\n<p>这几个函数返回当前被MYSQL服务器验证的用户名和主机名组合。这个值符合确定当前登录用户</p>&#13;\n<p>存取权限的MYSQL帐户。一般情况下，这几个函数的返回值是相同的。</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> <span style="color:#ff00ff">USER</span>(),<span style="color:#ff00ff">CURRENT_USER</span>(),<span style="color:#ff00ff">SYSTEM_USER</span>()</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/041920010174495.jpg" alt="" /></p>&#13;\n<p>返回结果指示了当前帐户连接服务器的用户名以及所连接的客户主机，root为当前登录的用户名，localhost为登录的主机名</p>&#13;\n<p> </p>&#13;\n<p>7、获取字符串的字符集和排序方式的函数</p>&#13;\n<p>CHARSET(STR)返回字符串str自变量的字符集</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> CHARSET(<span style="color:#ff0000">'</span><span style="color:#ff0000">abc</span><span style="color:#ff0000">'</span>) ,CHARSET(<span style="color:#ff00ff">CONVERT</span>(<span style="color:#ff0000">'</span><span style="color:#ff0000">abc</span><span style="color:#ff0000">'</span> USING latin1)),CHARSET(VERSION())</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/041927593775837.jpg" alt="" /></p>&#13;\n<p>CHARSET('abc')返回系统默认的字符集utf8；</p>&#13;\n<p>CHARSET(CONVERT('abc' USING latin1))返回的字符集为latin1；</p>&#13;\n<p>VERSION()返回的字符串使用utf8字符集，因此CHARSET返回结果为utf8</p>&#13;\n<p> </p>&#13;\n<p>8、COLLATION(str)返回字符串str的字符排列方式</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> COLLATION(_latin2 <span style="color:#ff0000">'</span><span style="color:#ff0000">abc</span><span style="color:#ff0000">'</span>),COLLATION(<span style="color:#ff00ff">CONVERT</span>(<span style="color:#ff0000">'</span><span style="color:#ff0000">abc</span><span style="color:#ff0000">'</span> USING utf8))</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/041932577837202.jpg" alt="" /></p>&#13;\n<p>可以看到，使用不同字符集时字符串的排列方式不同</p>&#13;\n<p> </p>&#13;\n<p>9、获取最后一个自动生成的ID值的函数</p>&#13;\n<p>LAST_INSERT_ID()自动返回最后一个INSERT或UPDATE为AUTO_INCREMENT列设置的第一个发生的值</p>&#13;\n<p>（1）一次插入一条记录</p>&#13;\n<p>首先创建表worker，其ID字段带有AUTO_INCREMENT约束</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">CREATE</span> <span style="color:#0000ff">TABLE</span><span style="color:#000000"> worker(\nid </span><span style="color:#0000ff">INT</span> AUTO_INCREMENT <span style="color:#808080">NOT</span> <span style="color:#0000ff">NULL</span> <span style="color:#0000ff">PRIMARY</span> <span style="color:#0000ff">KEY</span><span style="color:#000000">,\nNAME </span><span style="color:#0000ff">VARCHAR</span>(<span style="color:#800000; font-weight:bold">30</span><span style="color:#000000">)\n)</span></pre>&#13;\n</div>&#13;\n<p>分别单独向表worker插入2条记录</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">INSERT</span> <span style="color:#0000ff">INTO</span> worker <span style="color:#0000ff">VALUES</span>(<span style="color:#0000ff">NULL</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">jimmy</span><span style="color:#ff0000">'</span><span style="color:#000000">);\n</span><span style="color:#0000ff">INSERT</span> <span style="color:#0000ff">INTO</span> worker <span style="color:#0000ff">VALUES</span>(<span style="color:#0000ff">NULL</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">tom</span><span style="color:#ff0000">'</span><span style="color:#000000">)\n\n</span><span style="color:#0000ff">SELECT</span> <span style="color:#808080">*</span> <span style="color:#0000ff">FROM</span> worker </pre>&#13;\n</div>&#13;\n<p>查看已经插入的数据可以发现，最后一条插入的记录的ID字段值为2，使用LAST_INSERT_ID()查看最后自动生成的ID值</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> LAST_INSERT_ID()</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/042010430337715.jpg" alt="" /></p>&#13;\n<p> </p>&#13;\n<p> 可以看到，一次插入一条记录时，返回值为最后一条插入记录的ID值</p>&#13;\n<p>（2）一次同时插入多条记录</p>&#13;\n<p> 接下来，向表中插入多条记录</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">INSERT</span> <span style="color:#0000ff">INTO</span> worker <span style="color:#0000ff">VALUES</span>(<span style="color:#0000ff">NULL</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">kevin</span><span style="color:#ff0000">'</span>),(<span style="color:#0000ff">NULL</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">michal</span><span style="color:#ff0000">'</span>),(<span style="color:#0000ff">NULL</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">nick</span><span style="color:#ff0000">'</span>)</pre>&#13;\n</div>&#13;\n<p>查询已经插入的记录</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> <span style="color:#808080">*</span> <span style="color:#0000ff">FROM</span> worker </pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/042013090801867.jpg" alt="" /></p>&#13;\n<p>可以看到最后一条记录的ID字段值为5，使用LAST_INSERT_ID()查看最后自动生成的ID值</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> LAST_INSERT_ID()</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/042014438459450.jpg" alt="" /></p>&#13;\n<p>结果显示，ID字段值不是5而是3，这是为什麽呢？</p>&#13;\n<p>在向数据表插入一条记录时，LAST_INSERT_ID()返回带有AUTO_INCREMENT约束的字段最新生成的值2；继续向表</p>&#13;\n<p>中同时添加3条记录，这时候因为当使用一条INSERT语句插入多个行时，LAST_INSERT_ID只返回插入的第一行数据</p>&#13;\n<p>时产生的值，在这里为第3条记录。之所以这样，是<span style="color:#ff0000"><strong>因为这使依靠其他服务器复制同样的INSERT语句变得简单</strong></span></p>&#13;\n<p> </p>&#13;\n<p>TIPS:LAST_INSERT_ID是与table无关的，如果向表a插入数据后，再向表b插入数据，LAST_INSERT_ID返回表b中的ID值</p>&#13;\n<p> </p>&#13;\n<p>这里跟SQLSERVER不一样</p>&#13;\n<p>使用下面脚本来测试，无论使用方式一还是方式二，当前的LAST_INSERT_ID都是最后一个值</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">CREATE</span> <span style="color:#0000ff">TABLE</span> <span style="color:#ff0000">[</span><span style="color:#ff0000">dbo</span><span style="color:#ff0000">]</span>.<span style="color:#ff0000">[</span><span style="color:#ff0000">aaa</span><span style="color:#ff0000">]</span><span style="color:#000000">(\n </span><span style="color:#ff0000">[</span><span style="color:#ff0000">a</span><span style="color:#ff0000">]</span> <span style="color:#ff0000">[</span><span style="color:#ff0000">int</span><span style="color:#ff0000">]</span> <span style="color:#ff00ff">IDENTITY</span>(<span style="color:#800000; font-weight:bold">1</span>,<span style="color:#800000; font-weight:bold">1</span>) <span style="color:#808080">NOT</span> <span style="color:#0000ff">FOR</span> <span style="color:#0000ff">REPLICATION</span> <span style="color:#808080">NOT</span> <span style="color:#0000ff">NULL</span><span style="color:#000000">,\n </span><span style="color:#ff0000">[</span><span style="color:#ff0000">name</span><span style="color:#ff0000">]</span> <span style="color:#ff0000">[</span><span style="color:#ff0000">nvarchar</span><span style="color:#ff0000">]</span>(<span style="color:#800000; font-weight:bold">50</span>) <span style="color:#808080">NOT</span> <span style="color:#0000ff">NULL</span><span style="color:#000000">\n) </span><span style="color:#0000ff">ON</span> <span style="color:#ff0000">[</span><span style="color:#ff0000">PRIMARY</span><span style="color:#ff0000">]</span></pre>&#13;\n</div>&#13;\n<p> </p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">USE</span> <span style="color:#ff0000">[</span><span style="color:#ff0000">sss</span><span style="color:#ff0000">]</span>\n\n\n<span style="color:#0000ff">SELECT</span> <span style="color:#808080">*</span> <span style="color:#0000ff">FROM</span> <span style="color:#ff0000">[</span><span style="color:#ff0000">dbo</span><span style="color:#ff0000">]</span>.<span style="color:#ff0000">[</span><span style="color:#ff0000">aaa</span><span style="color:#ff0000">]</span>\n\n<span style="color:#0000ff">INSERT</span> <span style="color:#0000ff">INTO</span> <span style="color:#ff0000">[</span><span style="color:#ff0000">dbo</span><span style="color:#ff0000">]</span>.<span style="color:#ff0000">[</span><span style="color:#ff0000">aaa</span><span style="color:#ff0000">]</span><span style="color:#000000">\n ( </span><span style="color:#ff0000">[</span><span style="color:#ff0000">name</span><span style="color:#ff0000">]</span><span style="color:#000000"> )\n</span><span style="color:#0000ff">VALUES</span> ( N<span style="color:#ff0000">'</span><span style="color:#ff0000">sdfsdf</span><span style="color:#ff0000">'</span> <span style="color:#008080">--</span><span style="color:#008080"> name - nvarchar(50)</span>\n<span style="color:#000000"> )\n</span><span style="color:#0000ff">SELECT</span> <span style="color:#808080">*</span> <span style="color:#0000ff">FROM</span> <span style="color:#ff0000">[</span><span style="color:#ff0000">dbo</span><span style="color:#ff0000">]</span>.<span style="color:#ff0000">[</span><span style="color:#ff0000">aaa</span><span style="color:#ff0000">]</span>\n\n<span style="color:#0000ff">INSERT</span> <span style="color:#0000ff">INTO</span> <span style="color:#ff0000">[</span><span style="color:#ff0000">dbo</span><span style="color:#ff0000">]</span>.<span style="color:#ff0000">[</span><span style="color:#ff0000">aaa</span><span style="color:#ff0000">]</span><span style="color:#000000">\n ( </span><span style="color:#ff0000">[</span><span style="color:#ff0000">name</span><span style="color:#ff0000">]</span><span style="color:#000000"> )\n</span><span style="color:#0000ff">VALUES</span> ( N<span style="color:#ff0000">'</span><span style="color:#ff0000">sdf969</span><span style="color:#ff0000">'</span> <span style="color:#008080">--</span><span style="color:#008080"> name - nvarchar(50)</span>\n ),(<span style="color:#ff0000">'</span><span style="color:#ff0000">lkjj96</span><span style="color:#ff0000">'</span>),(<span style="color:#ff0000">'</span><span style="color:#ff0000">565656</span><span style="color:#ff0000">'</span><span style="color:#000000">)\n\n</span><span style="color:#0000ff">SELECT</span> IDENT_CURRENT(<span style="color:#ff0000">'</span><span style="color:#ff0000">aaa</span><span style="color:#ff0000">'</span><span style="color:#000000">)\n\n</span><span style="color:#0000ff">SELECT</span> <span style="color:#808080">*</span> <span style="color:#0000ff">FROM</span> <span style="color:#ff0000">[</span><span style="color:#ff0000">dbo</span><span style="color:#ff0000">]</span>.<span style="color:#ff0000">[</span><span style="color:#ff0000">aaa</span><span style="color:#ff0000">]</span></pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/042027049231288.jpg" alt="" /></p>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/042027206421257.jpg" alt="" /></p>&#13;\n<hr />&#13;\n<p><span style="color:#ff9900"><strong>加密函数</strong></span></p>&#13;\n<p>1、加密函数PASSWORD(STR)</p>&#13;\n<p>PASSWORD(STR)从原文密码str计算并返回加密后的密码字符串，当参数为NULL时，返回NULL</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> PASSWORD(<span style="color:#ff0000">'</span><span style="color:#ff0000">NEWPWD</span><span style="color:#ff0000">'</span>)</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/042029089869124.jpg" alt="" /></p>&#13;\n<p>MYSQL将PASSWORD函数加密后的密码保存到用户权限表中</p>&#13;\n<p>TIPS:PASSWOR()函数在MYSQL服务器的鉴定系统中使用；不应将他用在个人应用程序中，PASSWORD（）函数加密是单向的（不可逆）</p>&#13;\n<p>PASSWORD执行密码加密与UNIX中密码加密方式不同</p>&#13;\n<p><br />&#13;\n</p>&#13;\n<p>2、加密函数MD5(str)</p>&#13;\n<p>MD5(str)为字符串算出一个MD5 128比特校验和。该值以32位十六进制数字的二进制字符串形式返回，若参数为NULL，则会返回NULL</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> MD5(<span style="color:#ff0000">'</span><span style="color:#ff0000">123</span><span style="color:#ff0000">'</span>)</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/042114289708960.jpg" alt="" /></p>&#13;\n<p> </p>&#13;\n<p>3、加密函数ENCODE(str,pswd_str)</p>&#13;\n<p>ENCODE(str,pswd_str)使用pswd_str作为密码，加密str。使用DECODE()解密结果，结果是一个和str长度相同的二进制字符串</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> ENCODE(<span style="color:#ff0000">'</span><span style="color:#ff0000">nihao</span><span style="color:#ff0000">'</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">123</span><span style="color:#ff0000">'</span>)</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/042117422529975.jpg" alt="" /></p>&#13;\n<p>可以看到加密后的结果为乱码</p>&#13;\n<p> </p>&#13;\n<p> 4、解密函数DECODE(crypt_str,pswd_str)</p>&#13;\n<p> DECODE(crypt_str,pswd_str)使用pswd_str作为密码，解密加密字符串crypt_str，crypt_str是由ENCODE()返回的字符串</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> DECODE(ENCODE(<span style="color:#ff0000">'</span><span style="color:#ff0000">nihao</span><span style="color:#ff0000">'</span>,<span style="color:#ff0000">'</span><span style="color:#ff0000">123</span><span style="color:#ff0000">'</span>),<span style="color:#ff0000">'</span><span style="color:#ff0000">123</span><span style="color:#ff0000">'</span>)</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/042121203614010.jpg" alt="" /></p>&#13;\n<p>可以看到，解密出来的字符串</p>&#13;\n<p>ENCODE()和DECODE互为反函数</p>&#13;\n<hr />&#13;\n<p><span style="color:#ff9900"><strong>其他函数</strong></span></p>&#13;\n<p>1、格式化函数FORMAT(x,n)</p>&#13;\n<p>FORMAT(x,n)将数字x格式化，并以四舍五入的方式保留小数点后n位，结果以字符串的形式返回。</p>&#13;\n<p>若n为0，则返回结果函数不含小数部分</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> FORMAT(<span style="color:#800000; font-weight:bold">12332.123465</span>,<span style="color:#800000; font-weight:bold">4</span>)</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/042135133458957.jpg" alt="" /></p>&#13;\n<p>FORMAT(12332.123465,4)保留4位小数点值，并进行四舍五入，结果为12,332.1235</p>&#13;\n<p> </p>&#13;\n<p>2、不同进制的数字转换的函数</p>&#13;\n<p>CONV(N,from_base,to_base)函数进行不同进制数间的转换。</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> CONV(<span style="color:#ff0000">'</span><span style="color:#ff0000">a</span><span style="color:#ff0000">'</span>,<span style="color:#800000; font-weight:bold">16</span>,<span style="color:#800000; font-weight:bold">2</span>)</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/042142508453726.jpg" alt="" /></p>&#13;\n<p> CONV('a',16,2)将十六进制的a转换为二进制表示的数值。</p>&#13;\n<p> </p>&#13;\n<p>3、IP地址与数字相互转换的函数</p>&#13;\n<p>INET_ATON(expr)给出一个作为字符串的网络地址的点地址表示，返回一个代表该地址数值的整数。</p>&#13;\n<p>地址可以是4或8比特地址</p>&#13;\n<p>INET_NTOA(expr)给定一个数字网络地址（4或8比特），返回作为字符串的该地址的点地址表示。</p>&#13;\n<p> </p>&#13;\n<p>4、加锁函数和解锁函数</p>&#13;\n<p>GET_LOCK(str,timeout)设法使用字符串str给定的名字得到一个锁，超时为timeout秒。</p>&#13;\n<p>RELEASE_LOCK(str)解开被GET_LOCK()获取的，用字符串str所命名的锁。</p>&#13;\n<p>IS_FREE_LOCK(str)检查名为str的锁是否可以使用</p>&#13;\n<p>IS_USED_LOCK(str)检查名为str的锁是否正在被使用</p>&#13;\n<p> </p>&#13;\n<p>5、重复执行指定操作的函数</p>&#13;\n<p>BENCHMARK(count,expr)函数重复count次执行表达式expr。他可以用于计算MYSQL处理表达式的速度。</p>&#13;\n<p>结果值通常为0（0只是表示处理过程很快，并不是没有花费时间）</p>&#13;\n<p>另一个作用是他可以在MYSQL客户端内部报告语句执行的时间。</p>&#13;\n<p>首先，使用PASSWORD函数加密密码</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> PASSWORD(<span style="color:#ff0000">'</span><span style="color:#ff0000">nihao</span><span style="color:#ff0000">'</span>)</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/042200125336801.jpg" alt="" /></p>&#13;\n<p>可以看到PASSWORD()函数执行花费的时间为0.00098秒</p>&#13;\n<p>下面使用BENCHMARK函数重复执行PASSWORD操作500000次</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> BENCHMARK(<span style="color:#800000; font-weight:bold">500000</span>,PASSWORD(<span style="color:#ff0000">'</span><span style="color:#ff0000">nihao</span><span style="color:#ff0000">'</span>))</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/042203262363646.jpg" alt="" /></p>&#13;\n<p>由此可以看出，使用BENCHMARK执行500000次的时间为0.49690秒，明显比执行一次的时间延长了。</p>&#13;\n<p> </p>&#13;\n<p>TIPS：BENCHMARK报告的时间是客户端经过的时间，而不是在服务器端的CPU时间，每次执行后报告的时间并不一定是相同的。</p>&#13;\n<p> </p>&#13;\n<p>6、改变字符集的函数</p>&#13;\n<p>CONVERT(...using...)带有USING的CONVERT()函数被用来在不同的字符集之间转化数据。</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> CHARSET(<span style="color:#ff0000">'</span><span style="color:#ff0000">string</span><span style="color:#ff0000">'</span>),CHARSET(<span style="color:#ff00ff">CONVERT</span>(<span style="color:#ff0000">'</span><span style="color:#ff0000">string</span><span style="color:#ff0000">'</span> USING latin1))</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/042211242052701.jpg" alt="" /></p>&#13;\n<p>默认为utf8字符集，通过CONVERT()将字符串“string”的默认字符集改为latin1</p>&#13;\n<p> </p>&#13;\n<p>7、改变数据类型的函数</p>&#13;\n<p>CAST(x,AS type)和CONVERT(x,type)函数将一个类型的值转换为另一个类型的值，可转换的type有：</p>&#13;\n<p>BINARY、CHAR(n)、DATE、TIME、DATETIME、DECIMAL、SIGNED、UNSIGNED</p>&#13;\n<p>在SQLSERVER里也是使用这两个函数进行数据类型转换的~</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre><span style="color:#0000ff">SELECT</span> <span style="color:#ff00ff">CAST</span>(<span style="color:#800000; font-weight:bold">100</span> <span style="color:#0000ff">AS</span> <span style="color:#0000ff">CHAR</span>(<span style="color:#800000; font-weight:bold">2</span>)),<span style="color:#ff00ff">CONVERT</span>(<span style="color:#ff0000">'</span><span style="color:#ff0000">2013-8-9 12:12:12</span><span style="color:#ff0000">'</span>,TIME)</pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/042216464864927.jpg" alt="" /></p>&#13;\n<p>可以看到， CAST(100 AS CHAR(2))将整数数据100转换为带有2个显示宽度的字符串类型，结果为10</p>&#13;\n<p>CONVERT('2013-8-9 12:12:12',TIME)将DATETIME类型的值，转换为TIME类型值，结果为“12:12:12”</p>&#13;\n<hr />&#13;\n<p><strong>TIPS:</strong></p>&#13;\n<p>1、MYSQL中，日期时间以字符串形式存储在数据表中，因此可以使用字符串函数分别截取日期时间值的不同部分</p>&#13;\n<p>2、修改默认的字符集，更改MYSQL默认的字符集，在Windows中，只需要修改my.ini，该文件在MYSQL安装目录下。</p>&#13;\n<p>修改配置文件中的default-character-set和character-set-server参数值，将其改为想要的字符集名称，如：</p>&#13;\n<p>gbk、gb2312、latin1等，修改完之后，重启MYSQL服务，即可生效。</p>&#13;\n<p>如果不确定当前使用的字符集，可以使用下面的SQL语句来查看当前字符集进行对比</p>&#13;\n<div class="cnblogs_code">&#13;\n<pre>SHOW VARIABLES <span style="color:#808080">LIKE</span> <span style="color:#ff0000">'</span><span style="color:#ff0000">character_set_%</span><span style="color:#ff0000">'</span></pre>&#13;\n</div>&#13;\n<p><img src="http://images.cnitblog.com/i/257159/201405/042226299863389.jpg" alt="" /></p>&#13;\n &#13;\n
