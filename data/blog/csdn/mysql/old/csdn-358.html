\n\n<pre><a target="_blank" href="http://blog.csdn.net/l1028386804/article/details/47008019">转载请注明出处:http://blog.csdn.net/l1028386804/article/details/47008019</a>\n</pre>&#13;\n<p>服务器程序经常要访问数据库，并且服务器程序是长时间保持运行的，mysql有一个特点，当连接上数据库后不做任何操作，默认8小时候会自动关闭休眠的连接！一般情况下很难预料什么时候程序会执行数据库操作，如果连接被mysql断开了，会出现意想不到的问题，这在服务器程序中是一种灾难！保持服务器程序与Mysql的连接一种方式是修改默认的休眠时间，但这种方式治标不治本；另一种方式很显然就是定期的执行数据库操作来保持与mysql的连接。</p>&#13;\n<p>查看默认休眠时间的方式：</p>&#13;\n<p>登录mysql后输入命令 show variables like '%timeout%' 会出现mysql中的关于休眠超时的一些变量</p>&#13;\n<p><img src="http://img.blog.csdn.net/20150722191053491?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" /></p>&#13;\n<p></p>&#13;\n<p>其中 wait_timeout 变量为28800，即28800秒，也就是默认的8小时；</p>&#13;\n<p>查看连接状况，使用show processlist命令</p>&#13;\n<img src="http://img.blog.csdn.net/20150722191128284?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQv/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" />&#13;\n<p>Time字段指出了当前连接的时间，默认情况下，当长时间不做任何操作，Time字段值会随着时间增大，大于28800秒时就会关闭当前连接；相反，在这默认的8小时内，如果执行了数据库操作，就会从0开始计时。<br />&#13;\n</p>&#13;\n &#13;\n
