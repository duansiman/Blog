\n\n<p><a target="_blank" href="http://blog.csdn.net/l1028386804/article/details/53079933">转载请注明出处：http://blog.csdn.net/l1028386804/article/details/53079933</a><br />&#13;\n</p>&#13;\n<p>1、下载mysql-cluster 7.3.7</p>&#13;\n<p><a target="_blank" href="http://dev.mysql.com/downloads/cluster/" style="background-color:inherit">http://dev.mysql.com/downloads/cluster/</a><br />&#13;\n</p>&#13;\n<p>2、环境清理及安装</p>&#13;\n<div style="background-color:inherit">1）清理CentOS6.5自带的mysql服务，其中第一个命令我不执行也可以，其他系统如果不可以，还是建议执行</div>&#13;\n<pre code_snippet_id="1972493" snippet_file_name="blog_20161108_1_7549489" name="code" class="plain"># yum -y remove mysql\n# rpm -qa | grep mysql*\n# rpm -e --nodeps mysql-libs-5.1.71-1.el6.x86_64</pre><span style="font-family:tahoma,&#x5B8B;&#x4F53;; color:#333333; background-color:inherit; line-height:1.5"> 2</span><span style="background-color:rgb(255,255,255)">）环境准备</span><span style="background-color:inherit"> </span><span style="background-color:inherit"><br />&#13;\n</span>&#13;\n<p></p>&#13;\n<p><span style="background-color:inherit">创建文件夹（分如下3个类来创建对应的文件夹）</span><span style="background-color:inherit"></span><br />&#13;\n</p>&#13;\n<pre code_snippet_id="1972493" snippet_file_name="blog_20161108_2_2468506" name="code" class="plain">存储节点：# mkdir /var/lib/mysql/data \n管理节点：# mkdir /var/lib/mysql-cluster SQL节点：可不用 文件夹授权\n进程DIR：# mkdir /var/run/mysqld </pre><pre code_snippet_id="1972493" snippet_file_name="blog_20161108_3_2261546" name="code" class="plain">使用如下的命令来变更权限保证可写入：\n# chmod -R 1777 /var/lib/mysql\n# chmod -R 1777 /var/run/mysqld\n# chmod -R 1777 /var/lib/mysql-cluster</pre><span style="font-family:tahoma,&#x5B8B;&#x4F53;; color:#333333; background-color:inherit; line-height:1.5">3</span><span style="background-color:rgb(255,255,255); line-height:1.5">）安装mysql-cluster</span>&#13;\n<p></p>&#13;\n<p><span style="background-color:rgb(255,255,255); line-height:1.5"></span><span style="background-color:rgb(255,255,255)">首先解压</span><span style="background-color:rgb(255,255,255); line-height:1.5">MySQL-Cluster-gpl-7.4.2-1.el6.x86_64.rpm-bundle.tar</span><br />&#13;\n</p>&#13;\n<p></p>&#13;\n<pre code_snippet_id="1972493" snippet_file_name="blog_20161108_4_3973413" name="code" class="plain"># tar xvf MySQL-Cluster-gpl-7.4.2-1.el6.x86_64.rpm-bundle.tar</pre>然后执行如下命令安装<br />&#13;\n<pre code_snippet_id="1972493" snippet_file_name="blog_20161108_5_8957685" name="code" class="plain"># rpm -ivh MySQL-Cluster-server-gpl-7.3.4-1.el6.x86_64.rpm\n# rpm -ivh MySQL-Cluster-client-gpl-7.3.4-1.el6.x86_64.rpm</pre>特别注意，当安装完毕server gpl包后，将出现如下提示信息，提醒我们整个cluster安装后的初次超级账户密码存在/root/.mysql_secret这个文件当中。<br />&#13;\n<pre code_snippet_id="1972493" snippet_file_name="blog_20161108_6_8194317" name="code" class="plain">---------------------------------------------------------------------------------------------------------------------\nA RANDOM PASSWORD HAS BEEN SET FOR THE MySQL root USER !\n You will find that password in '/root/.mysql_secret'.\n You must change that password on your first connect,\n no other statement but 'SET PASSWORD' will be accepted.\n See the manual for the semantics of the 'password expired' flag.\n Also, the account for the anonymous user has been removed.\n In addition, you can run:\n /usr/bin/mysql_secure_installation\n which will also give you the option of removing the test database.\n This is strongly recommended for production servers.\n -----------------------------------------------------------</pre>2、配置管理节点<br />&#13;\n1)执行如下命令：<br />&#13;\n<pre code_snippet_id="1972493" snippet_file_name="blog_20161108_7_9590540" name="code" class="plain"># cd /var/lib/mysql-cluster\n# vi config.ini</pre>2)配置config.ini文件<br />&#13;\n<pre code_snippet_id="1972493" snippet_file_name="blog_20161108_8_8827172" name="code" class="plain">[computer]\n Id=mgr-server-01\n HostName=192.168.100.218\n [mgm default]\n datadir=/var/lib/mysql-cluster\n [mgm]\n HostName=192.168.100.218\n NodeId=60\n ExecuteOnComputer=mgr-server-01\n PortNumber=1186\n ArbitrationRank=2\n [ndbd default]\n NoOfReplicas=2\n DataMemory=500M\n IndexMemory=500M\n [ndbd]\n HostName=192.168.100.217\n DataDir=/var/lib/mysql\n NodeId=1\n [ndbd]\n HostName=192.168.100.218\n DataDir=/var/lib/mysql\n NodeId=2\n [mysqld]\n HostName=192.168.100.217\n NodeId=81\n [mysqld]\n HostName=192.168.100.218\n NodeId=82</pre>3、SQL节点和数据节点的配置<br />&#13;\n修改my.cnf文件，添加如下内容：<br />&#13;\n<pre code_snippet_id="1972493" snippet_file_name="blog_20161108_9_5206885" name="code" class="plain">[client]\n socket=/var/lib/mysql/mysql.sock\n [mysqld]\n max_connections=100\n datadir=/var/lib/mysql\n socket=/var/lib/mysql/mysql.sock\n ndbcluster\n ndb-connectstring=192.168.100.218\n [mysqld_safe]\n log-error=/var/log/mysqld.log\n #pid-file=/var/run/mysqld/mysqld.pid\n pid-file=/var/lib/mysql/mysqld.pid\n [mysql_cluster]\n ndb-connectstring=192.168.100.218 </pre>4、MySQL Cluster初次启动命令以及用户密码更改调整：（请严格按照次序启动）<br />&#13;\n1）启动mysql-cluster<br />&#13;\n执行初次启动前请先确认 将两台机器的防火墙关闭（service iptables stop 或者 设定 防火墙端口可通，两个端口即通讯端口1186、数据端口3306 )<br />&#13;\n初次启动mgt console命令：ndb_mgmd -f /var/lib/mysql-cluster/config.ini<br />&#13;\n启动均衡节点命令：              ndbd --initial<br />&#13;\n启动数据节点命令：              mysqld_safe --defaults-file=/etc/my.cnf --explicit_defaults_for_timestamp &amp;<br />&#13;\n注意在启动过程中需要监测整个控制台输出，发现有错误信息需要及时解决，根据错误日志内容来解决。<br />&#13;\n---------------------------------------------------------------------------------------------------------<br />&#13;\n如果一起正常，使用如下命令将Management console开启：  ndb_mgm<br />&#13;\n执行# show<br />&#13;\n检查是否各个节点都已经完全启动，如下，每个节点都已经连接，如果有节点没连接，会看到<br />&#13;\n<pre code_snippet_id="1972493" snippet_file_name="blog_20161108_10_9427007" name="code" class="plain">ndb_mgm&gt; show\nConnected to Management Server at: 192.168.100.218:1186\nCluster Configuration\n---------------------\n[ndbd(NDB)] 2 node(s)\nid=1 @192.168.100.217 (mysql-5.6.21 ndb-7.4.2, Nodegroup: 0)\nid=2 @192.168.100.218 (mysql-5.6.21 ndb-7.4.2, Nodegroup: 0, *)\n[ndb_mgmd(MGM)] 1 node(s)\nid=60 @192.168.100.218 (mysql-5.6.21 ndb-7.4.2)\n[mysqld(API)] 2 node(s)\nid=81 @192.168.100.217 (mysql-5.6.21 ndb-7.4.2)\nid=82 @192.168.100.218 (mysql-5.6.21 ndb-7.4.2)</pre>如果有节点没连接，如下，id=81一行，表示没连接，检查问题故障点<br />&#13;\n<pre code_snippet_id="1972493" snippet_file_name="blog_20161108_11_9951177" name="code" class="plain">ndb_mgm&gt; show\nCluster Configuration\n--------------------\n[ndbd(NDB)] 2 node(s)\nid=1 @192.168.100.217 (mysql-5.6.21 ndb-7.4.2, Nodegroup: 0)\nid=2 @192.168.100.218 (mysql-5.6.21 ndb-7.4.2, Nodegroup: 0, *)\n[ndb_mgmd(MGM)] 1 node(s)\nid=60 @192.168.100.218 (mysql-5.6.21 ndb-7.4.2)\n[mysqld(API)] 2 node(s)\nid=81 (not connected, accepting connect from 192.168.100.217)\nid=82 @192.168.100.218 (mysql-5.6.21 ndb-7.4.2)</pre>2）修改密码<br />&#13;\n当mysqld 启动完毕正常后（可以使用pgrep mysqld来获取进程ID)，我们可以使用如下命令修改：<br />&#13;\n<pre code_snippet_id="1972493" snippet_file_name="blog_20161108_12_8108014" name="code" class="plain">mysql -u root -p;</pre>随机密码(具体请参见/root/.mysql_secret文件获取)，进入后使用如下指令修改密码：<br />&#13;\n<pre code_snippet_id="1972493" snippet_file_name="blog_20161108_13_2012493" name="code" class="plain">SET PASSWORD = PASSWORD('新密码');</pre>但是这个新密码，必须是hash值，所以要使用如下方式获取密码字符串的hash值<br />&#13;\n<pre code_snippet_id="1972493" snippet_file_name="blog_20161108_14_377073" name="code" class="plain">select password('111111')；</pre>然而执行上面命令，会让你先设置密码，郁闷，又绕回来了，那就去其他地方的mysql上执行下吧<br />&#13;\n111111的hash值是“*FD571203974BA9AFE270FE62151AE967ECA5E0AA”<br />&#13;\nSET PASSWORD = PASSWORD('*FD571203974BA9AFE270FE62151AE967ECA5E0AA');<br />&#13;\n好郁闷啊，设置完以后，登陆还必须使用密文，那好吧，就用密文进去，进去后使用如下命令，强制使用明文进行登陆<br />&#13;\n<pre code_snippet_id="1972493" snippet_file_name="blog_20161108_15_5153602" name="code" class="plain">use mysql;\ndelete from user;\ngrant all on csdn-100.html csdn-101.html csdn-102.html csdn-103.html csdn-104.html csdn-105.html csdn-106.html csdn-107.html csdn-108.html csdn-109.html csdn-10.html csdn-110.html csdn-111.html csdn-112.html csdn-113.html csdn-114.html csdn-115.html csdn-116.html csdn-117.html csdn-118.html csdn-119.html csdn-11.html csdn-120.html csdn-121.html csdn-122.html csdn-123.html csdn-124.html csdn-125.html csdn-126.html csdn-127.html csdn-128.html csdn-129.html csdn-12.html csdn-130.html csdn-131.html csdn-132.html csdn-133.html csdn-134.html csdn-135.html csdn-136.html csdn-137.html csdn-138.html csdn-139.html csdn-13.html csdn-140.html csdn-141.html csdn-142.html csdn-143.html csdn-144.html csdn-145.html csdn-146.html csdn-147.html csdn-148.html csdn-149.html csdn-14.html csdn-150.html csdn-151.html csdn-152.html csdn-153.html csdn-154.html csdn-155.html csdn-156.html csdn-157.html csdn-158.html csdn-159.html csdn-15.html csdn-160.html csdn-161.html csdn-162.html csdn-163.html csdn-164.html csdn-165.html csdn-166.html csdn-167.html csdn-168.html csdn-169.html csdn-16.html csdn-170.html csdn-171.html csdn-172.html csdn-173.html csdn-174.html csdn-175.html csdn-176.html csdn-177.html csdn-178.html csdn-179.html csdn-17.html csdn-180.html csdn-181.html csdn-182.html csdn-183.html csdn-184.html csdn-185.html csdn-186.html csdn-187.html csdn-188.html csdn-189.html csdn-18.html csdn-190.html csdn-191.html csdn-192.html csdn-193.html csdn-194.html csdn-195.html csdn-196.html csdn-197.html csdn-198.html csdn-199.html csdn-19.html csdn-1.html csdn-200.html csdn-201.html csdn-202.html csdn-203.html csdn-204.html csdn-205.html csdn-206.html csdn-207.html csdn-208.html csdn-209.html csdn-20.html csdn-210.html csdn-211.html csdn-212.html csdn-213.html csdn-214.html csdn-215.html csdn-216.html csdn-217.html csdn-218.html csdn-219.html csdn-21.html csdn-220.html csdn-221.html csdn-222.html csdn-223.html csdn-224.html csdn-225.html csdn-226.html csdn-227.html csdn-228.html csdn-229.html csdn-22.html csdn-230.html csdn-231.html csdn-232.html csdn-233.html csdn-234.html csdn-235.html csdn-236.html csdn-237.html csdn-238.html csdn-239.html csdn-23.html csdn-240.html csdn-241.html csdn-242.html csdn-243.html csdn-244.html csdn-245.html csdn-246.html csdn-247.html csdn-248.html csdn-249.html csdn-24.html csdn-250.html csdn-251.html csdn-252.html csdn-253.html csdn-254.html csdn-255.html csdn-256.html csdn-257.html csdn-258.html csdn-259.html csdn-25.html csdn-260.html csdn-261.html csdn-262.html csdn-263.html csdn-264.html csdn-265.html csdn-266.html csdn-267.html csdn-268.html csdn-269.html csdn-26.html csdn-270.html csdn-271.html csdn-272.html csdn-273.html csdn-274.html csdn-275.html csdn-276.html csdn-277.html csdn-278.html csdn-279.html csdn-27.html csdn-280.html csdn-281.html csdn-282.html csdn-283.html csdn-284.html csdn-285.html csdn-286.html csdn-287.html csdn-288.html csdn-289.html csdn-28.html csdn-290.html csdn-291.html csdn-292.html csdn-293.html csdn-294.html csdn-295.html csdn-296.html csdn-297.html csdn-298.html csdn-299.html csdn-29.html csdn-2.html csdn-300.html csdn-301.html csdn-302.html csdn-303.html csdn-304.html csdn-305.html csdn-306.html csdn-307.html csdn-308.html csdn-309.html csdn-30.html csdn-310.html csdn-311.html csdn-312.html csdn-313.html csdn-314.html csdn-315.html csdn-316.html csdn-317.html csdn-318.html csdn-319.html csdn-31.html csdn-320.html csdn-321.html csdn-322.html csdn-323.html csdn-324.html csdn-325.html csdn-326.html csdn-327.html csdn-328.html csdn-329.html csdn-32.html csdn-330.html csdn-331.html csdn-332.html csdn-333.html csdn-334.html csdn-335.html csdn-336.html csdn-337.html csdn-338.html csdn-339.html csdn-33.html csdn-340.html csdn-341.html csdn-342.html csdn-343.html csdn-344.html csdn-345.html csdn-346.html csdn-347.html csdn-348.html csdn-349.html csdn-34.html csdn-350.html csdn-351.html csdn-352.html csdn-353.html csdn-354.html csdn-355.html csdn-356.html csdn-357.html csdn-358.html csdn-359.html csdn-35.html csdn-360.html csdn-361.html csdn-362.html csdn-363.html csdn-364.html csdn-365.html csdn-366.html csdn-367.html csdn-368.html csdn-369.html csdn-36.html csdn-370.html csdn-371.html csdn-372.html csdn-373.html csdn-374.html csdn-37.html csdn-38.html csdn-39.html csdn-3.html csdn-40.html csdn-41.html csdn-42.html csdn-43.html csdn-44.html csdn-45.html csdn-46.html csdn-47.html csdn-48.html csdn-49.html csdn-4.html csdn-50.html csdn-51.html csdn-52.html csdn-53.html csdn-54.html csdn-55.html csdn-56.html csdn-57.html csdn-58.html csdn-59.html csdn-5.html csdn-60.html csdn-61.html csdn-62.html csdn-63.html csdn-64.html csdn-65.html csdn-66.html csdn-67.html csdn-68.html csdn-69.html csdn-6.html csdn-70.html csdn-71.html csdn-72.html csdn-73.html csdn-74.html csdn-75.html csdn-76.html csdn-77.html csdn-78.html csdn-79.html csdn-7.html csdn-80.html csdn-81.html csdn-82.html csdn-83.html csdn-84.html csdn-85.html csdn-86.html csdn-87.html csdn-88.html csdn-89.html csdn-8.html csdn-90.html csdn-91.html csdn-92.html csdn-93.html csdn-94.html csdn-95.html csdn-96.html csdn-97.html csdn-98.html csdn-99.html csdn-9.html mysql.sh to root@'%' identified by "111111" with grant option;\nflush privileges;\nquit;</pre>然后，可以使用明文密码登陆了<br />&#13;\n几台装有SQL数据节点的服务器皆需要执行一遍上述命令；<br />&#13;\n5、当上面步奏都操作完成以后，测试cluster是否正常工作<br />&#13;\n1）简单功能测试<br />&#13;\n在218上进入mysql后执行如下：<br />&#13;\n<p></p>&#13;\n<p></p>&#13;\n<pre code_snippet_id="1972493" snippet_file_name="blog_20161108_16_6898489" name="code" class="plain">create database clustertest;\nuse clustertest; \nCREATE TABLE testtable(Count INT) ENGINE=NDBCLUSTER; </pre>注意：ENGINE=NDBCLUSTER; 引擎必须使用NDBCLUSTER才可以同步，否则不会进行同步<br />&#13;\n检查是否成功，在217上，进去mysql，查看是否自动创建了database和table，如果创建，则表示成功，如果失败，请检查环境配置<br />&#13;\n2）测试灾备情况下数据是否可以同步（一台数据库停掉了，再启动的时候，是否会将遗失的数据自动补充）<br />&#13;\n停掉217上的mysql服务，在218上执行<br />&#13;\n<pre code_snippet_id="1972493" snippet_file_name="blog_20161108_17_769947" name="code" class="plain">insert into testtable values (1);</pre>启动217的mysql服务，使用show确认217的数据库节点已经连接上了，执行如下语句<br />&#13;\n<pre code_snippet_id="1972493" snippet_file_name="blog_20161108_18_2514834" name="code" class="plain">select csdn-100.html csdn-101.html csdn-102.html csdn-103.html csdn-104.html csdn-105.html csdn-106.html csdn-107.html csdn-108.html csdn-109.html csdn-10.html csdn-110.html csdn-111.html csdn-112.html csdn-113.html csdn-114.html csdn-115.html csdn-116.html csdn-117.html csdn-118.html csdn-119.html csdn-11.html csdn-120.html csdn-121.html csdn-122.html csdn-123.html csdn-124.html csdn-125.html csdn-126.html csdn-127.html csdn-128.html csdn-129.html csdn-12.html csdn-130.html csdn-131.html csdn-132.html csdn-133.html csdn-134.html csdn-135.html csdn-136.html csdn-137.html csdn-138.html csdn-139.html csdn-13.html csdn-140.html csdn-141.html csdn-142.html csdn-143.html csdn-144.html csdn-145.html csdn-146.html csdn-147.html csdn-148.html csdn-149.html csdn-14.html csdn-150.html csdn-151.html csdn-152.html csdn-153.html csdn-154.html csdn-155.html csdn-156.html csdn-157.html csdn-158.html csdn-159.html csdn-15.html csdn-160.html csdn-161.html csdn-162.html csdn-163.html csdn-164.html csdn-165.html csdn-166.html csdn-167.html csdn-168.html csdn-169.html csdn-16.html csdn-170.html csdn-171.html csdn-172.html csdn-173.html csdn-174.html csdn-175.html csdn-176.html csdn-177.html csdn-178.html csdn-179.html csdn-17.html csdn-180.html csdn-181.html csdn-182.html csdn-183.html csdn-184.html csdn-185.html csdn-186.html csdn-187.html csdn-188.html csdn-189.html csdn-18.html csdn-190.html csdn-191.html csdn-192.html csdn-193.html csdn-194.html csdn-195.html csdn-196.html csdn-197.html csdn-198.html csdn-199.html csdn-19.html csdn-1.html csdn-200.html csdn-201.html csdn-202.html csdn-203.html csdn-204.html csdn-205.html csdn-206.html csdn-207.html csdn-208.html csdn-209.html csdn-20.html csdn-210.html csdn-211.html csdn-212.html csdn-213.html csdn-214.html csdn-215.html csdn-216.html csdn-217.html csdn-218.html csdn-219.html csdn-21.html csdn-220.html csdn-221.html csdn-222.html csdn-223.html csdn-224.html csdn-225.html csdn-226.html csdn-227.html csdn-228.html csdn-229.html csdn-22.html csdn-230.html csdn-231.html csdn-232.html csdn-233.html csdn-234.html csdn-235.html csdn-236.html csdn-237.html csdn-238.html csdn-239.html csdn-23.html csdn-240.html csdn-241.html csdn-242.html csdn-243.html csdn-244.html csdn-245.html csdn-246.html csdn-247.html csdn-248.html csdn-249.html csdn-24.html csdn-250.html csdn-251.html csdn-252.html csdn-253.html csdn-254.html csdn-255.html csdn-256.html csdn-257.html csdn-258.html csdn-259.html csdn-25.html csdn-260.html csdn-261.html csdn-262.html csdn-263.html csdn-264.html csdn-265.html csdn-266.html csdn-267.html csdn-268.html csdn-269.html csdn-26.html csdn-270.html csdn-271.html csdn-272.html csdn-273.html csdn-274.html csdn-275.html csdn-276.html csdn-277.html csdn-278.html csdn-279.html csdn-27.html csdn-280.html csdn-281.html csdn-282.html csdn-283.html csdn-284.html csdn-285.html csdn-286.html csdn-287.html csdn-288.html csdn-289.html csdn-28.html csdn-290.html csdn-291.html csdn-292.html csdn-293.html csdn-294.html csdn-295.html csdn-296.html csdn-297.html csdn-298.html csdn-299.html csdn-29.html csdn-2.html csdn-300.html csdn-301.html csdn-302.html csdn-303.html csdn-304.html csdn-305.html csdn-306.html csdn-307.html csdn-308.html csdn-309.html csdn-30.html csdn-310.html csdn-311.html csdn-312.html csdn-313.html csdn-314.html csdn-315.html csdn-316.html csdn-317.html csdn-318.html csdn-319.html csdn-31.html csdn-320.html csdn-321.html csdn-322.html csdn-323.html csdn-324.html csdn-325.html csdn-326.html csdn-327.html csdn-328.html csdn-329.html csdn-32.html csdn-330.html csdn-331.html csdn-332.html csdn-333.html csdn-334.html csdn-335.html csdn-336.html csdn-337.html csdn-338.html csdn-339.html csdn-33.html csdn-340.html csdn-341.html csdn-342.html csdn-343.html csdn-344.html csdn-345.html csdn-346.html csdn-347.html csdn-348.html csdn-349.html csdn-34.html csdn-350.html csdn-351.html csdn-352.html csdn-353.html csdn-354.html csdn-355.html csdn-356.html csdn-357.html csdn-358.html csdn-359.html csdn-35.html csdn-360.html csdn-361.html csdn-362.html csdn-363.html csdn-364.html csdn-365.html csdn-366.html csdn-367.html csdn-368.html csdn-369.html csdn-36.html csdn-370.html csdn-371.html csdn-372.html csdn-373.html csdn-374.html csdn-37.html csdn-38.html csdn-39.html csdn-3.html csdn-40.html csdn-41.html csdn-42.html csdn-43.html csdn-44.html csdn-45.html csdn-46.html csdn-47.html csdn-48.html csdn-49.html csdn-4.html csdn-50.html csdn-51.html csdn-52.html csdn-53.html csdn-54.html csdn-55.html csdn-56.html csdn-57.html csdn-58.html csdn-59.html csdn-5.html csdn-60.html csdn-61.html csdn-62.html csdn-63.html csdn-64.html csdn-65.html csdn-66.html csdn-67.html csdn-68.html csdn-69.html csdn-6.html csdn-70.html csdn-71.html csdn-72.html csdn-73.html csdn-74.html csdn-75.html csdn-76.html csdn-77.html csdn-78.html csdn-79.html csdn-7.html csdn-80.html csdn-81.html csdn-82.html csdn-83.html csdn-84.html csdn-85.html csdn-86.html csdn-87.html csdn-88.html csdn-89.html csdn-8.html csdn-90.html csdn-91.html csdn-92.html csdn-93.html csdn-94.html csdn-95.html csdn-96.html csdn-97.html csdn-98.html csdn-99.html csdn-9.html mysql.sh from testtable;</pre>如果发现有数据，则表示功能完备<br />&#13;\n6、关闭Cluster：（需要严格按照次序执行）<br />&#13;\n关闭数据节点：# mysqld stop  (SQL节点可以用mysqladmin shutdown或别的方式关闭。)<br />&#13;\n在管理节点上执行：# ndb_mgm -e shutdown<br />&#13;\n将安全的关闭管理节点和数据节点。<br />&#13;\n关闭后使用如下的进程检测命令查看一下是否退出来了：<br />&#13;\n<pre code_snippet_id="1972493" snippet_file_name="blog_20161108_19_323007" name="code" class="plain"># pgrep mysqld\n# ps aux | grep nbdb </pre>如果没有，找到对应的pid进行kill 操作即可<br />&#13;\nkill -9 进程号<br />&#13;\n7、再次启动Cluster方案：<br />&#13;\n启动整个cluster的次序，注意，一些语句已经减去了初始化的内容：<br />&#13;\n<pre code_snippet_id="1972493" snippet_file_name="blog_20161108_20_8098941" name="code" class="plain">ndb_mgmd -f /var/lib/mysql-cluster/config.ini\nndbd\nmysqld_safe --defaults-file=/etc/my.cnf --explicit_defaults_for_timestamp &amp;</pre>备注：<br />&#13;\n1、mysql安装后，默认会自动启动的，每次启动cluster的时候，都需要先把mysql的服务关闭，太麻烦，于是可以执行如下命令（我出手有点狠）：<br />&#13;\n    chkconfig --level 123456 mysql off<br />&#13;\n2、防火墙问题，偷个懒，我懒得去一一开放端口，干脆把防火墙直接关了<br />&#13;\n    chkconfig --level 123456 mysql off<br />&#13;\n<p></p>&#13;\n<div style="background-color:inherit">参考相关文档：</div>&#13;\n<p></p>&#13;\n<p style="margin:5px 0px"><a target="_blank" href="http://lib.csdn.net/base/mysql" class="replace_word" title="MySQL知识库" style="color:#df3434; font-weight:bold">MySQL</a> Cluster 备份与恢复 <a target="_blank" href="http://www.linuxidc.com/Linux/2013-06/85295.htm">http://www.linuxidc.com/Linux/2013-06/85295.htm</a></p>&#13;\n<p style="margin:5px 0px">MySQL Cluster安装配置 <a target="_blank" href="http://www.linuxidc.com/Linux/2013-07/87705.htm">http://www.linuxidc.com/Linux/2013-07/87705.htm</a></p>&#13;\n<p style="margin:5px 0px">MySQL Cluster 3台机器搭建集群环境 DOC <a target="_blank" href="http://www.linuxidc.com/Linux/2013-01/78249.htm">http://www.linuxidc.com/Linux/2013-01/78249.htm</a></p>&#13;\n<p style="margin:5px 0px">MySQL Cluster7.2在线增加数据节点存在重大弊端 <a target="_blank" href="http://www.linuxidc.com/Linux/2012-08/67605.htm">http://www.linuxidc.com/Linux/2012-08/67605.htm</a></p>&#13;\n<p style="margin:5px 0px">搭建MySQL-Cluster集群<a target="_blank" href="http://lib.csdn.net/base/architecture" class="replace_word" title="大型网站架构知识库" style="color:#df3434; font-weight:bold">架构</a>   <a target="_blank" href="http://www.linuxidc.com/Linux/2014-05/102218.htm">http://www.linuxidc.com/Linux/2014-05/102218.htm</a></p>&#13;\n<br />&#13;\n &#13;\n
