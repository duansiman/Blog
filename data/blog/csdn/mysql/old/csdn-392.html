\n\n<h3>基本概念</h3>&#13;\n<div>• 字符(Character)是指人类语言中最小的表义符号。例如’A'、’B'等；<br />&#13;\n• 给定一系列字符，对每个字符赋予一个数值，用数值来代表对应的字符，这一数值就是字符的编码(Encoding)。例如，我们给字符’A'赋予数值0，给字符’B'赋予数值1，则0就是字符’A'的编码；<br />&#13;\n• 给定一系列字符并赋予对应的编码后，所有这些字符和编码对组成的集合就是字符集(Character Set)。例如，给定字符列表为{’A',’B'}时，{’A'=&gt;0, ‘B’=&gt;1}就是一个字符集；<br />&#13;\n• 字符序(Collation)是指在同一字符集内字符之间的比较规则；<br />&#13;\n• 确定字符序后，才能在一个字符集上定义什么是等价的字符，以及字符之间的大小关系；<br />&#13;\n• 每个字符序唯一对应一种字符集，但一个字符集可以对应多种字符序，其中有一个是默认字符序(Default Collation)；<br />&#13;\n• MySQL中的字符序名称遵从命名惯例：以字符序对应的字符集名称开头；以_ci(表示大小写不敏感)、_cs(表示大小写敏感)或_bin(表示按编码值比较)结尾。例如：在字符序“utf8_general_ci”下，字符“a”和“A”是等价的；<br />&#13;\n</div>&#13;\n<p><br />&#13;\n</p>&#13;\n<h3>字符集和排序方式</h3>&#13;\n<p>字符集和排序方式的关系是这样的：一个字符集可以有一个或多个排序方式，有一个默认的排序方式，我们可以通过以下例子说明：</p>&#13;\n<p></p>&#13;\n<pre code_snippet_id="435591" snippet_file_name="blog_20140726_1_7720649" name="code" class="sql">mysql&gt; show character set like '%gbk%';\n+---------+------------------------+-------------------+--------+\n| Charset | Description | Default collation | Maxlen |\n+---------+------------------------+-------------------+--------+\n| gbk | GBK Simplified Chinese | gbk_chinese_ci | 2 | \n+---------+------------------------+-------------------+--------+\n1 row in set (0.00 sec)\n\nmysql&gt; show collation like '%gbk%';\n+----------------+---------+----+---------+----------+---------+\n| Collation | Charset | Id | Default | Compiled | Sortlen |\n+----------------+---------+----+---------+----------+---------+\n| gbk_chinese_ci | gbk | 28 | Yes | Yes | 1 | \n| gbk_bin | gbk | 87 | | Yes | 1 | \n+----------------+---------+----+---------+----------+---------+\n2 rows in set (0.00 sec)</pre>从上例中我们可以看出字符集gbk有两个排序方式（分别为gbk_chinese_ci何gbk_bin），其中默认的排序方式为gbk_chinese_ci。&#13;\n<p></p>&#13;\n<p>排序方式的命名规则为：字符集名字_语言_后缀，其中各个典型后缀的含义如下：</p>&#13;\n<p>1）_ci：不区分大小写的排序方式</p>&#13;\n<p>2）_cs：区分大小写的排序方式</p>&#13;\n<p>3）_bin：二进制排序方式，大小比较将根据字符编码，不涉及人类语言，因此_bin的排序方式不包含人类语言</p>&#13;\n<p>因此，gbk_chinese_ci排序方式就表示：字符集为gbk，人类语言使用中文来比较大小，比较时区分大小写。</p>&#13;\n<p><br />&#13;\n</p>&#13;\n<h3>常用函数</h3>&#13;\n<p><strong>字符集引导</strong></p>&#13;\n<p>字符集引导可以让MySQL指定一种字符集来解释字符常量，其语法为：</p>&#13;\n<p>_charset str</p>&#13;\n<p>如：</p>&#13;\n<p>_utf8 'ABCD'   表示以utf8字符集来存储字符串常量'ABCD'</p>&#13;\n<p><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px">由字符集引导修饰的文本字符串在请求过程中不经过多余的转码，直接转换为内部字符集处理。</span><br />&#13;\n</p>&#13;\n<p><strong><br />&#13;\n</strong></p>&#13;\n<p><strong>字符集转换</strong></p>&#13;\n<p>convert()函数可以把一个字符串转换成指定字符集，其语法为：</p>&#13;\n<p>convert(str using charset)</p>&#13;\n<p>如 convert('ABCD' using utf8)  表示把'ABCD'的字符集转换成uft8</p>&#13;\n<p><strong>length()函数  --返回字节的长度</strong></p>&#13;\n<p><strong>char_length()  --返回字符长度</strong></p>&#13;\n<p><br />&#13;\n</p>&#13;\n<h3>与字符集有关的系统变量</h3>&#13;\n<div>通过以下语句可以查看与字符集有关的系统变量：</div>&#13;\n<div><pre code_snippet_id="435591" snippet_file_name="blog_20140726_2_1722621" name="code" class="sql">mysql&gt; show variables like 'character\\_set\\_%';\n+--------------------------+--------+\n| Variable_name | Value |\n+--------------------------+--------+\n| character_set_client | latin1 | \n| character_set_connection | latin1 | \n| character_set_database | gbk | \n| character_set_filesystem | binary | \n| character_set_results | latin1 | \n| character_set_server | gbk | \n| character_set_system | utf8 | \n+--------------------------+--------+\n7 rows in set (0.01 sec)\n\nmysql&gt; show variables like 'collation\\_%'; \n+----------------------+-------------------+\n| Variable_name | Value |\n+----------------------+-------------------+\n| collation_connection | latin1_swedish_ci | \n| collation_database | gbk_chinese_ci | \n| collation_server | gbk_chinese_ci | \n+----------------------+-------------------+\n3 rows in set (0.00 sec)</pre>它们的含义如下：</div>&#13;\n<div>character_set_system：MySQL数据库标识符使用的字符集，永远是utf8</div>&#13;\n<div>character_set_server和collation_server：服务器的默认字符集和排序方式</div>&#13;\n<div>character_set_database和collation_database：当前数据库的默认字符集和排序方式<br />&#13;\n以下三个变量将影响客户端和服务器之间的通信：</div>&#13;\n<div>character_set_client：客户端向服务器发送SQL语句使用的字符集<br />&#13;\n</div>&#13;\n<div>character_set_results：服务器向客户端返回结果时使用的字符集<br />&#13;\n</div>&#13;\n<div>character_set_connection：如果它和character_set_client不同，从客户端发来的SQL语句将转换为它指定的字符集</div>&#13;\n<div>默认情况下，上述三个变量都设为为相同的值，如果某个客户端想使用另一种字符集与服务器通信，可以修改它们，如：</div>&#13;\n<div><pre code_snippet_id="435591" snippet_file_name="blog_20140726_3_4786500" name="code" class="sql">set character_set_client = utf8;\nset character_set_results = utf8;\nset character_set_connection = utf8;</pre>或者，更简单的方法是使用如下一条语句也能达到相同的效果：</div>&#13;\n<div><pre code_snippet_id="435591" snippet_file_name="blog_20140726_4_8025103" name="code" class="sql">set names 'utf8';</pre><br />&#13;\n<strong><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px">MySQL中的字符集转换过程</span><br />&#13;\n</strong></div>&#13;\n<div><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px">1.&#13;\n MySQL Server收到请求时将请求数据从character_set_client转换为character_set_connection；</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px">2. 进行内部操作前将请求数据从character_set_connection转换为内部操作字符集，其确定方法如下：</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px">       - 使用每个数据字段的CHARACTER SET设定值；</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px">       - 若上述值不存在，则使用对应数据表的DEFAULT CHARACTER SET设定值(MySQL扩展，非SQL标准)；</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px">       - 若上述值不存在，则使用对应数据库的DEFAULT CHARACTER SET设定值；</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px">       - 若上述值不存在，则使用character_set_server设定值。 </span><br />&#13;\n</span></div>&#13;\n<div><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px">3.&#13;\n 将操作结果从内部操作字符集转换为character_set_results。</span><br />&#13;\n</span></span></div>&#13;\n<div><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><br />&#13;\n</span></span></span></div>&#13;\n<div><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; color:rgb(255,0,255)">我们现在回过头来分析下我们产生的乱码问题：</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; color:rgb(255,0,255)">          a 我们的字段没有设置字符集，因此使用表的数据集</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; color:rgb(255,0,255)">          b 我们的表没有指定字符集，默认使用数据库存的字符集</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; color:rgb(255,0,255)">          c 我们的数据库在创建的时候没有指定字符集，因此使用character_set_server设定值</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; color:rgb(255,0,255)">          d 我们没有特意去修改character_set_server的指定字符集，因此使用mysql默认</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; color:rgb(255,0,255)">          e mysql默认的字符集是latin1，因此，我们使用了latin1字符集，而我们character_set_connection的字符集是UTF-8，插入中文乱码也再所难免了。</span><br />&#13;\n</span></span></span></div>&#13;\n<div><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; color:rgb(255,0,255)"><br />&#13;\n</span></span></span></span></div>&#13;\n<div><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><strong>检测字符集问题的一些方法</strong></span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"> </span><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px">  &#13;\n • SHOW CHARACTER SET;</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px">    • SHOW COLLATION;</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px">    • SHOW VARIABLES LIKE ‘character%’;</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px">    • SHOW VARIABLES LIKE ‘collation%’;</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px">    • SQL函数HEX、LENGTH、CHAR_LENGTH</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px">    • SQL函数CHARSET、COLLATION</span><br />&#13;\n</span></span></span></span></div>&#13;\n<div><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><br />&#13;\n</span></span></span></span></span></div>&#13;\n<div><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><strong>使用MySQL字符集时的建议</strong></span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px">    • 建立数据库/表和进行数据库操作时尽量显式指出使用的字符集，而不是依赖于MySQL的默认设置，否则MySQL升级时可能带来很大困扰；</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px">    • 数据库和连接字符集都使用latin1时，虽然大部分情况下都可以解决乱码问题，但缺点是无法以字符为单位来进行SQL操作，一般情况下将数据库和连接字符集都置为utf8是较好的选择；</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px">    • 使用mysql CAPI（mysql提供C语言操作的API）时，初始化数据库句柄后马上用mysql_options设定MYSQL_SET_CHARSET_NAME属性为utf8，这样就不用显式地用SET NAMES语句指定连接字符集，且用mysql_ping重连断开的长连接时也会把连接字符集重置为utf8；</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px">    • 对于mysql PHP API，一般页面级的PHP程序总运行时间较短，在连接到数据库以后显式用SET NAMES语句设置一次连接字符集即可；但当使用长连接时，请注意保持连接通畅并在断开重连后用SET NAMES语句显式重置连接字符集。</span><br />&#13;\n</span></span></span></span></span></div>&#13;\n<div><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><br />&#13;\n</span></span></span></span></span></span></div>&#13;\n<div><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><strong>其他注意事项</strong></span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px">    • my.cnf中的default_character_set设置只影响mysql命令连接服务器时的连接字符集，不会对使用libmysqlclient库的应用程序产生任何作用！</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px">    • 对字段进行的SQL函数操作通常都是以内部操作字符集进行的，不受连接字符集设置的影响。</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px">    • SQL语句中的裸字符串会受到连接字符集或introducer设置的影响，对于比较之类的操作可能产生完全不同的结果，需要小心！</span><br />&#13;\n</span></span></span></span></span></span></div>&#13;\n<div><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><br />&#13;\n</span></span></span></span></span></span></span></div>&#13;\n<div><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px"><strong>MySQL默认字符集</strong></span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px">MySQL对于字符集的指定可以细化到一个数据库，一张表，一列.传统的程序在创建数据库和数据表时并没有使用那么复杂的配置，它们用的是默认的配置.</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px">    (1)编译MySQL 时，指定了一个默认的字符集，这个字符集是 latin1；</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px">    (2)安装MySQL 时，可以在配置文件 (my.ini) 中指定一个默认的的字符集，如果没指定，这个值继承自编译时指定的；</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px">    (3)启动mysqld 时，可以在命令行参数中指定一个默认的的字符集，如果没指定，这个值继承自配置文件中的配置,此时 character_set_server 被设定为这个默认的字符集；</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px">    (4)安装 MySQL选择多语言支持，安装程序会自动在配置文件中把default_character_set 设置为 UTF-8，保证缺省情况下所有的数据库所有表的所有列的都用 UTF-8 存储。</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px"><strong>查看默认字符集</strong></span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px"><strong>   </strong></span><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"> </span><span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px">(默认情况下，mysql的字符集是latin1(ISO_8859_1)，如何查看在上面我们已经给出了相关命令</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px"><strong>修改默认字符集</strong></span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px">(1) 最简单的修改方法，就是修改mysql的my.ini文件中的字符集键值，</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px">     如    default-character-set = utf8</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px">      character_set_server =  utf8</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px">     修改完后，重启mysql的服务</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px">(2) 还有一种修改字符集的方法，就是使用mysql的命令</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px">     mysql&gt; SET character_set_client = utf8 ;</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px">     mysql&gt; SET character_set_connection = utf8 ;</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px">     mysql&gt; SET character_set_database = utf8 ;</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px">     mysql&gt; SET character_set_results = utf8 ;</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px">     mysql&gt; SET character_set_server = utf8 ;</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px">     mysql&gt; SET collation_connection = utf8 ;</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px">     mysql&gt; SET collation_database = utf8 ;</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px">     mysql&gt; SET collation_server = utf8 ;</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"> </span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px">设置了表的默认字符集为utf8并且通过UTF-8编码发送查询，存入数据库的仍然是乱码。那connection连接层上可能出了问题。解决方法是在发送查询前执行下面这句： SET NAMES 'utf8';它相当于下面的三句指令：</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px">SET character_set_client = utf8;</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px">SET character_set_results = utf8;</span><br style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px" />&#13;\n<span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px">SET character_set_connection = utf8;</span><br />&#13;\n</span></span></span></span></span></span></span></div>&#13;\n<div><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px; line-height:15.199999809265137px"><span style="line-height:15.199999809265137px; font-family:Verdana,Geneva,Arial,Helvetica,sans-serif; font-size:12.800000190734863px">此外，还要特别注意终端的编码，最好和connection的编码一致。</span></span></span></span></span></span></span></span></div>&#13;\n &#13;\n
