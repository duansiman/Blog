\n\n<p>MySQL一个显著的特点是其可插拔的存储引擎，因此MySQL文件分为两种：一种是MySQL服务器本身的文件（主要是一些日志文件，如错误日志、二进制日志等），所有的存储引擎共享；另一种是和具体存储引擎相关的文件。本文主要介绍和InnoDB存储引擎相关的文件（数据+日志），至于MySQL服务器本身的日志文件，可以参考《[<a target="_blank" href="http://blog.csdn.net/dbanote/article/details/9078635">MySQL] 日志文件概述</a>》。</p>&#13;\n<p><br />&#13;\n</p>&#13;\n<h2>InnoDB表空间文件</h2>&#13;\n<div>InnoDB在很多方面和Oracle非常像，它的数据也是按表空间存储的，表空间是一个在逻辑上为整体的存储块，默认情况下，所有的数据都放在一个共享的存储表空间里。</div>&#13;\n<div>以下两个变量和共享表空间相关：</div>&#13;\n<div>1）innodb_data_home_dir：设置共享表空间的主目录，默认等于datadir的值</div>&#13;\n<div>2）innodb_data_file_path：设置共享表空间文件，可以包含多个文件，它们之间用分号隔开。</div>&#13;\n<div>如果你不想把所有数据放在共享表空间里，而是想基于每个表单独生成一个文件，那么把innodb_file_per_table设为ON即可，这样将会为每个表创建一个表空间，但即便如此，共享表空间也是必不可少的，因为数据字典还需要放在里面，只是它不会占用那么多空间了。</div>&#13;\n<div>下图显示了innodb的存储方式：</div>&#13;\n<div><img src="http://img.blog.csdn.net/20130612125612859" alt="" width="500" height="250" /><br />&#13;\n</div>&#13;\n<div>上图中主要有以下几种存储文件：</div>&#13;\n<div>1）表结构定义文件(.frm)：MySQL里每个表、每个视图都有一个对应的.frm文件用于记录表和视图的定义。注意：该文件和存储引擎无关，属于MySQL数据库本身的文件。</div>&#13;\n<div>2）共享表空间文件(ibdata)</div>&#13;\n<div>3）单独表空间文件(.ibd)</div>&#13;\n<div>同时，为了提高性能，可以通过变量innodb_buffer_pool_size配置表空间文件的缓冲区。</div>&#13;\n<h2>InnoDB日志文件</h2>&#13;\n<div>innodb除了MySQL服务器本身的日志文件之外，还有它独有的日志文件：重做日志文件，用于记录事务日志，如果数据库由于宕机导致实例失败，重新启动时，就可以利用重做日志恢复到宕机前的一致性状态。</div>&#13;\n<div>MySQL的重做日志和Oracle的很类似，通过循环的方式覆盖重用，下图显示了一个拥有3个重做日志文件的重做日志文件组：</div>&#13;\n<div><img src="http://img.blog.csdn.net/20130612130634906" alt="" /><br />&#13;\n</div>&#13;\n<div>和Innodb日志文件相关的变量有：</div>&#13;\n<div>1）innodb_log_group_home_dir：定义日志文件的目录</div>&#13;\n<div>2）innodb_log_files_in_group：定义日志文件数目</div>&#13;\n<div>3）innodb_log_file_size：定义日志文件大小</div>&#13;\n<div>4）innodb_log_buffer_size：日志缓冲区大小</div>&#13;\n<div><br />&#13;\n</div>&#13;\n<div>这里有个疑问，同样是记录事务日志，InnoDB的重做日志文件和MySQL自身的二进制文件有什么区别？它们的区别主要有以下三点：</div>&#13;\n<div>1）首先，范围不同。二进制文件记录所有与MySQL相关的日志记录，包括InnoDB，MyISAM，Heap等存储引擎的日志。而InnoDB的重做日志只记录InnoDB相关的事务日志。</div>&#13;\n<div>2）其次，内容不同。二进制文件记录的是关于一个事务的具体操作内容，而InnoDB的重做日志记录每个数据页（page）更改的物理情况。</div>&#13;\n<div>3）写入的时间不同。二进制文件在事务提交之前记录，在事务进行过程中，不断有重做日志条目写入重做日志文件中。</div>&#13;\n<div><br />&#13;\n</div>&#13;\n &#13;\n
