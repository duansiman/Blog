\n\n<p>InnoDB和大多数行式数据库一样，记录以行的格式存储，它提供了两种格式：Compact和Redundant</p>&#13;\n<p><br />&#13;\n</p>&#13;\n<h2>Compact</h2>&#13;\n<div>Compact格式是在MySQL5.0时才被引入，它是新的行格式，其设计目标是高效存放数据，示意图如下：</div>&#13;\n<div><br />&#13;\n</div>&#13;\n<div><img src="http://img.blog.csdn.net/20130613075813187" alt="" /><br />&#13;\n</div>&#13;\n<div><br />&#13;\n</div>&#13;\n<div>1）变长字段长度列表。按列的逆序放置，当列长度小于255字节，用1字节表示，若大于255字节，用2个字节表示，至多为2字节（这也很好解释了InnoDB中varchar的最大长度为什么是65535，因为2个字节为16位，2的16次方-1）。注意，对于固定长度字段（如char），是不需要记录其长度的。</div>&#13;\n<div>2）NULL标志位。指示该行中的列是否为NULL，1表示NULL。</div>&#13;\n<div>3）记录头信息。固定占用5个字节（40位），每位代表的含义如下表所示：</div>&#13;\n<div><br />&#13;\n</div>&#13;\n<div><img src="http://img.blog.csdn.net/20130613081510000" alt="" /><br />&#13;\n</div>&#13;\n<div><br />&#13;\n</div>&#13;\n<div>4）最后就是实际存储的该行每列的数据了，注意：NULL不在该部分中占用存储。</div>&#13;\n<div>5）此外还有两个隐藏部分，分别存放事务ID和回滚指针，大小分别为6字节和7字节，如果表没有定义主键，每行还会自动增加6字节的ROWID。</div>&#13;\n<div><br />&#13;\n</div>&#13;\n<h2>Redundant</h2>&#13;\n<div>Redundant是MySQL5.0之前InnoDB的行记录存储格式，其示意图如下：</div>&#13;\n<div><br />&#13;\n</div>&#13;\n<div><img src="http://img.blog.csdn.net/20130613082824546" alt="" /><br />&#13;\n</div>&#13;\n<div><br />&#13;\n</div>&#13;\n<div>1）字段长度偏移列表。同样按列的逆序放置，当列长度小于255字节，用1字节表示，若大于255字节，用2个字节表示。</div>&#13;\n<div>2）记录头信息。固定占用6个字节（48位），每位含义见下表：</div>&#13;\n<div><br />&#13;\n</div>&#13;\n<div><img src="http://img.blog.csdn.net/20130613083124171" alt="" /><br />&#13;\n</div>&#13;\n<div><br />&#13;\n</div>&#13;\n<div>3）最后部分是实际存储各个列数据。</div>&#13;\n<div>4）和Compact一样，还有两个隐藏部分，分别存放事务ID和回滚指针，大小分别为6字节和7字节，如果表没有定义主键，每行还会自动增加6字节的ROWID。</div>&#13;\n<div><br />&#13;\n</div>&#13;\n<div>Redundant和Compact最大的不同是对Char类型NULL值的处理，Redundant会实际存储NULL值，占Char类型固定长度空间，而Compact不占用空间，这也是Compact能寸更多记录的原因之一。注意：对于varchar类型，不管是Compact还是Redundant都不存储NULL值。</div>&#13;\n<div><br />&#13;\n</div>&#13;\n<h2>Compressed和Dynamic</h2>&#13;\n<div>InnoDB Plugin引入了新的文件格式，称为Barracuda（之前的Compact和Redundant称为Antelope），拥有两种权限的记录格式Compressed和Dynamic。这里就不详细介绍它们了，有兴趣的童鞋可以自行研究下。</div>&#13;\n &#13;\n
