\n <div class="markdown_views"><h4 id="性能优化">性能优化</h4>\n\n\n\n<h5 id="索引">索引</h5>\n\n<p>索引指向数据库中具体数据所在的一个位置，同事在列上创建一个索引可以排列该列上的信息。当服务器需要访问该信息进行 查询时，就会知晓在什么地方进行查询，因为索引指向有关位置。</p>\n\n<p>如果一个列涉及查询，分组，排序，索引将可以达到提高性能的效果。 <br />\n带很多重复值的索引不会产生很好的结果。 <br />\n可以使用表来联合多个非唯一的索引，以便改善性能。 <br />\n索引越多，性能不一定越好。添加一个索引，并不一定能改善性能。</p>\n\n\n\n<h5 id="查询高速缓存">查询高速缓存</h5>\n\n<p>在运行select查询时，MySQL4.x会记录下查询和返回结果。这是通过select每次进行查询时，在一个特殊的高速缓存中保存 结果集实现的。然后，当再次请求服务器做相同的查询时，MySQL将会从高速缓存中检索结果，而不是再次运行该查询。 默认情况下是启动这个性能。</p>\n\n<p>注意，一旦表有变化，使用这个表的高速缓存查询就变成无效，并且将从高速缓存中删除。这样防止查询从旧表上返回 不准确的数据。经常有变化的表，将不会从高速缓存中得到利益。这种情况，可以考虑不使用高速缓存， 可以添加一个选项sql_no_cache来实现。</p>\n\n\n\n<h5 id="查询分析">查询分析</h5>\n\n<p>在select查询开始处加上一个explain关键字，将告诉MySQL返回一个图表，说明这个查询如果进行处理， 在这个图表里涉及了查询将访问哪个表的信息以及查询希望返回的行数的信息。这个信息可以用来查看哪些表可以添加索引， 以便加快执行速度，分析瓶颈的位置。</p>\n\n<p>通过查询的显示结果，可以知道什么位置可以添加索引，进行迅速的改正。</p>\n\n\n\n<h5 id="优化多表查询">优化多表查询</h5>\n\n<p>子查询是一个嵌套在另一个select语句中的select语句。子查询经常用来把一个复杂的查询拆分为一些列的逻辑步骤， 或者使用其他查询结果回答一个查询。其结果是不需要执行两个或者更多的单独查询，就可以执行一项包含一项或者多项子查询 的简单查询。</p>\n\n<p>MySQL可以比子查询更好的优化连接，所以如果发现在自己的MySQL服务器上的负载平均值达到了无法接受的高水平，就应该 检验应用程序代码，并试着重写作为连接和连接序列的子查询。</p>\n\n<p>可以通过有效的使用MySQL的集合性能和修改程序来把低效的子查询转变为更为有效的连接。 <br />\n如果希望避免中间使用嵌套查询，还可以使用基于会话的服务器变量。</p>\n\n\n\n<h5 id="使用临时表">使用临时表</h5>\n\n<p>MySQL还允许使用create temporary table命令创建临时表。这种表之所以这么称呼，是因为它只针对单一的MySQL会话 过程而存在的，当使用这些表的客户机关闭了与MySQL服务器的连接时，它将自动删除。</p>\n\n<p>因为临时表保存在内存中，所以要比基于磁盘的表明显的快。结果可以有效的作为中间存储区域，以便提高查询实施的速度， 帮助把复杂的的拆分为更简单的部件，或者作为子查询和连接支持的代替。</p>\n\n\n\n<h5 id="优化表设计">优化表设计</h5>\n\n<p>为了使查询能够更加精炼，需要考虑表设计方面的一些因素。首先，如果经常查询的表会发生很多变化，改进性能的方式就是使用 定长字段，不适用变长字段。虽然使用定长字段将浪费更多的磁盘空间，但是从查询角度看，MySQL处理定长字段比变长字段更快。</p>\n\n<p>改善性能的另一项技术是使用optimize table命令处理经常需要修改的表。经常修改表会导致磁盘碎片，以致花费额外的时间 去读取没有用的空间块，以便得到希望的数据。</p>\n\n<p>在考虑改善性能时，还要检查是否需要针对已经建立的所有表。额外的表意味着性能降低。没有必要合并的表，则应试着匹配连接的 列。</p>\n\n\n\n<h5 id="调整服务器设置">调整服务器设置</h5>\n\n<p>如果希望服务器更加有效的运行，最佳解决方案是加大内存空间和使用更大更快的磁盘。但是更多时候，条件是不允许是的。 此时，我们需要一些改进服务器的常规技术。</p>\n\n<p>调整服务器变量，key_buffer_size变量控制MySQL索引缓冲可以使用内存的数量。值越高，索引可以使用的内存越多，性能越好。 一般情况，这个值保持在可使用内存总量的25%到30%。table_cache变量控制表高速缓存可以使用内存的数量，以及在同一时间 内MySQL可以处理表的打开总量。对于有很多数据库和表的非常忙的服务器来说，应该增加这个值,使用set修改。</p>\n\n<p>一旦修改了一个全局服务器变量，关闭服务器之前，这些变量一直存在，但是重启服务器之后，变量恢复默认状态。 所以最好是进行永久性修改。</p></div>&#13;\n <script type="text/javascript">&#13;\n $(function () {&#13;\n $('pre.prettyprint code').each(function () {&#13;\n var lines = $(this).text().split('\\n').length;&#13;\n var $numbering = $('&lt;ul/&gt;').addClass('pre-numbering').hide();&#13;\n $(this).addClass('has-numbering').parent().append($numbering);&#13;\n for (i = 1; i &lt;= lines; i++) {&#13;\n $numbering.append($('&lt;li/&gt;').text(i));&#13;\n };&#13;\n $numbering.fadeIn(1700);&#13;\n });&#13;\n });&#13;\n </script>&#13;\n &#13;\n
