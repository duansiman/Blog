\n <div class="markdown_views"><p>在前面的章节中，你交互式地使用mysql输入查询并且查看结果。你也可以以批模式运行mysql。为了做到这些，把你想要运行的命令放在一个文件中，然后告诉mysql从文件读取它的输入:</p>\n\n\n\n<pre class="prettyprint"><code class=" hljs livecodeserver"><span class="hljs-built_in">shell</span>&gt; mysql &lt; batch-<span class="hljs-built_in">file</span></code></pre>\n\n<p>如果你是在Windows系统下运行，并且你的文件中有一些可能会造成问题的特殊字符，你可以这么做：</p>\n\n\n\n<pre class="prettyprint"><code class=" hljs bash">C:\\&gt; mysql <span class="hljs-operator">-e</span> <span class="hljs-string">"source batch-file"</span></code></pre>\n\n<p>如果你需要在命令行上指定连接参数，命令应为：</p>\n\n\n\n<pre class="prettyprint"><code class=" hljs lasso">shell<span class="hljs-subst">&gt;</span> mysql <span class="hljs-attribute">-h</span> host<span class="hljs-attribute">-u</span> user<span class="hljs-attribute">-p</span> <span class="hljs-subst">&lt;</span> batch<span class="hljs-attribute">-file</span>\nEnter password: <span class="hljs-subst">********</span></code></pre>\n\n<p>当这样操作mysql时，你先创建了一个脚本文件，然后执行脚本。</p>\n\n<p>如果你想继续执行这个脚本，即使脚本中的语句可能会产生一些错误，那么你就需要使用 –force命令行选项。</p>\n\n<p>为什么使用脚本？有很多原因：</p>\n\n<ul>\n<li>如果你需要重复运行查询(比如说，每天或每周)，可以把它编成一个脚本，则每次执行时不必重新键入。</li>\n<li>可以通过拷贝并编辑脚本文件从类似的现有的查询生成一个新查询。</li>\n<li>当你正在编写查询时，批模式也是很有用的，特别对多行命令或多语句命令序列。如果你犯了一个错误，你不必重新输入所有内容，只需要编辑脚本来改正错误，然后告诉mysql再次执行脚本。</li>\n<li>如果你有一个产生多个输出的查询，你可以通过一个分页器而不是盯着它翻屏到屏幕的顶端来运行输出：</li>\n</ul>\n\n<pre class="prettyprint"><code class=" hljs livecodeserver"><span class="hljs-built_in">shell</span>&gt; mysql &lt; batch-<span class="hljs-built_in">file</span>| more</code></pre>\n\n<ul>\n<li>你可以捕捉文件中的输出以便进行进一步的处理：</li>\n</ul>\n\n\n\n<pre class="prettyprint"><code class=" hljs livecodeserver"><span class="hljs-built_in">shell</span>&gt; mysql &lt; batch-<span class="hljs-built_in">file</span>&gt; mysql.out</code></pre>\n\n<ul>\n<li>你可以把你的脚本分发给其他人，那么他们也可以运行这些语句。</li>\n<li>某些情况不允许交互使用查询，例如, 当你从一个cron任务中运行查询时。在这种情况下，你必须使用批模式。 </li>\n</ul>\n\n<p>当你以批模式运行mysql时，比起你交互地使用它时，其默认输出格式是不同的(更简明些)。例如，当交互式运行SELECT DISTINCT species FROM pet时，输出应为：</p>\n\n\n\n<pre class="prettyprint"><code class=" hljs asciidoc"><span class="hljs-code">+---------+</span>\n<span class="hljs-header">| species |\n+---------+</span>\n| bird |\n| cat |\n| dog |\n| hamster |\n<span class="hljs-header">| snake |\n+---------+</span></code></pre>\n\n<p>但是当以批模式运行时，输出应为：</p>\n\n\n\n<pre class="prettyprint"><code class=" hljs matlab">species\nbird\n<span class="hljs-built_in">cat</span>\ndog\nhamster\nsnake</code></pre>\n\n<p>如果你想得到交互式的输出格式，使用 mysql -t. 为了回显以输出被执行的命令，使用mysql -vvv. </p>\n\n<p>你还可以使用source命令或 .命令从mysql提示符中使用脚本：</p>\n\n\n\n<pre class="prettyprint"><code class=" hljs bash">mysql&gt; <span class="hljs-built_in">source</span> filename;\nmysql&gt; \\. filename</code></pre>\n\n<p>更多内容请查看 <br />\nSection 4.5.1.5, “Executing SQL Statements from a Text File”</p></div>&#13;\n <script type="text/javascript">&#13;\n $(function () {&#13;\n $('pre.prettyprint code').each(function () {&#13;\n var lines = $(this).text().split('\\n').length;&#13;\n var $numbering = $('&lt;ul/&gt;').addClass('pre-numbering').hide();&#13;\n $(this).addClass('has-numbering').parent().append($numbering);&#13;\n for (i = 1; i &lt;= lines; i++) {&#13;\n $numbering.append($('&lt;li/&gt;').text(i));&#13;\n };&#13;\n $numbering.fadeIn(1700);&#13;\n });&#13;\n });&#13;\n </script>&#13;\n &#13;\n
