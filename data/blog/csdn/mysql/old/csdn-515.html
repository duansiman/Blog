\n <div class="markdown_views"><h3 id="1数学函数">1、数学函数</h3>\n\n<blockquote>\n <ul>\n <li>ABS(x) 返回x的绝对值 </li>\n <li>BIN(x) 返回x的二进制（OCT返回八进制，HEX返回十六进制）</li>\n <li>CEILING(x) 返回大于x的最小整数值</li>\n <li>EXP(x) 返回值e（自然对数的底）的x次方</li>\n <li>FLOOR(x) 返回小于x的最大整数值</li>\n <li>GREATEST(x1,x2,…,xn)返回集合中最大的值</li>\n <li>LEAST(x1,x2,…,xn) 返回集合中最小的值</li>\n <li>LN(x) 返回x的自然对数 LOG(x,y)返回x的以y为底的对数</li>\n <li>MOD(x,y) 返回x/y的模（余数） PI()返回pi的值（圆周率）</li>\n <li>RAND()返回０到１内的随机值,可以通过提供一个参数(种子)使RAND()随机数生成器生成一个指定的值。</li>\n <li>ROUND(x,y)返回参数x的四舍五入的有y位小数的值</li>\n <li>SIGN(x) 返回代表数字x的符号的值</li>\n <li>SQRT(x) 返回一个数的平方根</li>\n <li>TRUNCATE(x,y) 返回数字x截短为y位小数的结果</li>\n </ul>\n</blockquote>\n\n\n\n<h3 id="2聚集函数">2、聚集函数</h3>\n\n<blockquote>\n <ul>\n <li>AVG(col)返回指定列的平均值 </li>\n <li>MIN(col)返回指定列的最小值</li>\n <li>MAX(col)返回指定列的最大值</li>\n <li>SUM(col)返回指定列的所有值之和</li>\n <li>GROUP_CONCAT(col) 返回由属于一组的列值连接组合而成的结果</li>\n </ul>\n</blockquote>\n\n\n\n<h3 id="3字符串函数">3、字符串函数</h3>\n\n<blockquote>\n <ul>\n <li>ASCII(char)返回字符的ASCII码值 BIT_LENGTH(str)返回字符串的比特长度 </li>\n <li>CONCAT(s1,s2…,sn)将s1,s2…,sn连接成字符串</li>\n <li>CONCAT_WS(sep,s1,s2…,sn)将s1,s2…,sn连接成字符串，并用sep字符间隔</li>\n <li>INSERT(str,x,y,instr) 将字符串str从第x位置开始，y个字符长的子串替换为字符串instr，返回结果</li>\n <li>FIND_IN_SET(str,list)分析逗号分隔的list列表，如果发现str，返回str在list中的位置 </li>\n <li>LCASE(str)或LOWER(str) 返回将字符串str中所有字符改变为小写后的结果 </li>\n <li>LEFT(str,x)返回字符串str中最左边的x个字符 </li>\n <li>LENGTH(s)返回字符串str中的字符数 </li>\n <li>LTRIM(str) 从字符串str中切掉开头的空格 </li>\n <li>POSITION(substr,str) 返回子串substr在字符串str中第一次出现的位置 </li>\n <li>QUOTE(str) 用反斜杠转义str中的单引号 </li>\n <li>REPEAT(str,srchstr,rplcstr)返回字符串str重复x次的结果 </li>\n <li>REVERSE(str) 返回颠倒字符串str的结果 </li>\n <li>RIGHT(str,x) 返回字符串str中最右边的x个字符 </li>\n <li>RTRIM(str) 返回字符串str尾部的空格 </li>\n <li>STRCMP(s1,s2)比较字符串s1和s2 </li>\n <li>TRIM(str)去除字符串首部和尾部的所有空格 </li>\n <li>UCASE(str)或UPPER(str) 返回将字符串str中所有字符转变为大写后的结果</li>\n </ul>\n</blockquote>\n\n<h3 id="4日期和时间函数">4、日期和时间函数</h3>\n\n<blockquote>\n <ul>\n <li>CURDATE()或CURRENT_DATE() 返回当前的日期 </li>\n <li>CURTIME()或CURRENT_TIME() 返回当前的时间</li>\n <li>DATE_ADD(date,INTERVAL int keyword)返回日期date加上间隔时间int的结果(int必须按照关键字进行格式化),如：SELECTDATE_ADD(CURRENT_DATE,INTERVAL 6 MONTH); </li>\n <li>DATE_FORMAT(date,fmt) 依照指定的fmt格式格式化日期date值</li>\n <li>DATE_SUB(date,INTERVAL int keyword)返回日期date加上间隔时间int的结果(int必须按照关键字进行格式化),如：SELECTDATE_SUB(CURRENT_DATE,INTERVAL 6 MONTH); </li>\n <li>DAYOFWEEK(date) 返回date所代表的一星期中的第几天(1~7)</li>\n <li>DAYOFMONTH(date) 返回date是一个月的第几天(1~31)</li>\n <li>DAYOFYEAR(date) 返回date是一年的第几天(1~366)</li>\n <li>DAYNAME(date) 返回date的星期名，如：SELECT DAYNAME(CURRENT_DATE);</li>\n <li>FROM_UNIXTIME(ts,fmt) 根据指定的fmt格式，格式化UNIX时间戳ts </li>\n <li>HOUR(time) 返回time的小时值(0~23) </li>\n <li>MINUTE(time) 返回time的分钟值(0~59) </li>\n <li>MONTH(date) 返回date的月份值(1~12) </li>\n <li>MONTHNAME(date) 返回date的月份名，如：SELECT</li>\n <li>MONTHNAME(CURRENT_DATE); </li>\n <li>NOW() 返回当前的日期和时间 </li>\n <li>QUARTER(date) 返回date在一年中的季度(1~4)，如SELECT QUARTER(CURRENT_DATE); </li>\n <li>WEEK(date) 返回日期date为一年中第几周(0~53) </li>\n <li>YEAR(date) 返回日期date的年份(1000~9999) 一些示例：获取当前系统时间： <br />\n <ul><li>SELECT FROM_UNIXTIME(UNIX_TIMESTAMP()); </li>\n <li>SELEC TEXTRACT(YEAR_MONTH FROM CURRENT_DATE); </li>\n <li>SELECT EXTRACT(DAY_SECOND FROM CURRENT_DATE); </li>\n <li>SELECT EXTRACT(HOUR_MINUTE FROM CURRENT_DATE);</li>\n <li>返回两个日期值之间的差值(月数)：</li>\n <li>SELECT PERIOD_DIFF(200302,199802); </li></ul></li>\n <li>在Mysql中计算年龄： <br />\n <ul><li>SELECT DATE_FORMAT(FROM_DAYS(TO_DAYS(NOW())-TO_DAYS(birthday)),’%Y’)+0 AS age FROM employee; </li>\n <li>这样，如果Brithday是未来的年月日的话，计算结果为0。 <br />\n <ul><li>下面的SQL语句计算员工的绝对年龄，即当Birthday是未来的日期时，将得到负值。 </li>\n <li>SELECT DATE_FORMAT(NOW(), ‘%Y’) - DATE_FORMAT(birthday, ‘%Y’) -(DATE_FORMAT(NOW(), ‘00-%m-%d’) <br />\n </li></ul></li></ul></li></ul></blockquote>\n\n<h3 id="5加密函数">5、加密函数</h3>\n\n<blockquote>\n <ul>\n <li>AES_ENCRYPT(str,key) :返回用密钥key对字符串str利用高级加密标准算法加密后的结果，调用AES_ENCRYPT的结果是一个二进制字符串，以BLOB类型存储</li>\n <li>AES_DECRYPT(str,key) 返回用密钥key对字符串str利用高级加密标准算法解密后的结果</li>\n <li>DECODE(str,key)：使用key作为密钥解密加密字符串str</li>\n <li>ENCRYPT(str,salt)： 使用UNIXcrypt()函数，用关键词salt(一个可以惟一确定口令的字符串，就像钥匙一样)加密字符串str</li>\n <li>ENCODE(str,key)： 使用key作为密钥加密字符串str，调用ENCODE()的结果是一个二进制字符串，它以BLOB类型存储</li>\n <li>MD5() 计算字符串str的MD5校验和 </li>\n <li>PASSWORD(str) 返回字符串str的加密版本，这个加密过程是不可逆转的，和UNIX密码加密过程使用不同的算法。 </li>\n <li>SHA() 计算字符串str的安全散列算法(SHA)校验和 </li>\n <li>示例： <br />\n SELECT ENCRYPT(‘root’,’salt’); <br />\n SELECT ENCODE(‘xufeng’,’key’); <br />\n SELECT DECODE(ENCODE(‘xufeng’,’key’),’key’); <br />\n #加解密放在一起 <br />\n SELECT AES_ENCRYPT(‘root’,’key’); <br />\n SELECT AES_DECRYPT(AES_ENCRYPT(‘root’,’key’),’key’); <br />\n SELECT MD5(‘123456’); <br />\n SELECT SHA(‘123456’);</li>\n </ul>\n</blockquote>\n\n<h3 id="6控制流函数">6、控制流函数</h3>\n\n<blockquote>\n <p>MySQL有4个函数是用来进行条件操作的，这些函数可以实现SQL的条件逻辑，允许开发者将一些应用程序业务逻辑转换到数据库后台。 </p>\n \n <ul>\n <li>MySQL控制流函数： </li>\n <li>CASE WHEN[test1] THEN [result1]…ELSE [default] END <br />\n 如果testN是真，则返回resultN，否则返回default </li>\n <li>CASE [test] WHEN[val1] THEN [result]…ELSE [default]END </li>\n <li>如果test和valN相等，则返回resultN，否则返回default </li>\n <li>IF(test,t,f) 如果test是真，返回t；否则返回f </li>\n <li>IFNULL(arg1,arg2) 如果arg1不是空，返回arg1，否则返回arg2</li>\n <li>NULLIF(arg1,arg2) 如果arg1=arg2返回NULL；否则返回arg1 </li>\n <li>这些函数的第一个是IFNULL()，它有两个参数，并且对第一个参数进行判断。如果第一个参数不是NULL，函数就会向调用者返回第一个参数；如果是NULL,将返回第二个参数。</li>\n <li>如：SELECT IFNULL(1,2), IFNULL(NULL,10),IFNULL(4*NULL,’false’); NULLIF()函数将会检验提供的两个参数是否相等，如果相等，则返回NULL，如果不相等，就返回第一个参数。 </li>\n <li>如：SELECT NULLIF(1,1),NULLIF(‘A’,’B’),NULLIF(2+3,4+1); </li>\n <li>和许多脚本语言提供的IF()函数一样，MySQL的IF()函数也可以建立一个简单的条件测试，这个函数有三个参数，第一个是要被判断的表达式，如果表达式为真，IF()将会返回第二个参数，如果为假，IF()将会返回第三个参数。</li>\n <li>如：SELECTIF(1&lt;10,2,3),IF(56&gt;100,’true’,’false’); </li>\n <li>IF()函数在只有两种可能结果时才适合使用。然而，在现实世界中，我们可能发现在条件测试中会需要多个分支。在这种情况下，MySQL提供了CASE函数，它和PHP及Perl语言的switch-case条件例程一样。</li>\n <li>CASE函数的格式有些复杂，通常如下所示： CASE [expression to be evaluated] WHEN [val 1] THEN [result 1] WHEN [val 2] THEN [result 2] WHEN [val 3] THEN [result 3] …… WHEN [val n] THEN [result n] ELSE [default result] END </li>\n <li>这里，第一个参数是要被判断的值或表达式，接下来的是一系列的WHEN-THEN块，每一块的第一个参数指定要比较的值，如果为真，就返回结果。所有的WHEN-THEN块将以ELSE块结束，当END结束了所有外部的CASE块时，如果前面的每一个块都不匹配就会返回ELSE块指定的默认结果。如果没有指定ELSE块，而且所有的WHEN-THEN比较都不是真，MySQL将会返回NULL。</li>\n <li>CASE函数还有另外一种句法，有时使用起来非常方便，如下： CASE WHEN [conditional test 1] THEN [result 1] WHEN [conditional test 2] THEN [result 2] ELSE [default result] END 这种条件下，返回的结果取决于相应的条件测试是否为真。 </li>\n <li>示例： <br />\n <ul><li>mysql&gt;SELECT CASE ‘green’ WHEN ‘red’ THEN ‘stop’ WHEN ‘green’ THEN ‘go’ END; </li>\n <li>SELECT CASE 9 WHEN 1 THEN ‘a’ WHEN 2 THEN ‘b’ ELSE ‘N/A’ END; SELECT CASE WHEN (2+2)=4 THEN ‘OK’ WHEN(2+2)&lt;&gt;4 THEN ‘not OK’ END ASSTATUS; </li>\n <li>SELECT Name,IF((IsActive = 1),’已激活’,’未激活’) AS RESULT FROMUserLoginInfo; SELECT fname,lname,(math+sci+lit) AS total, CASE WHEN (math+sci+lit) &lt; 50 THEN ‘D’ WHEN (math+sci+lit) BETWEEN 50 AND 150 THEN ‘C’ WHEN (math+sci+lit) BETWEEN 151 AND 250 THEN ‘B’ ELSE ‘A’ END AS grade FROM marks; SELECT IF(ENCRYPT(‘sue’,’ts’)=upass,’allow’,’deny’) AS LoginResultFROM users WHERE uname = ‘sue’;#一个登陆验证</li></ul></li>\n </ul>\n</blockquote>\n\n<h3 id="7格式化函数">7、格式化函数</h3>\n\n<blockquote>\n <ul>\n <li>DATE_FORMAT(date,fmt) 依照字符串fmt格式化日期date值 </li>\n <li>FORMAT(x,y) 把x格式化为以逗号隔开的数字序列，y是结果的小数位数</li>\n <li>INET_ATON(ip) 返回IP地址的数字表示</li>\n <li>INET_NTOA(num) 返回数字所代表的IP地址</li>\n <li>TIME_FORMAT(time,fmt) 依照字符串fmt格式化时间time值 <br />\n 其中最简单的是FORMAT()函数，它可以把大的数值格式化为以逗号间隔的易读的序列。</li>\n <li>示例： <br />\n <ul><li>SELECT FORMAT(34234.34323432,3);</li>\n <li>SELECT DATE_FORMAT(NOW(),’%W,%D %M %Y %r’);</li>\n <li>SELECT DATE_FORMAT(NOW(),’%Y-%m-%d’);</li>\n <li>SELECT DATE_FORMAT(19990330,’%Y-%m-%d’);</li>\n <li>SELECT DATE_FORMAT(NOW(),’%h:%i %p’);</li>\n <li>SELECT INET_ATON(‘10.122.89.47’);</li>\n <li>SELECT INET_NTOA(175790383);</li></ul></li>\n </ul>\n</blockquote>\n\n<h3 id="8类型转化函数">8、类型转化函数</h3>\n\n<blockquote>\n <ul>\n <li>为了进行数据类型转化，MySQL提供了CAST()函数，它可以把一个值转化为指定的数据类型。</li>\n </ul>\n</blockquote>\n\n<p>类型有：BINARY,CHAR,DATE,TIME,DATETIME,SIGNED,UNSIGNED</p>\n\n<blockquote>\n <ul>\n <li>示例： <br />\n SELECT CAST(NOW() AS SIGNED INTEGER),CURDATE()+0; <br />\n SELECT ‘f’=BINARY ‘F’,’f’=CAST(‘F’ AS BINARY);</li>\n </ul>\n</blockquote>\n\n<h3 id="9系统信息函数">9、系统信息函数</h3>\n\n<blockquote>\n <ul>\n <li>DATABASE() 返回当前数据库名 </li>\n <li>BENCHMARK(count,expr) 将表达式expr重复运行count次</li>\n <li>CONNECTION_ID() 返回当前客户的连接ID </li>\n <li>FOUND_ROWS() 返回最后一个SELECT查询进行检索的总行数</li>\n <li>USER()或SYSTEM_USER() 返回当前登陆用户名 </li>\n <li>VERSION() 返回MySQL服务器的版本 </li>\n <li>示例： <br />\n SELECT DATABASE(),VERSION(),USER(); <br />\n SELECT BENCHMARK(9999999,LOG(RAND()*PI())); <br />\n #该例中,MySQL计算LOG(RAND()*PI())表达式9999999次。</li>\n </ul>\n</blockquote></div>&#13;\n <script type="text/javascript">&#13;\n $(function () {&#13;\n $('pre.prettyprint code').each(function () {&#13;\n var lines = $(this).text().split('\\n').length;&#13;\n var $numbering = $('&lt;ul/&gt;').addClass('pre-numbering').hide();&#13;\n $(this).addClass('has-numbering').parent().append($numbering);&#13;\n for (i = 1; i &lt;= lines; i++) {&#13;\n $numbering.append($('&lt;li/&gt;').text(i));&#13;\n };&#13;\n $numbering.fadeIn(1700);&#13;\n });&#13;\n });&#13;\n </script>&#13;\n &#13;\n
