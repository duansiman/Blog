\n <div class="markdown_views"><p><img src="http://img.blog.csdn.net/20170616104006874?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<ol>\n<li>MHA（Master High Availability）是一个免费的开源工具,使用Prel开发。</li>\n<li>MHA更多关注点是主从复制中的主DB.</li>\n<li>当主DB崩溃时，快速的在从服务器中找到最佳服务器。</li>\n<li>在MySQL故障切换过程中，MHA能做到在0~30秒之内自动完成数据库的故障切换操作，并且在进行故障切换的过程中，MHA能在最大程度上保证数据的一致性，以达到真正意义上的高可用。</li>\n<li>主服务器宕机时，MHA会尝试从主服务器尽可能多的保存二进制日志，最大程度保证事务的不丢失。如果主服务器硬件或者网络出现问题（ssh无法访问），肯定也就无法保存二进制日志了</li>\n<li>MHA可以与半同步复制结合起来</li>\n</ol>\n\n\n\n<h4 id="mha功能">MHA功能</h4>\n\n<p><img src="http://img.blog.csdn.net/20170616104615663?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n\n\n<h4 id="mha主从切换过程">MHA主从切换过程</h4>\n\n<p><img src="http://img.blog.csdn.net/20170616105103384?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /> <br />\n<img src="http://img.blog.csdn.net/20170616105405417?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /> <br />\n - 2可以手动设置从服务器不参与选举 <br />\n - 3弥补其他从服务器数据差异 <br />\n - 4如果重复的主键等会使MHA停止进行故障转移 <br />\n - 5虚拟IP切换</p>\n\n<p>MHA提供两个主要优点： <br />\n - 自动故障切换：有助于意外的主站故障，崩溃等等（故障切换也可以手动完成）。 <br />\n - 快速在线主切换：在执行内核更新，MySQL升级，硬件升级等常规计划或计划维护操作时有用。</p>\n\n\n\n<h3 id="mha演示架构基于gtid">MHA演示架构（基于GTID）</h3>\n\n<p><img src="http://img.blog.csdn.net/20170616110301672?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n\n\n<h3 id="mha配置步骤">MHA配置步骤</h3>\n\n<p><img src="http://img.blog.csdn.net/20170616110002779?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /> <br />\n<img src="http://img.blog.csdn.net/20170616110222218?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /> <br />\n - SSH-&gt;故障转移过程中保存原主服务器二进制日志，配置虚拟IP地址等 <br />\n - 日志点和GTID（推荐） <br />\n - ssh和复制链路的监测</p>\n\n\n\n<h3 id="mha实例">MHA实例</h3>\n\n\n\n<h4 id="确保gtid在集群中所有的服务器中启动">确保gtid在集群中所有的服务器中启动</h4>\n\n\n\n<pre class="prettyprint"><code class=" hljs sql"><span class="hljs-operator"><span class="hljs-keyword">show</span> variables <span class="hljs-keyword">like</span> <span class="hljs-string">'gtid_mode'</span>;</span></code></pre>\n\n<p><img src="http://img.blog.csdn.net/20170616110614456?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n\n\n<h4 id="建立复制用户">建立复制用户</h4>\n\n<p><img src="http://img.blog.csdn.net/20170616110711394?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n\n\n<h4 id="从数据库初始化略备份看上一篇">从数据库初始化（略，备份，看上一篇）</h4>\n\n\n\n<h4 id="从服务器启动复制链路">从服务器启动复制链路</h4>\n\n<p><img src="http://img.blog.csdn.net/20170616111018212?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n\n\n<pre class="prettyprint"><code class=" hljs sql"><span class="hljs-operator"><span class="hljs-keyword">show</span> slave status ;</span> </code></pre>\n\n\n\n<h4 id="mha配置">MHA配置</h4>\n\n<p><strong>重复1，2步骤在每台服务器执行一遍</strong> <br />\n<strong>生成密钥之后，进行免密钥密码的配置</strong></p>\n\n\n\n<h5 id="1-主服务器生成ssh密钥">1 主服务器生成ssh密钥</h5>\n\n<p><img src="http://img.blog.csdn.net/20170616111305801?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n\n\n<h5 id="2-主服务器拷贝ssh密钥到从服务器主服务器的密钥验证也要配置">2 主服务器拷贝ssh密钥到从服务器（主服务器的密钥验证也要配置）</h5>\n\n<p><img src="http://img.blog.csdn.net/20170616111510568?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<p><img src="http://img.blog.csdn.net/20170616111758804?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n\n\n<h4 id="3安装包下载">3安装包下载</h4>\n\n<p><img src="http://img.blog.csdn.net/20170616112426151?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n\n\n<h4 id="4-安装prel支持包">4 安装prel支持包</h4>\n\n<p>数据节点只需要这几个包，每天服务器都安装</p>\n\n\n\n<pre class="prettyprint"><code class=" hljs lasso">yum <span class="hljs-attribute">-y</span> install perl<span class="hljs-attribute">-DBD</span><span class="hljs-attribute">-MYSQL</span> nctfp perl<span class="hljs-attribute">-DBI</span><span class="hljs-built_in">.</span>x86</code></pre>\n\n<p>每天服务器都安装node节点包</p>\n\n\n\n<pre class="prettyprint"><code class=" hljs lasso">rpm <span class="hljs-attribute">-ivh</span> mha<span class="hljs-attribute">...</span><span class="hljs-built_in">..</span>rpm</code></pre>\n\n<p>监控服务器安装依赖（上面的那个命令（监控节点））</p>\n\n\n\n<pre class="prettyprint"><code class=" hljs lasso">安装监控包\nrpm <span class="hljs-attribute">-ivh</span> mha<span class="hljs-attribute">...</span><span class="hljs-built_in">..</span>rpm</code></pre>\n\n\n\n<h4 id="4-mha配置只需要在监控服务器配置就行">4 MHA配置（只需要在监控服务器配置就行）</h4>\n\n<ul>\n<li>创建配置文件保存目录</li>\n<li>创建mha工作目录</li>\n<li>创建配置文件 <br />\n<ul><li>服务器默认信息 <br />\n<ul><li>mha主从管理用户（在主数据库（节点1）建立）</li>\n<li><img src="http://img.blog.csdn.net/20170616121507379?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></li>\n<li>密码</li>\n<li>管理服务工作目录</li>\n<li>remote_workdir远程服务器工作目录（手动在每个服务器建立）</li>\n<li>ssh用户（启动mha时的用户）</li>\n<li>复制用户和密码</li>\n<li>ping_interval 检查主数据库是否可以连通的时间间隔</li>\n<li>master_binlog_dir目录 <br />\n<ul><li>show variables like ‘%log%’; -&gt; log_bin_basename（主服务器查看位置）</li></ul></li>\n<li>master_ip_failover_script执行脚本,完成主从切换之后，虚拟IP漂移 <br />\n<ul><li>还可以添加完成主从切换后，自动邮箱通知DBA</li></ul></li>\n<li>secondary_check_script(MHA默认只通过monitor服务器来监控主服务器是否可用)，该脚本可以通过多网络路径来监测主服务器是否可用（当网络抖动时，避免错误切换）</li></ul></li>\n<li>主机信息 <br />\n<ul><li>hostname</li>\n<li>参加master选举的服务器（不参加选举）</li></ul></li></ul></li>\n</ul>\n\n<p><img src="http://img.blog.csdn.net/20170616113516391?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<p><img src="http://img.blog.csdn.net/20170617082327901?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n\n\n<h5 id="脚本">脚本</h5>\n\n<p><img src="http://img.blog.csdn.net/20170617082659094?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n\n\n<h4 id="5-监测mha配置">5 监测MHA配置</h4>\n\n<p>查看ssh免认证是否配置正确</p>\n\n\n\n<pre class="prettyprint"><code class=" hljs fix"><span class="hljs-attribute">masterha check ssh --conf</span>=<span class="hljs-string"> /etc/mha/mysql_mha</span></code></pre>\n\n<p>监测主从复制的结构(环境)</p>\n\n\n\n<pre class="prettyprint"><code class=" hljs fix"><span class="hljs-attribute">masterha check repl --conf</span>=<span class="hljs-string"> /etc/mha/mysql_mha</span></code></pre>\n\n<p><img src="http://img.blog.csdn.net/20170617083206897?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n\n\n<h4 id="6-启动mha">6 启动MHA</h4>\n\n<p>MHA不会自动的配置虚拟IP，所以需要手动配置</p>\n\n\n\n<pre class="prettyprint"><code class=" hljs fix"><span class="hljs-attribute">nohup(放到后台) masterha manager --conf</span>=<span class="hljs-string">/etc/mha/mysql_mha.cnf &amp; [1] \nps -ef \nifconfig eth0:1 192.168.3.90/24 配置虚拟IP</span></code></pre>\n\n<p><img src="http://img.blog.csdn.net/20170617083914785?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n\n\n<h4 id="7-测试mha">7 测试MHA</h4>\n\n\n\n<pre class="prettyprint"><code class=" hljs vbnet">停止数据库\n/etc/init.d/mysql <span class="hljs-keyword">stop</span>\nip addr 查看虚拟IP是否转移 <span class="hljs-keyword">OR</span>\nshow slave status 监控服务器\n</code></pre>\n\n\n\n<h4 id="8-mha优缺点">8 MHA优缺点</h4>\n\n<ul>\n<li>优点 <br />\n<ul><li>Perl,开源</li>\n<li>支持GTID</li>\n<li>MHA在故障转移时不易产生数据丢失（加强数据安全性）</li>\n<li>同一个监控节点可以监控多个集群</li></ul></li>\n<li>缺点 <br />\n<ul><li>没有虚拟IP的配置 <br />\n<ul><li>（脚本）-&gt;增加MHA工具复杂度</li>\n<li>第三方工具，失去自动从多个从服务器去选取最优服务器的功能，增加集群部署的复杂性 <br />\n<ul><li>MHA运行时不监控复制链路，也就无法发现问题（复制链路中断，主从延迟增大）。</li>\n<li>MMM在主从链路出现问题时，通过切换故障服务器读VIP方式来排除故障服务器</li>\n<li><img src="http://img.blog.csdn.net/20170617090716972?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></li></ul></li></ul></li></ul></li>\n</ul>\n\n<h4 id="读写分离">读写分离</h4>\n\n<p>Mysql主从复制配置一个主要目的：为了分担主库的读负载（读&gt;&gt;写） <br />\n那么读写分离的目的：写负载是不能分担的，只能在主上进行写操作（读操作，主从都可以） <br />\n<img src="http://img.blog.csdn.net/20170617093112796?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<h5 id="两种读写分离方式">两种读写分离方式</h5>\n\n<ul>\n<li><strong>由程序实现读写分离</strong> <br />\n<ul><li>架构简单，易于维护</li>\n<li><img src="http://img.blog.csdn.net/20170617091637493?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></li>\n<li>DBA和开发（控制读写分离）之间沟通成本的增加（重上线，重启程序）</li>\n<li><img src="http://img.blog.csdn.net/20170617092010978?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></li></ul></li>\n<li><strong>由中间件实现读写分离</strong> <br />\n<ul><li>mysql-proxy(实验项目，一直没正式上线) maxScale（MariaDB）</li>\n<li>依赖中间层的性能（损耗比较严重，最好上线前进行一些基准测试，QPS降低50%到70%）,故障点</li>\n<li>加入提示关键字，对程序修改-&gt;从而对程序不再透明 <br />\n<img src="http://img.blog.csdn.net/20170617092602815?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /> <br />\n<img src="http://img.blog.csdn.net/20170617093032713?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></li></ul></li>\n</ul>\n\n<h4 id="负载均衡">负载均衡</h4>\n\n<ul>\n<li><strong>程序轮询</strong></li>\n<li>软件：LVS Haproxy MaxScale</li>\n<li>硬件 ： F5</li>\n</ul>\n\n<p><img src="http://img.blog.csdn.net/20170617093140512?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<h3 id="maxscale-core">MaxScale Core</h3>\n\n<p><img src="http://img.blog.csdn.net/20170617093915503?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<ul>\n<li>Authentication <br />\n<ul><li>认证连接：后端数据库读取Mysql.user-&gt;缓存到MS服务器端-&gt;用户连接-&gt;判断是否通过验证 -&gt;无此用户-&gt;对后端数据进行更新再进行验证</li></ul></li>\n<li>Protocal：负责MS和外部接口的协议 <br />\n<ul><li>客户端到MS的接口（mysql客户端协议插件）</li>\n<li>MS到后端数据的接口（mysql服务端协议插件）</li></ul></li>\n<li>Router </li>\n<li>readconnroute（多台服务器负载均衡）</li>\n<li>readwritesplit（读写分离）</li>\n<li>Monitor 对后端数据库进行实时监控(前端请求-&gt;正确的后台数据库)</li>\n<li>Filter 数据库防火墙（对sql过滤和改写，sql容错和自动转换）</li>\n</ul>\n\n<h3 id="maxscale-core安装和配置">MaxScale Core安装和配置</h3>\n\n<p><img src="http://img.blog.csdn.net/20170617095214945?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<p><img src="http://img.blog.csdn.net/20170617095846575?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /> <br />\n<strong>演示环境：一主两从，主：192.168.3.101，从：192.168.3.100，192.168.3.102</strong></p>\n\n<h4 id="账号的建立监控模块路由模块">账号的建立（监控模块，路由模块 ）</h4>\n\n<p><img src="http://img.blog.csdn.net/20170617100451829?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /> <br />\n<img src="http://img.blog.csdn.net/20170617100556689?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n\n\n<h4 id="加密密码略"><strong>加密密码（略）</strong></h4>\n\n<p><img src="http://img.blog.csdn.net/20170617100830627?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<h4 id="修改配置文件"><strong>修改配置文件</strong></h4>\n\n<pre class="prettyprint"><code class=" hljs bash"><span class="hljs-built_in">cd</span> /etc/\nls <span class="hljs-operator">-l</span> maxscale*</code></pre>\n\n<p><img src="http://img.blog.csdn.net/20170617101155644?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<ul>\n<li>threads 进程（8）</li>\n<li>服务器信息（全部）</li>\n<li>监控模块的配置（加密密码填写，略）</li>\n<li>读负载模块（略）</li>\n<li>读写分离模块（也能实现读负载） <br />\n<ul><li>最大可用从服务器数量（默认：all）</li>\n<li>从服务器最大的延迟 （当延迟大于60s后，从服务器不再参与读写分离）</li></ul></li>\n<li>监听 <br />\n<ul><li>读监听</li>\n<li>读写模块监听（独立服务器，3306端口）</li></ul></li>\n</ul>\n\n<p><img src="http://img.blog.csdn.net/20170617105438135?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<p><img src="http://img.blog.csdn.net/20170617105657136?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<p><img src="http://img.blog.csdn.net/20170617110655719?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<p><img src="http://img.blog.csdn.net/20170617111041675?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n\n\n<h3 id="maxscale-core启动">MaxScale Core启动</h3>\n\n<pre class="prettyprint"><code class=" hljs lasso">maxscale <span class="hljs-subst">--</span>config<span class="hljs-subst">=</span>/etc/maxscale<span class="hljs-built_in">.</span>cnf\n确认\nps <span class="hljs-attribute">-ef</span> <span class="hljs-subst">|</span> grep maxscale\nnetstat <span class="hljs-attribute">-ntelp</span></code></pre>\n\n<p><img src="http://img.blog.csdn.net/20170617111659975?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /> <br />\n默认用户admin，密码：mariadb <br />\n<img src="http://img.blog.csdn.net/20170617111807905?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<p><img src="http://img.blog.csdn.net/20170617111921938?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p></div>&#13;\n <script type="text/javascript">&#13;\n $(function () {&#13;\n $('pre.prettyprint code').each(function () {&#13;\n var lines = $(this).text().split('\\n').length;&#13;\n var $numbering = $('&lt;ul/&gt;').addClass('pre-numbering').hide();&#13;\n $(this).addClass('has-numbering').parent().append($numbering);&#13;\n for (i = 1; i &lt;= lines; i++) {&#13;\n $numbering.append($('&lt;li/&gt;').text(i));&#13;\n };&#13;\n $numbering.fadeIn(1700);&#13;\n });&#13;\n });&#13;\n </script>&#13;\n &#13;\n
