\n <div class="markdown_views"><h2 id="索引">索引</h2>\n\n<ul>\n<li>当数据越多，查询越多，内存不能完全缓存全部数据时，就需要索引来更快的找到需要的数据。</li>\n<li>存储引擎层实现，而不是服务器层。 <br />\n<ul><li>不同存储引擎上的索引工作方式可能是不同的。</li>\n<li>不是所有的存储引擎支持所有的索引类型</li>\n<li>同一种索引，在不同的存储引擎的实现方法也有可能不同</li></ul></li>\n</ul>\n\n\n\n<h3 id="使用索引的优点">使用索引的优点</h3>\n\n<ul>\n<li>索引文件的大小远远小于数据文件的大小（Innodb发生一次IO，最小的存储单位为页，默认情况一页大小为16k,数据越多读取效率越快）</li>\n</ul>\n\n<p><img src="http://img.blog.csdn.net/20170620082637876?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n\n\n<h3 id="使用索引的缺点">使用索引的缺点</h3>\n\n<ul>\n<li>索引越多，数据修改所需要的时间越长。（插入缓存，多次插入合并成一次插入）</li>\n<li>增加数据导入速度：删除所有索引（Innodb，保证最少有一个自增的主键）</li>\n<li> <br />\n<img src="http://img.blog.csdn.net/20170620083130591?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></li>\n</ul>\n\n\n\n<h3 id="btree索引">Btree索引</h3>\n\n<p><img src="http://img.blog.csdn.net/20170619214349504?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n\n\n<h4 id="b树特点便于查找">B+树特点（便于查找）：</h4>\n\n<ul>\n<li>每一个叶子节点都包含一个指向下一个叶子节点的指针</li>\n<li>每一个叶子节点到根部的距离都相同</li>\n<li>所有的记录节点都是按照键值大小按照顺序存放到同层叶子节点上的（键值大小有限制，和数据引擎类型有关，Innodb:767个字节,MYISAM：1000个字节）</li>\n<li><p>各个叶子节点通过指针来连接</p>\n\n<blockquote>\n <p>对于不同的存储引擎，具体的实现可能有所不同。MyIsam索引，在叶子节点上通过数据的物理位置来引用行的。而InnoDB则是通过主键来引用被索引的行的。 <br />\n <img src="http://img.blog.csdn.net/20170619215254642?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n</blockquote></li>\n<li>在索引根节点进行搜索，根节点存放下层指针，向下查找</li>\n<li>指针定义了值得上限和下限</li>\n<li>叶子节点指针指向被索引的数据</li>\n<li>B树索引是顺序存储的，所以很适合范围查找</li>\n</ul>\n\n\n\n<h4 id="适用场景">适用场景</h4>\n\n<p><img src="http://img.blog.csdn.net/20170619220316531?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<blockquote>\n <p>匹配最左前缀：比如联合索引，order_sn=’<strong><em>’ and order_funck=’</em></strong>‘。 <br />\n 查询条件中没有出现联合索引的第一列,而出现联合索引的第二列,或者第三列,都不会利用联合索引查询. </p>\n</blockquote>\n\n<p><img src="http://img.blog.csdn.net/20170619220606068?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<blockquote>\n <p>只访问索引的查询（不访问数据行），覆盖索引 <br />\n 除了查询过滤，还可以使用在order by(B树索引是顺序存储)</p>\n</blockquote>\n\n\n\n<h4 id="btree索引使用限制">Btree索引使用限制</h4>\n\n<p><img src="http://img.blog.csdn.net/20170619221308232?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n\n\n<h3 id="hash索引">Hash索引</h3>\n\n<blockquote>\n <p>存储引擎Memory支持Btree和Hash索引。InnoDB支持的Hash索引是存储引擎根据Btree使用情况来自行建立的（自适应Hash索引） </p>\n</blockquote>\n\n\n\n<h4 id="hash索引特点">Hash索引特点：</h4>\n\n<blockquote>\n <p>Hash索引只能用到等值查询中（范围，模糊都不适用） <br />\n Hash索引表中，保存每一个Hash码代表数据行的指针 <br />\n 值存储了Hash码，存储紧凑，找到数据的速度非常快</p>\n</blockquote>\n\n<p><img src="http://img.blog.csdn.net/20170619222456732?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n\n\n<h4 id="hash索引限制">Hash索引限制：</h4>\n\n<p>先找到行，再对行的内容进行读取，所以查找数据必须进行两次读取（运行在内存中，所以影响不是很大） <br />\nHash保存的是键值和Hash码，以及对应的行的指针（并没有保存字段的值） <br />\nHash索引是按照Hash码来进行存储的，所以不能进行排序 <br />\nHash索引只可以进行全键值的查找，而不支持部分键值的查找（包括范围查找） <br />\n有可能产生Hash冲突，不同的索引列计算的Hash码是相同的（Hash码通常比较小） <br />\n不适合用于选择性很差的列上（键值列重复值很多） <br />\n<img src="http://img.blog.csdn.net/20170620082031523?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n\n\n<h3 id="索引策略优化">索引策略优化</h3>\n\n<p><img src="http://img.blog.csdn.net/20170620083754328?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /> <br />\n<img src="http://img.blog.csdn.net/20170620084933109?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /> <br />\n - 对字符串的前缀进行索引可以大大节约索引的空间（在创建索引时指定列的宽度，Innodb:767个字节：255个字符,MYISAM：1000个字节），不过前缀索引会降低选择性 <br />\n - 唯一索引（主键索引）的选择性是最高的 <br />\n - 选择性也决定了联合索引的顺序 <br />\n - mysql5.0之前，每一个查询只能使用一列上的索引（每条列都建索引，你想搞事情？） <br />\n - 5.0之后，合并索引，需要更多的内存和磁盘IO来缓存数据 <br />\n - <strong>联合索引</strong>（优于合并）（选择索引列的顺序，左到右） <br />\n - 状态列就不适合放在最左边（选择性比较差） <br />\n - 选择性越高越能过滤出更多的数据</p>\n\n<h4 id="覆盖索引">覆盖索引</h4>\n\n<blockquote>\n <p>覆盖索引是select的数据列只用从索引中就能够取得，不必读取数据行，换句话说查询列要被所建的索引覆盖。包括在查询里的Select、Join和Where子句用到的所有列（即建索引的字段正好是覆盖查询条件中所涉及的字段，也即，索引包含了查询正在查找的数据）。</p>\n</blockquote>\n\n<p><strong>优点</strong> <br />\n<img src="http://img.blog.csdn.net/20170620091745103?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /> <br />\n - 减少数据访问量（索引比较小，缓存可以保存更多的数据） <br />\n - 二次查询：Innodb二级索引在叶子节点中保存的是行的主键值。主键-&gt;行数据 <br />\n - mysql只缓存索引信息，数据靠系统来缓存，所以访问数据需要进行一次系统调用（性能差）</p>\n\n<blockquote>\n <p>mysql二级索引:以InnoDB来说，每个InnoDB表具有一个特殊的索引称为聚集索引。如果您的表上定义有主键，该主键索引是聚集索引。如果你不定义为您的表的主键 时，MySQL取第一个唯一索引（unique）而且只含非空列（NOT NULL）作为主键，InnoDB使用它作为聚集索引。如果没有这样的列，InnoDB就自己产生一个这样的ID值，它有六个字节，而且是隐藏的，使其作 为聚簇索引</p>\n</blockquote>\n\n<p><strong>缺点：</strong></p>\n\n<ul>\n<li>不支持MEMORY</li>\n<li>只有在索引的叶子节点中包括键值的索引才能建立覆盖索引（Hash就不能）</li>\n<li>mysql底层API限制，mysql服务器只能提取数据行的的值，在内存中进行过滤 <br />\n<img src="http://img.blog.csdn.net/20170620092951293?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></li>\n</ul>\n\n\n\n<h4 id="演示数据库的安装">演示数据库的安装</h4>\n\n<p><img src="http://img.blog.csdn.net/20170620083233639?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n\n\n<h5 id="覆盖索引演示">覆盖索引演示</h5>\n\n<p><img src="http://img.blog.csdn.net/20170620093225794?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<p><strong>不能使用覆盖索引</strong></p>\n\n<blockquote>\n <p>查询后把数据放在内存中，然后进行过滤 <br />\n <img src="http://img.blog.csdn.net/20170620093446032?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n</blockquote>\n\n<p><strong>组合索引</strong> <br />\n<img src="http://img.blog.csdn.net/20170620093543063?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /> <br />\n<img src="http://img.blog.csdn.net/20170620093727145?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<blockquote>\n <p>在Innodb二级索引中，会自动加上主键</p>\n</blockquote>\n\n<h3 id="索引优化查询">索引优化查询</h3>\n\n\n\n<h4 id="索引扫描-生成有序结果type列使用index来排列">索引扫描-&gt;生成有序结果（type列使用index来排列）：</h4>\n\n<ul>\n<li>通过排序操作</li>\n<li>按照索引顺序扫描数据</li>\n</ul>\n\n<p>使用索引扫描的条件：</p>\n\n<p><img src="http://img.blog.csdn.net/20170621092000963?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<p>示例： <br />\nInnodb的数据逻辑顺序和主键顺序是一致的。 <br />\n<img src="http://img.blog.csdn.net/20170621093000675?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<p><img src="http://img.blog.csdn.net/20170621093232016?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<h5 id="myisam">MyISAM</h5>\n\n<p><img src="http://img.blog.csdn.net/20170621093409353?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<p><img src="http://img.blog.csdn.net/20170621093503678?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<p>同时使用文件来排序</p>\n\n<h4 id="联合索引rentaldata">联合索引（rental_data）</h4>\n\n<p>在Innodb中和MyIsam中两表查询结构是一样的（处理方式一致），都能使用二级索引来排序 <br />\n<img src="http://img.blog.csdn.net/20170621094238366?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<p>当我们违反升降序一致的规则时： <br />\n<img src="http://img.blog.csdn.net/20170621094836395?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<p>rental_data是联合索引中最左边的列，当使用这一列的范围查找条件时，order by后面的两个字段就会失去效率</p>\n\n<p><img src="http://img.blog.csdn.net/20170621095026605?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<p>mysql对BTree索引长度有限制-&gt;在长字符串进行查找-&gt;前缀索引-&gt;<strong>可选择性差</strong> <br />\nmysql对BTree索引长度有限制-&gt;在长字符串进行查找-&gt;Hash索引(B树索引模拟Hash索引)</p>\n\n<h4 id="b树索引模拟hash索引">B树索引模拟Hash索引</h4>\n\n<p><img src="http://img.blog.csdn.net/20170621100311309?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<p>5.7之前使用触发器，5.7使用虚拟列 Generated (Virtual) Columns来实现自动更新数据</p>\n\n<p><img src="http://img.blog.csdn.net/20170621100451443?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<p><img src="http://img.blog.csdn.net/20170621100520186?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<p>可以看出，先使用索引(title_md5)放入内存中，然后使用where过滤（title）</p>\n\n<blockquote>\n <p>ps：同时过滤title_md5和title是为了避免Hash冲突</p>\n</blockquote>\n\n<p><img src="http://img.blog.csdn.net/20170621100813983?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<h4 id="利用索引优化锁">利用索引优化锁</h4>\n\n<p><img src="http://img.blog.csdn.net/20170621101516943?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n\n\n<h5 id="演示">演示</h5>\n\n<p><img src="http://img.blog.csdn.net/20170621101610742?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<p><img src="http://img.blog.csdn.net/20170621101726566?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<p>使用事务来添加一个排它锁</p>\n\n<p><img src="http://img.blog.csdn.net/20170621101833638?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<p>当我们在另一个终端中也添加一个排它锁时，尽管<strong>查询的数据是不同的</strong>，但还是被<strong>阻塞</strong>了</p>\n\n<p><img src="http://img.blog.csdn.net/20170621101953870?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<pre class="prettyprint"><code class=" hljs ">rollbak;</code></pre>\n\n<p><strong>添加索引</strong></p>\n\n<p><img src="http://img.blog.csdn.net/20170621102157525?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<p><img src="http://img.blog.csdn.net/20170621102336532?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<p>另一个终端：</p>\n\n<p><img src="http://img.blog.csdn.net/20170621102240684?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<h4 id="索引的维护和优化">索引的维护和优化</h4>\n\n<p><img src="http://img.blog.csdn.net/20170621104814034?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<p><strong>冗余索引</strong> <br />\n<img src="http://img.blog.csdn.net/20170621104955527?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<p>有意冗余索引：</p>\n\n<blockquote>\n <p>联合索引键值过大，最左边列可以添加一列冗余索引（独立索引），增加性能。</p>\n</blockquote>\n\n<p>检查冗余索引： <br />\n<img src="http://img.blog.csdn.net/20170621105630670?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<p><strong>查找未被使用过的索引：</strong> <br />\n<img src="http://img.blog.csdn.net/20170621105729226?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n<p><strong>如果索引统计信息不准确，索引很可能会做出错误判断（根据信息来选择使用什么索引）</strong></p>\n\n<blockquote>\n <p>不同引擎，生成信息和保存信息的方法也会不同 <br />\n MyISAM会把信息存储在磁盘中，所以需要进行全索引的扫描，所以需要对表进行锁定 <br />\n Innodb通过随机访问的方式进行评估并存储在内存中。效率高，但是生成的信息不会十分的准确（估算值） <br />\n B树索引更新时会产生大量的碎片，降低查询效率（碎片索引以无序的方式存储在磁盘上），表也会查询碎片 <br />\n <img src="http://img.blog.csdn.net/20170621110121937?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvcXFfMzM5MzY0ODE=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n</blockquote></div>&#13;\n <script type="text/javascript">&#13;\n $(function () {&#13;\n $('pre.prettyprint code').each(function () {&#13;\n var lines = $(this).text().split('\\n').length;&#13;\n var $numbering = $('&lt;ul/&gt;').addClass('pre-numbering').hide();&#13;\n $(this).addClass('has-numbering').parent().append($numbering);&#13;\n for (i = 1; i &lt;= lines; i++) {&#13;\n $numbering.append($('&lt;li/&gt;').text(i));&#13;\n };&#13;\n $numbering.fadeIn(1700);&#13;\n });&#13;\n });&#13;\n </script>&#13;\n &#13;\n
