\n\n<h1><span style="font-size:14px"><strong> <span style="background:white">复制概述</span></strong></span></h1>&#13;\n<p><span style="font-size:14px"><span style="background:white">     Mysql</span><span style="background:white">内建的复制功能是构建大型，高性能应用程序的基础。将</span><span style="background:white">Mysql</span><span style="background:white">的数据分布到多个系统上去，这种分布的机制，是通过将</span><span style="background:white">Mysql</span><span style="background:white">的某一台主机的</span><span style="background:white">数据复制到其它主机（</span><span style="background:white">slaves</span><span style="background:white">）上，并重新执行一遍来实现的。复制过程中一个服务器充当主服务器，而一个或多个其它服务器充当从服务器。主服务器将更</span><span style="background:white">新写入二进制日志文件，并维护文件的一个索引以跟踪日志循环。这些日志可以记录发送到从服务器的更新。当一个从服务器连接主服务器时，它通知主服务器从服</span><span style="background:white">务器在日志中读取的最后一次成功更新的位置。从服务器接收从那时起发生的任何更新，然后封锁并等待主服务器通知新的更新。</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">请注意当你进行复制时，所有对复制中的表的更新必须在主服务器上进行。否则，你必须要小心，以避免用户对主服务器上的表进行的更新与对从服务器上的表所进行的更新之间的冲突。</span></span></p>&#13;\n<h2><span style="font-size:14px"><span style="background:white">Mysql</span><span style="background:white">支持的复制类型</span></span></h2>&#13;\n<p><span style="font-size:14px"><span style="background:white">　　（１）：基于语句的复制：</span><span style="background:white"> &#13;\n</span><span style="background:white">在主服务器上执行的</span><span style="background:white">SQL</span><span style="background:white">语句，在从服务器上执行同样的语句。</span><span style="background:white">MySQL</span><span style="background:white">默认采用基于语句的复制，效率比较高。</span><span style="background:white">  <br />&#13;\n            </span><span style="background:white">一旦发现没法精确复制时，</span><span style="background:white">  &#13;\n</span><span style="background:white">会自动选着基于行的复制。</span><span style="background:white">    <br />&#13;\n</span><span style="background:white">　　（２）：基于行的复制：把改变的内容复制过去，而不是把命令在从服务器上执行一遍</span><span style="background:white">.&#13;\n</span><span style="background:white">从</span><span style="background:white">mysql5.0</span><span style="background:white">开始支持</span><span style="background:white"><br />&#13;\n</span><span style="background:white">　　（３）：混合类型的复制</span><span style="background:white">:&#13;\n</span><span style="background:white">默认采用基于语句的复制，一旦发现基于语句的无法精确的复制时，就会采用基于行的复制。</span></span></p>&#13;\n<h2><span style="font-size:14px"><span style="background:white">复制解决的问题</span></span></h2>&#13;\n<p><span style="font-size:14px"><span style="background:white">        MySQL</span><span style="background:white">复制技术有以下一些特点：</span><span style="background:white"><br />&#13;\n         (1)    </span><span style="background:white">数据分布</span><span style="background:white"> (Data distribution )<br />&#13;\n         (2)    </span><span style="background:white">负载平衡</span><span style="background:white">(load balancing)<br />&#13;\n         (3)    </span><span style="background:white">备份</span><span style="background:white">(Backups) <br />&#13;\n         (4)    </span><span style="background:white">高可用性和容错行</span><span style="background:white"> High availability and failover </span></span></p>&#13;\n<h2><span style="font-size:14px"><span style="background:white">复制如何工作 </span></span></h2>&#13;\n<p><span style="font-size:14px"><span style="background:white">       </span><span style="background:white">整体上来说，复制有</span><span style="background:white">3</span><span style="background:white">个步骤：</span><span style="background:white">   </span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">       (1)    master</span><span style="background:white">将改变记录到二进制日志</span><span style="background:white">(binary log)</span><span style="background:white">中（这些记录叫做二进制日志事件，</span><span style="background:white">binary&#13;\n log events</span><span style="background:white">）；</span><span style="background:white"><br />&#13;\n       (2)    slave</span><span style="background:white">将</span><span style="background:white">master</span><span style="background:white">的</span><span style="background:white">binary log events</span><span style="background:white">拷贝到它的中继日志</span><span style="background:white">(relay&#13;\n log)</span><span style="background:white">；</span><span style="background:white"><br />&#13;\n       (3)    slave</span><span style="background:white">重做中继日志中的事件，将改变反映它自己的数据。</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">下图描述了复制的过程：           &#13;\n</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">         </span><span style="background:white">该过程的第一部分就是</span><span style="background:white">master</span><span style="background:white">记录二进制日志。在每个事务更新数据完成之前，</span><span style="background:white">master</span><span style="background:white">在二日志记录这些改变。</span><span style="background:white">MySQL</span><span style="background:white">将事务串行的写入二进制日</span><span style="background:white">志，即使事务中的语句都是交叉执行的。在事件写入二进制日志完成后，</span><span style="background:white">master</span><span style="background:white">通知存储引擎提交事务。</span><span style="background:white"><br />&#13;\n       </span><span style="background:white">下一步就是</span><span style="background:white">slave</span><span style="background:white">将</span><span style="background:white">master</span><span style="background:white">的</span><span style="background:white">binary&#13;\n log</span><span style="background:white">拷贝到它自己的中继日志。首先，</span><span style="background:white">slave</span><span style="background:white">开始一个工作线程</span><span style="background:white">——I/O</span><span style="background:white">线程。</span><span style="background:white">I/O</span><span style="background:white">线程在</span><span style="background:white">master</span><span style="background:white">上打开一个普通的连接，然后开始</span><span style="background:white">binlog&#13;\n dump process</span><span style="background:white">。</span><span style="background:white">Binlog dump process</span><span style="background:white">从</span><span style="background:white">master</span><span style="background:white">的二进制日志中读取事件，如果已经跟上</span><span style="background:white">master</span><span style="background:white">，它会睡眠并等待</span><span style="background:white">master</span><span style="background:white">产生新的事件。</span><span style="background:white">I/O</span><span style="background:white">线程将这些事件写入中</span><span style="background:white">继日志。</span><span style="background:white"><br />&#13;\n       SQL slave thread</span><span style="background:white">（</span><span style="background:white">SQL</span><span style="background:white">从线程）处理该过程的最后一步。</span><span style="background:white">SQL</span><span style="background:white">线程从中继日志读取事件，并重放其中的事件而更新</span><span style="background:white">slave</span><span style="background:white">的数据，使其与</span><span style="background:white">master</span><span style="background:white">中的数</span><span style="background:white">据一致。只要该线程与</span><span style="background:white">I/O</span><span style="background:white">线程保持一致，中继日志通常会位于</span><span style="background:white">OS</span><span style="background:white">的缓存中，所以中继日志的开销很小。</span><span style="background:white"><br />&#13;\n        </span><span style="background:white">此外，在</span><span style="background:white">master</span><span style="background:white">中也有一个工作线程：和其它</span><span style="background:white">MySQL</span><span style="background:white">的连接一样，</span><span style="background:white">slave</span><span style="background:white">在</span><span style="background:white">master</span><span style="background:white">中打开一个连接也会使得</span><span style="background:white">master</span><span style="background:white">开始一个线程。复制</span><span style="background:white">过程有一个很重要的限制</span><span style="background:white">——</span><span style="background:white">复制在</span><span style="background:white">slave</span><span style="background:white">上是串行化的，也就是说</span><span style="background:white">master</span><span style="background:white">上的并行更新操作不能在</span><span style="background:white">slave</span><span style="background:white">上并行操作。</span></span></p>&#13;\n<h1><span style="font-size:14px"><strong><span style="background:white">复制配置</span></strong></span></h1>&#13;\n<p><span style="font-size:14px"><span style="background:white">有两台</span><strong><u><span style="background:white">MySQL</span><span style="background:white">数据库</span></u></strong><span style="background:white">服</span><span style="background:white">务器</span><span style="background:white">Master</span><span style="background:white">和</span><span style="background:white">slave</span><span style="background:white">，</span><span style="background:white">Master</span><span style="background:white">为主服务器，</span><span style="background:white">slave</span><span style="background:white">为从服务器，初始状态时，</span><span style="background:white">Master</span><span style="background:white">和</span><span style="background:white">slave</span><span style="background:white">中的数据信息相同，当</span><span style="background:white">Master&#13;\n</span><span style="background:white">中的数据发生变化时，</span><span style="background:white">slave</span><span style="background:white">也跟着发生相应的变化，使得</span><span style="background:white">master</span><span style="background:white">和</span><span style="background:white">slave</span><span style="background:white">的数据信息同步，达到备份的目的。</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">要点：</span><span style="background:white"><br />&#13;\n</span><span style="background:white">负责在主、从服务器传输各种修改动作的媒介是主服务器的二进制变更日志，这个日志记载着需要传输给从服务器的各种修改动作。因此，主服务器必须激活二进制日志功能。从服务器必须具备足以让它连接主服务器并请求主服务器把二进制变更日志传输给它的权限。</span><span style="background:white"><br />&#13;\n</span><span style="background:white"></span><span style="background:white"></span><span style="background:white"></span></span></p>&#13;\n<h2><span style="font-size:14px"><span style="background:white">创建复制帐号</span></span></h2>&#13;\n<p><span style="font-size:14px"><span style="background:white">1</span><span style="background:white">、在</span><span style="background:white">Master</span><span style="background:white">的数据库中建立一个备份帐户：每个</span><span style="background:white">slave</span><span style="background:white">使用标准的</span><span style="background:white">MySQL</span><span style="background:white">用户名和密码连接</span><span style="background:white">master</span><span style="background:white">。进行复制操作的用户会授予</span><span style="background:white">REPLICATIONSLAVE</span><span style="background:white">权限。用户名的密码都会存储在文本文件</span><span style="background:white">master.info</span><span style="background:white">中</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">命令如下：</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white"></span></span></p>&#13;\n<pre code_snippet_id="166096" snippet_file_name="blog_20140121_1_1063841" name="code" class="sql">mysql &gt; GRANT REPLICATIONSLAVE,RELOAD,SUPER ON *.*\n TO backup@'192.168.43.129'\n IDENTIFIED BY '1234';</pre>&#13;\n<p></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">建立一个帐户</span><span style="background:white">backup</span><span style="background:white">，并且只能允许从192.168.43.129</span>这个地址上来登陆，密码是<span style="background:white">1234</span><span style="background:white">。</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">(</span><span style="background:white">如果因为</span><span style="background:white">mysql</span><span style="background:white">版本新旧密码算法不同，可以设置：</span><span style="background:white">set password for&#13;\n 'backup'@'</span><span style="background:white">192.168.43.129</span><span style="background:white">'=old_password('1234')</span><span style="background:white">）</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white"> </span></span></p>&#13;\n<h2><span style="font-size:14px"><span style="background:white">配置master</span></span></h2>&#13;\n<p><span style="font-size:14px"><span style="background:white">接下来对</span><span style="background:white">master</span><span style="background:white">进行配置，包括打开二进制日志，指定唯一的</span><span style="background:white">servr ID</span><span style="background:white">。例如，在配置文件加入如下值：</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:#D9D9D9"></span></span></p>&#13;\n<pre code_snippet_id="166096" snippet_file_name="blog_20140121_2_1826426" name="code" class="sql">server-id=10\nlog-bin=mysql-bin</pre>&#13;\n<p></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">server-id</span><span style="background:white">：为主服务器</span><span style="background:white">A</span><span style="background:white">的</span><span style="background:white">ID</span><span style="background:white">值</span><span style="background:white"><br />&#13;\nlog-bin</span><span style="background:white">：二进制变更日值</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">重启</span><span style="background:white">master</span><span style="background:white">，运行</span>SHOWMASTER STATUS，输出如下：</span></p>&#13;\n<p><span style="font-size:14px"><img src="http://blog.csdn.net/eric_sunah/article/details/18628511" alt="" /><br />&#13;\n</span></p>&#13;\n<h2><span style="font-size:14px"><span style="background:white">配置slave</span></span></h2>&#13;\n<p><span style="font-size:14px"><span style="background:white">Slave</span><span style="background:white">的配置与</span><span style="background:white">master</span><span style="background:white">类似，你同样需要重启</span><span style="background:white">slave</span><span style="background:white">的</span><span style="background:white">MySQL</span><span style="background:white">。如下：</span><span style="background:white"><br />&#13;\n</span><span style="background:#D9D9D9"></span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white"></span></span></p>&#13;\n<pre code_snippet_id="166096" snippet_file_name="blog_20140121_3_5065029" name="code" class="sql">log_bin = mysql-bin\nserver_id = 2\nrelay_log = mysql-relay-bin\nlog_slave_updates = 1\nread_only = 1</pre><br />&#13;\n<span style="font-size:14px">server_id <span style="background:white">是必须的，而且唯一。</span><span style="background:white">slave</span><span style="background:white">没有必要开启二进制日志，但是在一些情况下，必须设置，例如，如果</span><span style="background:white">slave</span><span style="background:white">为其它</span><span style="background:white">slave</span><span style="background:white">的</span><span style="background:white">master</span><span style="background:white">，必须设置</span><span style="background:white">&#13;\n bin_log</span><span style="background:white">。在这里，我们开启了二进制日志，而且显示的命名</span><span style="background:white">(</span><span style="background:white">默认名称为</span><span style="background:white">hostname</span><span style="background:white">，但是，如果</span><span style="background:white">hostname</span><span style="background:white">改变则会出现问题</span><span style="background:white">)</span><span style="background:white">。</span><span style="background:white"><br />&#13;\nrelay_log</span><span style="background:white">配置中继日志，</span><span style="background:white">log_slave_updates</span><span style="background:white">表示</span><span style="background:white">slave</span><span style="background:white">将复制事件写进自己的二进制日志</span><span style="background:white">(</span><span style="background:white">后面会看到它的用处</span><span style="background:white">)</span><span style="background:white">。</span><span style="background:white"><br />&#13;\n</span><span style="background:white">有</span><span style="background:white">些人开启了</span><span style="background:white">slave</span><span style="background:white">的二进制日志，却没有设置</span><span style="background:white">log_slave_updates</span><span style="background:white">，然后查看</span><span style="background:white">slave</span><span style="background:white">的数据是否改变，这是一种错误的配置。所以，尽量</span><span style="background:white">使用</span><span style="background:white">read_only</span><span style="background:white">，它防止改变数据</span><span style="background:white">(</span><span style="background:white">除了特殊的线程</span><span style="background:white">)</span><span style="background:white">。但是，</span><span style="background:white">read_only</span><span style="background:white">并是很实用，特别是那些需要在</span><span style="background:white">slave</span><span style="background:white">上创建表的应用。</span></span>&#13;\n<p></p>&#13;\n<h2><span style="font-size:14px"> </span><span style="font-size:14px"><span style="background:white">拷贝数据</span></span></h2>&#13;\n<p><span style="font-size:14px"><span style="background:white">（假如是你完全新安装</span><span style="background:white">mysql</span><span style="background:white">主从服务器，这个一步就不需要。因为新安装的</span><span style="background:white">master</span><span style="background:white">和</span><span style="background:white">slave</span><span style="background:white">有相同的数据）</span></span></p>&#13;\n<p><span style="font-size:14px">拷贝数据大概分为以下几个方法</span></p>&#13;\n<h3><span style="font-size:14px">冷备份</span></h3>&#13;\n<p><span style="font-size:14px"><span style="background:white">关停</span><span style="background:white">Master</span><span style="background:white">服务器，将</span><span style="background:white">Master</span><span style="background:white">中的数据拷贝到</span><span style="background:white">B</span><span style="background:white">服务器中，使得</span><span style="background:white">Master</span><span style="background:white">和</span><span style="background:white">slave</span><span style="background:white">中的数据同步，这个方法的问题比较明显，需要重启主库服务器</span></span></p>&#13;\n<h3><span style="font-size:14px"><span style="background:white">热备份</span></span></h3>&#13;\n<p><span style="font-size:14px"><span style="background:white">如果数据库中的表用的都是MYISAM</span>表，可以在主库运行时，使用mysqlhotcopy或者是 rsync来复制数据</span></p>&#13;\n<h3><span style="font-size:14px"><span style="background:white">使用mysqldump</span></span></h3>&#13;\n<p><span style="font-size:14px"><span style="background:white">如果只使用innodb,</span>可以使用下面的命令来执行复制</span></p>&#13;\n<pre code_snippet_id="166096" snippet_file_name="blog_20140121_4_9939834" name="code" class="sql">mysqldump -u root -p --single-transaction --all-databases --add-drop-database --disable-keys --flush-privileges --quick --routines --triggers | mysql -h 192.168.43.129 -u root –p</pre><br />&#13;\n<br />&#13;\n<p><span style="font-size:14px"><span style="background:white">在复制的过程中如果遇到“</span><a target="_blank" href="http://www.csdn.net/tag/1130%20HY000"><span style="color:blue">1130 HY000</span></a><span style="background:white">”异常，可参见</span><u><span style="color:blue">http://blog.csdn.net/eric_sunah/article/details/18567091</span></u></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white"> </span></span></p>&#13;\n<p><span style="font-size:14px"><strong><span style="background:white">禁止在</span><span style="background:white">Master</span><span style="background:white">和</span><span style="background:white">slave</span><span style="background:white">服务器中进行写操作，使得两数据库中的数据一定要相同！</span></strong></span></p>&#13;\n<h2><span style="font-size:14px"><span style="background:white">启动slave</span></span></h2>&#13;\n<p><span style="font-size:14px"><span style="background:white">接</span><span style="background:white">下来就是让</span><span style="background:white">slave</span><span style="background:white">连接</span><span style="background:white">master</span><span style="background:white">，并开始重做</span><span style="background:white">master</span><span style="background:white">二进制日志中的事件。你不应该用配置文件进行该操作，而应该使用</span><span style="background:white">CHANGE&#13;\n MASTER TO</span><span style="background:white">语句，该语句可以完全取代对配置文件的修改，而且它可以为</span><span style="background:white">slave</span><span style="background:white">指定不同的</span><span style="background:white">master</span><span style="background:white">，而不需要停止服务器。如下：</span></span></p>&#13;\n<pre code_snippet_id="166096" snippet_file_name="blog_20140121_5_7115152" name="code" class="sql">mysql&gt; CHANGE MASTER TO MASTER_HOST='server1',\n -&gt; MASTER_USER='backup',\n -&gt; MASTER_PASSWORD='1234',\n -&gt; MASTER_LOG_FILE='mysql-bin.000001',\n -&gt; MASTER_LOG_POS=0;</pre><br />&#13;\n<p><span style="font-size:14px"><span style="background:white">MASTER_LOG_POS</span><span style="background:white">的值为</span><span style="background:white">0</span><span style="background:white">，因为它是日志的开始位置。</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">你可以用</span><span style="background:white">SHOW SLAVE STATUS</span><span style="background:white">语句查看</span><span style="background:white">slave</span><span style="background:white">的设置是否正确：</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white"></span></span></p><pre code_snippet_id="166096" snippet_file_name="blog_20140121_6_4290470" name="code" class="sql">mysql&gt; SHOW SLAVE STATUS\\G</pre>&#13;\n<p><span style="font-size:14px"><span style="background:white">*************************** 1. row***************************</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">             Slave_IO_State:</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">               Master_Host: server1</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">               Master_User: repl</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">               Master_Port: 3306</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">             Connect_Retry: 60</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">            Master_Log_File:mysql-bin.000001</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">        Read_Master_Log_Pos:4</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">             Relay_Log_File:mysql-relay-bin.000001</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">             Relay_Log_Pos: 4</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">      Relay_Master_Log_File:mysql-bin.000001</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">           Slave_IO_Running:No</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">          Slave_SQL_Running:No</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">                            ...omitted...</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">      Seconds_Behind_Master:NULL</span></span></p>&#13;\n<p><span style="font-size:14px"> </span></p>&#13;\n<p><span style="font-size:14px; color:#FF0000"><span style="background:white">Slave_IO_State,Slave_IO_Running, </span><span style="background:white">和</span><span style="background:white">Slave_SQL_Running</span><span style="background:white">是</span><span style="background:white">No表明</span><span style="background:white">slave</span><span style="background:white">还没有开始复制过程。日志的位置为</span><span style="background:white">4</span><span style="background:white">而不是</span><span style="background:white">0</span><span style="background:white">，这是因为</span><span style="background:white">0</span><span style="background:white">只是日志文件的开始位置，并不是日志位置。实际上，</span><span style="background:white">MySQL</span><span style="background:white">知道的第一个事件的位置是</span><span style="background:white">4</span><span style="background:white">。</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">为了开始复制，你可以运行：</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white"></span></span></p><pre code_snippet_id="166096" snippet_file_name="blog_20140121_7_3625379" name="code" class="sql">mysql&gt;START SLAVE;</pre>&#13;\n<p><span style="font-size:14px"><span style="background:white">运行</span><span style="background:white">SHOW SLAVE STATUS</span><span style="background:white">查看输出结果：</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white"></span></span></p><pre code_snippet_id="166096" snippet_file_name="blog_20140121_8_1880492" name="code" class="sql">mysql&gt;SHOW SLAVE STATUS\\G</pre>&#13;\n<p><span style="font-size:14px"><span style="background:white">*************************** 1. row***************************</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">             Slave_IO_State:Waiting for master to send event</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">               Master_Host: server1</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">               Master_User: repl</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">               Master_Port: 3306</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">             Connect_Retry: 60</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">            Master_Log_File:mysql-bin.000001</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">        Read_Master_Log_Pos:164</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">             Relay_Log_File:mysql-relay-bin.000001</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">             Relay_Log_Pos: 164</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">      Relay_Master_Log_File:mysql-bin.000001</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">           Slave_IO_Running:Yes</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">          Slave_SQL_Running:Yes</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">                            ...omitted...</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">      Seconds_Behind_Master:0</span></span></p>&#13;\n<p><span style="font-size:14px"> </span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">在这里主要是看</span><span style="background:white">:<br />&#13;\n<strong><span style="color:red">                  Slave_IO_Running=Yes<br />&#13;\n                  Slave_SQL_Running=Yes</span></strong></span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">slave</span><span style="background:white">的</span><span style="background:white">I/O</span><span style="background:white">和</span><span style="background:white">SQL</span><span style="background:white">线程都已经开始运行，而且</span><span style="background:white">Seconds_Behind_Master</span><span style="background:white">不再是</span><span style="background:white">NULL</span><span style="background:white">。日志的位置增加了，意味着一些事件被获取并执行了。<span style="color:#FF0000">如果你在</span></span><span style="color:#FF0000"><span style="background:white">master</span><span style="background:white">上进行修改，你可以在</span><span style="background:white">slave</span><span style="background:white">上看到各种日志文件的位置的变化，同样，你也可以看到数据库中数据的变化。</span></span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">你可查看</span><span style="background:white">master</span><span style="background:white">和</span><span style="background:white">slave</span><span style="background:white">上线程的状态。在</span><span style="background:white">master</span><span style="background:white">上，你可以看到</span><span style="background:white">slave</span><span style="background:white">的</span><span style="background:white">I/O</span><span style="background:white">线程创建的连接：</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">在</span><span style="background:white">master</span><span style="background:white">上输入</span><span style="background:white">show processlist\\G;</span></span></p>&#13;\n<table border="1" cellpadding="0" cellspacing="0" width="792">&#13;\n<tbody>&#13;\n<tr>&#13;\n<td valign="top">&#13;\n<p><span style="font-size:14px"><span style="background:white">mysql&gt; show processlist \\G</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">*************************** 1. row ***************************</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">     Id: 1</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">   User: root</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">   Host: localhost:2096</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">     db: test</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">Command: Query</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">   Time: 0</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white"> State: NULL</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">   Info: show processlist</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">*************************** 2. row ***************************</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">     Id: 2</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">   User: repl</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">   Host: localhost:2144</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">     db: NULL</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">Command: Binlog Dump</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">   Time: 1838</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white"> State: Has sent all binlog to slave; waiting for binlog to be updated</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">   Info: NULL</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">2 rows in set (0.00 sec)</span></span></p>&#13;\n</td>&#13;\n</tr>&#13;\n</tbody>&#13;\n</table>&#13;\n<p><span style="font-size:14px"><strong><span style="background:white">行</span><span style="background:white">2</span><span style="background:white">为处理</span><span style="background:white">slave</span><span style="background:white">的</span><span style="background:white">I/O</span><span style="background:white">线程的连接。</span></strong></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">在</span><span style="background:white">slave</span><span style="background:white">服务器上运行该语句：</span></span></p>&#13;\n<table border="1" cellpadding="0" cellspacing="0" width="712">&#13;\n<tbody>&#13;\n<tr>&#13;\n<td valign="top">&#13;\n<p><span style="font-size:14px"><span style="background:white">mysql&gt; show processlist \\G</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">*************************** 1. row ***************************</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">     Id: 1</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">   User: system user</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">   Host:</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">     db: NULL</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">Command: Connect</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white">   Time: 2291</span></span></p>&#13;\n<p><span style="font-size:14px"><span style="background:white"> State: Waiting for master to send event</span></span></p>&#13;\n</td>&#13;\n</tr>&#13;\n</tbody>&#13;\n</table>&#13;\n<p><span style="font-size:14px"> </span></p>&#13;\n &#13;\n
