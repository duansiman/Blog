\n <div class="markdown_views"><p>不考虑主备，集群等方案，基于业务上的设计主要是表结构及表间关系的设计。</p>\n\n<p>而关于表中字段主要是根据业务来进行定义，我们可以指定的大概有这么几项：</p>\n\n<ul>\n<li>存储引擎 一般用InnoDB,特殊需求特殊选用</li>\n<li>字符集和校验规则 <br />\n特别说一下校验规则是指两个字符之间的比较规则， 比如A=a的话就是不区分大小写，会影响order by等。 bin一般是区分大小写的， 一般用general</li>\n<li>字段定义 字段怎么选取类型</li>\n<li>索引 后面再说</li>\n<li>特殊用途表 比如做缓存，汇总等</li>\n</ul>\n\n\n\n<h2 id="字段的数据类型选择">字段的数据类型选择</h2>\n\n\n\n<h3 id="三个原则">三个原则：</h3>\n\n<ul>\n<li>更小的数据类型， 比如能用tiny int就不用int</li>\n<li>更简单的数据类型， int比varchar要简单，会用到更少的磁盘以及操作时所需要的CPU。再比如用int来存储ip</li>\n<li>尽量避免null. 尽量用not null语句， null会带来额外的存储空间，加索引后也需要特殊的处理。</li>\n</ul>\n\n\n\n<h3 id="整数">整数</h3>\n\n<ul>\n<li>[UNSIGNED] TINYINT, SMALLINT, INT,BIGINT. 范围越来越大。 <br />\n显然越小的越省空间</li>\n<li>可以指定宽度 INT(11). 这个只是交互工具的显示宽度，跟实际范围无关，定义时可以不指定，还能提升效率</li>\n<li>建表是可以选择zerofill的</li>\n</ul>\n\n\n\n<h3 id="实数">实数</h3>\n\n<ul>\n<li>float和double是不精确的类型</li>\n<li>可以指定精度 double(12,4)是全位数和小数位数，因为在插入的时候超过部分会进行四舍五入，因此建议不指定。</li>\n<li>另外，使用浮点数因为要转化为2进制表示再进行存储或者计算所以可能造成精度问题 <br />\n比如</li>\n</ul>\n\n\n\n<pre class="prettyprint"><code class=" hljs sql"><span class="hljs-operator"><span class="hljs-keyword">update</span> biz_pay_task <span class="hljs-keyword">set</span> order_price = <span class="hljs-number">131.07232</span>;</span>\n// 查出的值将会是 131.07233</code></pre>\n\n<ul>\n<li>decimal用于存储精确的小数，相同情况下会比浮点型的占用个多存储范围，计算的时候也会转化为double,因此非必要不用</li>\n<li>再设计上还可以考虑使用bigint代替decimal.</li>\n</ul>\n\n\n\n<h3 id="字符串类型">字符串类型</h3>\n\n<ul>\n<li>CHAR是定长的，因此在频繁更新的时候不容易产生碎片</li>\n<li>CHAR适合存储MD5这种结果是定长的数据</li>\n<li>CHAR适合存储小字节，比如标志位等，比VARCHAR更省空间</li>\n<li>VCHAR是变长的，频繁更新会有碎片</li>\n<li>BINARY 是二进制字符串，其中是二进制的字面表达，排序等等会转化为二进制数进行</li>\n<li>IP地址， 这个可以特殊对待，使用INET_ATON()和INET_NTOA()来保存ip地址为无符号数</li>\n</ul>\n\n\n\n<h3 id="时间类型">时间类型</h3>\n\n<ul>\n<li>DATETIME 19位标准显示， 可以使用date_format进行结构化查询</li>\n<li>TIMESTAMP 19位显示，范围比DATETIME小，但是省空间，不能为NULL。 </li>\n<li>TIMESTAMP可以设置自动更新，这样很适合做为updatetime这样的字段</li>\n</ul>\n\n\n\n<h2 id="主外键">主外键</h2>\n\n\n\n<h3 id="主键">主键</h3>\n\n<ul>\n<li>因为主键回作为索引，越紧凑越小越好，其实也就是越好排序越好。</li>\n<li>有的人可能会想使用uuid,但是因为较长，最好使用UNHEX()函数改为数字，存入BINARY中，检索的时候使用HEX()方法再转为十六进制格式</li>\n</ul>\n\n\n\n<h3 id="外键">外键</h3>\n\n<ul>\n<li>可以设置删除外键的约束行为 默认报错， cascade同样删除， no action 什么也不做，但是会破坏一致性。</li>\n<li>另外可以使用set foreign_key_checks=0 可以暂时关闭检查，这样在诸如备份这样的特殊操作的时候可以加快性能。</li>\n</ul>\n\n<p>表字段外，如何对表进行切割以及划分是范式主要讨论的问题</p>\n\n\n\n<h2 id="三大范式">三大范式</h2>\n\n<p>因为五范式的实用性太低，只考虑三大范式 <br />\n来一张学生选课表 <br />\nStudent_Course(studentId, studentName, collegeId, collegeName, courseId, courseName, credit)</p>\n\n\n\n<h3 id="第一范式-列中的值不可切割">第一范式 列中的值不可切割</h3>\n\n<p>上面如果一个学生选了多门课，我们有如下的办法： courseName中用,号分割。 这显然不能满足第一范式了。 <br />\n我们还有个办法就是使用(studentId， courseId)来作为这个联合主键，这样就会有很多重复行了。 <br />\n这个也是经典的多对多关系引起的问题。</p>\n\n\n\n<h3 id="第二范式-消除部分依赖">第二范式 消除部分依赖</h3>\n\n<p>可以认为是拆分一个多对多为两个1对多 <br />\n上面的数据studentName 部分依赖于(studentId, courseId) <br />\n会引入如下的问题：</p>\n\n<ul>\n<li>数据冗余： 如果一个人选择了N门课，就会造成studentName, collegueId, collegueName,courseName, credit这些都重复n次</li>\n<li>容易更新错误，比如如果修改了credit，就需要修改很多行</li>\n<li>如果新开了一门课程，如果没人选修的话就不能插入</li>\n<li>如果一个课程没人选修，那么会造成课程也被删除了。 <br />\n修改之后的设计： <br />\n Student(studentId, studentName, collegeId, collegeName) <br />\n Course( courseId, courseName, credit1) <br />\n Student_Course(studentId, courseId)</li>\n</ul>\n\n\n\n<h3 id="第三范式-消除传递依赖">第三范式 消除传递依赖</h3>\n\n<p>传递依赖跟部分依赖很容易混淆。会跟本表适用于做什么的有很大的关系 <br />\n这部分的主要目的是进一步去除重复数据，提出1对多 <br />\n比如上面的学生课程表， 其主码显然是studentId和courseId。 这样很容易判断出部分依赖 <br />\n在第二范式分解之后的student表中， 学生信息的主键应该是studentId,另外除他以外有一个不能作为主键，但是却有可能是另外字段所以来的码为的字段：collegeId。这样StudentId-&gt;collegeId-&gt;collegeName。这就是传递依赖。进一步切割之后： <br />\n Student(studentId, studentName, collegeId) <br />\n Collegue(collegeId, collegeName)</p>\n\n\n\n<h3 id="范式与反范式">范式与反范式</h3>\n\n<p>范式的优缺点： <br />\n - 减少重复 <br />\n - 更快的更新 <br />\n - 更少的需要group by等语句 <br />\n - 缺点：查询时会涉及更多的关联</p>\n\n<p>反范式优缺点： <br />\n - 缺点：冗余行及有可能更新错误 <br />\n - 不需要关联</p>\n\n<p>一些取舍 <br />\n 有时是需要混用范式和反范式的。 特别在一些需要额外的字段进行索引，统计及排序的情况下。 <br />\n 这样可能会带来更新上的麻烦，需要根据实际情况具体权衡。</p>\n\n\n\n<h2 id="其他一些应用">其他一些应用</h2>\n\n<ul>\n<li>汇总表 通常是定时的计算一些汇总信息，报表系统使用比较多</li>\n<li>缓存表 比如使用MyISAM引擎建立该表，留作创建索引。这样就可以把所有可能用作索引的字段单独提出在一个表中，加快索引。这种情况分表的技术中也可能会用到</li>\n<li>计数器表</li>\n</ul>\n\n\n\n<pre class="prettyprint"><code class=" hljs sql"><span class="hljs-operator"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> counter(\n cnt <span class="hljs-keyword">int</span> unsigned <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>\n) ENGINE = InnoDB;</span></code></pre>\n\n<p>如果是插入的时候每次递增1，这样就会每次都会对这一行进行排他锁。比较好的解决方式：</p>\n\n\n\n<pre class="prettyprint"><code class=" hljs sql"><span class="hljs-operator"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> counter(\n slot tinyint unsigned <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> <span class="hljs-keyword">primary</span> <span class="hljs-keyword">key</span>,\n cnt <span class="hljs-keyword">int</span> unsigned <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-number">0</span>\n) ENGINE = InnoDB;</span>\n<span class="hljs-operator"><span class="hljs-keyword">UPDATE</span> hit_counter <span class="hljs-keyword">SET</span> cnt = cnt + <span class="hljs-number">1</span> <span class="hljs-keyword">where</span> slot = FLOOR(RAND() csdn-100.html csdn-101.html csdn-102.html csdn-103.html csdn-104.html csdn-105.html csdn-106.html csdn-107.html csdn-108.html csdn-109.html csdn-10.html csdn-110.html csdn-111.html csdn-112.html csdn-113.html csdn-114.html csdn-115.html csdn-116.html csdn-117.html csdn-118.html csdn-119.html csdn-11.html csdn-120.html csdn-121.html csdn-122.html csdn-123.html csdn-124.html csdn-125.html csdn-126.html csdn-127.html csdn-128.html csdn-129.html csdn-12.html csdn-130.html csdn-131.html csdn-132.html csdn-133.html csdn-134.html csdn-135.html csdn-136.html csdn-137.html csdn-138.html csdn-139.html csdn-13.html csdn-140.html csdn-141.html csdn-142.html csdn-143.html csdn-144.html csdn-145.html csdn-146.html csdn-147.html csdn-148.html csdn-149.html csdn-14.html csdn-150.html csdn-151.html csdn-152.html csdn-153.html csdn-154.html csdn-155.html csdn-156.html csdn-157.html csdn-158.html csdn-159.html csdn-15.html csdn-160.html csdn-161.html csdn-162.html csdn-163.html csdn-164.html csdn-165.html csdn-166.html csdn-167.html csdn-168.html csdn-169.html csdn-16.html csdn-170.html csdn-171.html csdn-172.html csdn-173.html csdn-174.html csdn-175.html csdn-176.html csdn-177.html csdn-178.html csdn-179.html csdn-17.html csdn-180.html csdn-181.html csdn-182.html csdn-183.html csdn-184.html csdn-185.html csdn-186.html csdn-187.html csdn-188.html csdn-189.html csdn-18.html csdn-190.html csdn-191.html csdn-192.html csdn-193.html csdn-194.html csdn-195.html csdn-196.html csdn-197.html csdn-198.html csdn-199.html csdn-19.html csdn-1.html csdn-200.html csdn-201.html csdn-202.html csdn-203.html csdn-204.html csdn-205.html csdn-206.html csdn-207.html csdn-208.html csdn-209.html csdn-20.html csdn-210.html csdn-211.html csdn-212.html csdn-213.html csdn-214.html csdn-215.html csdn-216.html csdn-217.html csdn-218.html csdn-219.html csdn-21.html csdn-220.html csdn-221.html csdn-222.html csdn-223.html csdn-224.html csdn-225.html csdn-226.html csdn-227.html csdn-228.html csdn-229.html csdn-22.html csdn-230.html csdn-231.html csdn-232.html csdn-233.html csdn-234.html csdn-235.html csdn-236.html csdn-237.html csdn-238.html csdn-239.html csdn-23.html csdn-240.html csdn-241.html csdn-242.html csdn-243.html csdn-244.html csdn-245.html csdn-246.html csdn-247.html csdn-248.html csdn-249.html csdn-24.html csdn-250.html csdn-251.html csdn-252.html csdn-253.html csdn-254.html csdn-255.html csdn-256.html csdn-257.html csdn-258.html csdn-259.html csdn-25.html csdn-260.html csdn-261.html csdn-262.html csdn-263.html csdn-264.html csdn-265.html csdn-266.html csdn-267.html csdn-268.html csdn-269.html csdn-26.html csdn-270.html csdn-271.html csdn-272.html csdn-273.html csdn-274.html csdn-275.html csdn-276.html csdn-277.html csdn-278.html csdn-279.html csdn-27.html csdn-280.html csdn-281.html csdn-282.html csdn-283.html csdn-284.html csdn-285.html csdn-286.html csdn-287.html csdn-288.html csdn-289.html csdn-28.html csdn-290.html csdn-291.html csdn-292.html csdn-293.html csdn-294.html csdn-295.html csdn-296.html csdn-297.html csdn-298.html csdn-299.html csdn-29.html csdn-2.html csdn-300.html csdn-301.html csdn-302.html csdn-303.html csdn-304.html csdn-305.html csdn-306.html csdn-307.html csdn-308.html csdn-309.html csdn-30.html csdn-310.html csdn-311.html csdn-312.html csdn-313.html csdn-314.html csdn-315.html csdn-316.html csdn-317.html csdn-318.html csdn-319.html csdn-31.html csdn-320.html csdn-321.html csdn-322.html csdn-323.html csdn-324.html csdn-325.html csdn-326.html csdn-327.html csdn-328.html csdn-329.html csdn-32.html csdn-330.html csdn-331.html csdn-332.html csdn-333.html csdn-334.html csdn-335.html csdn-336.html csdn-337.html csdn-338.html csdn-339.html csdn-33.html csdn-340.html csdn-341.html csdn-342.html csdn-343.html csdn-344.html csdn-345.html csdn-346.html csdn-347.html csdn-348.html csdn-349.html csdn-34.html csdn-350.html csdn-351.html csdn-352.html csdn-353.html csdn-354.html csdn-355.html csdn-356.html csdn-357.html csdn-358.html csdn-359.html csdn-35.html csdn-360.html csdn-361.html csdn-362.html csdn-363.html csdn-364.html csdn-365.html csdn-366.html csdn-367.html csdn-368.html csdn-369.html csdn-36.html csdn-370.html csdn-371.html csdn-372.html csdn-373.html csdn-374.html csdn-375.html csdn-376.html csdn-377.html csdn-378.html csdn-379.html csdn-37.html csdn-380.html csdn-381.html csdn-382.html csdn-383.html csdn-384.html csdn-385.html csdn-386.html csdn-387.html csdn-388.html csdn-389.html csdn-38.html csdn-390.html csdn-391.html csdn-392.html csdn-393.html csdn-394.html csdn-395.html csdn-396.html csdn-397.html csdn-398.html csdn-399.html csdn-39.html csdn-3.html csdn-400.html csdn-401.html csdn-402.html csdn-403.html csdn-404.html csdn-405.html csdn-406.html csdn-407.html csdn-408.html csdn-409.html csdn-40.html csdn-410.html csdn-411.html csdn-412.html csdn-413.html csdn-414.html csdn-415.html csdn-416.html csdn-417.html csdn-418.html csdn-419.html csdn-41.html csdn-420.html csdn-421.html csdn-422.html csdn-423.html csdn-424.html csdn-425.html csdn-426.html csdn-427.html csdn-428.html csdn-429.html csdn-42.html csdn-430.html csdn-431.html csdn-432.html csdn-433.html csdn-434.html csdn-435.html csdn-436.html csdn-437.html csdn-438.html csdn-439.html csdn-43.html csdn-440.html csdn-441.html csdn-442.html csdn-443.html csdn-444.html csdn-445.html csdn-446.html csdn-447.html csdn-448.html csdn-449.html csdn-44.html csdn-450.html csdn-451.html csdn-452.html csdn-453.html csdn-454.html csdn-455.html csdn-456.html csdn-457.html csdn-458.html csdn-459.html csdn-45.html csdn-460.html csdn-461.html csdn-462.html csdn-463.html csdn-464.html csdn-465.html csdn-466.html csdn-467.html csdn-468.html csdn-469.html csdn-46.html csdn-470.html csdn-471.html csdn-472.html csdn-473.html csdn-474.html csdn-475.html csdn-476.html csdn-477.html csdn-478.html csdn-479.html csdn-47.html csdn-480.html csdn-481.html csdn-482.html csdn-483.html csdn-484.html csdn-485.html csdn-486.html csdn-487.html csdn-488.html csdn-489.html csdn-48.html csdn-490.html csdn-491.html csdn-492.html csdn-493.html csdn-494.html csdn-495.html csdn-496.html csdn-497.html csdn-498.html csdn-499.html csdn-49.html csdn-4.html csdn-500.html csdn-501.html csdn-502.html csdn-503.html csdn-504.html csdn-505.html csdn-506.html csdn-507.html csdn-508.html csdn-509.html csdn-50.html csdn-510.html csdn-511.html csdn-512.html csdn-513.html csdn-514.html csdn-515.html csdn-516.html csdn-517.html csdn-518.html csdn-519.html csdn-51.html csdn-520.html csdn-521.html csdn-522.html csdn-523.html csdn-524.html csdn-525.html csdn-526.html csdn-527.html csdn-528.html csdn-529.html csdn-52.html csdn-530.html csdn-531.html csdn-532.html csdn-533.html csdn-534.html csdn-535.html csdn-536.html csdn-537.html csdn-538.html csdn-539.html csdn-53.html csdn-540.html csdn-541.html csdn-542.html csdn-543.html csdn-544.html csdn-545.html csdn-546.html csdn-547.html csdn-548.html csdn-549.html csdn-54.html csdn-550.html csdn-551.html csdn-552.html csdn-553.html csdn-554.html csdn-555.html csdn-556.html csdn-557.html csdn-558.html csdn-559.html csdn-55.html csdn-560.html csdn-561.html csdn-562.html csdn-563.html csdn-564.html csdn-565.html csdn-566.html csdn-567.html csdn-568.html csdn-569.html csdn-56.html csdn-570.html csdn-571.html csdn-572.html csdn-573.html csdn-574.html csdn-575.html csdn-576.html csdn-577.html csdn-578.html csdn-579.html csdn-57.html csdn-580.html csdn-581.html csdn-58.html csdn-59.html csdn-5.html csdn-60.html csdn-61.html csdn-62.html csdn-63.html csdn-64.html csdn-65.html csdn-66.html csdn-67.html csdn-68.html csdn-69.html csdn-6.html csdn-70.html csdn-71.html csdn-72.html csdn-73.html csdn-74.html csdn-75.html csdn-76.html csdn-77.html csdn-78.html csdn-79.html csdn-7.html csdn-80.html csdn-81.html csdn-82.html csdn-83.html csdn-84.html csdn-85.html csdn-86.html csdn-87.html csdn-88.html csdn-89.html csdn-8.html csdn-90.html csdn-91.html csdn-92.html csdn-93.html csdn-94.html csdn-95.html csdn-96.html csdn-97.html csdn-98.html csdn-99.html csdn-9.html mysql.sh <span class="hljs-number">100</span>);</span></code></pre>\n\n<p>然后插入100行默认的数据 <br />\n 然后更新的时候就可以尽量少的避免并发锁行 <br />\n 就能够使用SUM字段算出总的点击量</p>\n\n<p>如果需要每天都计算的话，那么可能的表结构为：</p>\n\n\n\n<pre class="prettyprint"><code class=" hljs sql"><span class="hljs-operator"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> counter(\n <span class="hljs-keyword">day</span> <span class="hljs-keyword">date</span> <span class="hljs-keyword">not</span> <span class="hljs-keyword">null</span>;</span>\n slot tinyint unsigned not null,\n cnt int unsigned not null DEFAULT 0,\n primary key(day, slot)\n) ENGINE = InnoDB;\n\n<span class="hljs-operator"><span class="hljs-keyword">INSERT</span> <span class="hljs-keyword">INTO</span> counter <span class="hljs-keyword">VALUES</span>(<span class="hljs-keyword">CURRENT_DATE</span>, <span class="hljs-keyword">FLOAT</span>(RAND() csdn-100.html csdn-101.html csdn-102.html csdn-103.html csdn-104.html csdn-105.html csdn-106.html csdn-107.html csdn-108.html csdn-109.html csdn-10.html csdn-110.html csdn-111.html csdn-112.html csdn-113.html csdn-114.html csdn-115.html csdn-116.html csdn-117.html csdn-118.html csdn-119.html csdn-11.html csdn-120.html csdn-121.html csdn-122.html csdn-123.html csdn-124.html csdn-125.html csdn-126.html csdn-127.html csdn-128.html csdn-129.html csdn-12.html csdn-130.html csdn-131.html csdn-132.html csdn-133.html csdn-134.html csdn-135.html csdn-136.html csdn-137.html csdn-138.html csdn-139.html csdn-13.html csdn-140.html csdn-141.html csdn-142.html csdn-143.html csdn-144.html csdn-145.html csdn-146.html csdn-147.html csdn-148.html csdn-149.html csdn-14.html csdn-150.html csdn-151.html csdn-152.html csdn-153.html csdn-154.html csdn-155.html csdn-156.html csdn-157.html csdn-158.html csdn-159.html csdn-15.html csdn-160.html csdn-161.html csdn-162.html csdn-163.html csdn-164.html csdn-165.html csdn-166.html csdn-167.html csdn-168.html csdn-169.html csdn-16.html csdn-170.html csdn-171.html csdn-172.html csdn-173.html csdn-174.html csdn-175.html csdn-176.html csdn-177.html csdn-178.html csdn-179.html csdn-17.html csdn-180.html csdn-181.html csdn-182.html csdn-183.html csdn-184.html csdn-185.html csdn-186.html csdn-187.html csdn-188.html csdn-189.html csdn-18.html csdn-190.html csdn-191.html csdn-192.html csdn-193.html csdn-194.html csdn-195.html csdn-196.html csdn-197.html csdn-198.html csdn-199.html csdn-19.html csdn-1.html csdn-200.html csdn-201.html csdn-202.html csdn-203.html csdn-204.html csdn-205.html csdn-206.html csdn-207.html csdn-208.html csdn-209.html csdn-20.html csdn-210.html csdn-211.html csdn-212.html csdn-213.html csdn-214.html csdn-215.html csdn-216.html csdn-217.html csdn-218.html csdn-219.html csdn-21.html csdn-220.html csdn-221.html csdn-222.html csdn-223.html csdn-224.html csdn-225.html csdn-226.html csdn-227.html csdn-228.html csdn-229.html csdn-22.html csdn-230.html csdn-231.html csdn-232.html csdn-233.html csdn-234.html csdn-235.html csdn-236.html csdn-237.html csdn-238.html csdn-239.html csdn-23.html csdn-240.html csdn-241.html csdn-242.html csdn-243.html csdn-244.html csdn-245.html csdn-246.html csdn-247.html csdn-248.html csdn-249.html csdn-24.html csdn-250.html csdn-251.html csdn-252.html csdn-253.html csdn-254.html csdn-255.html csdn-256.html csdn-257.html csdn-258.html csdn-259.html csdn-25.html csdn-260.html csdn-261.html csdn-262.html csdn-263.html csdn-264.html csdn-265.html csdn-266.html csdn-267.html csdn-268.html csdn-269.html csdn-26.html csdn-270.html csdn-271.html csdn-272.html csdn-273.html csdn-274.html csdn-275.html csdn-276.html csdn-277.html csdn-278.html csdn-279.html csdn-27.html csdn-280.html csdn-281.html csdn-282.html csdn-283.html csdn-284.html csdn-285.html csdn-286.html csdn-287.html csdn-288.html csdn-289.html csdn-28.html csdn-290.html csdn-291.html csdn-292.html csdn-293.html csdn-294.html csdn-295.html csdn-296.html csdn-297.html csdn-298.html csdn-299.html csdn-29.html csdn-2.html csdn-300.html csdn-301.html csdn-302.html csdn-303.html csdn-304.html csdn-305.html csdn-306.html csdn-307.html csdn-308.html csdn-309.html csdn-30.html csdn-310.html csdn-311.html csdn-312.html csdn-313.html csdn-314.html csdn-315.html csdn-316.html csdn-317.html csdn-318.html csdn-319.html csdn-31.html csdn-320.html csdn-321.html csdn-322.html csdn-323.html csdn-324.html csdn-325.html csdn-326.html csdn-327.html csdn-328.html csdn-329.html csdn-32.html csdn-330.html csdn-331.html csdn-332.html csdn-333.html csdn-334.html csdn-335.html csdn-336.html csdn-337.html csdn-338.html csdn-339.html csdn-33.html csdn-340.html csdn-341.html csdn-342.html csdn-343.html csdn-344.html csdn-345.html csdn-346.html csdn-347.html csdn-348.html csdn-349.html csdn-34.html csdn-350.html csdn-351.html csdn-352.html csdn-353.html csdn-354.html csdn-355.html csdn-356.html csdn-357.html csdn-358.html csdn-359.html csdn-35.html csdn-360.html csdn-361.html csdn-362.html csdn-363.html csdn-364.html csdn-365.html csdn-366.html csdn-367.html csdn-368.html csdn-369.html csdn-36.html csdn-370.html csdn-371.html csdn-372.html csdn-373.html csdn-374.html csdn-375.html csdn-376.html csdn-377.html csdn-378.html csdn-379.html csdn-37.html csdn-380.html csdn-381.html csdn-382.html csdn-383.html csdn-384.html csdn-385.html csdn-386.html csdn-387.html csdn-388.html csdn-389.html csdn-38.html csdn-390.html csdn-391.html csdn-392.html csdn-393.html csdn-394.html csdn-395.html csdn-396.html csdn-397.html csdn-398.html csdn-399.html csdn-39.html csdn-3.html csdn-400.html csdn-401.html csdn-402.html csdn-403.html csdn-404.html csdn-405.html csdn-406.html csdn-407.html csdn-408.html csdn-409.html csdn-40.html csdn-410.html csdn-411.html csdn-412.html csdn-413.html csdn-414.html csdn-415.html csdn-416.html csdn-417.html csdn-418.html csdn-419.html csdn-41.html csdn-420.html csdn-421.html csdn-422.html csdn-423.html csdn-424.html csdn-425.html csdn-426.html csdn-427.html csdn-428.html csdn-429.html csdn-42.html csdn-430.html csdn-431.html csdn-432.html csdn-433.html csdn-434.html csdn-435.html csdn-436.html csdn-437.html csdn-438.html csdn-439.html csdn-43.html csdn-440.html csdn-441.html csdn-442.html csdn-443.html csdn-444.html csdn-445.html csdn-446.html csdn-447.html csdn-448.html csdn-449.html csdn-44.html csdn-450.html csdn-451.html csdn-452.html csdn-453.html csdn-454.html csdn-455.html csdn-456.html csdn-457.html csdn-458.html csdn-459.html csdn-45.html csdn-460.html csdn-461.html csdn-462.html csdn-463.html csdn-464.html csdn-465.html csdn-466.html csdn-467.html csdn-468.html csdn-469.html csdn-46.html csdn-470.html csdn-471.html csdn-472.html csdn-473.html csdn-474.html csdn-475.html csdn-476.html csdn-477.html csdn-478.html csdn-479.html csdn-47.html csdn-480.html csdn-481.html csdn-482.html csdn-483.html csdn-484.html csdn-485.html csdn-486.html csdn-487.html csdn-488.html csdn-489.html csdn-48.html csdn-490.html csdn-491.html csdn-492.html csdn-493.html csdn-494.html csdn-495.html csdn-496.html csdn-497.html csdn-498.html csdn-499.html csdn-49.html csdn-4.html csdn-500.html csdn-501.html csdn-502.html csdn-503.html csdn-504.html csdn-505.html csdn-506.html csdn-507.html csdn-508.html csdn-509.html csdn-50.html csdn-510.html csdn-511.html csdn-512.html csdn-513.html csdn-514.html csdn-515.html csdn-516.html csdn-517.html csdn-518.html csdn-519.html csdn-51.html csdn-520.html csdn-521.html csdn-522.html csdn-523.html csdn-524.html csdn-525.html csdn-526.html csdn-527.html csdn-528.html csdn-529.html csdn-52.html csdn-530.html csdn-531.html csdn-532.html csdn-533.html csdn-534.html csdn-535.html csdn-536.html csdn-537.html csdn-538.html csdn-539.html csdn-53.html csdn-540.html csdn-541.html csdn-542.html csdn-543.html csdn-544.html csdn-545.html csdn-546.html csdn-547.html csdn-548.html csdn-549.html csdn-54.html csdn-550.html csdn-551.html csdn-552.html csdn-553.html csdn-554.html csdn-555.html csdn-556.html csdn-557.html csdn-558.html csdn-559.html csdn-55.html csdn-560.html csdn-561.html csdn-562.html csdn-563.html csdn-564.html csdn-565.html csdn-566.html csdn-567.html csdn-568.html csdn-569.html csdn-56.html csdn-570.html csdn-571.html csdn-572.html csdn-573.html csdn-574.html csdn-575.html csdn-576.html csdn-577.html csdn-578.html csdn-579.html csdn-57.html csdn-580.html csdn-581.html csdn-58.html csdn-59.html csdn-5.html csdn-60.html csdn-61.html csdn-62.html csdn-63.html csdn-64.html csdn-65.html csdn-66.html csdn-67.html csdn-68.html csdn-69.html csdn-6.html csdn-70.html csdn-71.html csdn-72.html csdn-73.html csdn-74.html csdn-75.html csdn-76.html csdn-77.html csdn-78.html csdn-79.html csdn-7.html csdn-80.html csdn-81.html csdn-82.html csdn-83.html csdn-84.html csdn-85.html csdn-86.html csdn-87.html csdn-88.html csdn-89.html csdn-8.html csdn-90.html csdn-91.html csdn-92.html csdn-93.html csdn-94.html csdn-95.html csdn-96.html csdn-97.html csdn-98.html csdn-99.html csdn-9.html mysql.sh <span class="hljs-number">100</span>), <span class="hljs-number">1</span>) <span class="hljs-keyword">ON</span> DUPLICATE <span class="hljs-keyword">KEY</span> <span class="hljs-keyword">UPDATE</span> cnt = cnt + <span class="hljs-number">1</span>;</span></code></pre>\n\n<p>ON DUPLICATE KEY,如果出现了重复的key则更新则不是新增。</p>\n\n<p>##加快DDL <br />\n DDL会阻塞服务，因此应该越快越好。 <br />\n一般的方式有该备库切库。 <br />\n重新创建一个表，该表之后重名民 <br />\n可以通过物化视图facebook的工具来动态的修改</p></div>&#13;\n <script type="text/javascript">&#13;\n $(function () {&#13;\n $('pre.prettyprint code').each(function () {&#13;\n var lines = $(this).text().split('\\n').length;&#13;\n var $numbering = $('&lt;ul/&gt;').addClass('pre-numbering').hide();&#13;\n $(this).addClass('has-numbering').parent().append($numbering);&#13;\n for (i = 1; i &lt;= lines; i++) {&#13;\n $numbering.append($('&lt;li/&gt;').text(i));&#13;\n };&#13;\n $numbering.fadeIn(1700);&#13;\n });&#13;\n });&#13;\n </script>&#13;\n &#13;\n
