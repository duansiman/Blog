\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span><span style="mso-spacerun: yes;"> </span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">在上一篇里，</span><span lang="EN-US" xml:lang="EN-US">bingxi</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">和</span><span lang="EN-US" xml:lang="EN-US">alex</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">聊了下关于</span><span lang="EN-US" xml:lang="EN-US">hash</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">表的内容。在本篇里，会聊下关于</span><span lang="EN-US" xml:lang="EN-US">list</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的内容。所谓</span><span lang="EN-US" xml:lang="EN-US">list</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">，就是双向链表，这样的算法在《数据结构》里面都是常见的。为了屏蔽差异性，类似于</span><span lang="EN-US" xml:lang="EN-US">hash</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">表，</span><span lang="EN-US" xml:lang="EN-US">mysql</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">将</span><span lang="EN-US" xml:lang="EN-US">list</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">通过宏来实现。</span></span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span><span style="mso-spacerun: yes;"> </span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">对应的文件为：</span></span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">D:/mysql-5.1.7-beta/storage/innobase/include/ut0lst.h</span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;"> </span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US">1)</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">常用结构体</span></span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">   </span>Alex</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">：“</span><span lang="EN-US" xml:lang="EN-US">bingxi</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">，考你一个问题：如果共享空间有</span><span lang="EN-US" xml:lang="EN-US">4</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">个文件，这四个文件是如何连在一起的。我们在</span><span lang="EN-US" xml:lang="EN-US">ut0lst.h</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">中看到了这样一段注释：</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt; mso-outline-level: 1;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">/* This module implements the two-way linear list which should be used</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">if a list is used in the database. Note that a single struct may belong</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">to two or more lists, provided that the list are given different names.</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt; mso-outline-level: 1;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">An example of the usage of the lists can be found in fil0fil.c. */</span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">在注释中有提到</span><span lang="EN-US" xml:lang="EN-US">fil0fil.c</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">，那么我就问你共享空间的这个文件组织方式。</span></span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';"><span style="font-size: medium;">”</span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span>Bingxi</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">：“要掌握这个具体怎么实现，我们还是需要进行调试。在调试之前，我们先从这段文字中看出几个有用的信息，然后再去验证它。</span><span lang="EN-US" xml:lang="EN-US">1</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">）这是一个双向链表，因此插入的时候有</span><span lang="EN-US" xml:lang="EN-US">prev</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">和</span><span lang="EN-US" xml:lang="EN-US">next</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">指针，</span><span lang="EN-US" xml:lang="EN-US">2</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">）一个结构体可能会属于多个</span><span lang="EN-US" xml:lang="EN-US">list</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">。</span></span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">我们先来验证这两个信息。看</span><span lang="EN-US" xml:lang="EN-US">fil_node_struct</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的定义，该结点属于两个</span><span lang="EN-US" xml:lang="EN-US">list</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">，一个对应的是文件</span><span lang="EN-US" xml:lang="EN-US">list</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">，另外一个是</span><span lang="EN-US" xml:lang="EN-US">LURlist</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">。</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">/* File node of a tablespace or the log data space */</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">struct fil_node_struct {</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>……</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt; mso-outline-level: 1;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-tab-count: 1;">       </span>UT_LIST_NODE_T(fil_node_t) chain;<span style="mso-spacerun: yes;">  </span>//</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">属于文件</span><span lang="EN-US" xml:lang="EN-US">list</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-tab-count: 1;">       </span>UT_LIST_NODE_T(fil_node_t) LRU;<span style="mso-spacerun: yes;">    </span>//</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">属于</span><span lang="EN-US" xml:lang="EN-US">LRUlist</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-spacerun: yes;">  </span>……</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">};</span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">我们再看一下</span><span lang="EN-US" xml:lang="EN-US">UT_LIST_NODE_T</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的定义，如下：</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">#define UT_LIST_NODE_T(TYPE)/</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">struct {/</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>TYPE *<span style="mso-tab-count: 1;">   </span>prev;<span style="mso-tab-count: 1;">       </span>/* pointer to the previous node,/</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 3;">                     </span>NULL if start of list *//</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>TYPE *<span style="mso-tab-count: 1;">   </span>next;<span style="mso-tab-count: 1;">       </span>/* pointer to next node, NULL if end of list *//</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">}/</span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">从这个定一个中，我们可以看到一个</span><span lang="EN-US" xml:lang="EN-US">prev</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">指针指向前一个结点，一个</span><span lang="EN-US" xml:lang="EN-US">next</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">指针指向下一个结点。</span></span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">我们再来替代法来进行简化，将</span><span lang="EN-US" xml:lang="EN-US">fil_node_struct</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">中宏定义进行替代。替代后为：</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">typedef<span style="mso-tab-count: 1;">    </span>struct fil_node_struct<span style="mso-tab-count: 1;">     </span>fil_node_t;</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">/* File node of a tablespace or the log data space */</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">struct fil_node_struct {</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>……</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>struct {</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>fil_node_t *<span style="mso-tab-count: 1;">    </span>prev;<span style="mso-tab-count: 1;">       </span>/* pointer to the previous node,</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 3;">                     </span>NULL if start of list */</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>fil_node_t *<span style="mso-tab-count: 1;">    </span>next;<span style="mso-tab-count: 1;">       </span>/* pointer to next node, NULL if end of list */</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span>}chain</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">；</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>struct {</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>fil_node_t *<span style="mso-tab-count: 1;">    </span>prev;<span style="mso-tab-count: 1;">       </span>/* pointer to the previous node,</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 3;">                     </span>NULL if start of list */</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>fil_node_t *<span style="mso-tab-count: 1;">    </span>next;<span style="mso-tab-count: 1;">       </span>/* pointer to next node, NULL if end of list */</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-spacerun: yes;"> </span>}LRU;</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-spacerun: yes;">  </span>……</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">};</span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">这样的，就好办了，取得</span><span lang="EN-US" xml:lang="EN-US">chain</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的下一个结点，就是：</span><span lang="EN-US" xml:lang="EN-US"> (node-&gt;chain).next</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">（其中</span><span lang="EN-US" xml:lang="EN-US">fil_node_t* node</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">）。</span></span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">假设是共享表空间里面有</span><span lang="EN-US" xml:lang="EN-US">4</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">个文件，那么启动之后，链表是什么情况？</span></span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';"><span style="font-size: medium;">”</span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span>Alex</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">：“</span><span lang="EN-US" xml:lang="EN-US">ok</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">，这个我们就来</span><span lang="EN-US" xml:lang="EN-US">debug</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">一下。</span><span lang="EN-US" xml:lang="EN-US">debug</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">之前我们要先看下，</span><span lang="EN-US" xml:lang="EN-US">file_space_struct</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">中的一个结构成员：</span><span lang="EN-US" xml:lang="EN-US">chain</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">。共享表空间对应的</span><span lang="EN-US" xml:lang="EN-US">4</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">个文件会挂在上面，然后每个</span><span lang="EN-US" xml:lang="EN-US">file_node_t</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">结构通过</span><span lang="EN-US" xml:lang="EN-US">prev</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">和</span><span lang="EN-US" xml:lang="EN-US">next</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">进行双向连接。</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">typedef<span style="mso-tab-count: 1;">    </span>struct fil_node_struct<span style="mso-tab-count: 1;">     </span>fil_node_t;</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt; mso-outline-level: 1;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">/* Tablespace or log data space: let us call them by a common name space */</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">struct fil_space_struct {</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>……</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>UT_LIST_BASE_NODE_T(fil_node_t) chain;</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>……</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">};</span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">我们要看一下</span><span lang="EN-US" xml:lang="EN-US">UT_LIST_BASE_NODE_T</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的定义：</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">#define UT_LIST_BASE_NODE_T(TYPE)/</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">struct {/</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>ulint<span style="mso-tab-count: 1;"> </span>count;<span style="mso-tab-count: 1;">     </span>/* count of nodes in list *//</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>TYPE *<span style="mso-tab-count: 1;">   </span>start;<span style="mso-tab-count: 1;">       </span>/* pointer to list start, NULL if empty *//</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>TYPE *<span style="mso-tab-count: 1;">   </span>end;<span style="mso-tab-count: 1;"> </span>/* pointer to list end, NULL if empty *//</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">}/</span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">同样的，我们进行替换。会得到如下的情况：</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">typedef<span style="mso-tab-count: 1;">    </span>struct fil_node_struct<span style="mso-tab-count: 1;">     </span>fil_node_t;</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt; mso-outline-level: 1;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">/* Tablespace or log data space: let us call them by a common name space */</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">struct fil_space_struct {</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>……</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>struct {</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>ulint<span style="mso-tab-count: 1;"> </span>count;<span style="mso-tab-count: 1;">     </span>/* count of nodes in list */</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>fil_node_t *<span style="mso-tab-count: 1;">    </span>start;<span style="mso-tab-count: 1;">       </span>/* pointer to list start, NULL if empty */</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>fil_node_t *<span style="mso-tab-count: 1;">    </span>end;<span style="mso-tab-count: 1;"> </span>/* pointer to list end, NULL if empty */</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-spacerun: yes;">  </span>} chain;</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>……</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">};</span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">从中我们得到第一个</span><span lang="EN-US" xml:lang="EN-US">list</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">成员，最后一个</span><span lang="EN-US" xml:lang="EN-US">list</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">成员，以及该</span><span lang="EN-US" xml:lang="EN-US">list</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的成员数量。如果我们需要取得第一个成员就是：</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">fil_space_t*<span style="mso-tab-count: 1;">    </span>space;</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">fil_node_t*<span style="mso-tab-count: 1;">     </span>node;</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';"><span style="font-size: medium;">……</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US">node=(space-&gt;chain).start<span style="mso-spacerun: yes;">   </span>//</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">这个已经通过宏来实</span></span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">如果要取得再下一个，就是</span><span lang="EN-US" xml:lang="EN-US">(node-&gt;chain).next</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">（这个已经通过宏来实现）。</span></span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">我们接着通过</span><span lang="EN-US" xml:lang="EN-US">debug</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">进行验证，配置</span><span lang="EN-US" xml:lang="EN-US">my.ini</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">（本例路径为</span><span lang="EN-US" xml:lang="EN-US">D:/mysql-5.1.7-beta/my.ini</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">，也可以存放在其它路径）。修改表空间，使用共享表空间为</span><span lang="EN-US" xml:lang="EN-US">4</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">个文件：</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">[mysqld]</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">innodb_data_file_path = ibdata1:10M;ibdata2:20M;ibdata3:30M;ibdata4:40M:autoextend</span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">将</span><span lang="EN-US" xml:lang="EN-US">D:/mysql-5.1.7-beta/data</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">里面的内容恢复到初始化，所谓的初始化也就是将一开始代码解压缩时产生的原始</span><span lang="EN-US" xml:lang="EN-US">data</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">目录进行保存。需要初始化数据时，用该文件夹数据替代</span><span lang="EN-US" xml:lang="EN-US">D:/mysql-5.1.7-beta/data</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的数据。</span></span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">在</span><span lang="EN-US" xml:lang="EN-US">fil_node_create</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">函数设置断点，每执行一次看一次成员变量，等共享表空间对应的</span><span lang="EN-US" xml:lang="EN-US">4</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">个文件都执行之后我们可以看下该</span><span lang="EN-US" xml:lang="EN-US">space</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">对应的</span><span lang="EN-US" xml:lang="EN-US">chain</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">对应的取值。见图</span><span lang="EN-US" xml:lang="EN-US">1:</span></span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"> </p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;"><img src="http://hi.csdn.net/attachment/201008/1/0_1280652518eVRr.gif" alt="" /></span></span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">从图</span><span lang="EN-US" xml:lang="EN-US">1</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">中，我们可以看出</span><span lang="EN-US" xml:lang="EN-US">4</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">个结点通过</span><span lang="EN-US" xml:lang="EN-US">prev</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">及</span><span lang="EN-US" xml:lang="EN-US">next</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">指针相连，通过</span><span lang="EN-US" xml:lang="EN-US">space-&gt;chain</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">我们可以找到第一个结点，和最后一个结点。在图形中，通过天蓝色的线条表示</span><span lang="EN-US" xml:lang="EN-US">prev</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">。</span></span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">通过这样的一个图形，我们会对</span><span lang="EN-US" xml:lang="EN-US">list</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的表达方式有一个整体的了解。下面我们，在看一些具体函数的实现方式。</span></span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';"><span style="font-size: medium;">”</span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;"> </span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US">2</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">）常用的函数</span></span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span>Bingxi</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">：“好的，我们来看下插入函数吧。在图</span><span lang="EN-US" xml:lang="EN-US">1</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">中，我有一个疑问，问什么第一个成员的</span><span lang="EN-US" xml:lang="EN-US">prev</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">指向的是</span><span lang="EN-US" xml:lang="EN-US">null</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">，而不是指向</span><span lang="EN-US" xml:lang="EN-US">space</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">。”</span></span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span>Alex</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">：“赞同，我们还是通过刚刚的例子来看下常用的插入函数</span><span lang="EN-US" xml:lang="EN-US">UT_LIST_ADD_LAST</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">，这个函数是往链表的末尾插入一个值。我们先看下该函数的定义，先不看其中的实现：</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">/***********************************************************************</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">Adds the node as the last element in a two-way linked list.</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt; mso-outline-level: 1;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">BASE has to be the base node (not a pointer to it). N has to be</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">the pointer to the node to be added to the list. NAME is the list name. */</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt; mso-outline-level: 1;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">#define UT_LIST_ADD_LAST(NAME, BASE, N)/</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">{/</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>ut_ad(N);/</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>((BASE).count)++;/</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>((N)-&gt;NAME).prev = (BASE).end;/</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>((N)-&gt;NAME).next = NULL;/</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>if ((BASE).end != NULL) {/</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 2;">              </span>(((BASE).end)-&gt;NAME).next = (N);/</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>}/</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>(BASE).end = (N);/</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>if ((BASE).start == NULL) {/</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 2;">              </span>(BASE).start = (N);/</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>}/</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">}/</span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">插入文件结点的调用方式如下：</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">fil_node_t*<span style="mso-tab-count: 1;">     </span>node;</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';"><span style="font-size: medium;">……</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">UT_LIST_ADD_LAST(chain, space-&gt;chain, node);</span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">进行宏的替换，用下面的伪码表示：</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">fil_node_t*<span style="mso-tab-count: 1;">     </span>node;</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">void ut_list_add_last(chain, space-&gt;chain, node)</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">{</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-tab-count: 1;">       </span>ut_ad(node);<span style="mso-spacerun: yes;">   </span>//</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">断言语句</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-tab-count: 1;">       </span>((space-&gt;chain).count)++;<span style="mso-spacerun: yes;">   </span>//</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">步骤</span><span lang="EN-US" xml:lang="EN-US">1</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">：将列表的成员数量</span><span lang="EN-US" xml:lang="EN-US">+1</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-tab-count: 1;"><span style="font-size: medium;">       </span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-tab-count: 1;">       </span>//</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">步骤</span><span lang="EN-US" xml:lang="EN-US">2</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">：设置插入结点的</span><span lang="EN-US" xml:lang="EN-US">prev</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">和</span><span lang="EN-US" xml:lang="EN-US">next</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">指针</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt; mso-outline-level: 1;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-tab-count: 1;">       </span>//</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">因为是插入到最后一个结点，所以</span><span lang="EN-US" xml:lang="EN-US">next</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">指针设置为</span><span lang="EN-US" xml:lang="EN-US">null</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-tab-count: 1;">       </span>//prev</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">设置为插入前链表的最后一个结点，如果链表为空：</span><span lang="EN-US" xml:lang="EN-US">(BASE).end</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">为也为空，所以第一个结点成员的</span><span lang="EN-US" xml:lang="EN-US">prev</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">为空</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>((node)-&gt;chain).prev = (space-&gt;chain).end;</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>((node)-&gt;chain).next = NULL;/</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-tab-count: 1;"><span style="font-size: medium;">       </span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-tab-count: 1;">       </span>//</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">步骤</span><span lang="EN-US" xml:lang="EN-US">3</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">：如果插入链表结点不为空，则将</span><span lang="EN-US" xml:lang="EN-US">node</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">结点挂在已经结点的后面</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>if ((space-&gt;chain).end != NULL) {</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-tab-count: 2;">              </span>(((space-&gt;chain).end)-&gt;chain).next = (node); //</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">原来的最后一个结点的</span><span lang="EN-US" xml:lang="EN-US">next</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">指向新的结点</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>}</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-tab-count: 1;"><span style="font-size: medium;">       </span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-tab-count: 1;">       </span>//</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">步骤</span><span lang="EN-US" xml:lang="EN-US">4</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">：重新设置</span><span lang="EN-US" xml:lang="EN-US">space-&gt;chain</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的</span><span lang="EN-US" xml:lang="EN-US">end</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">和</span><span lang="EN-US" xml:lang="EN-US">start</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">结点</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-tab-count: 1;">       </span>//end</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">结点很容易理解，就是指向新插入的结点，因为我们的操作就是插入到最后一个结点</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-tab-count: 1;">       </span>//start</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的就要确认了：如果之前结点为空，则</span><span lang="EN-US" xml:lang="EN-US">start</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">也指向该结点，因为插入后只有一个结点，</span><span lang="EN-US" xml:lang="EN-US">start</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">和</span><span lang="EN-US" xml:lang="EN-US">end</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">都指向它</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-tab-count: 1;">       </span>//</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">如果</span><span lang="EN-US" xml:lang="EN-US">start</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">结点之前不为空，也就是链表有成员，将新成员插入到末尾的操作不影响</span><span lang="EN-US" xml:lang="EN-US">start</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">指针</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>(space-&gt;chain).end = (node);</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>if ((space-&gt;chain).start == NULL) {</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 2;">              </span>(space-&gt;chain).start = (node);</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>}</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">}</span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';"><span style="font-size: medium;">”</span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span>Bingxi</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">：“赞同你的看法，不过你少讲了一个内容，链表在创建的时候会进行初始化，</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt; mso-outline-level: 1;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US">UT_LIST_INIT(space-&gt;chain);<span style="mso-spacerun: yes;">  </span>//</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">函数调用</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';"><span style="font-size: medium;">……</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">#define UT_LIST_INIT(BASE)/</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">{/</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>(BASE).count = 0;/</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>(BASE).start = NULL;/</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>(BASE).end<span style="mso-spacerun: yes;">   </span>= NULL;/</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">}/</span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">将链表的</span><span lang="EN-US" xml:lang="EN-US">count</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">设置为</span><span lang="EN-US" xml:lang="EN-US">0</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">，</span><span lang="EN-US" xml:lang="EN-US">start</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">和</span><span lang="EN-US" xml:lang="EN-US">end</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">设置为</span><span lang="EN-US" xml:lang="EN-US">null</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">。另外，我发现</span><span lang="EN-US" xml:lang="EN-US">alex</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">最喜欢用代入法这样的傻方法，通过代入的方式来解释宏的实现，这也太傻了吧，哈哈。</span></span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';"><span style="font-size: medium;">”</span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt; text-indent: 15.75pt; mso-char-indent-count: 1.5;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US">Alex</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">：“有时候，这样的方法也挺有效的，呵呵。第一次使用的时候可以用这样的方法先理解下，然后再看会简单些。我们现在直接看下类似的插入到链表首的宏的实现，这次我们直接看，不用代入法。</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">/***********************************************************************</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">Adds the node as the first element in a two-way linked list.</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt; mso-outline-level: 1;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">BASE has to be the base node (not a pointer to it). N has to be</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">the pointer to the node to be added to the list. NAME is the list name. */</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;"> </span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">#define UT_LIST_ADD_FIRST(NAME, BASE, N)/</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">{/</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>ut_ad(N);/</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">   </span><span style="mso-spacerun: yes;"> </span>//</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">步骤</span><span lang="EN-US" xml:lang="EN-US">1</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">：将列表的成员数量</span><span lang="EN-US" xml:lang="EN-US">+1</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>((BASE).count)++;/</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;"> </span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt; text-indent: 21.75pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US">//</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">步骤</span><span lang="EN-US" xml:lang="EN-US">2</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">，设置插入结点的</span><span lang="EN-US" xml:lang="EN-US">prev</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">和</span><span lang="EN-US" xml:lang="EN-US">next</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">指针</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt; text-indent: 21.75pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US">//</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">因为是插入到首结点，所以该结点的</span><span lang="EN-US" xml:lang="EN-US">prev</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">为</span><span lang="EN-US" xml:lang="EN-US">null</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt; text-indent: 21.75pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US">//</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">新插入结点的</span><span lang="EN-US" xml:lang="EN-US">next</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">指向原链表的首结点</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt; text-indent: 21.75pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US">//</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">这样就完成了新结点的</span><span lang="EN-US" xml:lang="EN-US">prev</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">和</span><span lang="EN-US" xml:lang="EN-US">next</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">指针的设置</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>((N)-&gt;NAME).next = (BASE).start;/</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>((N)-&gt;NAME).prev = NULL;/</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;"><span style="font-size: medium;">   </span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt; text-indent: 21.75pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US">//</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">步骤</span><span lang="EN-US" xml:lang="EN-US">3</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">：如果插入前链表结点不为空，则原首结点的</span><span lang="EN-US" xml:lang="EN-US">prev</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">要进行重新设置</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt; text-indent: 21.75pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US">//</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">将原首结点的</span><span lang="EN-US" xml:lang="EN-US">prev</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">指向新的结点</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>if ((BASE).start != NULL) {/</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 2;">              </span>(((BASE).start)-&gt;NAME).prev = (N);/</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>}/</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">    </span>//</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">步骤</span><span lang="EN-US" xml:lang="EN-US">4</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">：重新设置</span><span lang="EN-US" xml:lang="EN-US">space-&gt;chain</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的</span><span lang="EN-US" xml:lang="EN-US">end</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">和</span><span lang="EN-US" xml:lang="EN-US">start</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">结点</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-tab-count: 1;">       </span>//start</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">指针很容易理解，因为我们是插入到链表首，所以该结点就是首结点</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt; text-indent: 21.75pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US">//</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">同样的，如果插入前链表为空，也就是插入前</span><span lang="EN-US" xml:lang="EN-US">end</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">为空，则需要将</span><span lang="EN-US" xml:lang="EN-US">end</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">也指向这个唯一的链表成员</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt; text-indent: 21.75pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US">//</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">如果插入前链表不为空，则不需要修改</span><span lang="EN-US" xml:lang="EN-US">end</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">指针。</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt; text-indent: 21pt; mso-char-indent-count: 2.0;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">(BASE).start = (N);/</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>if ((BASE).end == NULL) {/</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 2;">              </span>(BASE).end = (N);/</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>}/</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">}/</span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span></span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">另外有两个类似的宏，</span><span lang="EN-US" xml:lang="EN-US">bingxi</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">来看一下：</span><span lang="EN-US" xml:lang="EN-US">UT_LIST_INSERT_AFTER</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">、</span><span lang="EN-US" xml:lang="EN-US">UT_LIST_REMOVE</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">。</span></span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';"><span style="font-size: medium;">”</span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span>Bingxi</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">：“这两个宏就不用看了吧，都是些链表的算法。留给大家自己看下吧。除了这两个宏之外，还有三个最基本的宏，用于获取</span><span lang="EN-US" xml:lang="EN-US">base_node</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的三个成员：</span><span lang="EN-US" xml:lang="EN-US">count</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">、</span><span lang="EN-US" xml:lang="EN-US">start</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">、</span><span lang="EN-US" xml:lang="EN-US">end</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">。这里我把定义贴一下：</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">/************************************************************************</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">Alternative macro to get the number of nodes in a two-way list, i.e.,</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">its length. BASE is the base node (not a pointer to it). */</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;"> </span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">#define UT_LIST_GET_LEN(BASE)/</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>(BASE).count</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;"> </span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">/************************************************************************</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">Gets the first node in a two-way list, or returns NULL,</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">if the list is empty. BASE is the base node (not a pointer to it). */</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;"> </span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">#define UT_LIST_GET_FIRST(BASE)/</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>(BASE).start</span></span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;"> </span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">/************************************************************************</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">Gets the last node in a two-way list, or returns NULL,</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">if the list is empty. BASE is the base node (not a pointer to it). */</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;"> </span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: medium;">#define UT_LIST_GET_LAST(BASE)/</span></span></p>&#13;\n<p class="MsoNormal" style="background: #e6e6e6; margin: 0cm 0cm 0pt; mso-outline-level: 1;"><span lang="EN-US" xml:lang="EN-US"><span style="font-size: small;"><span style="font-size: medium;"><span style="mso-tab-count: 1;">       </span>(BASE).end</span></span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';"><span style="font-size: medium;">”</span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span>Alex</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">：“嗯，这三个成员的比较简单。这一篇和上一篇，我们聊了两个基本算法结构，下一篇我们还会说一下动态数组。在第十篇写完之后，</span><span lang="EN-US" xml:lang="EN-US">bingxi</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">公布个</span><span lang="EN-US" xml:lang="EN-US">list</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">吧。将要开始写到</span><span lang="EN-US" xml:lang="EN-US">innodb</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的文件存储内部格式，以及组织方法了。”</span></span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span>Bingxi</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">：“好的，我回去想一下，第十篇出来后，就给你提供一个</span><span lang="EN-US" xml:lang="EN-US">list</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">，列出段、簇、页、记录等等的物理存储格式以及相互关系，然后按照</span><span lang="EN-US" xml:lang="EN-US">list</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">的组织方式来往下思考。”</span></span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"><span style="font-size: small;"><span style="font-size: medium;"><span lang="EN-US" xml:lang="EN-US"><span style="mso-spacerun: yes;">  </span>Alex</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">：“</span><span lang="EN-US" xml:lang="EN-US">ok</span><span style="font-family: 宋体; mso-ascii-font-family: 'Times New Roman'; mso-hansi-font-family: 'Times New Roman';">”</span></span></span></p>&#13;\n<p class="MsoNormal" style="margin: 0cm 0cm 0pt;"> </p> &#13;\n
