\n <div class="markdown_views"><h1 id="关系">关系</h1>\n\n<p>将实体与实体的关系，反应到最终数据库表的设计中来。将关系分为三种：一对一，一对多（多对一）和多对多。 <br />\n所有的关系都是指的是表与表之间的关系。</p>\n\n<h2 id="一对一">一对一</h2>\n\n<p>一张表中的一条记录一定只能与另外一张表的一条记录进行对应，反之亦然。</p>\n\n<p>学生表：姓名，性别，年龄，身高，体重，婚姻状况，籍贯，家庭住址，紧急联系人</p>\n\n<table>\n<thead>\n<tr>\n <th>id</th>\n <th>姓名</th>\n <th>性别</th>\n <th>年龄</th>\n <th>身高</th>\n <th>体重</th>\n <th>婚姻</th>\n <th>体重</th>\n <th>籍贯</th>\n <th>家庭住址</th>\n <th>紧急联系人</th>\n</tr>\n</thead>\n</table>\n\n\n<p>表设计成以上这种形式，符合要求，其中姓名，性别，年龄，身高，体重属于常用数据，但是婚姻，籍贯，住址和联系人属于不常用数据，如果每次查询都是查询所有数据，不常用数据就会影响效率，实际又不用。</p>\n\n<p>解决方案：将常用的和不常用的信息分离存储，分成两张表。 <br />\n常用信息表</p>\n\n<table>\n<thead>\n<tr>\n <th>id</th>\n <th>姓名</th>\n <th>性别</th>\n <th>年龄</th>\n <th>身高</th>\n <th>体重</th>\n</tr>\n</thead>\n</table>\n\n\n<p>不常用信息表：保证不常用信息与常用信息一定能够对应上：找一个具有唯一性的字段来共同连接两张表。</p>\n\n<table>\n<thead>\n<tr>\n <th>id</th>\n <th>婚姻</th>\n <th>体重</th>\n <th>籍贯</th>\n <th>家庭住址</th>\n <th>紧急联系人</th>\n</tr>\n</thead>\n</table>\n\n\n<p>一个常用表中的一条记录，只能在一张不常用表中匹配一条记录。反之亦然。</p>\n\n<h2 id="一对多">一对多</h2>\n\n<p>一张表中有一条记录可以对应另一张表中的多条记录，但是反之，另外一张表的一条记录只能对应另一张表的一条记录。这种关系就是一对多或者多对一</p>\n\n<p>母亲与孩子的关系 <br />\n妈妈表：</p>\n\n<table>\n<thead>\n<tr>\n <th>id</th>\n <th>名字</th>\n <th>年龄</th>\n</tr>\n</thead>\n</table>\n\n\n<p>孩子表：</p>\n\n<table>\n<thead>\n<tr>\n <th>id</th>\n <th>名字</th>\n <th>年龄</th>\n</tr>\n</thead>\n</table>\n\n\n<p>以上关系：一个妈妈可以在孩子表中找到多条记录，但是一个孩子表只能找到一个妈妈。是一种典型的一对多的关系</p>\n\n<p>以上设计：解决了实体的实际表问题，但是没有解决关系问题：孩子找不到妈妈，妈妈也找不到孩子。</p>\n\n<p>解决方案：在一张表中增加一个字段，能够找到另一张表的记录。应该在孩子表中增加一个字段指向妈妈表：因为孩子表的记录只能匹配到一条妈妈表的记录。</p>\n\n<table>\n<thead>\n<tr>\n <th>id</th>\n <th>名字</th>\n <th>年龄</th>\n</tr>\n</thead>\n</table>\n\n\n<p>孩子表：</p>\n\n<table>\n<thead>\n<tr>\n <th>id</th>\n <th>名字</th>\n <th>年龄</th>\n <th>妈妈 id</th>\n</tr>\n</thead>\n</table>\n\n\n\n\n<h2 id="多对多">多对多</h2>\n\n<p>一张表中一个记录能够对应另外一张表中的多条记录，反之亦然。</p>\n\n<p>老师教学：老师和学生 <br />\n老师表：</p>\n\n<table>\n<thead>\n<tr>\n <th>T_id</th>\n <th>姓名</th>\n <th>性别</th>\n</tr>\n</thead>\n</table>\n\n\n<p>学生表：</p>\n\n<table>\n<thead>\n<tr>\n <th>S_id</th>\n <th>姓名</th>\n <th>性别</th>\n</tr>\n</thead>\n</table>\n\n\n<p>以上设计方案L实现了实体的设计，但是没有维护实体的关系。</p>\n\n<p>解决方案：不管在哪张表中增加字段，都会出现一个问题：该字段要保存多个数据，而且是与其它表有关系的字段，不符合表设计规范。增加一张新表，专门维护两张表之间的关系 <br />\n老师表：</p>\n\n<table>\n<thead>\n<tr>\n <th>T_id</th>\n <th>姓名</th>\n <th>性别</th>\n</tr>\n</thead>\n</table>\n\n\n<p>学生表：</p>\n\n<table>\n<thead>\n<tr>\n <th>S_id</th>\n <th>姓名</th>\n <th>性别</th>\n</tr>\n</thead>\n</table>\n\n\n<p>中间关系表</p>\n\n<table>\n<thead>\n<tr>\n <th>id</th>\n <th>T_ID</th>\n <th>S_ID</th>\n</tr>\n</thead>\n</table>\n\n\n<p>学生找老师：找出学生id –&gt; 中间表寻找匹配记录 –&gt; 老师表匹配 <br />\n老师找学生：找出老师id –&gt; 重甲表寻找匹配记录 –&gt; 学生表匹配</p>\n\n<hr />\n\n<h1 id="范式">范式</h1>\n\n<p>范式：Normal Format，是一种离散数学中的只是，是为了解决数据的存储与优化的问题：保存数据的存储之后，凡是能够通过关系寻找出来的数据，坚决不再重复存储，终极目标是为了减少数据的冗余。 <br />\n范式：是一种分层结构的规范，分为六层，每一层都比上一层更加严格，若要满足下一层范式，前提是满足上一层范式。 <br />\n六层范式：1NF，2NF,….6NF。 6NF最高层，最严格 <br />\nMySql属于关系型数据库：有空间浪费，与范式所解决的问题不谋而合：在设计数据库的时候，会利用到范式来指导设计。 <br />\n但是数据库不单是要解决空间问题，还要保证效率问题。范式只为解决空间问题，所以数据库的设计又不可能完全按照范式的要求实现，一般情况下，只有前三种范式需要满足。 <br />\n范式在数据库的设计当中是有指导意义，但是不是强制规范。</p>\n\n<h2 id="1nf">1NF</h2>\n\n<p>第一范式：在设计表存储数据的时候，如果表中设计的字段存储的数据，在取出来使用之前，还需要额外的处理（拆分），那么说表的设计不满足第一范式，第一范式要求字段的数据就有原子性：不可再分。</p>\n\n\n\n<h2 id="2nf">2NF</h2>\n\n<p>第二范式：在数据表设计的过程中，如果有复合主键（多字段主键），且表中有字段并不是由整个主键来确定，而是依赖主键中的某个字段（主键的部分）：存在字段依赖主键的部分的问题，称之为部分依赖，第二范式就是解决表不允许出现部分依赖。 <br />\n<img src="http://img.blog.csdn.net/20161023101140029" alt="这里写图片描述" title="" /> <br />\n 以上表中：因为讲师没有办法作为独立主键，需要结合班级才能作为主键（复合主键），代课时间，开始和结束字段都与当前的代课主键（讲师和班级），但是性别并不依赖班级，教室不依赖讲师。不符合第二范式。 <br />\n解决方案1：可以将性别与讲师单独成表，班级与教室也单独成表。 <br />\n解决方案2：取消复合主键，使用逻辑主键</p>\n\n<h2 id="3nf">3NF</h2>\n\n<p>要满足第三范式，必须满足第二范式。 <br />\n第三范式：理论上讲，应该一张表中的所有字段都应该直接依赖主键，如果表设计中存在一个字段，并不直接依赖主键，而是通过某个非主键字段依赖，最终实现依赖主键，把这种不是直接依赖主键，而是依赖非主键字段的依赖关系称之为传递依赖。第三范式就是要解决传递依赖的问题 <br />\n讲师带课表 <br />\n<img src="http://img.blog.csdn.net/20161023101213295" alt="这里写图片描述" title="" /> <br />\n 以上设计方案中，性别依赖讲师存在，讲师依赖主键，教室依赖班级，班级依赖主键，性别和教室都存在传递依赖。 <br />\n解决方案：将存在传递依赖的字段以及依赖的字段本身单独取出，形成一个单独的表，然后在需要对应信息的时候，使用对应的实体表的主键加进来。 <br />\n讲师带课表 <br />\n<img src="http://img.blog.csdn.net/20161023101950283" alt="这里写图片描述" title="" /> <br />\n讲师表 <br />\n<img src="http://img.blog.csdn.net/20161023102016190" alt="这里写图片描述" title="" /></p>\n\n<p>班级表 <br />\n<img src="http://img.blog.csdn.net/20161023102036659" alt="这里写图片描述" title="" /></p>\n\n<h2 id="逆规范化">逆规范化</h2>\n\n<p>有时候，在设计表的时候，如果一张表中有几个字段需要从另外的表中去获取信息，理论上讲，的确可以获得想要的数据，但是效率低一点，会刻意的在某些表中，不去保存另外表的主键，而是直接保存想要的数据信息，这样一来，在查询数据的时候，一张表可以直接提供数据，而不需要多表查询（（效率低）</p></div>&#13;\n <script type="text/javascript">&#13;\n $(function () {&#13;\n $('pre.prettyprint code').each(function () {&#13;\n var lines = $(this).text().split('\\n').length;&#13;\n var $numbering = $('&lt;ul/&gt;').addClass('pre-numbering').hide();&#13;\n $(this).addClass('has-numbering').parent().append($numbering);&#13;\n for (i = 1; i &lt;= lines; i++) {&#13;\n $numbering.append($('&lt;li/&gt;').text(i));&#13;\n };&#13;\n $numbering.fadeIn(1700);&#13;\n });&#13;\n });&#13;\n </script>&#13;\n &#13;\n
