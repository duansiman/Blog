\n\n<h1>三、           索引</h1>&#13;\n<div>&#13;\n<p><span style="font-size:14px"><br />&#13;\n</span></p>&#13;\n<p><span style="font-size:18px"><strong>6.      添加了索引但不被使用的几种常见可能</strong></span></p>&#13;\n<p><span style="font-size:14px"><br />&#13;\n</span></p>&#13;\n<p></p>&#13;\n<p><span style="font-size:14px">上一讲聊了什么时候不要使用索引，但有时候使用了也不见得会被使用。</span></p>&#13;\n<p><span style="font-size:14px">下面是几种</span><span style="font-size:14px">添加了索引但不被使用的情况</span></p>&#13;\n<p><span style="font-size:14px"><br />&#13;\n</span></p>&#13;\n<p><span style="font-size:14px"><strong>1)    多列索引查询条件没有使用最左边的字段</strong></span></p>&#13;\n<p><span style="font-size:14px">对于创建的多列索引，如果查询条件没有使用最左边的列，索引就不会被使用。</span></p>&#13;\n<p><span style="font-size:14px">多列索引：一个索引对应多个列</span></p>&#13;\n<p><span style="font-size:14px">比如</span></p>&#13;\n<p><span style="font-size:14px">我创建了这么个多列索引</span></p>&#13;\n<p></p>&#13;\n<pre name="code" class="plain">create index index_deptno_loc on dept (deptno,loc);</pre><br />&#13;\n<p></p>&#13;\n<p>如果where语句中有deptno则会使用索引，否则不使用</p>&#13;\n<p>如下</p>&#13;\n<img src="http://img.blog.csdn.net/20150403172100398?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaHp5MzgzMjQ=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" /><br />&#13;\n<p></p>&#13;\n<p style="font-size:14px"><strong>2)    如果条件中有or</strong></p>&#13;\n<p style="font-size:14px">只要条件中有一个字段没有添加索引，则不会使用索引</p>&#13;\n<p style="font-size:14px"> </p>&#13;\n<p style="font-size:14px"><strong>3)    类型不对应</strong></p>&#13;\n<p style="font-size:14px">比方说，如果列类型是字符串，那一定要在条件中将数据使用引号引用起来。否则不使用索引</p>&#13;\n<p style="font-size:14px"> </p>&#13;\n<p style="font-size:14px"><strong>4)    mysql优化器的决定</strong></p>&#13;\n<p style="font-size:14px">如果mysql估计使用全表扫描要比使用索引快，则不使用索引</p>&#13;\n<p style="font-size:14px"> </p>&#13;\n<p><strong><span style="font-size:24px">最后一点，也是笔者感受最深的一点</span></strong></p>&#13;\n<p><strong><span style="font-size:24px"><br />&#13;\n</span></strong></p>&#13;\n<p style="font-size:14px"><strong>5)    like‘%aaa’不会使用到索引</strong></p>&#13;\n<p>只要模糊查询的模糊值在字符串前面，则不会使用索引‘%aaa’和‘_aaa’都不会！</p>&#13;\n<p></p>&#13;\n<p>如下</p>&#13;\n<br />&#13;\n<p><img src="http://img.blog.csdn.net/20150403172156746?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaHp5MzgzMjQ=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/Center" alt="" /><br />&#13;\n</p>&#13;\n<p></p>&#13;\n<p>应该说这是Mysql给程序员们开的一个玩笑。要是我的表数据量很大，而且又需要使用like’%%’这样的模糊查询来检索时，该怎么办？？</p>&#13;\n<p><br />&#13;\n</p>&#13;\n<p>下一章，笔者将会给大家分享解决这个问题的N种方法！</p>&#13;\n<br />&#13;\n</div>&#13;\n &#13;\n
