\n <div class="markdown_views"><p>在设计数据库结构的时候，要分别对表和字段进行相应的优化设计。当然还有其他的方面，其他的方面的优化知识可以去看看我的博文中Mysql分类的文章。</p>\n\n<p><strong>表方面</strong></p>\n\n<ul>\n<li>核心字段且常用字段，应该建立建立成定长，比如说int ,char等定长，并且这些定长的字段放在一张表中，这种表又称为Fixed Format，固定格式。</li>\n<li>常用字段和不常用字段要分离。需要结合网站具体的业务来分析,分析字段的查询场景,查询频度低的字段,单拆出来。</li>\n<li>在1对多的情况下，需要在关联统计的表上添加冗余字段。</li>\n</ul>\n\n<p><strong>字段方面</strong></p>\n\n<ul>\n<li>字段类型优先级</li>\n</ul>\n\n<pre class="prettyprint"><code class=" hljs livecodeserver">整型 &gt; <span class="hljs-built_in">date</span>,<span class="hljs-built_in">time</span> &gt; enum,<span class="hljs-keyword">char</span>&gt;varchar &gt; blob,<span class="hljs-keyword">text</span></code></pre>\n\n<ul>\n<li>列的特点分析</li>\n</ul>\n\n<p>（1）整型 <br />\n定长，没有国家/地区之分，没有字符集的差异。比如 <code>tinyint 1,2,3,4,5 &lt;--&gt; char(1) a,b,c,d,e</code>。从空间上,都是占1个字节,但是 order by 排序, 前者快？ <br />\n原因: 后者需要考虑字符集与校对集(就是排序规则)</p>\n\n<p>（2）time <br />\n定长，运算快，节省空间。 考虑时区，写sql时不方便 <code>where &gt; ‘2005-10-12’;</code></p>\n\n<p>（3）enum 枚举型 <br />\n能起到约束值的目的,内部用整型来存储,但与char联查时,内部要经历串与值的转化。性别等字段最好用tinyint，不要用enum型。</p>\n\n<p>（4）字符型 <br />\nchar，定长，需要考虑字符集和(排序)校对集 <br />\nvarchar, 不定长，要考虑字符集的转换与排序时的校对集,速度慢 <br />\ntext/Blob，无法使用内存临时表(排序等操作只能在磁盘上进行)</p>\n\n<ul>\n<li>注意点</li>\n</ul>\n\n<p>（1）性别： <br />\n以utf8为例，char(1) , 3个字长字节 <br />\nenum(‘男’,’女’); 内部转成数字来存,多了一个转换过程 <br />\ntinyint() , // 0 1 2 // 定长1个字节.</p>\n\n<p>（2）够用就行,不要慷慨 (如smallint,varchar(N)) <br />\n原因: 大的字段浪费内存,影响速度, <br />\n以年龄为例 tinyint unsigned not null ,可以存储255岁,足够。用int浪费了3个字节 <br />\n如果varchar(10) ,varchar(300)存储的内容相同, 但在表联查时,varchar(300)要花更多内存</p>\n\n<p>（3）尽量避免用NULL() <br />\n原因: NULL不利于索引,要用特殊的字节来标注. <br />\n在磁盘上占据的空间其实更大.(mysql5.7已对null做的改进,但查询仍是不便)</p></div>&#13;\n <script type="text/javascript">&#13;\n $(function () {&#13;\n $('pre.prettyprint code').each(function () {&#13;\n var lines = $(this).text().split('\\n').length;&#13;\n var $numbering = $('&lt;ul/&gt;').addClass('pre-numbering').hide();&#13;\n $(this).addClass('has-numbering').parent().append($numbering);&#13;\n for (i = 1; i &lt;= lines; i++) {&#13;\n $numbering.append($('&lt;li/&gt;').text(i));&#13;\n };&#13;\n $numbering.fadeIn(1700);&#13;\n });&#13;\n });&#13;\n </script>&#13;\n &#13;\n
