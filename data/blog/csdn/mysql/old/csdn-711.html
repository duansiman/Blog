\n <div class="markdown_views"><p>重复索引：表示一个列或者顺序相同的几个列上建立的多个索引。 <br />\n冗余索引：两个索引所覆盖的列重叠</p>\n\n<p>冗余索引在一些特殊的场景下使用到了索引覆盖，所以比较快。</p>\n\n<p><strong>场景</strong></p>\n\n<p>比如文章与标签表 <br />\n+——+——-+——+ <br />\n| id | artid | tag | <br />\n+——+——-+——+ <br />\n| 1 | 1 | PHP | <br />\n| 2 | 1 | Linux | <br />\n| 3 | 2 | MySQl | <br />\n| 4 | 2 | Oracle | <br />\n+——+——-+——+ <br />\n在实际使用中, 有2种查询 <br />\nartid—查询文章的—tag <br />\ntag—查询文章的 —artid</p>\n\n<p>SQL语句： <br />\nselect tag from t11 where artid=2; <br />\nselect artid from t11 where tag=’PHP’; </p>\n\n<p>我们可以建立冗余索引，来达到索引覆盖的情况，这样的查询效率会比较高。</p>\n\n<p>1、建立一个文章标签表</p>\n\n<p>这个表中有两个索引，一个是at，一个是ta，两个索引都用到了artid和tag两个字段。</p>\n\n<pre class="prettyprint"><code class=" hljs sql"><span class="hljs-operator"><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">TABLE</span> <span class="hljs-string">`t16`</span> (\n <span class="hljs-string">`id`</span> <span class="hljs-keyword">int</span>(<span class="hljs-number">10</span>) unsigned <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> AUTO_INCREMENT,\n <span class="hljs-string">`artid`</span> <span class="hljs-keyword">int</span>(<span class="hljs-number">10</span>) unsigned <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">'0'</span>,\n <span class="hljs-string">`tag`</span> <span class="hljs-keyword">char</span>(<span class="hljs-number">20</span>) <span class="hljs-keyword">NOT</span> <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">DEFAULT</span> <span class="hljs-string">''</span>,\n <span class="hljs-keyword">PRIMARY</span> <span class="hljs-keyword">KEY</span> (<span class="hljs-string">`id`</span>),\n <span class="hljs-keyword">KEY</span> <span class="hljs-string">`at`</span> (<span class="hljs-string">`artid`</span>,<span class="hljs-string">`tag`</span>),\n <span class="hljs-keyword">KEY</span> <span class="hljs-string">`ta`</span> (<span class="hljs-string">`tag`</span>,<span class="hljs-string">`artid`</span>)\n) ENGINE=InnoDB AUTO_INCREMENT=<span class="hljs-number">5</span> <span class="hljs-keyword">DEFAULT</span> CHARSET=utf8</span></code></pre>\n\n<p>2、测试两条SQL语句</p>\n\n\n\n<pre class="prettyprint"><code class=" hljs sql"><span class="hljs-operator"><span class="hljs-keyword">select</span> artid <span class="hljs-keyword">from</span> t11 <span class="hljs-keyword">where</span> tag=<span class="hljs-string">'PHP'</span>;</span> </code></pre>\n\n<p>这条语句的查询分析中的Extra有Using index，表示此处用到了索引覆盖，使用索引覆盖后就不需要回行查询数据，这样的查询效率比较高。</p>\n\n<p><img src="http://img.blog.csdn.net/20170316202359249?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvYmFvY2hhbzk1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述" title="" /></p>\n\n\n\n<pre class="prettyprint"><code class=" hljs sql"><span class="hljs-operator"><span class="hljs-keyword">select</span> tag <span class="hljs-keyword">from</span> t11 <span class="hljs-keyword">where</span> artid = <span class="hljs-number">1</span>;</span> </code></pre>\n\n<p>这条语句的查询分析中的Extra有Using index，表示此处用到了索引覆盖，使用索引覆盖后就不需要回行查询数据，这样的查询效率比较高。</p>\n\n<p><img src="http://img.blog.csdn.net/20170316202414234?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvYmFvY2hhbzk1/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="列表内容" title="" /></p>\n\n<p>关于索引覆盖的详细内容可以查看我的另一篇文章：<a href="http://blog.csdn.net/baochao95/article/details/62216012">索引覆盖</a></p></div>&#13;\n <script type="text/javascript">&#13;\n $(function () {&#13;\n $('pre.prettyprint code').each(function () {&#13;\n var lines = $(this).text().split('\\n').length;&#13;\n var $numbering = $('&lt;ul/&gt;').addClass('pre-numbering').hide();&#13;\n $(this).addClass('has-numbering').parent().append($numbering);&#13;\n for (i = 1; i &lt;= lines; i++) {&#13;\n $numbering.append($('&lt;li/&gt;').text(i));&#13;\n };&#13;\n $numbering.fadeIn(1700);&#13;\n });&#13;\n });&#13;\n </script>&#13;\n &#13;\n
